if(function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){b=b||ba;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}function d(a){var b=!!a&&"length"in a&&a.length,c=oa.type(a);return"function"===c||oa.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){return oa.isFunction(b)?oa.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?oa.grep(a,function(a){return a===b!==c}):"string"!=typeof b?oa.grep(a,function(a){return ga.call(b,a)>-1!==c}):ya.test(b)?oa.filter(b,a,c):(b=oa.filter(b,a),oa.grep(a,function(a){return ga.call(b,a)>-1!==c&&1===a.nodeType}))}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b={};return oa.each(a.match(Ea)||[],function(a,c){b[c]=!0}),b}function h(a){return a}function i(a){throw a}function j(a,b,c){var d;try{a&&oa.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&oa.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}function k(){ba.removeEventListener("DOMContentLoaded",k),a.removeEventListener("load",k),oa.ready()}function l(){this.expando=oa.expando+l.uid++}function m(a){return"true"===a?!0:"false"===a?!1:"null"===a?null:a===+a+""?+a:La.test(a)?JSON.parse(a):a}function n(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Ma,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=m(c)}catch(e){}Ka.set(a,b,c)}else c=void 0;return c}function o(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return oa.css(a,b,"")},i=h(),j=c&&c[3]||(oa.cssNumber[b]?"":"px"),k=(oa.cssNumber[b]||"px"!==j&&+i)&&Oa.exec(oa.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,oa.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}function p(a){var b,c=a.ownerDocument,d=a.nodeName,e=Sa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=oa.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),Sa[d]=e,e)}function q(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=Ja.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&Qa(d)&&(e[f]=p(d))):"none"!==c&&(e[f]="none",Ja.set(d,"display",c)));for(f=0;g>f;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}function r(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&oa.nodeName(a,b)?oa.merge([a],c):c}function s(a,b){for(var c=0,d=a.length;d>c;c++)Ja.set(a[c],"globalEval",!b||Ja.get(b[c],"globalEval"))}function t(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;o>n;n++)if(f=a[n],f||0===f)if("object"===oa.type(f))oa.merge(m,f.nodeType?[f]:f);else if(Xa.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(Ua.exec(f)||["",""])[1].toLowerCase(),i=Wa[h]||Wa._default,g.innerHTML=i[1]+oa.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;oa.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&oa.inArray(f,d)>-1)e&&e.push(f);else if(j=oa.contains(f.ownerDocument,f),g=r(l.appendChild(f),"script"),j&&s(g),c)for(k=0;f=g[k++];)Va.test(f.type||"")&&c.push(f);return l}function u(){return!0}function v(){return!1}function w(){try{return ba.activeElement}catch(a){}}function x(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)x(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=v;else if(!e)return a;return 1===f&&(g=e,e=function(a){return oa().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=oa.guid++)),a.each(function(){oa.event.add(this,b,e,d,c)})}function y(a,b){return oa.nodeName(a,"table")&&oa.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function z(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function A(a){var b=db.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function B(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(Ja.hasData(a)&&(f=Ja.access(a),g=Ja.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)oa.event.add(b,e,j[e][c])}Ka.hasData(a)&&(h=Ka.access(a),i=oa.extend({},h),Ka.set(b,i))}}function C(a,b){var c=b.nodeName.toLowerCase();"input"===c&&Ta.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function D(a,b,d,e){b=ea.apply([],b);var f,g,h,i,j,k,l=0,m=a.length,n=m-1,o=b[0],p=oa.isFunction(o);if(p||m>1&&"string"==typeof o&&!ma.checkClone&&cb.test(o))return a.each(function(c){var f=a.eq(c);p&&(b[0]=o.call(this,c,f.html())),D(f,b,d,e)});if(m&&(f=t(b,a[0].ownerDocument,!1,a,e),g=f.firstChild,1===f.childNodes.length&&(f=g),g||e)){for(h=oa.map(r(f,"script"),z),i=h.length;m>l;l++)j=f,l!==n&&(j=oa.clone(j,!0,!0),i&&oa.merge(h,r(j,"script"))),d.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,oa.map(h,A),l=0;i>l;l++)j=h[l],Va.test(j.type||"")&&!Ja.access(j,"globalEval")&&oa.contains(k,j)&&(j.src?oa._evalUrl&&oa._evalUrl(j.src):c(j.textContent.replace(eb,""),k))}return a}function E(a,b,c){for(var d,e=b?oa.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||oa.cleanData(r(d)),d.parentNode&&(c&&oa.contains(d.ownerDocument,d)&&s(r(d,"script")),d.parentNode.removeChild(d));return a}function F(a,b,c){var d,e,f,g,h=a.style;return c=c||hb(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||oa.contains(a.ownerDocument,a)||(g=oa.style(a,b)),!ma.pixelMarginRight()&&gb.test(g)&&fb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function G(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function H(a){if(a in mb)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=lb.length;c--;)if(a=lb[c]+b,a in mb)return a}function I(a,b,c){var d=Oa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function J(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;4>f;f+=2)"margin"===c&&(g+=oa.css(a,c+Pa[f],!0,e)),d?("content"===c&&(g-=oa.css(a,"padding"+Pa[f],!0,e)),"margin"!==c&&(g-=oa.css(a,"border"+Pa[f]+"Width",!0,e))):(g+=oa.css(a,"padding"+Pa[f],!0,e),"padding"!==c&&(g+=oa.css(a,"border"+Pa[f]+"Width",!0,e)));return g}function K(a,b,c){var d,e=!0,f=hb(a),g="border-box"===oa.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),0>=d||null==d){if(d=F(a,b,f),(0>d||null==d)&&(d=a.style[b]),gb.test(d))return d;e=g&&(ma.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+J(a,b,c||(g?"border":"content"),e,f)+"px"}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(){ob&&(a.requestAnimationFrame(M),oa.fx.tick())}function N(){return a.setTimeout(function(){nb=void 0}),nb=oa.now()}function O(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=Pa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function P(a,b,c){for(var d,e=(S.tweeners[b]||[]).concat(S.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Q(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&Qa(a),r=Ja.get(a,"fxshow");c.queue||(g=oa._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,oa.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],pb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;p=!0}n[d]=r&&r[d]||oa.style(a,d)}if(i=!oa.isEmptyObject(b),i||!oa.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=r&&r.display,null==j&&(j=Ja.get(a,"display")),k=oa.css(a,"display"),"none"===k&&(j?k=j:(q([a],!0),j=a.style.display||j,k=oa.css(a,"display"),q([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===oa.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(r?"hidden"in r&&(p=r.hidden):r=Ja.access(a,"fxshow",{display:j}),f&&(r.hidden=!p),p&&q([a],!0),m.done(function(){p||q([a]),Ja.remove(a,"fxshow");for(d in n)oa.style(a,d,n[d])})),i=P(p?r[d]:0,d,m),d in r||(r[d]=i.start,p&&(i.end=i.start,i.start=0))}}function R(a,b){var c,d,e,f,g;for(c in a)if(d=oa.camelCase(c),e=b[d],f=a[c],oa.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=oa.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function S(a,b,c){var d,e,f=0,g=S.prefilters.length,h=oa.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||N(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:oa.extend({},b),opts:oa.extend(!0,{specialEasing:{},easing:oa.easing._default},c),originalProperties:b,originalOptions:c,startTime:nb||N(),duration:c.duration,tweens:[],createTween:function(b,c){var d=oa.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(R(k,j.opts.specialEasing);g>f;f++)if(d=S.prefilters[f].call(j,a,k,j.opts))return oa.isFunction(d.stop)&&(oa._queueHooks(j.elem,j.opts.queue).stop=oa.proxy(d.stop,d)),d;return oa.map(k,P,j),oa.isFunction(j.opts.start)&&j.opts.start.call(a,j),oa.fx.timer(oa.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function T(a){var b=a.match(Ea)||[];return b.join(" ")}function U(a){return a.getAttribute&&a.getAttribute("class")||""}function V(a,b,c,d){var e;if(oa.isArray(b))oa.each(b,function(b,e){c||Ab.test(a)?d(a,e):V(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==oa.type(b))d(a,b);else for(e in b)V(a+"["+e+"]",b[e],c,d)}function W(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Ea)||[];if(oa.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function X(a,b,c,d){function e(h){var i;return f[h]=!0,oa.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Mb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function Y(a,b){var c,d,e=oa.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&oa.extend(!0,a,d),a}function Z(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function $(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function _(a){return oa.isWindow(a)?a:9===a.nodeType&&a.defaultView}var aa=[],ba=a.document,ca=Object.getPrototypeOf,da=aa.slice,ea=aa.concat,fa=aa.push,ga=aa.indexOf,ha={},ia=ha.toString,ja=ha.hasOwnProperty,ka=ja.toString,la=ka.call(Object),ma={},na="3.1.1",oa=function(a,b){return new oa.fn.init(a,b)},pa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,qa=/^-ms-/,ra=/-([a-z])/g,sa=function(a,b){return b.toUpperCase()};oa.fn=oa.prototype={jquery:na,constructor:oa,length:0,toArray:function(){return da.call(this)},get:function(a){return null==a?da.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){var b=oa.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return oa.each(this,a)},map:function(a){return this.pushStack(oa.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:fa,sort:aa.sort,splice:aa.splice},oa.extend=oa.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||oa.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(oa.isPlainObject(d)||(e=oa.isArray(d)))?(e?(e=!1,f=c&&oa.isArray(c)?c:[]):f=c&&oa.isPlainObject(c)?c:{},g[b]=oa.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},oa.extend({expando:"jQuery"+(na+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===oa.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=oa.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return a&&"[object Object]"===ia.call(a)?(b=ca(a))?(c=ja.call(b,"constructor")&&b.constructor,"function"==typeof c&&ka.call(c)===la):!0:!1},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?ha[ia.call(a)]||"object":typeof a},globalEval:function(a){c(a)},camelCase:function(a){return a.replace(qa,"ms-").replace(ra,sa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,e=0;if(d(a))for(c=a.length;c>e&&b.call(a[e],e,a[e])!==!1;e++);else for(e in a)if(b.call(a[e],e,a[e])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(pa,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?oa.merge(c,"string"==typeof a?[a]:a):fa.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:ga.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var e,f,g=0,h=[];if(d(a))for(e=a.length;e>g;g++)f=b(a[g],g,c),null!=f&&h.push(f);else for(g in a)f=b(a[g],g,c),null!=f&&h.push(f);return ea.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),oa.isFunction(a)?(d=da.call(arguments,2),e=function(){return a.apply(b||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||oa.guid++,e):void 0},now:Date.now,support:ma}),"function"==typeof Symbol&&(oa.fn[Symbol.iterator]=aa[Symbol.iterator]),oa.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){ha["[object "+b+"]"]=b.toLowerCase()});var ta=function(a){function b(a,b,c,d){var e,f,g,h,i,j,k,m=b&&b.ownerDocument,o=b?b.nodeType:9;if(c=c||[],"string"!=typeof a||!a||1!==o&&9!==o&&11!==o)return c;if(!d&&((b?b.ownerDocument||b:P)!==H&&G(b),b=b||H,J)){if(11!==o&&(i=ra.exec(a)))if(e=i[1]){if(9===o){if(!(g=b.getElementById(e)))return c;if(g.id===e)return c.push(g),c}else if(m&&(g=m.getElementById(e))&&N(b,g)&&g.id===e)return c.push(g),c}else{if(i[2])return $.apply(c,b.getElementsByTagName(a)),c;if((e=i[3])&&w.getElementsByClassName&&b.getElementsByClassName)return $.apply(c,b.getElementsByClassName(e)),c}if(w.qsa&&!U[a+" "]&&(!K||!K.test(a))){if(1!==o)m=b,k=a;else if("object"!==b.nodeName.toLowerCase()){for((h=b.getAttribute("id"))?h=h.replace(va,wa):b.setAttribute("id",h=O),j=A(a),f=j.length;f--;)j[f]="#"+h+" "+n(j[f]);k=j.join(","),m=sa.test(a)&&l(b.parentNode)||b}if(k)try{return $.apply(c,m.querySelectorAll(k)),c}catch(p){}finally{h===O&&b.removeAttribute("id")}}}return C(a.replace(ha,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>x.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[O]=!0,a}function e(a){var b=H.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=c.length;d--;)x.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ya(b)===a:b.disabled===a:"label"in b?b.disabled===a:!1}}function k(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function m(){}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=R++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[Q,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(l=b[O]||(b[O]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===Q&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function r(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function s(a,b,c,e,f,g){return e&&!e[O]&&(e=s(e)),f&&!f[O]&&(f=s(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||q(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?p:r(p,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=r(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=r(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function t(a){for(var b,c,d,e=a.length,f=x.relative[a[0].type],g=f||x.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=x.relative[a[h].type])k=[o(p(k),c)];else{if(c=x.filter[a[h].type].apply(null,a[h].matches),c[O]){for(d=++h;e>d&&!x.relative[a[d].type];d++);return s(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ha,"$1"),c,d>h&&t(a.slice(h,d)),e>d&&t(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function u(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],q=[],s=D,t=d||f&&x.find.TAG("*",j),u=Q+=null==s?1:Math.random()||.1,v=t.length;for(j&&(D=g===H||g||j);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0,g||k.ownerDocument===H||(G(k),h=!J);m=a[l++];)if(m(k,g||H,h)){i.push(k);break}j&&(Q=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,q,g,h);if(d){if(n>0)for(;o--;)p[o]||q[o]||(q[o]=Y.call(i));q=r(q)}$.apply(i,q),j&&!d&&q.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(Q=u,D=s),p};return e?d(g):g}var v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+1*new Date,P=a.document,Q=0,R=0,S=c(),T=c(),U=c(),V=function(a,b){return a===b&&(F=!0),0},W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ea="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+da+"))|)"+ca+"*\\]",fa=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ea+")*)|.*)\\)|)",ga=new RegExp(ca+"+","g"),ha=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ia=new RegExp("^"+ca+"*,"+ca+"*"),ja=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),ka=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),la=new RegExp(fa),ma=new RegExp("^"+da+"$"),na={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da+"|[*])"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},oa=/^(?:input|select|textarea|button)$/i,pa=/^h\d$/i,qa=/^[^{]+\{\s*\[native \w/,ra=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sa=/[+~]/,ta=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),ua=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},va=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wa=function(a,b){return b?"\x00"===a?"�":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},xa=function(){G()},ya=o(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{$.apply(X=_.call(P.childNodes),P.childNodes),X[P.childNodes.length].nodeType}catch(za){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}w=b.support={},z=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},G=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:P;return d!==H&&9===d.nodeType&&d.documentElement?(H=d,I=H.documentElement,J=!z(H),P!==H&&(c=H.defaultView)&&c.top!==c&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),w.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),w.getElementsByTagName=e(function(a){return a.appendChild(H.createComment("")),!a.getElementsByTagName("*").length}),w.getElementsByClassName=qa.test(H.getElementsByClassName),w.getById=e(function(a){return I.appendChild(a).id=O,!H.getElementsByName||!H.getElementsByName(O).length}),w.getById?(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){return a.getAttribute("id")===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c=b.getElementById(a);return c?[c]:[]}}):(x.filter.ID=function(a){var b=a.replace(ta,ua);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},x.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&J){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),x.find.TAG=w.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):w.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},x.find.CLASS=w.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&J?b.getElementsByClassName(a):void 0},L=[],K=[],(w.qsa=qa.test(H.querySelectorAll))&&(e(function(a){I.appendChild(a).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&K.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||K.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+O+"-]").length||K.push("~="),a.querySelectorAll(":checked").length||K.push(":checked"),a.querySelectorAll("a#"+O+"+*").length||K.push(".#.+[+~]")}),e(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=H.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&K.push("name"+ca+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&K.push(":enabled",":disabled"),I.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&K.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),K.push(",.*:")})),(w.matchesSelector=qa.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&e(function(a){w.disconnectedMatch=M.call(a,"*"),M.call(a,"[s!='']:x"),L.push("!=",fa)}),K=K.length&&new RegExp(K.join("|")),L=L.length&&new RegExp(L.join("|")),b=qa.test(I.compareDocumentPosition),N=b||qa.test(I.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=b?function(a,b){if(a===b)return F=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!w.sortDetached&&b.compareDocumentPosition(a)===c?a===H||a.ownerDocument===P&&N(P,a)?-1:b===H||b.ownerDocument===P&&N(P,b)?1:E?aa(E,a)-aa(E,b):0:4&c?-1:1)}:function(a,b){if(a===b)return F=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===H?-1:b===H?1:e?-1:f?1:E?aa(E,a)-aa(E,b):0;if(e===f)return g(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?g(h[d],i[d]):h[d]===P?-1:i[d]===P?1:0},H):H},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==H&&G(a),c=c.replace(ka,"='$1']"),w.matchesSelector&&J&&!U[c+" "]&&(!L||!L.test(c))&&(!K||!K.test(c)))try{var d=M.call(a,c);if(d||w.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,H,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==H&&G(a),N(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==H&&G(a);var c=x.attrHandle[b.toLowerCase()],d=c&&W.call(x.attrHandle,b.toLowerCase())?c(a,b,!J):void 0;return void 0!==d?d:w.attributes||!J?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.escape=function(a){return(a+"").replace(va,wa)},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(F=!w.detectDuplicates,E=!w.sortStable&&a.slice(0),a.sort(V),F){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return E=null,a},y=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=y(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=y(b);return c},x=b.selectors={cacheLength:50,createPseudo:d,match:na,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ta,ua),a[3]=(a[3]||a[4]||a[5]||"").replace(ta,ua),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return na.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&la.test(c)&&(b=A(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ta,ua).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&S(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ga," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(m=q,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[Q,n,t];break}}else if(s&&(m=b,l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===Q&&j[1],t=n),t===!1)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&(l=m[O]||(m[O]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[Q,t]),m!==b)););return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,c){var e,f=x.pseudos[a]||x.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[O]?f(c):f.length>1?(e=[a,a,"",c],x.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ha,"$1"));return e[O]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(ta,ua),function(b){return(b.textContent||b.innerText||y(b)).indexOf(a)>-1}}),lang:d(function(a){return ma.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(ta,ua).toLowerCase(),function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);
return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:j(!1),disabled:j(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!x.pseudos.empty(a)},header:function(a){return pa.test(a.nodeName)},input:function(a){return oa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=h(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=i(v);return m.prototype=x.filters=x.pseudos,x.setFilters=new m,A=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=T[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=x.preFilter;h;){(!d||(e=ia.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ja.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ha," ")}),h=h.slice(d.length));for(g in x.filter)!(e=na[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):T(a,i).slice(0)},B=b.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=A(a)),c=b.length;c--;)f=t(b[c]),f[O]?d.push(f):e.push(f);f=U(a,u(e,d)),f.selector=a}return f},C=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,k=!d&&A(a=j.selector||a);if(c=c||[],1===k.length){if(f=k[0]=k[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&J&&x.relative[f[1].type]){if(b=(x.find.ID(g.matches[0].replace(ta,ua),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=na.needsContext.test(a)?0:f.length;e--&&(g=f[e],!x.relative[h=g.type]);)if((i=x.find[h])&&(d=i(g.matches[0].replace(ta,ua),sa.test(f[0].type)&&l(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return $.apply(c,d),c;break}}return(j||B(a,k))(d,b,!J,c,!b||sa.test(a)&&l(b.parentNode)||b),c},w.sortStable=O.split("").sort(V).join("")===O,w.detectDuplicates=!!F,G(),w.sortDetached=e(function(a){return 1&a.compareDocumentPosition(H.createElement("fieldset"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),w.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);oa.find=ta,oa.expr=ta.selectors,oa.expr[":"]=oa.expr.pseudos,oa.uniqueSort=oa.unique=ta.uniqueSort,oa.text=ta.getText,oa.isXMLDoc=ta.isXML,oa.contains=ta.contains,oa.escapeSelector=ta.escape;var ua=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&oa(a).is(c))break;d.push(a)}return d},va=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},wa=oa.expr.match.needsContext,xa=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ya=/^.[^:#\[\.,]*$/;oa.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?oa.find.matchesSelector(d,a)?[d]:[]:oa.find.matches(a,oa.grep(b,function(a){return 1===a.nodeType}))},oa.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(oa(a).filter(function(){for(b=0;d>b;b++)if(oa.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;d>b;b++)oa.find(a,e[b],c);return d>1?oa.uniqueSort(c):c},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&wa.test(a)?oa(a):a||[],!1).length}});var za,Aa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ba=oa.fn.init=function(a,b,c){var d,e;if(!a)return this;if(c=c||za,"string"==typeof a){if(d="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:Aa.exec(a),!d||!d[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(d[1]){if(b=b instanceof oa?b[0]:b,oa.merge(this,oa.parseHTML(d[1],b&&b.nodeType?b.ownerDocument||b:ba,!0)),xa.test(d[1])&&oa.isPlainObject(b))for(d in b)oa.isFunction(this[d])?this[d](b[d]):this.attr(d,b[d]);return this}return e=ba.getElementById(d[2]),e&&(this[0]=e,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):oa.isFunction(a)?void 0!==c.ready?c.ready(a):a(oa):oa.makeArray(a,this)};Ba.prototype=oa.fn,za=oa(ba);var Ca=/^(?:parents|prev(?:Until|All))/,Da={children:!0,contents:!0,next:!0,prev:!0};oa.fn.extend({has:function(a){var b=oa(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(oa.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&oa(a);if(!wa.test(a))for(;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&oa.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?oa.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?ga.call(oa(a),this[0]):ga.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(oa.uniqueSort(oa.merge(this.get(),oa(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),oa.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ua(a,"parentNode")},parentsUntil:function(a,b,c){return ua(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ua(a,"nextSibling")},prevAll:function(a){return ua(a,"previousSibling")},nextUntil:function(a,b,c){return ua(a,"nextSibling",c)},prevUntil:function(a,b,c){return ua(a,"previousSibling",c)},siblings:function(a){return va((a.parentNode||{}).firstChild,a)},children:function(a){return va(a.firstChild)},contents:function(a){return a.contentDocument||oa.merge([],a.childNodes)}},function(a,b){oa.fn[a]=function(c,d){var e=oa.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=oa.filter(d,e)),this.length>1&&(Da[a]||oa.uniqueSort(e),Ca.test(a)&&e.reverse()),this.pushStack(e)}});var Ea=/[^\x20\t\r\n\f]+/g;oa.Callbacks=function(a){a="string"==typeof a?g(a):oa.extend({},a);var b,c,d,e,f=[],h=[],i=-1,j=function(){for(e=a.once,d=b=!0;h.length;i=-1)for(c=h.shift();++i<f.length;)f[i].apply(c[0],c[1])===!1&&a.stopOnFalse&&(i=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},k={add:function(){return f&&(c&&!b&&(i=f.length-1,h.push(c)),function d(b){oa.each(b,function(b,c){oa.isFunction(c)?a.unique&&k.has(c)||f.push(c):c&&c.length&&"string"!==oa.type(c)&&d(c)})}(arguments),c&&!b&&j()),this},remove:function(){return oa.each(arguments,function(a,b){for(var c;(c=oa.inArray(b,f,c))>-1;)f.splice(c,1),i>=c&&i--}),this},has:function(a){return a?oa.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=h=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=h=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],h.push(c),b||j()),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},oa.extend({Deferred:function(b){var c=[["notify","progress",oa.Callbacks("memory"),oa.Callbacks("memory"),2],["resolve","done",oa.Callbacks("once memory"),oa.Callbacks("once memory"),0,"resolved"],["reject","fail",oa.Callbacks("once memory"),oa.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return oa.Deferred(function(b){oa.each(c,function(c,d){var e=oa.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&oa.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){function f(b,c,d,e){return function(){var j=this,k=arguments,l=function(){var a,l;if(!(g>b)){if(a=d.apply(j,k),a===c.promise())throw new TypeError("Thenable self-resolution");l=a&&("object"==typeof a||"function"==typeof a)&&a.then,oa.isFunction(l)?e?l.call(a,f(g,c,h,e),f(g,c,i,e)):(g++,l.call(a,f(g,c,h,e),f(g,c,i,e),f(g,c,h,c.notifyWith))):(d!==h&&(j=void 0,k=[a]),(e||c.resolveWith)(j,k))}},m=e?l:function(){try{l()}catch(a){oa.Deferred.exceptionHook&&oa.Deferred.exceptionHook(a,m.stackTrace),b+1>=g&&(d!==i&&(j=void 0,k=[a]),c.rejectWith(j,k))}};b?m():(oa.Deferred.getStackHook&&(m.stackTrace=oa.Deferred.getStackHook()),a.setTimeout(m))}}var g=0;return oa.Deferred(function(a){c[0][3].add(f(0,a,oa.isFunction(e)?e:h,a.notifyWith)),c[1][3].add(f(0,a,oa.isFunction(b)?b:h)),c[2][3].add(f(0,a,oa.isFunction(d)?d:i))}).promise()},promise:function(a){return null!=a?oa.extend(a,e):e}},f={};return oa.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=da.call(arguments),f=oa.Deferred(),g=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?da.call(arguments):c,--b||f.resolveWith(d,e)}};if(1>=b&&(j(a,f.done(g(c)).resolve,f.reject),"pending"===f.state()||oa.isFunction(e[c]&&e[c].then)))return f.then();for(;c--;)j(e[c],g(c),f.reject);return f.promise()}});var Fa=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;oa.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Fa.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},oa.readyException=function(b){a.setTimeout(function(){throw b})};var Ga=oa.Deferred();oa.fn.ready=function(a){return Ga.then(a)["catch"](function(a){oa.readyException(a)}),this},oa.extend({isReady:!1,readyWait:1,holdReady:function(a){a?oa.readyWait++:oa.ready(!0)},ready:function(a){(a===!0?--oa.readyWait:oa.isReady)||(oa.isReady=!0,a!==!0&&--oa.readyWait>0||Ga.resolveWith(ba,[oa]))}}),oa.ready.then=Ga.then,"complete"===ba.readyState||"loading"!==ba.readyState&&!ba.documentElement.doScroll?a.setTimeout(oa.ready):(ba.addEventListener("DOMContentLoaded",k),a.addEventListener("load",k));var Ha=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===oa.type(c)){e=!0;for(h in c)Ha(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,oa.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(oa(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ia=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};l.uid=1,l.prototype={cache:function(a){var b=a[this.expando];return b||(b={},Ia(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[oa.camelCase(b)]=c;else for(d in b)e[oa.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][oa.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){oa.isArray(b)?b=b.map(oa.camelCase):(b=oa.camelCase(b),b=b in d?[b]:b.match(Ea)||[]),c=b.length;for(;c--;)delete d[b[c]]}(void 0===b||oa.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!oa.isEmptyObject(b)}};var Ja=new l,Ka=new l,La=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ma=/[A-Z]/g;oa.extend({hasData:function(a){return Ka.hasData(a)||Ja.hasData(a)},data:function(a,b,c){return Ka.access(a,b,c)},removeData:function(a,b){Ka.remove(a,b)},_data:function(a,b,c){return Ja.access(a,b,c)},_removeData:function(a,b){Ja.remove(a,b)}}),oa.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=Ka.get(f),1===f.nodeType&&!Ja.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=oa.camelCase(d.slice(5)),n(f,d,e[d])));Ja.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){Ka.set(this,a)}):Ha(this,function(b){var c;if(f&&void 0===b){if(c=Ka.get(f,a),void 0!==c)return c;if(c=n(f,a),void 0!==c)return c}else this.each(function(){Ka.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){Ka.remove(this,a)})}}),oa.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=Ja.get(a,b),c&&(!d||oa.isArray(c)?d=Ja.access(a,b,oa.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=oa.queue(a,b),d=c.length,e=c.shift(),f=oa._queueHooks(a,b),g=function(){oa.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return Ja.get(a,c)||Ja.access(a,c,{empty:oa.Callbacks("once memory").add(function(){Ja.remove(a,[b+"queue",c])})})}}),oa.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?oa.queue(this[0],a):void 0===b?this:this.each(function(){var c=oa.queue(this,a,b);oa._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&oa.dequeue(this,a)})},dequeue:function(a){return this.each(function(){oa.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=oa.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=Ja.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Na=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oa=new RegExp("^(?:([+-])=|)("+Na+")([a-z%]*)$","i"),Pa=["Top","Right","Bottom","Left"],Qa=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&oa.contains(a.ownerDocument,a)&&"none"===oa.css(a,"display")},Ra=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Sa={};oa.fn.extend({show:function(){return q(this,!0)},hide:function(){return q(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Qa(this)?oa(this).show():oa(this).hide()})}});var Ta=/^(?:checkbox|radio)$/i,Ua=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Va=/^$|\/(?:java|ecma)script/i,Wa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Wa.optgroup=Wa.option,Wa.tbody=Wa.tfoot=Wa.colgroup=Wa.caption=Wa.thead,Wa.th=Wa.td;var Xa=/<|&#?\w+;/;!function(){var a=ba.createDocumentFragment(),b=a.appendChild(ba.createElement("div")),c=ba.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),ma.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",ma.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Ya=ba.documentElement,Za=/^key/,$a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_a=/^([^.]*)(?:\.(.+)|)/;oa.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ja.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),e&&oa.find.matchesSelector(Ya,e),c.guid||(c.guid=oa.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof oa&&oa.event.triggered!==b.type?oa.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(Ea)||[""],j=b.length;j--;)h=_a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=oa.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=oa.event.special[n]||{},k=oa.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&oa.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),oa.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Ja.hasData(a)&&Ja.get(a);if(q&&(i=q.events)){for(b=(b||"").match(Ea)||[""],j=b.length;j--;)if(h=_a.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=oa.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||oa.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)oa.event.remove(a,n+b[j],c,d,!0);oa.isEmptyObject(i)&&Ja.remove(a,"handle events")}},dispatch:function(a){var b,c,d,e,f,g,h=oa.event.fix(a),i=new Array(arguments.length),j=(Ja.get(this,"events")||{})[h.type]||[],k=oa.event.special[h.type]||{};for(i[0]=h,b=1;b<arguments.length;b++)i[b]=arguments[b];if(h.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,h)!==!1){for(g=oa.event.handlers.call(this,h,j),b=0;(e=g[b++])&&!h.isPropagationStopped();)for(h.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!h.isImmediatePropagationStopped();)(!h.rnamespace||h.rnamespace.test(f.namespace))&&(h.handleObj=f,h.data=f.data,d=((oa.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,i),void 0!==d&&(h.result=d)===!1&&(h.preventDefault(),h.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,h),h.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;i>c;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?oa(e,this).index(j)>-1:oa.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(oa.Event.prototype,a,{enumerable:!0,configurable:!0,get:oa.isFunction(b)?function(){return this.originalEvent?b(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[a]:void 0},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[oa.expando]?a:new oa.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==w()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===w()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oa.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return oa.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},oa.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},oa.Event=function(a,b){return this instanceof oa.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?u:v,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&oa.extend(this,b),this.timeStamp=a&&a.timeStamp||oa.now(),void(this[oa.expando]=!0)):new oa.Event(a,b)},oa.Event.prototype={constructor:oa.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=u,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=u,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=u,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},oa.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&Za.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&$a.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},oa.event.addProp),oa.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){oa.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!oa.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),oa.fn.extend({on:function(a,b,c,d){return x(this,a,b,c,d)},one:function(a,b,c,d){return x(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,oa(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=v),this.each(function(){oa.event.remove(this,a,c,b)})}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,bb=/<script|<style|<link/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^true\/(.*)/,eb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oa.extend({htmlPrefilter:function(a){return a.replace(ab,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=oa.contains(a.ownerDocument,a);if(!(ma.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||oa.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)C(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)B(f[d],g[d]);else B(a,h);return g=r(h,"script"),g.length>0&&s(g,!i&&r(a,"script")),h},cleanData:function(a){for(var b,c,d,e=oa.event.special,f=0;void 0!==(c=a[f]);f++)if(Ia(c)){if(b=c[Ja.expando]){if(b.events)for(d in b.events)e[d]?oa.event.remove(c,d):oa.removeEvent(c,d,b.handle);c[Ja.expando]=void 0}c[Ka.expando]&&(c[Ka.expando]=void 0)}}}),oa.fn.extend({detach:function(a){return E(this,a,!0)},remove:function(a){return E(this,a)},text:function(a){return Ha(this,function(a){return void 0===a?oa.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.appendChild(a)}})},prepend:function(){return D(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=y(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return D(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(oa.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return oa.clone(this,a,b)})},html:function(a){return Ha(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!bb.test(a)&&!Wa[(Ua.exec(a)||["",""])[1].toLowerCase()]){a=oa.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(oa.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return D(this,arguments,function(b){var c=this.parentNode;oa.inArray(this,a)<0&&(oa.cleanData(r(this)),c&&c.replaceChild(b,this))},a)}}),oa.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){oa.fn[a]=function(a){for(var c,d=[],e=oa(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),oa(e[g])[b](c),fa.apply(d,c.get());return this.pushStack(d)}});var fb=/^margin/,gb=new RegExp("^("+Na+")(?!px)[a-z%]+$","i"),hb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(h){h.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ya.appendChild(g);var b=a.getComputedStyle(h);c="1%"!==b.top,f="2px"===b.marginLeft,d="4px"===b.width,h.style.marginRight="50%",e="4px"===b.marginRight,Ya.removeChild(g),h=null}}var c,d,e,f,g=ba.createElement("div"),h=ba.createElement("div");h.style&&(h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",ma.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h),oa.extend(ma,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),d},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),f}}))}();var ib=/^(none|table(?!-c[ea]).+)/,jb={position:"absolute",visibility:"hidden",display:"block"},kb={letterSpacing:"0",fontWeight:"400"},lb=["Webkit","Moz","ms"],mb=ba.createElement("div").style;oa.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=F(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=oa.camelCase(b),i=a.style;return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Oa.exec(c))&&e[1]&&(c=o(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(oa.cssNumber[h]?"":"px")),ma.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=oa.camelCase(b);return b=oa.cssProps[h]||(oa.cssProps[h]=H(h)||h),g=oa.cssHooks[b]||oa.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=F(a,b,d)),"normal"===e&&b in kb&&(e=kb[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),oa.each(["height","width"],function(a,b){oa.cssHooks[b]={get:function(a,c,d){return c?!ib.test(oa.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?K(a,b,d):Ra(a,jb,function(){return K(a,b,d)}):void 0},set:function(a,c,d){var e,f=d&&hb(a),g=d&&J(a,b,d,"border-box"===oa.css(a,"boxSizing",!1,f),f);return g&&(e=Oa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=oa.css(a,b)),I(a,c,g)}}}),oa.cssHooks.marginLeft=G(ma.reliableMarginLeft,function(a,b){return b?(parseFloat(F(a,"marginLeft"))||a.getBoundingClientRect().left-Ra(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),oa.each({margin:"",padding:"",border:"Width"},function(a,b){oa.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Pa[d]+b]=f[d]||f[d-2]||f[0];return e}},fb.test(a)||(oa.cssHooks[a+b].set=I)}),oa.fn.extend({css:function(a,b){return Ha(this,function(a,b,c){var d,e,f={},g=0;if(oa.isArray(b)){for(d=hb(a),e=b.length;e>g;g++)f[b[g]]=oa.css(a,b[g],!1,d);return f}return void 0!==c?oa.style(a,b,c):oa.css(a,b)},a,b,arguments.length>1)}}),oa.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||oa.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(oa.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.options.duration?this.pos=b=oa.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=oa.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){oa.fx.step[a.prop]?oa.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[oa.cssProps[a.prop]]&&!oa.cssHooks[a.prop]?a.elem[a.prop]=a.now:oa.style(a.elem,a.prop,a.now+a.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},oa.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},oa.fx=L.prototype.init,oa.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=/queueHooks$/;oa.Animation=oa.extend(S,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return o(c.elem,a,Oa.exec(b),c),c}]},tweener:function(a,b){oa.isFunction(a)?(b=a,a=["*"]):a=a.match(Ea);for(var c,d=0,e=a.length;e>d;d++)c=a[d],S.tweeners[c]=S.tweeners[c]||[],S.tweeners[c].unshift(b)},prefilters:[Q],prefilter:function(a,b){b?S.prefilters.unshift(a):S.prefilters.push(a)}}),oa.speed=function(a,b,c){var d=a&&"object"==typeof a?oa.extend({},a):{complete:c||!c&&b||oa.isFunction(a)&&a,duration:a,easing:c&&b||b&&!oa.isFunction(b)&&b};return oa.fx.off||ba.hidden?d.duration=0:"number"!=typeof d.duration&&(d.duration in oa.fx.speeds?d.duration=oa.fx.speeds[d.duration]:d.duration=oa.fx.speeds._default),(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){oa.isFunction(d.old)&&d.old.call(this),d.queue&&oa.dequeue(this,d.queue)},d},oa.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Qa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=oa.isEmptyObject(a),f=oa.speed(b,c,d),g=function(){var b=S(this,oa.extend({},a),f);(e||Ja.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),
this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=oa.timers,g=Ja.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&qb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&oa.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=Ja.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=oa.timers,g=d?d.length:0;for(c.finish=!0,oa.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),oa.each(["toggle","show","hide"],function(a,b){var c=oa.fn[b];oa.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(O(b,!0),a,d,e)}}),oa.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){oa.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),oa.timers=[],oa.fx.tick=function(){var a,b=0,c=oa.timers;for(nb=oa.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||oa.fx.stop(),nb=void 0},oa.fx.timer=function(a){oa.timers.push(a),a()?oa.fx.start():oa.timers.pop()},oa.fx.interval=13,oa.fx.start=function(){ob||(ob=a.requestAnimationFrame?a.requestAnimationFrame(M):a.setInterval(oa.fx.tick,oa.fx.interval))},oa.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(ob):a.clearInterval(ob),ob=null},oa.fx.speeds={slow:600,fast:200,_default:400},oa.fn.delay=function(b,c){return b=oa.fx?oa.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=ba.createElement("input"),b=ba.createElement("select"),c=b.appendChild(ba.createElement("option"));a.type="checkbox",ma.checkOn=""!==a.value,ma.optSelected=c.selected,a=ba.createElement("input"),a.value="t",a.type="radio",ma.radioValue="t"===a.value}();var rb,sb=oa.expr.attrHandle;oa.fn.extend({attr:function(a,b){return Ha(this,oa.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){oa.removeAttr(this,a)})}}),oa.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?oa.prop(a,b,c):(1===f&&oa.isXMLDoc(a)||(e=oa.attrHooks[b.toLowerCase()]||(oa.expr.match.bool.test(b)?rb:void 0)),void 0!==c?null===c?void oa.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=oa.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!ma.radioValue&&"radio"===b&&oa.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(Ea);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),rb={set:function(a,b,c){return b===!1?oa.removeAttr(a,c):a.setAttribute(c,c),c}},oa.each(oa.expr.match.bool.source.match(/\w+/g),function(a,b){var c=sb[b]||oa.find.attr;sb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=sb[g],sb[g]=e,e=null!=c(a,b,d)?g:null,sb[g]=f),e}});var tb=/^(?:input|select|textarea|button)$/i,ub=/^(?:a|area)$/i;oa.fn.extend({prop:function(a,b){return Ha(this,oa.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[oa.propFix[a]||a]})}}),oa.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&oa.isXMLDoc(a)||(b=oa.propFix[b]||b,e=oa.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=oa.find.attr(a,"tabindex");return b?parseInt(b,10):tb.test(a.nodeName)||ub.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ma.optSelected||(oa.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),oa.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oa.propFix[this.toLowerCase()]=this}),oa.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).addClass(a.call(this,b,U(this)))});if("string"==typeof a&&a)for(b=a.match(Ea)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(oa.isFunction(a))return this.each(function(b){oa(this).removeClass(a.call(this,b,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(Ea)||[];c=this[i++];)if(e=U(c),d=1===c.nodeType&&" "+T(e)+" "){for(g=0;f=b[g++];)for(;d.indexOf(" "+f+" ")>-1;)d=d.replace(" "+f+" "," ");h=T(d),e!==h&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):oa.isFunction(a)?this.each(function(c){oa(this).toggleClass(a.call(this,c,U(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=oa(this),f=a.match(Ea)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(void 0===a||"boolean"===c)&&(b=U(this),b&&Ja.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":Ja.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&(" "+T(U(c))+" ").indexOf(b)>-1)return!0;return!1}});var vb=/\r/g;oa.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=oa.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,oa(this).val()):a,null==e?e="":"number"==typeof e?e+="":oa.isArray(e)&&(e=oa.map(e,function(a){return null==a?"":a+""})),b=oa.valHooks[this.type]||oa.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=oa.valHooks[e.type]||oa.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(vb,""):null==c?"":c)}}}),oa.extend({valHooks:{option:{get:function(a){var b=oa.find.attr(a,"value");return null!=b?b:T(oa.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=0>f?i:g?f:0;i>d;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!oa.nodeName(c.parentNode,"optgroup"))){if(b=oa(c).val(),g)return b;h.push(b)}return h},set:function(a,b){for(var c,d,e=a.options,f=oa.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=oa.inArray(oa.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),oa.each(["radio","checkbox"],function(){oa.valHooks[this]={set:function(a,b){return oa.isArray(b)?a.checked=oa.inArray(oa(a).val(),b)>-1:void 0}},ma.checkOn||(oa.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var wb=/^(?:focusinfocus|focusoutblur)$/;oa.extend(oa.event,{trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||ba],n=ja.call(b,"type")?b.type:b,o=ja.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||ba,3!==d.nodeType&&8!==d.nodeType&&!wb.test(n+oa.event.triggered)&&(n.indexOf(".")>-1&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[oa.expando]?b:new oa.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:oa.makeArray(c,[b]),l=oa.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!oa.isWindow(d)){for(i=l.delegateType||n,wb.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||ba)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(Ja.get(g,"events")||{})[b.type]&&Ja.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&Ia(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!Ia(d)||j&&oa.isFunction(d[n])&&!oa.isWindow(d)&&(h=d[j],h&&(d[j]=null),oa.event.triggered=n,d[n](),oa.event.triggered=void 0,h&&(d[j]=h)),b.result}},simulate:function(a,b,c){var d=oa.extend(new oa.Event,c,{type:a,isSimulated:!0});oa.event.trigger(d,null,b)}}),oa.fn.extend({trigger:function(a,b){return this.each(function(){oa.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?oa.event.trigger(a,b,c,!0):void 0}}),oa.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){oa.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),oa.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),ma.focusin="onfocusin"in a,ma.focusin||oa.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){oa.event.simulate(b,a.target,oa.event.fix(a))};oa.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=Ja.access(d,b);e||d.addEventListener(a,c,!0),Ja.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Ja.access(d,b)-1;e?Ja.access(d,b,e):(d.removeEventListener(a,c,!0),Ja.remove(d,b))}}});var xb=a.location,yb=oa.now(),zb=/\?/;oa.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&oa.error("Invalid XML: "+b),c};var Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;oa.param=function(a,b){var c,d=[],e=function(a,b){var c=oa.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(oa.isArray(a)||a.jquery&&!oa.isPlainObject(a))oa.each(a,function(){e(this.name,this.value)});else for(c in a)V(c,a[c],b,e);return d.join("&")},oa.fn.extend({serialize:function(){return oa.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=oa.prop(this,"elements");return a?oa.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!oa(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!Ta.test(a))}).map(function(a,b){var c=oa(this).val();return null==c?null:oa.isArray(c)?oa.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}});var Eb=/%20/g,Fb=/#.*$/,Gb=/([?&])_=[^&]*/,Hb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ib=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Jb=/^(?:GET|HEAD)$/,Kb=/^\/\//,Lb={},Mb={},Nb="*/".concat("*"),Ob=ba.createElement("a");Ob.href=xb.href,oa.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xb.href,type:"GET",isLocal:Ib.test(xb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":oa.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Y(Y(a,oa.ajaxSettings),b):Y(oa.ajaxSettings,a)},ajaxPrefilter:W(Lb),ajaxTransport:W(Mb),ajax:function(b,c){function d(b,c,d,h){var j,m,n,u,v,w=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=Z(o,x,d)),u=$(o,u,x,j),j?(o.ifModified&&(v=x.getResponseHeader("Last-Modified"),v&&(oa.lastModified[f]=v),v=x.getResponseHeader("etag"),v&&(oa.etag[f]=v)),204===b||"HEAD"===o.type?w="nocontent":304===b?w="notmodified":(w=u.state,m=u.data,n=u.error,j=!n)):(n=w,(b||!w)&&(w="error",0>b&&(b=0))),x.status=b,x.statusText=(c||w)+"",j?r.resolveWith(p,[m,w,x]):r.rejectWith(p,[x,w,n]),x.statusCode(t),t=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[x,o,j?m:n]),s.fireWith(p,[x,w]),l&&(q.trigger("ajaxComplete",[x,o]),--oa.active||oa.event.trigger("ajaxStop")))}"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=oa.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?oa(p):oa.event,r=oa.Deferred(),s=oa.Callbacks("once memory"),t=o.statusCode||{},u={},v={},w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Hb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=v[a.toLowerCase()]=v[a.toLowerCase()]||a,u[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)x.always(a[x.status]);else for(b in a)t[b]=[t[b],a[b]];return this},abort:function(a){var b=a||w;return e&&e.abort(b),d(0,b),this}};if(r.promise(x),o.url=((b||o.url||xb.href)+"").replace(Kb,xb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(Ea)||[""],null==o.crossDomain){j=ba.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ob.protocol+"//"+Ob.host!=j.protocol+"//"+j.host}catch(y){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=oa.param(o.data,o.traditional)),X(Lb,o,c,x),k)return x;l=oa.event&&o.global,l&&0===oa.active++&&oa.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Jb.test(o.type),f=o.url.replace(Fb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Eb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(zb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Gb,"$1"),n=(zb.test(f)?"&":"?")+"_="+yb++ +n),o.url=f+n),o.ifModified&&(oa.lastModified[f]&&x.setRequestHeader("If-Modified-Since",oa.lastModified[f]),oa.etag[f]&&x.setRequestHeader("If-None-Match",oa.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",o.contentType),x.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Nb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)x.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,x,o)===!1||k))return x.abort();if(w="abort",s.add(o.complete),x.done(o.success),x.fail(o.error),e=X(Mb,o,c,x)){if(x.readyState=1,l&&q.trigger("ajaxSend",[x,o]),k)return x;o.async&&o.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},o.timeout));try{k=!1,e.send(u,d)}catch(y){if(k)throw y;d(-1,y)}}else d(-1,"No Transport");return x},getJSON:function(a,b,c){return oa.get(a,b,c,"json")},getScript:function(a,b){return oa.get(a,void 0,b,"script")}}),oa.each(["get","post"],function(a,b){oa[b]=function(a,c,d,e){return oa.isFunction(c)&&(e=e||d,d=c,c=void 0),oa.ajax(oa.extend({url:a,type:b,dataType:e,data:c,success:d},oa.isPlainObject(a)&&a))}}),oa._evalUrl=function(a){return oa.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},oa.fn.extend({wrapAll:function(a){var b;return this[0]&&(oa.isFunction(a)&&(a=a.call(this[0])),b=oa(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return oa.isFunction(a)?this.each(function(b){oa(this).wrapInner(a.call(this,b))}):this.each(function(){var b=oa(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=oa.isFunction(a);return this.each(function(c){oa(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){oa(this).replaceWith(this.childNodes)}),this}}),oa.expr.pseudos.hidden=function(a){return!oa.expr.pseudos.visible(a)},oa.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},oa.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Pb={0:200,1223:204},Qb=oa.ajaxSettings.xhr();ma.cors=!!Qb&&"withCredentials"in Qb,ma.ajax=Qb=!!Qb,oa.ajaxTransport(function(b){var c,d;return ma.cors||Qb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Pb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),oa.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),oa.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return oa.globalEval(a),a}}}),oa.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),oa.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=oa("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),ba.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Rb=[],Sb=/(=)\?(?=&|$)|\?\?/;oa.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Rb.pop()||oa.expando+"_"+yb++;return this[a]=!0,a}}),oa.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Sb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Sb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=oa.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Sb,"$1"+e):b.jsonp!==!1&&(b.url+=(zb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||oa.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?oa(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Rb.push(e)),g&&oa.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ma.createHTMLDocument=function(){var a=ba.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),oa.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var d,e,f;return b||(ma.createHTMLDocument?(b=ba.implementation.createHTMLDocument(""),d=b.createElement("base"),d.href=ba.location.href,b.head.appendChild(d)):b=ba),e=xa.exec(a),f=!c&&[],e?[b.createElement(e[1])]:(e=t([a],b,f),f&&f.length&&oa(f).remove(),oa.merge([],e.childNodes))},oa.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=T(a.slice(h)),a=a.slice(0,h)),oa.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&oa.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?oa("<div>").append(oa.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},oa.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){oa.fn[b]=function(a){return this.on(b,a)}}),oa.expr.pseudos.animated=function(a){return oa.grep(oa.timers,function(b){return a===b.elem}).length},oa.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=oa.css(a,"position"),l=oa(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=oa.css(a,"top"),i=oa.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),oa.isFunction(b)&&(b=b.call(a,c,oa.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},oa.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){oa.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=_(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===oa.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),oa.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+oa.css(a[0],"borderTopWidth",!0),left:d.left+oa.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-oa.css(c,"marginTop",!0),left:b.left-d.left-oa.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===oa.css(a,"position");)a=a.offsetParent;return a||Ya})}}),oa.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;oa.fn[a]=function(d){return Ha(this,function(a,d,e){var f=_(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),oa.each(["top","left"],function(a,b){oa.cssHooks[b]=G(ma.pixelPosition,function(a,c){return c?(c=F(a,b),gb.test(c)?oa(a).position()[b]+"px":c):void 0})}),oa.each({Height:"height",Width:"width"},function(a,b){oa.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){oa.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return Ha(this,function(b,c,e){var f;return oa.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?oa.css(b,c,h):oa.style(b,c,e,h)},b,g?e:void 0,g)}})}),oa.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),oa.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oa});var Tb=a.jQuery,Ub=a.$;return oa.noConflict=function(b){return a.$===oa&&(a.$=Ub),b&&a.jQuery===oa&&(a.jQuery=Tb),oa},b||(a.jQuery=a.$=oa),oa}),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?ta(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.5.9/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(ta(f[d]));return new b(h)}}function c(a){if(null==a||A(a))return!1;if(ce(a)||v(a)||Sd&&a instanceof Sd)return!0;var b="length"in Object(a)&&a.length;return w(b)&&(b>=0&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function d(a,b,e){var f,g;if(a)if(y(a))for(f in a)"prototype"===f||"length"===f||"name"===f||a.hasOwnProperty&&!a.hasOwnProperty(f)||b.call(e,a[f],f,a);else if(ce(a)||c(a)){var h="object"!=typeof a;for(f=0,g=a.length;g>f;f++)(h||f in a)&&b.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==d)a.forEach(b,e,a);else if(u(a))for(f in a)b.call(e,a[f],f,a);else if("function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else for(f in a)Md.call(a,f)&&b.call(e,a[f],f,a);return a}function e(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function f(a){return function(b,c){a(c,b)}}function g(){return++ae}function h(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function i(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;f>e;++e){var g=b[e];if(t(g)||y(g))for(var j=Object.keys(g),k=0,l=j.length;l>k;k++){var m=j[k],n=g[m];c&&t(n)?x(n)?a[m]=new Date(n.valueOf()):z(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):J(n)?a[m]=n.clone():(t(a[m])||(a[m]=ce(n)?[]:{}),i(a[m],[n],!0)):a[m]=n}}return h(a,d),a}function j(a){return i(a,Vd.call(arguments,1),!1)}function k(a){return i(a,Vd.call(arguments,1),!0)}function l(a){return parseInt(a,10)}function m(a,b){return j(Object.create(a),b)}function n(){}function o(a){return a}function p(a){return function(){return a}}function q(a){return y(a.toString)&&a.toString!==Yd}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return null!==a&&"object"==typeof a&&!Zd(a)}function v(a){return"string"==typeof a}function w(a){return"number"==typeof a}function x(a){return"[object Date]"===Yd.call(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"===Yd.call(a)}function A(a){return a&&a.window===a}function B(a){return a&&a.$evalAsync&&a.$watch}function C(a){return"[object File]"===Yd.call(a)}function D(a){return"[object FormData]"===Yd.call(a)}function E(a){return"[object Blob]"===Yd.call(a)}function F(a){return"boolean"==typeof a}function G(a){return a&&y(a.then)}function H(a){return a&&w(a.length)&&de.test(Yd.call(a))}function I(a){return"[object ArrayBuffer]"===Yd.call(a)}function J(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function K(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function L(a){return Nd(a.nodeName||a[0]&&a[0].nodeName)}function M(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function N(a,b){function c(a,b){var c,d=b.$$hashKey;if(ce(a))for(var f=0,g=a.length;g>f;f++)b.push(e(a[f]));else if(u(a))for(c in a)b[c]=e(a[c]);else if(a&&"function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&(b[c]=e(a[c]));else for(c in a)Md.call(a,c)&&(b[c]=e(a[c]));return h(b,d),b}function e(a){if(!t(a))return a;var b=g.indexOf(a);if(-1!==b)return i[b];if(A(a)||B(a))throw $d("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var d=!1,e=f(a);return void 0===e&&(e=ce(a)?[]:Object.create(Zd(a)),d=!0),g.push(a),i.push(e),d?c(a,e):e}function f(a){switch(Yd.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return c.lastIndex=a.lastIndex,c;case"[object Blob]":return new a.constructor([a],{type:a.type})}return y(a.cloneNode)?a.cloneNode(!0):void 0}var g=[],i=[];if(b){if(H(b)||I(b))throw $d("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw $d("cpi","Can't copy! Source and destination are identical.");return ce(b)?b.length=0:d(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),i.push(b),c(a,b)}return e(a)}function O(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d,e,f=typeof a,g=typeof b;if(f===g&&"object"===f){if(!ce(a)){if(x(a))return x(b)?O(a.getTime(),b.getTime()):!1;if(z(a))return z(b)?a.toString()===b.toString():!1;if(B(a)||B(b)||A(a)||A(b)||ce(b)||x(b)||z(b))return!1;e=pa();for(d in a)if("$"!==d.charAt(0)&&!y(a[d])){if(!O(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!(d in e)&&"$"!==d.charAt(0)&&s(b[d])&&!y(b[d]))return!1;return!0}if(!ce(b))return!1;if((c=a.length)===b.length){for(d=0;c>d;d++)if(!O(a[d],b[d]))return!1;return!0}}return!1}function P(a,b,c){return a.concat(Vd.call(b,c))}function Q(a,b){return Vd.call(a,b||0)}function R(a,b){var c=arguments.length>2?Q(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,P(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function S(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:A(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":B(c)&&(d="$SCOPE"),d}function T(a,b){return r(a)?void 0:(w(b)||(b=b?2:null),JSON.stringify(a,S,b))}function U(a){return v(a)?JSON.parse(a):a}function V(a,b){a=a.replace(ie,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return be(c)?b:c}function W(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function X(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=V(b,d);return W(a,c*(e-d))}function Y(a){a=Sd(a).clone();try{a.empty()}catch(b){}var c=Sd("<div>").append(a).html();try{return a[0].nodeType===pe?Nd(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Nd(b)})}catch(b){return Nd(c)}}function Z(a){try{return decodeURIComponent(a)}catch(b){}}function $(a){var b={};return d((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(d=a.substring(0,c),e=a.substring(c+1)),d=Z(d),s(d)&&(e=s(e)?Z(e):!0,Md.call(b,d)?ce(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function _(a){var b=[];return d(a,function(a,c){ce(a)?d(a,function(a){b.push(ba(c,!0)+(a===!0?"":"="+ba(a,!0)))}):b.push(ba(c,!0)+(a===!0?"":"="+ba(a,!0)))}),b.length?b.join("&"):""}function aa(a){return ba(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ba(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ca(a,b){var c,d,e=je.length;for(d=0;e>d;++d)if(c=je[d]+b,v(c=a.getAttribute(c)))return c;return null}function da(a){if(!a.currentScript)return!0;var b=a.currentScript.getAttribute("src"),c=a.createElement("a");c.href=b;var d=c.protocol,e=a.location.protocol;if(e===d)return!0;switch(d){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function ea(b,c){var e,f,g={};if(d(je,function(a){var c=a+"app";!e&&b.hasAttribute&&b.hasAttribute(c)&&(e=b,f=b.getAttribute(c))}),d(je,function(a){var c,d=a+"app";!e&&(c=b.querySelector("["+d.replace(":","\\:")+"]"))&&(e=c,f=c.getAttribute(d))}),e){if(!ke)return void a.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");g.strictDi=null!==ca(e,"strict-di"),c(e,f?[f]:[],g)}}function fa(b,c,e){t(e)||(e={});var f={strictDi:!1};e=j(f,e);var g=function(){if(b=Sd(b),b.injector()){var d=b[0]===a.document?"document":Y(b);throw $d("btstrpd","App already bootstrapped with this element '{0}'",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),e.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng");var f=eb(c,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},h=/^NG_ENABLE_DEBUG_INFO!/,i=/^NG_DEFER_BOOTSTRAP!/;
return a&&h.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(h,"")),a&&!i.test(a.name)?g():(a.name=a.name.replace(i,""),_d.resumeBootstrap=function(a){return d(a,function(a){c.push(a)}),g()},void(y(_d.resumeDeferredBootstrap)&&_d.resumeDeferredBootstrap()))}function ga(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ha(a){var b=_d.element(a).injector();if(!b)throw $d("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ia(a,b){return b=b||"_",a.replace(le,function(a,c){return(c?b:"")+a.toLowerCase()})}function ja(){var b;if(!me){var c=he();Td=r(c)?a.jQuery:c?a[c]:void 0,Td&&Td.fn.on?(Sd=Td,j(Td.fn,{scope:Ie.scope,isolateScope:Ie.isolateScope,controller:Ie.controller,injector:Ie.injector,inheritedData:Ie.inheritedData}),b=Td.cleanData,Td.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)c=Td._data(d,"events"),c&&c.$destroy&&Td(d).triggerHandler("$destroy");b(a)}):Sd=Ea,_d.element=Sd,me=!0}}function ka(a,b,c){if(!a)throw $d("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function la(a,b,c){return c&&ce(a)&&(a=a[a.length-1]),ka(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ma(a,b){if("hasOwnProperty"===a)throw $d("badname","hasOwnProperty is not a valid {0} name",b)}function na(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?R(f,a):a}function oa(a){for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=Sd(Vd.call(a,0,e))),b.push(c));return b||a}function pa(){return Object.create(null)}function qa(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng"),f=c(a,"angular",Object);return f.$$minErr=f.$$minErr||b,c(f,"module",function(){var a={};return function(b,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(b,"module"),f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function c(a,c){return function(d,f){return f&&y(f)&&(f.$$moduleName=b),e.push([a,c,arguments]),k}}if(!f)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function ra(a,b){if(ce(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function sa(a){var b=[];return JSON.stringify(a,function(a,c){if(c=S(a,c),t(c)){if(b.indexOf(c)>=0)return"...";b.push(c)}return c})}function ta(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):r(a)?"undefined":"string"!=typeof a?sa(a):a}function ua(c){j(c,{bootstrap:fa,copy:N,extend:j,merge:k,equals:O,element:Sd,forEach:d,injector:eb,noop:n,bind:R,toJson:T,fromJson:U,identity:o,isUndefined:r,isDefined:s,isString:v,isFunction:y,isObject:t,isNumber:w,isElement:J,isArray:ce,version:te,isDate:x,lowercase:Nd,uppercase:Od,callbacks:{$$counter:0},getTestability:ha,$$minErr:b,$$csp:ge,reloadWithDebugInfo:ga}),(Ud=qa(a))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:zc}),a.provider("$compile",pb).directive({a:cg,input:vg,textarea:vg,form:hg,script:qh,select:th,option:uh,ngBind:yg,ngBindHtml:Ag,ngBindTemplate:zg,ngClass:Cg,ngClassEven:Eg,ngClassOdd:Dg,ngCloak:Fg,ngController:Gg,ngForm:ig,ngHide:jh,ngIf:Jg,ngInclude:Kg,ngInit:Mg,ngNonBindable:ah,ngPluralize:eh,ngRepeat:fh,ngShow:ih,ngStyle:kh,ngSwitch:lh,ngSwitchWhen:mh,ngSwitchDefault:nh,ngOptions:dh,ngTransclude:ph,ngModel:Zg,ngList:Ng,ngChange:Bg,pattern:wh,ngPattern:wh,required:vh,ngRequired:vh,minlength:yh,ngMinlength:yh,maxlength:xh,ngMaxlength:xh,ngValue:xg,ngModelOptions:_g}).directive({ngInclude:Lg}).directive(dg).directive(Hg),a.provider({$anchorScroll:fb,$animate:Ye,$animateCss:_e,$$animateJs:We,$$animateQueue:Xe,$$AnimateRunner:$e,$$animateAsyncRun:Ze,$browser:lb,$cacheFactory:mb,$controller:vb,$document:wb,$exceptionHandler:xb,$filter:Nc,$$forceReflow:ff,$interpolate:Lb,$interval:Mb,$http:Hb,$httpParamSerializer:zb,$httpParamSerializerJQLike:Ab,$httpBackend:Jb,$xhrFactory:Ib,$jsonpCallbacks:pf,$location:_b,$log:ac,$parse:tc,$rootScope:yc,$q:uc,$$q:vc,$sce:Dc,$sceDelegate:Cc,$sniffer:Ec,$templateCache:nb,$templateRequest:Fc,$$testability:Gc,$timeout:Hc,$window:Kc,$$rAF:xc,$$jqLite:Za,$$HashMap:Me,$$cookieReader:Mc})}])}function va(){return++ve}function wa(a){return a.replace(ye,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ze,"Moz$1")}function xa(a){return!De.test(a)}function ya(a){var b=a.nodeType;return b===ne||!b||b===re}function za(a){for(var b in ue[a.ng339])return!0;return!1}function Aa(a){for(var b=0,c=a.length;c>b;b++)Ia(a[b])}function Ba(a,b){var c,e,f,g,h=b.createDocumentFragment(),i=[];if(xa(a))i.push(b.createTextNode(a));else{for(c=h.appendChild(b.createElement("div")),e=(Ee.exec(a)||["",""])[1].toLowerCase(),f=Ge[e]||Ge._default,c.innerHTML=f[1]+a.replace(Fe,"<$1></$2>")+f[2],g=f[0];g--;)c=c.lastChild;i=P(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",d(i,function(a){h.appendChild(a)}),h}function Ca(b,c){c=c||a.document;var d;return(d=Ce.exec(b))?[c.createElement(d[1])]:(d=Ba(b,c))?d.childNodes:[]}function Da(a,b){var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)}function Ea(a){if(a instanceof Ea)return a;var b;if(v(a)&&(a=ee(a),b=!0),!(this instanceof Ea)){if(b&&"<"!==a.charAt(0))throw Be("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ea(a)}b?Oa(this,Ca(a)):Oa(this,a)}function Fa(a){return a.cloneNode(!0)}function Ga(a,b){if(b||Ia(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)Ia(c[d])}function Ha(a,b,c,e){if(s(e))throw Be("offargs","jqLite#off() does not support the `selector` argument");var f=Ja(a),g=f&&f.events,h=f&&f.handle;if(h)if(b){var i=function(b){var d=g[b];s(c)&&M(d||[],c),s(c)&&d&&d.length>0||(xe(a,b,h),delete g[b])};d(b.split(" "),function(a){i(a),Ae[a]&&i(Ae[a])})}else for(b in g)"$destroy"!==b&&xe(a,b,h),delete g[b]}function Ia(a,b){var c=a.ng339,d=c&&ue[c];if(d){if(b)return void delete d.data[b];d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ha(a)),delete ue[c],a.ng339=void 0}}function Ja(a,b){var c=a.ng339,d=c&&ue[c];return b&&!d&&(a.ng339=c=va(),d=ue[c]={events:{},data:{},handle:void 0}),d}function Ka(a,b,c){if(ya(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=Ja(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];j(h,b)}}}function La(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ma(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",ee((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ee(b)+" "," ")))})}function Na(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=ee(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",ee(c))}}function Oa(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Pa(a,b){return Qa(a,"$"+(b||"ngController")+"Controller")}function Qa(a,b,c){a.nodeType===re&&(a=a.documentElement);for(var d=ce(b)?b:[b];a;){for(var e=0,f=d.length;f>e;e++)if(s(c=Sd.data(a,d[e])))return c;a=a.parentNode||a.nodeType===se&&a.host}}function Ra(a){for(Ga(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Sa(a,b){b||Ga(a);var c=a.parentNode;c&&c.removeChild(a)}function Ta(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Sd(c).on("load",b)}function Ua(a,b){var c=Je[b.toLowerCase()];return c&&Ke[L(a)]&&c}function Va(a){return Le[a]}function Wa(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0};var h=e.specialHandlerWrapper||Xa;f>1&&(e=ra(e));for(var i=0;f>i;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function Xa(a,b,c){c.call(a,b)}function Ya(a,b,c){var d=b.relatedTarget;(!d||d!==a&&!He.call(a,d))&&c.call(a,b)}function Za(){this.$get=function(){return j(Ea,{hasClass:function(a,b){return a.attr&&(a=a[0]),La(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Na(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ma(a,b)}})}}function $a(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||g)():d+":"+a}function _a(a,b){if(b){var c=0;this.nextUid=function(){return++c}}d(a,this.put,this)}function ab(a){return Function.prototype.toString.call(a)+" "}function bb(a){var b=ab(a).replace(Re,""),c=b.match(Ne)||b.match(Oe);return c}function cb(a){var b=bb(a);return b?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function db(a,b,c){var e,f,g;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(b)throw v(c)&&c||(c=a.name||cb(a)),Se("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);f=bb(a),d(f[1].split(Pe),function(a){a.replace(Qe,function(a,b,c){e.push(c)})})}a.$inject=e}}else ce(a)?(g=a.length-1,la(a[g],"fn"),e=a.slice(0,g)):la(a,"fn",!0);return e}function eb(a,b){function c(a){return function(b,c){return t(b)?void d(b,f(a)):a(b,c)}}function e(a,b){if(ma(a,"service"),(y(b)||ce(b))&&(b=x.instantiate(b)),!b.$get)throw Se("pget","Provider '{0}' must define $get factory method.",a);return w[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(r(c))throw Se("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function i(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function j(a,b){return h(a,p(b),!1)}function k(a,b){ma(a,"constant"),w[a]=b,z[a]=b}function l(a,b){var c=x.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function m(a){ka(r(a)||ce(a),"modulesToLoad","not an array");var b,c=[];return d(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=x.get(d[0]);e[d[1]].apply(e,d[2])}}if(!u.get(a)){u.put(a,!0);try{v(a)?(b=Ud(a),c=c.concat(m(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):y(a)?c.push(x.invoke(a)):ce(a)?c.push(x.invoke(a)):la(a,"module")}catch(e){throw ce(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Se("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function n(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===o)throw Se("cdep","Circular dependency found: {0}",b+" <- "+s.join(" <- "));return a[b]}try{return s.unshift(b),a[b]=o,a[b]=c(b,d),a[b]}catch(e){throw a[b]===o&&delete a[b],e}finally{s.shift()}}function e(a,c,e){for(var f=[],g=eb.$$annotate(a,b,e),h=0,i=g.length;i>h;h++){var j=g[h];if("string"!=typeof j)throw Se("itkn","Incorrect injection token! Expected service name as string, got {0}",j);f.push(c&&c.hasOwnProperty(j)?c[j]:d(j,e))}return f}function f(a){return 11>=Rd?!1:"function"==typeof a&&/^(?:class\b|constructor\()/.test(ab(a))}function g(a,b,c,d){"string"==typeof c&&(d=c,c=null);var g=e(a,c,d);return ce(a)&&(a=a[a.length-1]),f(a)?(g.unshift(null),new(Function.prototype.bind.apply(a,g))):a.apply(b,g)}function h(a,b,c){var d=ce(a)?a[a.length-1]:a,f=e(a,b,c);return f.unshift(null),new(Function.prototype.bind.apply(d,f))}return{invoke:g,instantiate:h,get:d,annotate:eb.$$annotate,has:function(b){return w.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var o={},q="Provider",s=[],u=new _a([],!0),w={$provide:{provider:c(e),factory:c(h),service:c(i),value:c(j),constant:c(k),decorator:l}},x=w.$injector=n(w,function(a,b){throw _d.isString(b)&&s.push(b),Se("unpr","Unknown provider: {0}",s.join(" <- "))}),z={},A=n(z,function(a,b){var c=x.get(a+q,b);return B.invoke(c.$get,c,void 0,a)}),B=A;w["$injector"+q]={$get:p(A)};var C=m(a);return B=A.get("$injector"),B.strictDi=b,d(C,function(a){a&&B.invoke(a)}),B}function fb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===L(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(y(a))a=a();else if(J(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else w(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=v(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Ta(function(){d.$evalAsync(h)})}),h}]}function gb(a,b){return a||b?a?b?(ce(a)&&(a=a.join(" ")),ce(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function hb(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===Ue)return c}}function ib(a){v(a)&&(a=a.split(" "));var b=pa();return d(a,function(a){a.length&&(b[a]=!0)}),b}function jb(a){return t(a)?a:{}}function kb(a,b,c,e){function f(a){try{a.apply(null,Q(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return-1===b?"":a.substr(b)}function h(){y=null,i(),j()}function i(){u=z(),u=r(u)?null:u,O(u,C)&&(u=C),C=u}function j(){(w!==k.url()||v!==u)&&(w=k.url(),v=u,d(A,function(a){a(k.url(),u)}))}var k=this,l=a.location,m=a.history,o=a.setTimeout,p=a.clearTimeout,q={};k.isMock=!1;var s=0,t=[];k.$$completeOutstandingRequest=f,k.$$incOutstandingRequestCount=function(){s++},k.notifyWhenNoOutstandingRequests=function(a){0===s?a():t.push(a)};var u,v,w=l.href,x=b.find("base"),y=null,z=e.history?function(){try{return m.state}catch(a){}}:n;i(),v=u,k.url=function(b,c,d){if(r(d)&&(d=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=v===d;if(w===b&&(!e.history||f))return k;var h=w&&Sb(w)===Sb(b);return w=b,v=d,!e.history||h&&f?(h||(y=b),c?l.replace(b):h?l.hash=g(b):l.href=b,l.href!==b&&(y=b)):(m[c?"replaceState":"pushState"](d,"",b),i(),v=u),y&&(y=b),k}return y||l.href.replace(/%27/g,"'")},k.state=function(){return u};var A=[],B=!1,C=null;k.onUrlChange=function(b){return B||(e.history&&Sd(a).on("popstate",h),Sd(a).on("hashchange",h),B=!0),A.push(b),b},k.$$applicationDestroyed=function(){Sd(a).off("hashchange popstate",h)},k.$$checkUrlChange=j,k.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?:)?\/\/[^\/]*/,""):""},k.defer=function(a,b){var c;return s++,c=o(function(){delete q[c],f(a)},b||0),q[c]=!0,c},k.defer.cancel=function(a){return q[a]?(delete q[a],p(a),f(n),!0):!1}}function lb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new kb(a,d,b,c)}]}function mb(){this.$get=function(){function a(a,d){function e(a){a!==m&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=j({},d,{id:a}),i=pa(),k=d&&d.capacity||Number.MAX_VALUE,l=pa(),m=null,n=null;return c[a]={put:function(a,b){if(!r(b)){if(k<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>k&&this.remove(n.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b===m&&(m=b.p),b===n&&(n=b.n),f(b.n,b.p),delete l[a]}a in i&&(delete i[a],g--)},removeAll:function(){i=pa(),g=0,l=pa(),m=n=null},destroy:function(){i=null,h=null,l=null,delete c[a]},info:function(){return j({},h,{size:g})}}}var c={};return a.info=function(){var a={};return d(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function nb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function ob(){}function pb(b,c){function e(a,b,c){var e=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,f=pa();return d(a,function(a,d){if(a in A)return void(f[d]=A[a]);var g=a.match(e);if(!g)throw af("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,d,a,c?"controller bindings definition":"isolate scope definition");f[d]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||d},g[4]&&(A[a]=f[d])}),f}function g(a,b){var c={isolateScope:null,bindToController:null};if(t(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),t(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),t(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw af("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!ub(d,f))throw af("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function h(a){var b=a.charAt(0);if(!b||b!==Nd(b))throw af("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw af("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}function i(a){var b=a.require||a.controller&&a.name;return!ce(b)&&t(b)&&d(b,function(a,c){var d=a.match(x),e=a.substring(d[0].length);e||(b[c]=d[0]+c)}),b}var k={},l="Directive",q=/^\s*directive:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?::([^;]+))?;?)/,w=K("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,z=/^(on[a-z]+|formaction)$/,A=pa();this.directive=function H(a,c){return ma(a,"directive"),v(a)?(h(a),ka(c,"directiveFactory"),k.hasOwnProperty(a)||(k[a]=[],b.factory(a+l,["$injector","$exceptionHandler",function(b,c){var e=[];return d(k[a],function(d,f){try{var g=b.invoke(d);y(g)?g={compile:p(g)}:!g.compile&&g.link&&(g.compile=p(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||a,g.require=i(g),g.restrict=g.restrict||"EA",g.$$moduleName=d.$$moduleName,e.push(g)}catch(h){c(h)}}),e}])),k[a].push(c)):d(a,f(H)),this},this.component=function(a,b){function c(a){function c(b){return y(b)||ce(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:e,controllerAs:ub(b.controller)||b.controllerAs||"$ctrl",template:c(f),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return d(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var e=b.controller||function(){};return d(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,y(e)&&(e[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return s(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(a){return s(a)?(C=a,this):C};var D=10;this.onChangesTtl=function(a){return arguments.length?(D=a,this):D};var E=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(E=a,this):E};var G=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(G=a,this):G},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,e,f,h,i,p,A,H,I){function J(){try{if(!--Ba)throw va=void 0,af("infchng","{0} $onChanges() iterations reached. Aborting!\n",D);p.$apply(function(){for(var a=[],b=0,c=va.length;c>b;++b)try{va[b]()}catch(d){a.push(d)}if(va=void 0,a.length)throw a})}finally{Ba++}}function K(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function N(a,b,c){ya.innerHTML="<span "+b+">";var d=ya.firstChild.attributes,e=d[0];d.removeNamedItem(e.name),e.value=c,a.attributes.setNamedItem(e)}function P(a,b){try{a.addClass(b)}catch(c){}}function S(b,c,d,e,f){b instanceof Sd||(b=Sd(b));for(var g=/\S+/,h=0,i=b.length;i>h;h++){var j=b[h];j.nodeType===pe&&j.nodeValue.match(g)&&Da(j,b[h]=a.document.createElement("span"))}var k=U(b,c,b,d,e,f);S.$$addScopeClass(b);var l=null;return function(a,c,d){ka(a,"scope"),f&&f.needsNewScope&&(a=a.$parent.$new()),d=d||{};var e=d.parentBoundTranscludeFn,g=d.transcludeControllers,h=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),l||(l=T(h));var i;if(i="html"!==l?Sd(na(l,Sd("<div>").append(b).html())):c?Ie.clone.call(b):b,g)for(var j in g)i.data("$"+j+"Controller",g[j].instance);return S.$$addScopeInfo(i,a),c&&c(i,a),k&&k(a,i,i,e),i}}function T(a){var b=a&&a[0];return b&&"foreignobject"!==L(b)&&Yd.call(b).match(/SVG/)?"svg":"html"}function U(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,l,m,p;if(n){var q=c.length;for(p=new Array(q),j=0;j<o.length;j+=3)l=o[j],p[l]=c[l]}else p=c;for(j=0,k=o.length;k>j;)h=p[o[j++]],f=o[j++],g=o[j++],f?(f.scope?(i=a.$new(),S.$$addScopeInfo(Sd(h),i)):i=a,m=f.transcludeOnThisElement?V(a,f.transclude,e):!f.templateOnThisElement&&e?e:!e&&b?V(a,b):null,f(g,i,h,d,m)):g&&g(a,h.childNodes,void 0,e)}for(var h,i,j,k,l,m,n,o=[],p=0;p<a.length;p++)h=new K,i=W(a[p],[],h,0===p?d:void 0,e),j=i.length?aa(i,a[p],h,b,c,null,[],[],f):null,j&&j.scope&&S.$$addScopeClass(h.$$element),l=j&&j.terminal||!(k=a[p].childNodes)||!k.length?null:U(k,j?(j.transcludeOnThisElement||!j.templateOnThisElement)&&j.transclude:b),(j||l)&&(o.push(p,j,l),m=!0,n=n||j),f=null;return m?g:null}function V(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e=d.$$slots=pa();for(var f in b.$$slots)b.$$slots[f]?e[f]=V(a,b.$$slots[f],c):e[f]=null;return d}function W(a,b,c,d,e){var f,g,h,i=a.nodeType,j=c.$attr;switch(i){case ne:g=L(a),ea(b,rb(g),"E",d,e);for(var k,l,m,n,o,p,q=a.attributes,r=0,s=q&&q.length;s>r;r++){var w=!1,x=!1;k=q[r],l=k.name,o=ee(k.value),n=rb(l),p=Ha.test(n),p&&(l=l.replace(cf,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=n.match(Ia);y&&fa(y[1])&&(w=l,x=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),m=rb(l.toLowerCase()),j[m]=l,(p||!c.hasOwnProperty(m))&&(c[m]=o,Ua(a,m)&&(c[m]=!0)),qa(a,b,o,m,p),ea(b,m,"A",d,e,w,x)}if("input"===g&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off"),!Aa)break;if(h=a.className,t(h)&&(h=h.animVal),v(h)&&""!==h)for(;f=u.exec(h);)m=rb(f[2]),ea(b,m,"C",d,e)&&(c[m]=ee(f[3])),h=h.substr(f.index+f[0].length);break;case pe:if(11===Rd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===pe;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);ma(b,a.nodeValue);break;case qe:if(!za)break;X(a,b,c,d,e)}return b.sort(ja),b}function X(a,b,c,d,e){try{var f=q.exec(a.nodeValue);if(f){var g=rb(f[1]);ea(b,g,"M",d,e)&&(c[g]=ee(f[2]))}}catch(h){}}function Z(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw af("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType===ne&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Sd(d)}function $(a,b,c){return function(d,e,f,g,h){return e=Z(e[0],b,c),a(d,e,f,g,h)}}function _(a,b,c,d,e,f){var g;return a?S(b,c,d,e,f):function(){return g||(g=S(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function aa(a,b,c,f,g,h,i,k,l){function m(a,b,c,d){a&&(c&&(a=$(a,c,d)),a.require=o.require,a.directiveName=p,(z===o||o.$$isolateScope)&&(a=sa(a,{isolateScope:!0})),i.push(a)),b&&(c&&(b=$(b,c,d)),b.require=o.require,b.directiveName=p,(z===o||o.$$isolateScope)&&(b=sa(b,{isolateScope:!0})),k.push(b))}function n(a,f,g,h,l){function m(a,b,c,d){var e;if(B(a)||(d=c,c=b,b=a,a=void 0),F&&(e=u),c||(c=F?C.parent():C),!d)return l(a,b,e,c,M);var f=l.$$slots[d];if(f)return f(a,b,e,c,M);if(r(f))throw af("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,Y(C))}var n,o,p,q,s,u,v,C,D,E;b===g?(D=c,C=c.$$element):(C=Sd(g),D=new K(C,c)),s=f,z?q=f.$new(!0):w&&(s=f.$parent),l&&(v=m,v.$$boundTransclude=l,v.isSlotFilled=function(a){return!!l.$$slots[a]}),x&&(u=ca(C,D,v,x,q,f,z)),z&&(S.$$addScopeInfo(C,q,!0,!(A&&(A===z||A===z.$$originalDirective))),S.$$addScopeClass(C,!0),q.$$isolateBindings=z.$$isolateBindings,E=ua(f,D,q,q.$$isolateBindings,z),E.removeWatches&&q.$on("$destroy",E.removeWatches));for(var G in u){var H=x[G],I=u[G],J=H.$$bindings.bindToController;I.identifier&&J?I.bindingInfo=ua(s,D,I.instance,J,H):I.bindingInfo={};var L=I();L!==I.instance&&(I.instance=L,C.data("$"+H.name+"Controller",L),I.bindingInfo.removeWatches&&I.bindingInfo.removeWatches(),I.bindingInfo=ua(s,D,I.instance,J,H))}for(d(x,function(a,b){var c=a.require;a.bindToController&&!ce(c)&&t(c)&&j(u[b].instance,ba(b,c,C,u))}),d(u,function(a){var b=a.instance;if(y(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(c){e(c)}if(y(b.$onInit))try{b.$onInit()}catch(c){e(c)}y(b.$doCheck)&&(s.$watch(function(){b.$doCheck()}),b.$doCheck()),y(b.$onDestroy)&&s.$on("$destroy",function(){b.$onDestroy()})}),n=0,o=i.length;o>n;n++)p=i[n],ta(p,p.isolateScope?q:f,C,D,p.require&&ba(p.directiveName,p.require,C,u),v);var M=f;for(z&&(z.template||null===z.templateUrl)&&(M=q),a&&a(M,g.childNodes,void 0,l),n=k.length-1;n>=0;n--)p=k[n],ta(p,p.isolateScope?q:f,C,D,p.require&&ba(p.directiveName,p.require,C,u),v);d(u,function(a){var b=a.instance;y(b.$postLink)&&b.$postLink()})}l=l||{};for(var o,p,q,s,u,v=-Number.MAX_VALUE,w=l.newScopeDirective,x=l.controllerDirectives,z=l.newIsolateScopeDirective,A=l.templateDirective,C=l.nonTlbTranscludeDirective,D=!1,E=!1,F=l.hasElementTranscludeDirective,G=c.$$element=Sd(b),H=h,I=f,J=!1,M=!1,N=0,O=a.length;O>N;N++){o=a[N];var P=o.$$start,T=o.$$end;if(P&&(G=Z(b,P,T)),q=void 0,v>o.priority)break;if(u=o.scope,u&&(o.templateUrl||(t(u)?(la("new/isolated scope",z||w,o,G),z=o):la("new/isolated scope",z,o,G)),w=w||o),p=o.name,!J&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var U,V=N+1;U=a[V++];)if(U.transclude&&!U.$$tlb||U.replace&&(U.templateUrl||U.template)){M=!0;break}J=!0}if(!o.templateUrl&&o.controller&&(u=o.controller,x=x||pa(),la("'"+p+"' controller",x[p],o,G),x[p]=o),u=o.transclude)if(D=!0,o.$$tlb||(la("transclusion",C,o,G),C=o),"element"===u)F=!0,v=o.priority,q=G,G=c.$$element=Sd(S.$$createComment(p,c[p])),b=G[0],ra(g,Q(q),b),q[0].$$parentNode=q[0].parentNode,I=_(M,q,f,v,H&&H.name,{nonTlbTranscludeDirective:C});else{var X=pa();if(q=Sd(Fa(b)).contents(),t(u)){q=[];var aa=pa(),ea=pa();d(u,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,aa[a]=b,X[b]=null,ea[b]=c}),d(G.contents(),function(a){var b=aa[rb(L(a))];b?(ea[b]=!0,X[b]=X[b]||[],X[b].push(a)):q.push(a)}),d(ea,function(a,b){if(!a)throw af("reqslot","Required transclusion slot `{0}` was not filled.",b)});for(var fa in X)X[fa]&&(X[fa]=_(M,X[fa],f))}G.empty(),I=_(M,q,f,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),I.$$slots=X}if(o.template)if(E=!0,la("template",A,o,G),A=o,u=y(o.template)?o.template(G,c):o.template,u=Ga(u),o.replace){if(H=o,q=xa(u)?[]:tb(na(o.templateNamespace,ee(u))),b=q[0],1!==q.length||b.nodeType!==ne)throw af("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");ra(g,G,b);var ia={$attr:{}},ja=W(b,[],ia),ka=a.splice(N+1,a.length-(N+1));(z||w)&&da(ja,z,w),a=a.concat(ja).concat(ka),ga(c,ia),O=a.length}else G.html(u);if(o.templateUrl)E=!0,la("template",A,o,G),A=o,o.replace&&(H=o),n=ha(a.splice(N,a.length-N),G,c,g,D&&I,i,k,{controllerDirectives:x,newScopeDirective:w!==o&&w,newIsolateScopeDirective:z,templateDirective:A,nonTlbTranscludeDirective:C}),O=a.length;else if(o.compile)try{s=o.compile(G,c,I);var ma=o.$$originalDirective||o;y(s)?m(null,R(ma,s),P,T):s&&m(R(ma,s.pre),R(ma,s.post),P,T)}catch(oa){e(oa,Y(G))}o.terminal&&(n.terminal=!0,v=Math.max(v,o.priority))}return n.scope=w&&w.scope===!0,n.transcludeOnThisElement=D,n.templateOnThisElement=E,n.transclude=I,l.hasElementTranscludeDirective=F,n}function ba(a,b,c,e){var f;if(v(b)){var g=b.match(x),h=b.substring(g[0].length),i=g[1]||g[3],j="?"===g[2];if("^^"===i?c=c.parent():(f=e&&e[h],f=f&&f.instance),!f){var k="$"+h+"Controller";f=i?c.inheritedData(k):c.data(k)}if(!f&&!j)throw af("ctreq","Controller '{0}', required by directive '{1}', can't be found!",h,a)}else if(ce(b)){f=[];for(var l=0,m=b.length;m>l;l++)f[l]=ba(a,b[l],c,e)}else t(b)&&(f={},d(b,function(b,d){f[d]=ba(a,b,c,e)}));return f||null}function ca(a,b,c,d,e,f,g){var h=pa();for(var j in d){var k=d[j],l={$scope:k===g||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"===m&&(m=b[k.name]);var n=i(m,l,!0,k.controllerAs);h[k.name]=n,a.data("$"+k.name+"Controller",n.instance)}return h}function da(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d]=m(a[d],{$$isolateScope:b,$$newScope:c})}function ea(a,c,d,f,h,i,j){if(c===h)return null;var n=null;if(k.hasOwnProperty(c))for(var o,p=b.get(c+l),q=0,s=p.length;s>q;q++)try{if(o=p[q],(r(f)||f>o.priority)&&-1!==o.restrict.indexOf(d)){if(i&&(o=m(o,{$$start:i,$$end:j})),!o.$$bindings){var u=o.$$bindings=g(o,o.name);t(u.isolateScope)&&(o.$$isolateBindings=u.isolateScope)}a.push(o),n=o}}catch(v){e(v)}return n}function fa(a){if(k.hasOwnProperty(a))for(var c,d=b.get(a+l),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function ga(a,b){var c=b.$attr,e=a.$attr;d(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),d(b,function(b,d){a.hasOwnProperty(d)||"$"===d.charAt(0)||(a[d]=b,"class"!==d&&"style"!==d&&(e[d]=c[d]))})}function ha(a,b,c,e,g,h,i,j){var k,l,n=[],o=b[0],p=a.shift(),q=m(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=y(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),f(r).then(function(f){var m,u,v,w;if(f=Ga(f),p.replace){if(v=xa(f)?[]:tb(na(s,ee(f))),m=v[0],1!==v.length||m.nodeType!==ne)throw af("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},ra(e,b,m);var x=W(m,[],u);t(p.scope)&&da(x,!0),a=x.concat(a),ga(c,u)}else m=o,b.html(f);for(a.unshift(q),k=aa(a,m,c,g,b,p,h,i,j),d(e,function(a,c){a===m&&(e[c]=b[0])}),l=U(b[0].childNodes,g);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Fa(m)),ra(A,Sd(z),C),P(Sd(C),D)}w=k.transcludeOnThisElement?V(y,k.transclude,B):B,k(l,y,C,e,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(k.transcludeOnThisElement&&(f=V(b,k.transclude,e)),k(l,b,c,d,f)))}}function ja(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function la(a,b,c,d){function e(a){
return a?" (module: "+a+")":""}if(b)throw af("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Y(d))}function ma(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent(),c=!!b.length;return c&&S.$$addBindingClass(b),function(a,b){var e=b.parent();c||S.$$addBindingClass(e),S.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){b[0].nodeValue=a})}}})}function na(b,c){switch(b=Nd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function oa(a,b){if("srcdoc"===b)return A.HTML;var c=L(a);if("src"===b||"ngSrc"===b){if(-1===["img","video","audio","source","track"].indexOf(c))return A.RESOURCE_URL}else if("xlinkHref"===b||"form"===c&&"action"===b)return A.RESOURCE_URL}function qa(a,b,d,e,f){var g=oa(a,e);f=w[e]||f;var h=c(d,!0,g,f);if(h){if("multiple"===e&&"select"===L(a))throw af("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Y(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers=pa());if(z.test(e))throw af("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==d&&(h=k&&c(k,!0,g,f),d=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!==b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ra(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;f>e;e++)if(b[e]===g){b[e++]=d;for(var j=e,k=j+h-1,l=b.length;l>j;j++,k++)l>k?b[j]=b[k]:delete b[j];b.length-=h-1,b.context===g&&(b.context=d);break}i&&i.replaceChild(d,g);var m=a.document.createDocumentFragment();for(e=0;h>e;e++)m.appendChild(c[e]);for(Sd.hasData(g)&&(Sd.data(d,Sd.data(g)),Sd(g).off("$destroy")),Sd.cleanData(m.querySelectorAll("*")),e=1;h>e;e++)delete c[e];c[0]=d,c.length=1}function sa(a,b){return j(function(){return a.apply(null,arguments)},a,b)}function ta(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,Y(c))}}function ua(a,b,e,f,g){function i(b,c,d){y(e.$onChanges)&&c!==d&&(va||(a.$$postDigest(J),va=[]),k||(k={},va.push(j)),k[b]&&(d=k[b].previousValue),k[b]=new qb(d,c))}function j(){e.$onChanges(k),k=void 0}var k,l=[],m={};return d(f,function(d,f){var j,k,o,p,q,r=d.attrName,s=d.optional,t=d.mode;switch(t){case"@":s||Md.call(b,r)||(e[f]=b[r]=void 0),b.$observe(r,function(a){if(v(a)||F(a)){var b=e[f];i(f,a,b),e[f]=a}}),b.$$observers[r].$$scope=a,j=b[r],v(j)?e[f]=c(j)(a):F(j)&&(e[f]=j),m[f]=new qb(bf,e[f]);break;case"=":if(!Md.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),p=k.literal?O:function(a,b){return a===b||a!==a&&b!==b},o=k.assign||function(){throw j=e[f]=k(a),af("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",b[r],r,g.name)},j=e[f]=k(a);var u=function(b){return p(b,e[f])||(p(b,j)?o(a,b=e[f]):e[f]=b),j=b};u.$stateful=!0,q=d.collection?a.$watchCollection(b[r],u):a.$watch(h(b[r],u),null,k.literal),l.push(q);break;case"<":if(!Md.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]);var w=e[f]=k(a);m[f]=new qb(bf,e[f]),q=a.$watch(k,function(a,b){if(b===a){if(b===w)return;b=w}i(f,a,b),e[f]=a},k.literal),l.push(q);break;case"&":if(k=b.hasOwnProperty(r)?h(b[r]):n,k===n&&s)break;e[f]=function(b){return k(a,b)}}}),{initialChanges:m,removeWatches:l.length&&function(){for(var a=0,b=l.length;b>a;++a)l[a]()}}}var va,wa=/^\w/,ya=a.document.createElement("div"),za=E,Aa=G,Ba=D;K.prototype={$normalize:rb,$addClass:function(a){a&&a.length>0&&H.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&H.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=sb(a,b);c&&c.length&&H.addClass(this.$$element,c);var d=sb(b,a);d&&d.length&&H.removeClass(this.$$element,d)},$set:function(a,b,c,f){var g,h=this.$$element[0],i=Ua(h,a),j=Va(a),k=a;if(i?(this.$$element.prop(a,b),f=i):j&&(this[j]=b,k=j),this[a]=b,f?this.$attr[a]=f:(f=this.$attr[a],f||(this.$attr[a]=f=ia(a,"-"))),g=L(this.$$element),"a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=I(b,"src"===a);else if("img"===g&&"srcset"===a&&s(b)){for(var l="",m=ee(b),n=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(m)?n:/(,)/,p=m.split(o),q=Math.floor(p.length/2),t=0;q>t;t++){var u=2*t;l+=I(ee(p[u]),!0),l+=" "+ee(p[u+1])}var v=ee(p[2*t]).split(/\s/);l+=I(ee(v[0]),!0),2===v.length&&(l+=" "+ee(v[1])),this[a]=b=l}c!==!1&&(null===b||r(b)?this.$$element.removeAttr(f):wa.test(f)?this.$$element.attr(f,b):N(this.$$element[0],f,b));var w=this.$$observers;w&&d(w[k],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=pa()),e=d[a]||(d[a]=[]);return e.push(b),p.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||r(c[a])||b(c[a])}),function(){M(e,b)}}};var Ca=c.startSymbol(),Ea=c.endSymbol(),Ga="{{"===Ca&&"}}"===Ea?o:function(a){return a.replace(/\{\{/g,Ca).replace(/}}/g,Ea)},Ha=/^ngAttr[A-Z]/,Ia=/^(.+)Start$/;return S.$$addBindingInfo=C?function(a,b){var c=a.data("$binding")||[];ce(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:n,S.$$addBindingClass=C?function(a){P(a,"ng-binding")}:n,S.$$addScopeInfo=C?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:n,S.$$addScopeClass=C?function(a,b){P(a,b?"ng-isolate-scope":"ng-scope")}:n,S.$$createComment=function(b,c){var d="";return C&&(d=" "+(b||"")+": ",c&&(d+=c+" ")),a.document.createComment(d)},S}]}function qb(a,b){this.previousValue=a,this.currentValue=b}function rb(a){return wa(a.replace(cf,""))}function sb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g===e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function tb(a){a=Sd(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===qe&&Wd.call(a,b,1)}return a}function ub(a,b){if(b&&v(b))return b;if(v(a)){var c=ef.exec(a);if(c)return c[3]}}function vb(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){ma(b,"controller"),t(b)?j(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!t(a.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);a.$scope[c]=d}return function(b,g,h,i){var k,l,m,n;if(h=h===!0,i&&v(i)&&(n=i),v(b)){if(l=b.match(ef),!l)throw df("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",b);m=l[1],n=n||l[3],b=a.hasOwnProperty(m)?a[m]:na(g.$scope,m,!0)||(c?na(e,m,!0):void 0),la(b,m,!0)}if(h){var o=(ce(b)?b[b.length-1]:b).prototype;return k=Object.create(o||null),n&&f(g,n,k,m||b.name),j(function(){var a=d.invoke(b,k,g,m);return a!==k&&(t(a)||y(a))&&(k=a,n&&f(g,n,k,m||b.name)),k},{instance:k,identifier:n})}return k=d.instantiate(b,g,m),n&&f(g,n,k,m||b.name),k}}]}function wb(){this.$get=["$window",function(a){return Sd(a.document)}]}function xb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function yb(a){return t(a)?x(a)?a.toISOString():T(a):a}function zb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return e(a,function(a,c){null===a||r(a)||(ce(a)?d(a,function(a){b.push(ba(c)+"="+ba(yb(a)))}):b.push(ba(c)+"="+ba(yb(a))))}),b.join("&")}}}function Ab(){this.$get=function(){return function(a){function b(a,f,g){null===a||r(a)||(ce(a)?d(a,function(a,c){b(a,f+"["+(t(a)?c:"")+"]")}):t(a)&&!x(a)?e(a,function(a,c){b(a,f+(g?"":"[")+c+(g?"":"]"))}):c.push(ba(f)+"="+ba(yb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function Bb(a,b){if(v(a)){var c=a.replace(lf,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(gf)||Cb(c))&&(a=U(c))}}return a}function Cb(a){var b=a.match(jf);return b&&kf[b[0]].test(a)}function Db(a){function b(a,b){a&&(e[a]=e[a]?e[a]+", "+b:b)}var c,e=pa();return v(a)?d(a.split("\n"),function(a){c=a.indexOf(":"),b(Nd(ee(a.substr(0,c))),ee(a.substr(c+1)))}):t(a)&&d(a,function(a,c){b(Nd(c),ee(a))}),e}function Eb(a){var b;return function(c){if(b||(b=Db(a)),c){var d=b[Nd(c)];return void 0===d&&(d=null),d}return b}}function Fb(a,b,c,e){return y(e)?e(a,b,c):(d(e,function(d){a=d(a,b,c)}),a)}function Gb(a){return a>=200&&300>a}function Hb(){var a=this.defaults={transformResponse:[Bb],transformRequest:[function(a){return!t(a)||C(a)||E(a)||D(a)?a:T(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ra(hf),put:ra(hf),patch:ra(hf)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},c=!1;this.useApplyAsync=function(a){return s(a)?(c=!!a,this):c};var e=!0;this.useLegacyPromiseExtensions=function(a){return s(a)?(e=!!a,this):e};var f=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,k,l,m){function n(c){function f(a,b){for(var c=0,d=b.length;d>c;){var e=b[c++],f=b[c++];a=a.then(e,f)}return b.length=0,a}function g(a,b){var c,e={};return d(a,function(a,d){y(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a}),e}function h(b){var c,d,e,f=a.headers,h=j({},b.headers);f=j({},f.common,f[Nd(b.method)]);a:for(c in f){d=Nd(c);for(e in h)if(Nd(e)===d)continue a;h[c]=f[c]}return g(h,ra(b))}function i(b){var c=b.headers,e=Fb(b.data,Eb(c),void 0,b.transformRequest);return r(e)&&d(c,function(a,b){"content-type"===Nd(b)&&delete c[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,e).then(k,k)}function k(a){var b=j({},a);return b.data=Fb(a.data,a.headers,a.status,n.transformResponse),Gb(a.status)?b:l.reject(b)}if(!t(c))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",c);if(!v(c.url))throw b("$http")("badreq","Http request configuration url must be a string.  Received: {0}",c.url);var n=j({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},c);n.headers=h(c),n.method=Od(n.method),n.paramSerializer=v(n.paramSerializer)?m.get(n.paramSerializer):n.paramSerializer;var o=[],p=[],s=l.when(n);return d(x,function(a){(a.request||a.requestError)&&o.unshift(a.request,a.requestError),(a.response||a.responseError)&&p.push(a.response,a.responseError)}),s=f(s,o),s=s.then(i),s=f(s,p),e?(s.success=function(a){return la(a,"fn"),s.then(function(b){a(b.data,b.status,b.headers,n)}),s},s.error=function(a){return la(a,"fn"),s.then(null,function(b){a(b.data,b.status,b.headers,n)}),s}):(s.success=nf("success"),s.error=nf("error")),s}function o(a){d(arguments,function(a){n[a]=function(b,c){return n(j({},c||{},{method:a,url:b}))}})}function p(a){d(arguments,function(a){n[a]=function(b,c,d){return n(j({},d||{},{method:a,url:b,data:c}))}})}function q(b,e){function f(a){if(a){var b={};return d(a,function(a,d){b[d]=function(b){function d(){a(b)}c?k.$applyAsync(d):k.$$phase?d():k.$apply(d)}}),b}}function i(a,b,d,e){function f(){j(b,a,d,e)}p&&(Gb(a)?p.put(z,[a,b,Db(d),e]):p.remove(z)),c?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function j(a,c,d,e){c=c>=-1?c:0,(Gb(c)?v.resolve:v.reject)({data:a,status:c,headers:Eb(d),config:b,statusText:e})}function m(a){j(a.data,a.status,ra(a.headers()),a.statusText)}function o(){var a=n.pendingRequests.indexOf(b);-1!==a&&n.pendingRequests.splice(a,1)}var p,q,v=l.defer(),x=v.promise,y=b.headers,z=u(b.url,b.paramSerializer(b.params));if(n.pendingRequests.push(b),x.then(o,o),!b.cache&&!a.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(p=t(b.cache)?b.cache:t(a.cache)?a.cache:w),p&&(q=p.get(z),s(q)?G(q)?q.then(m,m):ce(q)?j(q[1],q[0],ra(q[2]),q[3]):j(q,200,{},"OK"):p.put(z,x)),r(q)){var A=Jc(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0;A&&(y[b.xsrfHeaderName||a.xsrfHeaderName]=A),g(b.method,z,e,i,y,b.timeout,b.withCredentials,b.responseType,f(b.eventHandlers),f(b.uploadEventHandlers))}return x}function u(a,b){return b.length>0&&(a+=(-1===a.indexOf("?")?"?":"&")+b),a}var w=i("$http");a.paramSerializer=v(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var x=[];return d(f,function(a){x.unshift(v(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Ib(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function Jb(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,c,d){return Kb(a,d,a.defer,b,c[0])}]}function Kb(a,b,c,e,f){function g(a,b,c){a=a.replace("JSON_CALLBACK",b);var d=f.createElement("script"),g=null;return d.type="text/javascript",d.src=a,d.async=!0,g=function(a){xe(d,"load",g),xe(d,"error",g),f.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e.wasCalled(b)||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},we(d,"load",g),we(d,"error",g),f.body.appendChild(d),g}return function(f,h,i,j,k,l,m,o,p,q){function t(){w&&w(),x&&x.abort()}function u(b,d,e,f,g){s(A)&&c.cancel(A),w=x=null,b(d,e,f,g),a.$$completeOutstandingRequest(n)}if(a.$$incOutstandingRequestCount(),h=h||a.url(),"jsonp"===Nd(f))var v=e.createCallback(h),w=g(h,v,function(a,b){var c=200===a&&e.getResponse(v);u(j,a,c,"",b),e.removeCallback(v)});else{var x=b(f,h);x.open(f,h,!0),d(k,function(a,b){s(a)&&x.setRequestHeader(b,a)}),x.onload=function(){var a=x.statusText||"",b="response"in x?x.response:x.responseText,c=1223===x.status?204:x.status;0===c&&(c=b?200:"file"===Ic(h).protocol?404:0),u(j,c,b,x.getAllResponseHeaders(),a)};var y=function(){u(j,-1,null,null,"")};if(x.onerror=y,x.onabort=y,x.ontimeout=y,d(p,function(a,b){x.addEventListener(b,a)}),d(q,function(a,b){x.upload.addEventListener(b,a)}),m&&(x.withCredentials=!0),o)try{x.responseType=o}catch(z){if("json"!==o)throw z}x.send(r(i)?null:i)}if(l>0)var A=c(t,l);else G(l)&&l.then(t)}}function Lb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(o,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=T(a)}return a}function i(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function k(f,k,n,o){function q(a){try{return a=G(a),o&&!s(a)?a:h(a)}catch(b){d(of.interr(f,b))}}if(!f.length||-1===f.indexOf(a)){var t;if(!k){var u=g(f);t=p(u),t.exp=f,t.expressions=[],t.$$watchDelegate=i}return t}o=!!o;for(var v,w,x,z=0,A=[],B=[],C=f.length,D=[],E=[];C>z;){if(-1===(v=f.indexOf(a,z))||-1===(w=f.indexOf(b,v+l))){z!==C&&D.push(g(f.substring(z)));break}z!==v&&D.push(g(f.substring(z,v))),x=f.substring(v+l,w),A.push(x),B.push(c(x,q)),z=w+m,E.push(D.length),D.push("")}if(n&&D.length>1&&of.throwNoconcat(f),!k||A.length){var F=function(a){for(var b=0,c=A.length;c>b;b++){if(o&&r(a[b]))return;D[E[b]]=a[b]}return D.join("")},G=function(a){return n?e.getTrusted(n,a):e.valueOf(a)};return j(function(a){var b=0,c=A.length,e=new Array(c);try{for(;c>b;b++)e[b]=B[b](a);return F(e)}catch(g){d(of.interr(f,g))}},{exp:f,expressions:A,$$watchDelegate:function(a,b){var c;return a.$watchGroup(B,function(d,e){var f=F(d);y(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),o=new RegExp(b.replace(/./g,f),"g");return k.startSymbol=function(){return a},k.endSymbol=function(){return b},k}]}function Mb(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=arguments.length>4,m=l?Q(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=s(j)&&!j,r=(q?d:c).defer(),t=r.promise;return i=s(i)?i:0,t.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),r.notify(p++),i>0&&p>=i&&(r.resolve(p),o(t.$$intervalId),delete g[t.$$intervalId]),q||a.$apply()},h),g[t.$$intervalId]=r,t}var g={};return f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1},f}]}function Nb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=aa(b[c]);return b.join("/")}function Ob(a,b){var c=Ic(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=l(c.port)||rf[c.protocol]||null}function Pb(a,b){if(tf.test(a))throw sf("badpath",'Invalid url "{0}".',a);var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Ic(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=$(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Qb(a,b){return 0===a.lastIndexOf(b,0)}function Rb(a,b){return Qb(b,a)?b.substr(a.length):void 0}function Sb(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function Tb(a){return a.replace(/(#.+)|#$/,"$1")}function Ub(a){return a.substr(0,Sb(a).lastIndexOf("/")+1)}function Vb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Wb(a,b,c){this.$$html5=!0,c=c||"",Ob(a,this),this.$$parse=function(a){var c=Rb(b,a);if(!v(c))throw sf("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Pb(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=_(this.$$search),c=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Nb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g,h;return s(f=Rb(a,d))?(g=f,h=c&&s(f=Rb(c,f))?b+(Rb("/",f)||f):a+g):s(f=Rb(b,d))?h=b+f:b===d+"/"&&(h=b),h&&this.$$parse(h),!!h}}function Xb(a,b,c){Ob(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return Qb(b,c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Rb(a,d)||Rb(b,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=Rb(c,g),r(f)&&(f=g)),Pb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=_(this.$$search),d=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Nb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return Sb(a)===Sb(b)?(this.$$parse(b),!0):!1}}function Yb(a,b,c){this.$$html5=!0,Xb.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a===Sb(d)?f=d:(g=Rb(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=_(this.$$search),d=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Nb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url}}function Zb(a){return function(){return this[a]}}function $b(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function _b(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return F(a)?(b.enabled=a,this):t(a)?(F(a.enabled)&&(b.enabled=a.enabled),F(a.requireBase)&&(b.requireBase=a.requireBase),F(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw sf("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Vb(n)+(m||"/"),k=e.history?Wb:Yb}else l=Sb(n),k=Xb;var o=Ub(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var e=Sd(a.target);"a"!==L(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Ic(h.animVal).href),p.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!==d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Tb(j.absUrl())!==Tb(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return r(Rb(o,a))?void(g.location.href=a):(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=Tb(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest()))}),c.$watch(function(){var a=Tb(d.url()),b=Tb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function ac(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function e(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=c.console||{},f=b[a]||b.log||n,g=!1;try{g=!!f.apply}catch(h){}return g?function(){var a=[];return d(arguments,function(b){a.push(e(b))}),f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function bc(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw vf("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function cc(a){return a+""}function dc(a,b){if(a){if(a.constructor===a)throw vf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw vf("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw vf("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw vf("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function ec(a,b){if(a){if(a.constructor===a)throw vf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===If||a===Jf||a===Kf)throw vf("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function fc(a,b){if(a&&(a===wf||a===xf||a===yf||a===zf||a===Af||a===Bf||a===Cf||a===Df||a===Ef||a===Ff||a===Gf||a===Hf))throw vf("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",b)}function gc(a,b){return"undefined"!=typeof a?a:b}function hc(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function ic(a,b){var c=a(b);return!c.$stateful}function jc(a,b){var c,e,f;switch(a.type){case Pf.Program:c=!0,d(a.body,function(a){jc(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case Pf.Literal:a.constant=!0,a.toWatch=[];break;case Pf.UnaryExpression:jc(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case Pf.BinaryExpression:jc(a.left,b),jc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case Pf.LogicalExpression:jc(a.left,b),jc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case Pf.ConditionalExpression:jc(a.test,b),jc(a.alternate,b),jc(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case Pf.Identifier:a.constant=!1,a.toWatch=[a];break;case Pf.MemberExpression:jc(a.object,b),a.computed&&jc(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case Pf.CallExpression:f=a.filter?ic(b,a.callee.name):!1,c=f,e=[],d(a.arguments,function(a){jc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=f?e:[a];break;case Pf.AssignmentExpression:jc(a.left,b),jc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case Pf.ArrayExpression:c=!0,e=[],d(a.elements,function(a){jc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case Pf.ObjectExpression:c=!0,e=[],d(a.properties,function(a){jc(a.value,b),c=c&&a.value.constant&&!a.computed,a.value.constant||e.push.apply(e,a.value.toWatch)}),a.constant=c,a.toWatch=e;break;case Pf.ThisExpression:a.constant=!1,a.toWatch=[];break;case Pf.LocalsExpression:a.constant=!1,a.toWatch=[]}}function kc(a){if(1===a.length){var b=a[0].expression,c=b.toWatch;return 1!==c.length?c:c[0]!==b?c:void 0}}function lc(a){return a.type===Pf.Identifier||a.type===Pf.MemberExpression}function mc(a){return 1===a.body.length&&lc(a.body[0].expression)?{type:Pf.AssignmentExpression,left:a.body[0].expression,right:{type:Pf.NGValueParameter},operator:"="}:void 0}function nc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===Pf.Literal||a.body[0].expression.type===Pf.ArrayExpression||a.body[0].expression.type===Pf.ObjectExpression)}function oc(a){return a.constant}function pc(a,b){this.astBuilder=a,this.$filter=b}function qc(a,b){this.astBuilder=a,this.$filter=b}function rc(a){return"constructor"===a}function sc(a){return y(a.valueOf)?a.valueOf():Lf.call(a)}function tc(){var a,b,c=pa(),e=pa(),f={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(a,b){f[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(g){function h(a,b,d){var f,h,j;switch(d=d||u,typeof a){case"string":a=a.trim(),j=a;var q=d?e:c;if(f=q[j],!f){":"===a.charAt(0)&&":"===a.charAt(1)&&(h=!0,a=a.substring(2));var s=d?t:r,v=new Of(s),w=new Qf(v,g,s);f=w.parse(a),f.constant?f.$$watchDelegate=o:h?f.$$watchDelegate=f.literal?m:l:f.inputs&&(f.$$watchDelegate=k),d&&(f=i(f)),q[j]=f}return p(f,b);case"function":return p(a,b);default:return p(n,b)}}function i(a){function b(b,c,d,e){var f=u;u=!0;try{return a(b,c,d,e)}finally{u=f}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate,b.assign=i(a.assign),b.constant=a.constant,b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=i(a.inputs[c]);return b.inputs=a.inputs,b}function j(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=sc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function k(a,b,c,d,e){var f,g=d.inputs;if(1===g.length){var h=j;return g=g[0],a.$watch(function(a){var b=g(a);return j(b,h)||(f=d(a,void 0,void 0,[b]),h=b&&sc(b)),f},b,c,e)}for(var i=[],k=[],l=0,m=g.length;m>l;l++)i[l]=j,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;e>c;c++){var h=g[c](a);(b||(b=!j(h,i[c])))&&(k[c]=h,i[c]=h&&sc(h))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,y(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function m(a,b,c,e){function f(a){var b=!0;return d(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return e(a)},function(a,c,d){h=a,y(b)&&b.call(this,a,c,d),f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function o(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==m&&c!==l,f=e?function(c,e,f,g){var h=d&&g?g[0]:a(c,e,f,g);return b(h,c,e)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return s(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==k?f.$$watchDelegate=a.$$watchDelegate:b.$stateful||(f.$$watchDelegate=k,d=!a.inputs,f.inputs=a.inputs?a.inputs:[a]),f}var q=ge().noUnsafeEval,r={csp:q,expensiveChecks:!1,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},t={csp:q,expensiveChecks:!0,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},u=!1;return h.$$runningExpensiveChecks=function(){return u},h}]}function uc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return wc(function(b){a.$evalAsync(b)},b)}]}function vc(){this.$get=["$browser","$exceptionHandler",function(a,b){return wc(function(b){a.defer(b)},b)}]}function wc(a,c){function e(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function g(a){var b,d,e;e=a.pending,a.processScheduled=!1,a.pending=void 0;for(var f=0,g=e.length;g>f;++f){d=e[f][0],b=e[f][a.status];try{y(b)?d.resolve(b(a.value)):1===a.status?d.resolve(a.value):d.reject(a.value)}catch(h){d.reject(h),c(h)}}}function h(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){g(b)}))}function i(){this.promise=new e}function k(a){var b=new i,c=0,e=ce(a)?[]:{};return d(a,function(a,d){c++,s(a).then(function(a){e.hasOwnProperty(d)||(e[d]=a,--c||b.resolve(e))},function(a){e.hasOwnProperty(d)||b.reject(a)})}),0===c&&b.resolve(e),b.promise}function l(a){var b=n();return d(a,function(a){s(a).then(b.resolve,b.reject)}),b.promise}var m=b("$q",TypeError),n=function(){var a=new i;return a.resolve=f(a,a.resolve),a.reject=f(a,a.reject),a.notify=f(a,a.notify),a};j(e.prototype,{then:function(a,b,c){if(r(a)&&r(b)&&r(c))return this;var d=new i;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&h(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}}),j(i.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){i||(i=!0,g.$$resolve(a))}function d(a){i||(i=!0,g.$$reject(a))}var e,g=this,i=!1;try{(t(a)||y(a))&&(e=a&&a.then),y(e)?(this.promise.$$state.status=-1,e.call(a,b,d,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,h(this.promise.$$state))}catch(j){d(j),c(j)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,h(this.promise.$$state)},notify:function(b){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(y(a)?a(b):b)}catch(h){c(h)}}})}});var o=function(a){var b=new i;return b.reject(a),b.promise},p=function(a,b){var c=new i;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{y(c)&&(d=c())}catch(e){return p(e,!1)}return G(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},s=function(a,b,c,d){var e=new i;return e.resolve(a),e.promise.then(b,c,d)},u=s,v=function(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!y(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);var d=new i;return a(b,c),d.promise};return v.prototype=e.prototype,v.defer=n,v.reject=o,v.when=s,v.resolve=u,v.all=k,v.race=l,v}function xc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function yc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=g(),this.$$ChildScope=null}return b.prototype=a,b}var e=10,f=b("$rootScope"),h=null,i=null;this.digestTtl=function(a){
return arguments.length&&(e=a),e},this.$get=["$exceptionHandler","$parse","$browser",function(b,j,k){function l(a){a.currentScope.$$destroyed=!0}function m(a){9===Rd&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function o(){this.$id=g(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(z.$$phase)throw f("inprog","{0} already in progress",z.$$phase);z.$$phase=a}function q(){z.$$phase=null}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function w(){for(;C.length;)try{C.shift()()}catch(a){b(a)}i=null}function x(){null===i&&(i=k.defer(function(){z.$apply(w)}))}o.prototype={constructor:o,$new:function(b,c){var d;return c=c||this,b?(d=new o,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!==this)&&d.$on("$destroy",l),d},$watch:function(a,b,c,d){var e=j(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,g=f.$$watchers,i={fn:b,last:v,get:e,exp:d||a,eq:!!c};return h=null,y(b)||(i.fn=n),g||(g=f.$$watchers=[]),g.unshift(i),s(this,1),function(){M(g,i)>=0&&s(f,-1),h=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(f,f,h)):b(f,e,h)}var e=new Array(a.length),f=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(f,f,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,d){f[0]=a,e[0]=c,b(f,a===c?f:e,d)}):(d(a,function(a,b){var d=h.$watch(a,function(a,d){f[b]=a,e[b]=d,i||(i=!0,h.$evalAsync(c))});g.push(d)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function d(a){f=a;var b,d,e,h,i;if(!r(f)){if(t(f))if(c(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],e=i!==i&&h!==h,e||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(d in f)Md.call(f,d)&&(b++,h=f[d],i=g[d],d in g?(e=i!==i&&h!==h,e||i===h||(l++,g[d]=h)):(q++,g[d]=h,l++));if(q>b){l++;for(d in g)Md.call(f,d)||(q--,delete g[d])}}else g!==f&&(g=f,l++);return l}}function e(){if(p?(p=!1,b(f,f,i)):b(f,h,i),k)if(t(f))if(c(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var d in f)Md.call(f,d)&&(h[d]=f[d])}else h=f}d.$stateful=!0;var f,g,h,i=this,k=b.length>1,l=0,m=j(a,d),n=[],o={},p=!0,q=0;return this.$watch(m,e)},$digest:function(){var a,c,d,g,j,l,m,n,o,r,s,t,u=e,x=this,C=[];p("$digest"),k.$$checkUrlChange(),this===z&&null!==i&&(k.defer.cancel(i),w()),h=null;do{n=!1,r=x;for(var E=0;E<A.length;E++){try{t=A[E],t.scope.$eval(t.expression,t.locals)}catch(F){b(F)}h=null}A.length=0;a:do{if(l=r.$$watchers)for(m=l.length;m--;)try{if(a=l[m])if(j=a.get,(c=j(r))===(d=a.last)||(a.eq?O(c,d):be(c)&&be(d))){if(a===h){n=!1;break a}}else n=!0,h=a,a.last=a.eq?N(c,null):c,g=a.fn,g(c,d===v?c:d,r),5>u&&(s=4-u,C[s]||(C[s]=[]),C[s].push({msg:y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:c,oldVal:d}))}catch(F){b(F)}if(!(o=r.$$watchersCount&&r.$$childHead||r!==x&&r.$$nextSibling))for(;r!==x&&!(o=r.$$nextSibling);)r=r.$parent}while(r=o);if((n||A.length)&&!u--)throw q(),f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,C)}while(n||A.length);for(q();D<B.length;)try{B[D++]()}catch(F){b(F)}B.length=D=0},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===z&&k.$$applicationDestroyed(),s(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=n,this.$on=this.$watch=this.$watchGroup=function(){return n},this.$$listeners={},this.$$nextSibling=null,m(this)}},$eval:function(a,b){return j(a)(this,b)},$evalAsync:function(a,b){z.$$phase||A.length||k.defer(function(){A.length&&z.$digest()}),A.push({scope:this,expression:j(a),locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{q()}}catch(c){b(c)}finally{try{z.$digest()}catch(c){throw b(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),a=j(a),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,u(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=P([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;f>e;e++)if(d[e])try{d[e].apply(null,k)}catch(l){b(l)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=d,f=d,g={name:a,targetScope:d,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1};if(!d.$$listenerCount[a])return g;for(var h,i,j,k=P([g],arguments,1);e=f;){for(g.currentScope=e,h=e.$$listeners[a]||[],i=0,j=h.length;j>i;i++)if(h[i])try{h[i].apply(null,k)}catch(l){b(l)}else h.splice(i,1),i--,j--;if(!(f=e.$$listenerCount[a]&&e.$$childHead||e!==d&&e.$$nextSibling))for(;e!==d&&!(f=e.$$nextSibling);)e=e.$parent}return g.currentScope=null,g}};var z=new o,A=z.$$asyncQueue=[],B=z.$$postDigestQueue=[],C=z.$$applyAsyncQueue=[],D=0;return z}]}function zc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Ic(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Ac(a){if("self"===a)return a;if(v(a)){if(a.indexOf("***")>-1)throw Rf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=fe(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(z(a))return new RegExp("^"+a.source+"$");throw Rf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Bc(a){var b=[];return s(a)&&d(a,function(a){b.push(Ac(a))}),b}function Cc(){this.SCE_CONTEXTS=Sf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Bc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Bc(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Jc(b):!!a.exec(b.href)}function e(c){var e,f,g=Ic(c.toString()),h=!1;for(e=0,f=a.length;f>e;e++)if(d(a[e],g)){h=!0;break}if(h)for(e=0,f=b.length;f>e;e++)if(d(b[e],g)){h=!1;break}return h}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function g(a,b){var c=l.hasOwnProperty(a)?l[a]:null;if(!c)throw Rf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||r(b)||""===b)return b;if("string"!=typeof b)throw Rf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)}function h(a){return a instanceof k?a.$$unwrapTrustedValue():a}function i(a,b){if(null===b||r(b)||""===b)return b;var c=l.hasOwnProperty(a)?l[a]:null;if(c&&b instanceof c)return b.$$unwrapTrustedValue();if(a===Sf.RESOURCE_URL){if(e(b))return b;throw Rf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===Sf.HTML)return j(b);throw Rf("unsafe","Attempting to use an unsafe value in a safe context.")}var j=function(a){throw Rf("unsafe","Attempting to use an unsafe value in a safe context.")};c.has("$sanitize")&&(j=c.get("$sanitize"));var k=f(),l={};return l[Sf.HTML]=f(k),l[Sf.CSS]=f(k),l[Sf.URL]=f(k),l[Sf.JS]=f(k),l[Sf.RESOURCE_URL]=f(l[Sf.URL]),{trustAs:g,getTrusted:i,valueOf:h}}]}function Dc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Rd)throw Rf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=ra(Sf);e.isEnabled=function(){return a},e.trustAs=c.trustAs,e.getTrusted=c.getTrusted,e.valueOf=c.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=o),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;return d(Sf,function(a,b){var c=Nd(b);e[wa("parse_as_"+c)]=function(b){return f(a,b)},e[wa("get_trusted_"+c)]=function(b){return g(a,b)},e[wa("trust_as_"+c)]=function(b){return h(a,b)}}),e}]}function Ec(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id),g=!f&&a.history&&a.history.pushState,h=l((/android (\d+)/.exec(Nd((a.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((a.navigator||{}).userAgent),j=b[0]||{},k=/^(Moz|webkit|ms)(?=[A-Z])/,m=j.body&&j.body.style,n=!1,o=!1;if(m){for(var p in m)if(d=k.exec(p)){c=d[0],c=c[0].toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in m&&"webkit"),n=!!("transition"in m||c+"Transition"in m),o=!!("animation"in m||c+"Animation"in m),!h||n&&o||(n=v(m.webkitTransition),o=v(m.webkitAnimation))}return{history:!(!g||4>h||i),hasEvent:function(a){if("input"===a&&11>=Rd)return!1;if(r(e[a])){var b=j.createElement("div");e[a]="on"+a in b}return e[a]},csp:ge(),vendorPrefix:c,transitions:n,animations:o,android:h}}]}function Fc(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$templateCache","$http","$q","$sce",function(b,c,d,e){function f(g,h){function i(a){if(!h)throw Tf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return d.reject(a)}f.totalPendingRequests++,(!v(g)||r(b.get(g)))&&(g=e.getTrustedResourceUrl(g));var k=c.defaults&&c.defaults.transformResponse;return ce(k)?k=k.filter(function(a){return a!==Bb}):k===Bb&&(k=null),c.get(g,j({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){return b.put(g,a.data),a.data},i)}return f.totalPendingRequests=0,f}]}function Gc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var e={};return e.findBindings=function(a,b,c){var e=a.getElementsByClassName("ng-binding"),f=[];return d(e,function(a){var e=_d.element(a).data("$binding");e&&d(e,function(d){if(c){var e=new RegExp("(^|\\s)"+fe(b)+"(\\s|\\||$)");e.test(d)&&f.push(a)}else-1!==d.indexOf(b)&&f.push(a)})}),f},e.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},e.getLocation=function(){return c.url()},e.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},e.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},e}]}function Hc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){y(f)||(i=h,h=f,f=n);var j,k=Q(arguments,3),l=s(i)&&!i,m=(l?d:c).defer(),o=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[o.$$timeoutId]}l||a.$apply()},h),o.$$timeoutId=j,g[j]=m,o}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function Ic(a){var b=a;return Rd&&(Uf.setAttribute("href",b),b=Uf.href),Uf.setAttribute("href",b),{href:Uf.href,protocol:Uf.protocol?Uf.protocol.replace(/:$/,""):"",host:Uf.host,search:Uf.search?Uf.search.replace(/^\?/,""):"",hash:Uf.hash?Uf.hash.replace(/^#/,""):"",hostname:Uf.hostname,port:Uf.port,pathname:"/"===Uf.pathname.charAt(0)?Uf.pathname:"/"+Uf.pathname}}function Jc(a){var b=v(a)?Ic(a):a;return b.protocol===Vf.protocol&&b.host===Vf.host}function Kc(){this.$get=p(a)}function Lc(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=a[0]||{},d={},e="";return function(){var a,f,g,h,i,j=c.cookie||"";if(j!==e)for(e=j,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),h>0&&(i=b(f.substring(0,h)),r(d[i])&&(d[i]=b(f.substring(h+1))));return d}}function Mc(){this.$get=Lc}function Nc(a){function b(e,f){if(t(e)){var g={};return d(e,function(a,c){g[c]=b(c,a)}),g}return a.factory(e+c,f)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Sc),b("date",fd),b("filter",Oc),b("json",gd),b("limitTo",hd),b("lowercase",ag),b("number",Tc),b("orderBy",jd),b("uppercase",bg)}function Oc(){return function(a,d,e,f){if(!c(a)){if(null==a)return a;throw b("filter")("notarray","Expected array but received: {0}",a)}f=f||"$";var g,h,i=Rc(d);switch(i){case"function":g=d;break;case"boolean":case"null":case"number":case"string":h=!0;case"object":g=Pc(d,e,f,h);break;default:return a}return Array.prototype.filter.call(a,g)}}function Pc(a,b,c,d){var e,f=t(a)&&c in a;return b===!0?b=O:y(b)||(b=function(a,b){return r(a)?!1:null===a||null===b?a===b:t(b)||t(a)&&!q(a)?!1:(a=Nd(""+a),b=Nd(""+b),-1!==a.indexOf(b))}),e=function(e){return f&&!t(e)?Qc(e,a[c],b,c,!1):Qc(e,a,b,c,d)}}function Qc(a,b,c,d,e,f){var g=Rc(a),h=Rc(b);if("string"===h&&"!"===b.charAt(0))return!Qc(a,b.substring(1),c,d,e);if(ce(a))return a.some(function(a){return Qc(a,b,c,d,e)});switch(g){case"object":var i;if(e){for(i in a)if("$"!==i.charAt(0)&&Qc(a[i],b,c,d,!0))return!0;return f?!1:Qc(a,b,c,d,!1)}if("object"===h){for(i in b){var j=b[i];if(!y(j)&&!r(j)){var k=i===d,l=k?a:a[i];if(!Qc(l,j,c,d,k,k))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Rc(a){return null===a?"null":typeof a}function Sc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Wc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Tc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Wc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Uc(a){var b,c,d,e,f,g=0;for((c=a.indexOf(Xf))>-1&&(a=a.replace(Xf,"")),(d=a.search(/e/i))>0?(0>c&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):0>c&&(c=a.length),d=0;a.charAt(d)===Yf;d++);if(d===(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)===Yf;)f--;for(c-=d,b=[],e=0;f>=d;d++,e++)b[e]=+a.charAt(d)}return c>Wf&&(b=b.splice(0,Wf-1),g=c-1,c=1),{d:b,e:g,i:c}}function Vc(a,b,c,d){var e=a.d,f=e.length-a.i;b=r(b)?Math.min(Math.max(c,f),d):+b;var g=b+a.i,h=e[g];if(g>0){e.splice(Math.max(a.i,g));for(var i=g;i<e.length;i++)e[i]=0}else{f=Math.max(0,f),a.i=1,e.length=Math.max(1,g=b+1),e[0]=0;for(var j=1;g>j;j++)e[j]=0}if(h>=5)if(0>g-1){for(var k=0;k>g;k--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[g-1]++;for(;f<Math.max(0,b);f++)e.push(0);var l=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0);l&&(e.unshift(l),a.i++)}function Wc(a,b,c,d,e){if(!v(a)&&!w(a)||isNaN(a))return"";var f,g=!isFinite(a),h=!1,i=Math.abs(a)+"",j="";if(g)j="∞";else{f=Uc(i),Vc(f,e,b.minFrac,b.maxFrac);var k=f.d,l=f.i,m=f.e,n=[];for(h=k.reduce(function(a,b){return a&&!b},!0);0>l;)k.unshift(0),l++;l>0?n=k.splice(l,k.length):(n=k,k=[0]);var o=[];for(k.length>=b.lgSize&&o.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)o.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&o.unshift(k.join("")),j=o.join(c),n.length&&(j+=d+n.join("")),m&&(j+="e+"+m)}return 0>a&&!h?b.negPre+j+b.negSuf:b.posPre+j+b.posSuf}function Xc(a,b,c,d){var e="";for((0>a||d&&0>=a)&&(d?a=-a+1:(a=-a,e="-")),a=""+a;a.length<b;)a=Yf+a;return c&&(a=a.substr(a.length-b)),e+a}function Yc(a,b,c,d,e){return c=c||0,function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&-12===c&&(g=12),Xc(g,b,d,e)}}function Zc(a,b,c){return function(d,e){var f=d["get"+a](),g=(c?"STANDALONE":"")+(b?"SHORT":""),h=Od(g+a);return e[h][f]}}function $c(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Xc(Math[d>0?"floor":"ceil"](d/60),2)+Xc(Math.abs(d%60),2)}function _c(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function ad(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function bd(a){return function(b){var c=_c(b.getFullYear()),d=ad(b),e=+d-+c,f=1+Math.round(e/6048e5);return Xc(f,a)}}function cd(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function dd(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function ed(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function fd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=l(b[9]+b[10]),f=l(b[9]+b[11])),g.call(d,l(b[1]),l(b[2])-1,l(b[3]));var i=l(b[4]||0)-e,j=l(b[5]||0)-f,k=l(b[6]||0),m=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,m),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g,h,i="",j=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,v(c)&&(c=_f.test(c)?l(c):b(c)),w(c)&&(c=new Date(c)),!x(c)||!isFinite(c.getTime()))return c;for(;e;)h=$f.exec(e),h?(j=P(j,h,1),e=j.pop()):(j.push(e),e=null);var k=c.getTimezoneOffset();return f&&(k=V(f,k),c=X(c,f,!0)),d(j,function(b){g=Zf[b],i+=g?g(c,a.DATETIME_FORMATS,k):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function gd(){return function(a,b){return r(b)&&(b=2),T(a,b)}}function hd(){return function(a,b,d){return b=Math.abs(Number(b))===1/0?Number(b):l(b),be(b)?a:(w(a)&&(a=a.toString()),c(a)?(d=!d||isNaN(d)?0:l(d),d=0>d?Math.max(0,a.length+d):d,b>=0?id(a,d,d+b):0===d?id(a,b,a.length):id(a,Math.max(0,d+b),d)):a)}}function id(a,b,c){return v(a)?a.slice(b,c):Vd.call(a,b,c)}function jd(a){function d(b){return b.map(function(b){var c=1,d=o;if(y(b))d=b;else if(v(b)&&(("+"===b.charAt(0)||"-"===b.charAt(0))&&(c="-"===b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(d=a(b),d.constant))){var e=d();d=function(a){return a[e]}}return{get:d,descending:c}})}function e(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a){return y(a.valueOf)&&(a=a.valueOf(),e(a))?a:q(a)&&(a=a.toString(),e(a))?a:a}function g(a,b){var c=typeof a;return null===a?(c="string",a="null"):"object"===c&&(a=f(a)),{value:a,type:c,index:b}}function h(a,b){var c=0,d=a.type,e=b.type;if(d===e){var f=a.value,g=b.value;"string"===d?(f=f.toLowerCase(),g=g.toLowerCase()):"object"===d&&(t(f)&&(f=a.index),t(g)&&(g=b.index)),f!==g&&(c=g>f?-1:1)}else c=e>d?-1:1;return c}return function(a,e,f,i){function j(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:l.map(function(c){return g(c.get(a),b)})}}function k(a,b){for(var c=0,d=l.length;d>c;c++){var e=n(a.predicateValues[c],b.predicateValues[c]);if(e)return e*l[c].descending*m}return n(a.tieBreaker,b.tieBreaker)*m}if(null==a)return a;if(!c(a))throw b("orderBy")("notarray","Expected array but received: {0}",a);ce(e)||(e=[e]),0===e.length&&(e=["+"]);var l=d(e),m=f?-1:1,n=y(i)?i:h,o=Array.prototype.map.call(a,j);return o.sort(k),a=o.map(function(a){return a.value})}}function kd(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",p(a)}function ld(a,b){a.$name=b}function md(a,b,c,e,f){var g=this,h=[];g.$error={},g.$$success={},g.$pending=void 0,g.$name=f(b.name||b.ngForm||"")(c),g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,g.$submitted=!1,g.$$parentForm=eg,g.$rollbackViewValue=function(){d(h,function(a){a.$rollbackViewValue()})},g.$commitViewValue=function(){d(h,function(a){a.$commitViewValue()})},g.$addControl=function(a){ma(a.$name,"input"),h.push(a),a.$name&&(g[a.$name]=a),a.$$parentForm=g},g.$$renameControl=function(a,b){var c=a.$name;g[c]===a&&delete g[c],g[b]=a,a.$name=b},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],d(g.$pending,function(b,c){g.$setValidity(c,null,a)}),d(g.$error,function(b,c){g.$setValidity(c,null,a)}),d(g.$$success,function(b,c){g.$setValidity(c,null,a)}),M(h,a),a.$$parentForm=eg},Hd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(M(d,c),0===d.length&&delete a[b])},$animate:e}),g.$setDirty=function(){e.removeClass(a,Qg),e.addClass(a,Rg),g.$dirty=!0,g.$pristine=!1,g.$$parentForm.$setDirty()},g.$setPristine=function(){e.setClass(a,Qg,Rg+" "+fg),g.$dirty=!1,g.$pristine=!0,g.$submitted=!1,d(h,function(a){a.$setPristine()})},g.$setUntouched=function(){d(h,function(a){a.$setUntouched()})},g.$setSubmitted=function(){e.addClass(a,fg),g.$submitted=!0,g.$$parentForm.$setSubmitted()}}function nd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function od(a,b,c,d,e,f){pd(a,b,c,d,e,f),nd(d)}function pd(a,b,c,d,e,f){var g=Nd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val(),j=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=ee(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,j)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),tg[g]&&d.$$hasNativeValidators&&g===c.type&&b.on(sg,function(a){if(!i){var b=this[Ld],c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,(b.badInput!==c||b.typeMismatch!==d)&&j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function qd(a,b){if(x(a))return a;if(v(a)){pg.lastIndex=0;var c=pg.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=_c(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function rd(a,b){return function(c,e){var f,g;if(x(c))return c;if(v(c)){if('"'===c.charAt(0)&&'"'===c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),jg.test(c))return new Date(c);if(a.lastIndex=0,f=a.exec(c))return f.shift(),g=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},d(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function sd(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return s(a)&&!x(a)?c(a)||void 0:a}td(e,f,g,h),pd(e,f,g,h,i,j);var n,o=h&&h.$options&&h.$options.timezone;if(h.$$parserName=a,h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a)){var d=c(a,n);return o&&(d=X(d,o)),d}return void 0}),h.$formatters.push(function(a){if(a&&!x(a))throw Xg("datefmt","Expected `{0}` to be a date",a);return l(a)?(n=a,n&&o&&(n=X(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),s(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||r(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(s(g.max)||g.ngMax){var q;h.$validators.max=function(a){return!l(a)||r(q)||c(a)<=q},g.$observe("max",function(a){q=m(a),h.$validate()})}}}function td(a,b,c,d){var e=b[0],f=d.$$hasNativeValidators=t(e.validity);f&&d.$parsers.push(function(a){var c=b.prop(Ld)||{};return c.badInput||c.typeMismatch?void 0:a})}function ud(a){a.$$parserName="number",a.$parsers.push(function(b){return a.$isEmpty(b)?null:mg.test(b)?parseFloat(b):void 0}),a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!w(b))throw Xg("numfmt","Expected `{0}` to be a number",b);b=b.toString()}return b})}function vd(a){return s(a)&&!w(a)&&(a=parseFloat(a)),be(a)?void 0:a}function wd(a){return(0|a)===a}function xd(a){var b=a.toString(),c=b.indexOf(".");if(-1===c){if(a>-1&&1>a){var d=/e-(\d+)$/.exec(b);if(d)return Number(d[1])}return 0}return b.length-c-1}function yd(a,b,c){var d=Number(a);if(!wd(d)||!wd(b)||!wd(c)){var e=Math.max(xd(d),xd(b),xd(c)),f=Math.pow(10,e);d*=f,b*=f,c*=f}return(d-b)%c===0}function zd(a,b,c,d,e,f){td(a,b,c,d),pd(a,b,c,d,e,f),ud(d);var g,h;(s(c.min)||c.ngMin)&&(d.$validators.min=function(a){return d.$isEmpty(a)||r(g)||a>=g},c.$observe("min",function(a){g=vd(a),d.$validate()})),(s(c.max)||c.ngMax)&&(d.$validators.max=function(a){return d.$isEmpty(a)||r(h)||h>=a},c.$observe("max",function(a){h=vd(a),d.$validate()}))}function Ad(a,b,c,d,e,f){function g(a,d){b.attr(a,c[a]),c.$observe(a,d)}function h(a){if(l=vd(a),!be(d.$modelValue))if(k){var c=b.val();l>c&&(c=l,b.val(c)),d.$setViewValue(c)}else d.$validate()}function i(a){if(m=vd(a),!be(d.$modelValue))if(k){var c=b.val();c>m&&(b.val(m),c=l>m?l:m),d.$setViewValue(c)}else d.$validate()}function j(a){n=vd(a),be(d.$modelValue)||(k&&d.$viewValue!==b.val()?d.$setViewValue(b.val()):d.$validate())}td(a,b,c,d),ud(d),pd(a,b,c,d,e,f);var k=d.$$hasNativeValidators&&"range"===b[0].type,l=k?0:void 0,m=k?100:void 0,n=k?1:void 0,o=b[0].validity,p=s(c.min),q=s(c.max),t=s(c.step),u=d.$render;d.$render=k&&s(o.rangeUnderflow)&&s(o.rangeOverflow)?function(){u(),d.$setViewValue(b.val())}:u,p&&(d.$validators.min=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||r(l)||b>=l},g("min",h)),q&&(d.$validators.max=k?function(){return!0}:function(a,b){return d.$isEmpty(b)||r(m)||m>=b},g("max",i)),t&&(d.$validators.step=k?function(){return!o.stepMismatch}:function(a,b){return d.$isEmpty(b)||r(n)||yd(b,l||0,n)},g("step",j))}function Bd(a,b,c,d,e,f){pd(a,b,c,d,e,f),nd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||kg.test(c)}}function Cd(a,b,c,d,e,f){pd(a,b,c,d,e,f),nd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||lg.test(c)}}function Dd(a,b,c,d){r(c.name)&&b.attr("name",g());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a===d.$viewValue},c.$observe("value",d.$render)}function Ed(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw Xg("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function Fd(a,b,c,d,e,f,g,h){var i=Ed(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Ed(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return O(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Gd(a,b){return a="ngClass"+a,["$animate",function(c){function e(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e===b[f])continue a;c.push(e)}return c}function f(a){var b=[];return ce(a)?(d(a,function(a){b=b.concat(f(a))}),b):v(a)?a.split(" "):t(a)?(d(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||pa(),e=[];return d(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&e.push(a))}),h.data("$classCounts",c),e.join(" ")}function m(a,b){var d=e(b,a),f=e(a,b);d=l(d,1),f=l(f,-1),d&&d.length&&c.addClass(h,d),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||(1&g.$index)===b){var c=f(a||[]);if(o){if(!O(a,o)){var d=f(o);m(d,c)}}else j(c)}o=ce(a)?a.map(function(a){return ra(a)}):ra(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var e=1&c;if(e!==(1&d)){var h=f(g.$eval(i[a]));e===b?j(h):k(h)}})}}}]}function Hd(a){function b(a,b,h){r(b)?c("$pending",a,h):d("$pending",a,h),F(b)?b?(k(g.$error,a,h),j(g.$$success,a,h)):(j(g.$error,a,h),k(g.$$success,a,h)):(k(g.$error,a,h),k(g.$$success,a,h)),g.$pending?(e(Ug,!0),g.$valid=g.$invalid=void 0,f("",null)):(e(Ug,!1),g.$valid=Id(g.$error),g.$invalid=!g.$valid,f("",g.$valid));var i;i=g.$pending&&g.$pending[a]?void 0:g.$error[a]?!1:g.$$success[a]?!0:null,f(a,i),g.$$parentForm.$setValidity(a,i,g)}function c(a,b,c){g[a]||(g[a]={}),j(g[a],b,c)}function d(a,b,c){g[a]&&k(g[a],b,c),Id(g[a])&&(g[a]=void 0)}function e(a,b){b&&!i[a]?(l.addClass(h,a),i[a]=!0):!b&&i[a]&&(l.removeClass(h,a),i[a]=!1)}function f(a,b){a=a?"-"+ia(a,"-"):"",e(Og+a,b===!0),e(Pg+a,b===!1)}var g=a.ctrl,h=a.$element,i={},j=a.set,k=a.unset,l=a.$animate;i[Pg]=!(i[Og]=h.hasClass(Og)),g.$setValidity=b}function Id(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Jd(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}var Kd=/^\/(.+)\/([a-z]*)$/,Ld="validity",Md=Object.prototype.hasOwnProperty,Nd=function(a){return v(a)?a.toLowerCase():a},Od=function(a){return v(a)?a.toUpperCase():a},Pd=function(a){return v(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Qd=function(a){return v(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Nd=Pd,Od=Qd);var Rd,Sd,Td,Ud,Vd=[].slice,Wd=[].splice,Xd=[].push,Yd=Object.prototype.toString,Zd=Object.getPrototypeOf,$d=b("ng"),_d=a.angular||(a.angular={}),ae=0;Rd=a.document.documentMode;var be=Number.isNaN||function(a){return a!==a};n.$inject=[],o.$inject=[];var ce=Array.isArray,de=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,ee=function(a){return v(a)?a.trim():a},fe=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ge=function(){function b(){try{return new Function(""),!1}catch(a){return!0}}if(!s(ge.rules)){var c=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(c){var d=c.getAttribute("ng-csp")||c.getAttribute("data-ng-csp");ge.rules={noUnsafeEval:!d||-1!==d.indexOf("no-unsafe-eval"),noInlineStyle:!d||-1!==d.indexOf("no-inline-style")}}else ge.rules={noUnsafeEval:b(),noInlineStyle:!1}}return ge.rules},he=function(){if(s(he.name_))return he.name_;var b,c,d,e,f=je.length;for(c=0;f>c;++c)if(d=je[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return he.name_=e},ie=/:/g,je=["ng-","data-ng-","ng:","x-ng-"],ke=da(a.document),le=/[A-Z]/g,me=!1,ne=1,oe=2,pe=3,qe=8,re=9,se=11,te={full:"1.5.9",major:1,minor:5,dot:9,codeName:"timeturning-lockdown"};Ea.expando="ng339";var ue=Ea.cache={},ve=1,we=function(a,b,c){a.addEventListener(b,c,!1)},xe=function(a,b,c){a.removeEventListener(b,c,!1)};Ea._data=function(a){return this.cache[a[this.expando]]||{}};var ye=/([:\-_]+(.))/g,ze=/^moz([A-Z])/,Ae={mouseleave:"mouseout",mouseenter:"mouseover"},Be=b("jqLite"),Ce=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,De=/<|&#?\w+;/,Ee=/<([\w:-]+)/,Fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ge={option:[1,'<select multiple="multiple">',"</select>"],
thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td;var He=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},Ie=Ea.prototype={ready:function(b){function c(){d||(d=!0,b())}var d=!1;"complete"===a.document.readyState?a.setTimeout(c):(this.on("DOMContentLoaded",c),Ea(a).on("load",c))},toString:function(){var a=[];return d(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Sd(a>=0?this[a]:this[this.length+a])},length:0,push:Xd,sort:[].sort,splice:[].splice},Je={};d("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Je[Nd(a)]=a});var Ke={};d("input,select,option,textarea,button,form,details".split(","),function(a){Ke[a]=!0});var Le={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};d({data:Ka,removeData:Ia,hasData:za,cleanData:Aa},function(a,b){Ea[b]=a}),d({data:Ka,inheritedData:Qa,scope:function(a){return Sd.data(a,"$scope")||Qa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Sd.data(a,"$isolateScope")||Sd.data(a,"$isolateScopeNoTemplate")},controller:Pa,injector:function(a){return Qa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:La,css:function(a,b,c){return b=wa(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==pe&&d!==oe&&d!==qe){var e=Nd(b);if(Je[e]){if(!s(c))return a[b]||(a.attributes.getNamedItem(b)||n).specified?e:void 0;c?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(c))a.setAttribute(b,c);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?void 0:f}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===ne||c===pe?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===L(a)){var c=[];return d(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(Ga(a,!0),void(a.innerHTML=b))},empty:Ra},function(a,b){Ea.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Ra&&r(2===a.length&&a!==La&&a!==Pa?b:c)){if(t(b)){for(d=0;f>d;d++)if(a===Ka)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(var g=a.$dv,h=r(g)?Math.min(f,1):f,i=0;h>i;i++){var j=a(this[i],b,c);g=g?g+j:j}return g}for(d=0;f>d;d++)a(this[d],b,c);return this}}),d({removeData:Ia,on:function(a,b,c,d){if(s(d))throw Be("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ya(a)){var e=Ja(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Wa(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length,j=function(b,d,e){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||e||we(a,b,g)),h.push(c)};i--;)b=h[i],Ae[b]?(j(Ae[b],Ya),j(b,void 0,!0)):j(b)}},off:Ha,one:function(a,b,c){a=Sd(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,e=a.parentNode;Ga(a),d(new Ea(b),function(b){c?e.insertBefore(b,c.nextSibling):e.replaceChild(b,a),c=b})},children:function(a){var b=[];return d(a.childNodes,function(a){a.nodeType===ne&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===ne||c===se){b=new Ea(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===ne){var c=a.firstChild;d(new Ea(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){Da(a,Sd(b).eq(0).clone()[0])},remove:Sa,detach:function(a){Sa(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Ea(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Na,removeClass:Ma,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;r(d)&&(d=!La(a,b)),(d?Na:Ma)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==se?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Fa,triggerHandler:function(a,b,c){var e,f,g,h=b.type||b,i=Ja(a),k=i&&i.events,l=k&&k[h];l&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:n,type:h,target:a},b.type&&(e=j(e,b)),f=ra(l),g=c?[e].concat(c):[e],d(f,function(b){e.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Ea.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Sd(e))):Oa(e,a(this[f],b,c,d));return s(e)?e:this},Ea.prototype.bind=Ea.prototype.on,Ea.prototype.unbind=Ea.prototype.off}),_a.prototype={put:function(a,b){this[$a(a,this.nextUid)]=b},get:function(a){return this[$a(a,this.nextUid)]},remove:function(a){var b=this[a=$a(a,this.nextUid)];return delete this[a],b}};var Me=[function(){this.$get=[function(){return _a}]}],Ne=/^([^\(]+?)=>/,Oe=/^[^\(]*\(\s*([^\)]*)\)/m,Pe=/,/,Qe=/^\s*(_?)(\S+?)\1\s*$/,Re=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Se=b("$injector");eb.$$annotate=db;var Te=b("$animate"),Ue=1,Ve="ng-animate",We=function(){this.$get=n},Xe=function(){var a=new _a,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,e){function f(a,b,c){var e=!1;return b&&(b=v(b)?b.split(" "):ce(b)?b:[],d(b,function(b){b&&(e=!0,a[b]=c)})),e}function g(){d(b,function(b){var c=a.get(b);if(c){var e=ib(b.attr("class")),f="",g="";d(c,function(a,b){var c=!!e[b];a!==c&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)}),d(b,function(a){f&&Na(a,f),g&&Ma(a,g)}),a.remove(b)}}),b.length=0}function h(c,d,h){var i=a.get(c)||{},j=f(i,d,!0),k=f(i,h,!1);(j||k)&&(a.put(c,i),b.push(c),1===b.length&&e.$$postDigest(g))}return{enabled:n,on:n,off:n,pin:n,push:function(a,b,d,e){e&&e(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&h(a,d.addClass,d.removeClass);var f=new c;return f.complete(),f}}}]},Ye=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw Te("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+Ve+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw Te("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Ve)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=hb(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Sd(d),e=e&&Sd(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",jb(f))},move:function(c,d,e,f){return d=d&&Sd(d),e=e&&Sd(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",jb(f))},leave:function(b,c){return a.push(b,"leave",jb(c),function(){b.remove()})},addClass:function(b,c,d){return d=jb(d),d.addClass=gb(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=jb(d),d.removeClass=gb(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=jb(e),e.addClass=gb(e.addClass,c),e.removeClass=gb(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=jb(f),f.from=f.from?j(f.from,c):c,f.to=f.to?j(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=gb(f.tempClasses,e),a.push(b,"animate",f)}}}]}],Ze=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),c.length>1||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},$e=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,c,e,f){function g(a){this.setHost(a);var b=c(),d=function(a){f(a,0,!1)};this._doneCallbacks=[],this._tick=function(a){var c=e[0];c&&c.hidden?d(a):b(a)},this._state=0}var h=0,i=1,j=2;return g.chain=function(a,b){function c(){return d===a.length?void b(!0):void a[d](function(a){return a===!1?void b(!1):(d++,void c())})}var d=0;c()},g.all=function(a,b){function c(c){f=f&&c,++e===a.length&&b(f)}var e=0,f=!0;d(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){this._state===j?a():this._doneCallbacks.push(a)},progress:n,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){b===!1?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;b._state===h&&(b._state=i,b._tick(function(){b._resolve(a)}))},_resolve:function(a){this._state!==j&&(d(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=j)}},g}]},_e=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f(),h||i.complete(),h=!0}),i}function f(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null)}var g=d||{};g.$$prepared||(g=N(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var h,i=new c;return{start:e,end:e}}}]},af=b("$compile"),bf=new ob;pb.$inject=["$provide","$$sanitizeUriProvider"],qb.prototype.isFirstChange=function(){return this.previousValue===bf};var cf=/^((?:x|data)[:\-_])/i,df=b("$controller"),ef=/^(\S+)(\s+as\s+([\w$]+))?$/,ff=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof Sd&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},gf="application/json",hf={"Content-Type":gf+";charset=utf-8"},jf=/^\[|^\{(?!\{)/,kf={"[":/]$/,"{":/}$/},lf=/^\)\]\}',?\n/,mf=b("$http"),nf=function(a){return function(){throw mf("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",a)}},of=_d.$interpolateMinErr=b("$interpolate");of.throwNoconcat=function(a){throw of("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},of.interr=function(a,b){return of("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var pf=function(){this.$get=["$window",function(a){function b(a){var b=function(a){b.data=a,b.called=!0};return b.id=a,b}var c=a.angular.callbacks,d={};return{createCallback:function(a){var e="_"+(c.$$counter++).toString(36),f="angular.callbacks."+e,g=b(e);return d[f]=c[e]=g,f},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){var b=d[a];delete c[b.id],delete d[a]}}}]},qf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,rf={http:80,https:443,ftp:21},sf=b("$location"),tf=/^\s*[\\/]{2,}/,uf={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Zb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=qf.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Zb("$$protocol"),host:Zb("$$host"),port:Zb("$$port"),path:$b("$$path",function(a){return a=null!==a?a.toString():"","/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(v(a)||w(a))a=a.toString(),this.$$search=$(a);else{if(!t(a))throw sf("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=N(a,{}),d(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:$b("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};d([Yb,Xb,Wb],function(a){a.prototype=Object.create(uf),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Wb||!this.$$html5)throw sf("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var vf=b("$parse"),wf=[].constructor,xf=(!1).constructor,yf=Function.constructor,zf=0..constructor,Af={}.constructor,Bf="".constructor,Cf=wf.prototype,Df=xf.prototype,Ef=yf.prototype,Ff=zf.prototype,Gf=Af.prototype,Hf=Bf.prototype,If=Ef.call,Jf=Ef.apply,Kf=Ef.bind,Lf=Gf.valueOf,Mf=pa();d("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Mf[a]=!0});var Nf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Of=function(a){this.options=a};Of.prototype={constructor:Of,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=Mf[b],f=Mf[c],g=Mf[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return c>=55296&&56319>=c&&d>=56320&&57343>=d?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw vf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Nd(this.text.charAt(this.index));if("."===c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"===c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"===a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=Nf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Pf=function(a,b){this.lexer=a,this.options=b};Pf.Program="Program",Pf.ExpressionStatement="ExpressionStatement",Pf.AssignmentExpression="AssignmentExpression",Pf.ConditionalExpression="ConditionalExpression",Pf.LogicalExpression="LogicalExpression",Pf.BinaryExpression="BinaryExpression",Pf.UnaryExpression="UnaryExpression",Pf.CallExpression="CallExpression",Pf.MemberExpression="MemberExpression",Pf.Identifier="Identifier",Pf.Literal="Literal",Pf.ArrayExpression="ArrayExpression",Pf.Property="Property",Pf.ObjectExpression="ObjectExpression",Pf.ThisExpression="ThisExpression",Pf.LocalsExpression="LocalsExpression",Pf.NGValueParameter="NGValueParameter",Pf.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:Pf.Program,body:a}},expressionStatement:function(){return{type:Pf.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:Pf.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:Pf.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:Pf.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:Pf.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:Pf.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:Pf.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:Pf.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:Pf.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:Pf.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:Pf.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:Pf.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:Pf.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:Pf.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:Pf.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.filterChain());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:Pf.Identifier,name:a.text}},constant:function(){return{type:Pf.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Pf.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:Pf.Property,kind:"init"},this.peek().constant?(a.key=this.constant(),a.computed=!1,this.consume(":"),a.value=this.expression()):this.peek().identifier?(a.key=this.identifier(),a.computed=!1,this.peek(":")?(this.consume(":"),a.value=this.expression()):a.value=a.key):this.peek("[")?(this.consume("["),a.key=this.expression(),this.consume("]"),a.computed=!0,this.consume(":"),a.value=this.expression()):this.throwError("invalid key",this.peek()),b.push(a)}while(this.expect(","));return this.consume("}"),{type:Pf.ObjectExpression,properties:b}},throwError:function(a,b){throw vf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw vf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw vf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},selfReferential:{"this":{type:Pf.ThisExpression},$locals:{type:Pf.LocalsExpression}}},pc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},jc(e,c.$filter);var f,g="";if(this.stage="assign",f=mc(e)){this.state.computing="assign";var h=this.nextId();this.recurse(f,h),this.return_(h),g="fn.assign="+this.generateFunction("assign","s,v,l")}var i=kc(e.body);c.stage="inputs",d(i,function(a,b){var d="fn"+b;c.state[d]={vars:[],body:[],own:{}},c.state.computing=d;var e=c.nextId();c.recurse(a,e),c.return_(e),c.state.inputs.push(d),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var j='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+g+this.watchFns()+"return fn;",k=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",j)(this.$filter,bc,dc,ec,cc,fc,gc,hc,a);return this.state=this.stage=void 0,k.literal=nc(e),k.constant=oc(e),k},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return d(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return d(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,e,f,g){var h,i,j,k,l,m=this;if(e=e||n,!g&&s(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,e,f,!0));switch(a.type){case Pf.Program:d(a.body,function(b,c){m.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?m.current().body.push(i,";"):m.return_(i)});break;case Pf.Literal:k=this.escape(a.value),this.assign(b,k),e(k);break;case Pf.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),e(k);break;case Pf.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),e(k);break;case Pf.LogicalExpression:b=b||this.nextId(),m.recurse(a.left,b),m.if_("&&"===a.operator?b:m.not(b),m.lazyRecurse(a.right,b)),e(b);break;case Pf.ConditionalExpression:b=b||this.nextId(),m.recurse(a.test,b),m.if_(b,m.lazyRecurse(a.alternate,b),m.lazyRecurse(a.consequent,b)),e(b);break;case Pf.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===m.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),bc(a.name),m.if_("inputs"===m.stage||m.not(m.getHasOwnProperty("l",a.name)),function(){m.if_("inputs"===m.stage||"s",function(){f&&1!==f&&m.if_(m.not(m.nonComputedMember("s",a.name)),m.lazyAssign(m.nonComputedMember("s",a.name),"{}")),m.assign(b,m.nonComputedMember("s",a.name))})},b&&m.lazyAssign(b,m.nonComputedMember("l",a.name))),(m.state.expensiveChecks||rc(a.name))&&m.addEnsureSafeObject(b),e(b);break;case Pf.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),m.recurse(a.object,h,void 0,function(){m.if_(m.notNull(h),function(){f&&1!==f&&m.addEnsureSafeAssignContext(h),a.computed?(i=m.nextId(),m.recurse(a.property,i),m.getStringValue(i),m.addEnsureSafeMemberName(i),f&&1!==f&&m.if_(m.not(m.computedMember(h,i)),m.lazyAssign(m.computedMember(h,i),"{}")),k=m.ensureSafeObject(m.computedMember(h,i)),m.assign(b,k),c&&(c.computed=!0,c.name=i)):(bc(a.property.name),f&&1!==f&&m.if_(m.not(m.nonComputedMember(h,a.property.name)),m.lazyAssign(m.nonComputedMember(h,a.property.name),"{}")),k=m.nonComputedMember(h,a.property.name),(m.state.expensiveChecks||rc(a.property.name))&&(k=m.ensureSafeObject(k)),m.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){m.assign(b,"undefined")}),e(b)},!!f);break;case Pf.CallExpression:b=b||this.nextId(),a.filter?(i=m.filter(a.callee.name),j=[],d(a.arguments,function(a){var b=m.nextId();m.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",m.assign(b,k),e(b)):(i=m.nextId(),h={},j=[],m.recurse(a.callee,i,h,function(){m.if_(m.notNull(i),function(){m.addEnsureSafeFunction(i),d(a.arguments,function(a){m.recurse(a,m.nextId(),void 0,function(a){j.push(m.ensureSafeObject(a))})}),h.name?(m.state.expensiveChecks||m.addEnsureSafeObject(h.context),k=m.member(h.context,h.name,h.computed)+"("+j.join(",")+")"):k=i+"("+j.join(",")+")",k=m.ensureSafeObject(k),m.assign(b,k)},function(){m.assign(b,"undefined")}),e(b)}));break;case Pf.AssignmentExpression:if(i=this.nextId(),h={},!lc(a.left))throw vf("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,h,function(){m.if_(m.notNull(h.context),function(){m.recurse(a.right,i),m.addEnsureSafeObject(m.member(h.context,h.name,h.computed)),m.addEnsureSafeAssignContext(h.context),k=m.member(h.context,h.name,h.computed)+a.operator+i,m.assign(b,k),e(b||k)})},1);break;case Pf.ArrayExpression:j=[],d(a.elements,function(a){m.recurse(a,m.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),e(k);break;case Pf.ObjectExpression:j=[],l=!1,d(a.properties,function(a){a.computed&&(l=!0)}),l?(b=b||this.nextId(),this.assign(b,"{}"),d(a.properties,function(a){a.computed?(h=m.nextId(),m.recurse(a.key,h)):h=a.key.type===Pf.Identifier?a.key.name:""+a.key.value,i=m.nextId(),m.recurse(a.value,i),m.assign(m.member(b,h,a.computed),i)})):(d(a.properties,function(b){m.recurse(b.value,a.constant?void 0:m.nextId(),void 0,function(a){j.push(m.escape(b.key.type===Pf.Identifier?b.key.name:""+b.key.value)+":"+a)})}),k="{"+j.join(",")+"}",this.assign(b,k)),e(b||k);break;case Pf.ThisExpression:this.assign(b,"s"),e("s");break;case Pf.LocalsExpression:this.assign(b,"l"),e("l");break;case Pf.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){return a?(this.current().body.push(a,"=",b,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,d=/[^$_a-zA-Z0-9]/g;return c.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(v(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(w(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw vf("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},qc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,jc(e,c.$filter);var f,g;(f=mc(e))&&(g=this.recurse(f));var h,i=kc(e.body);i&&(h=[],d(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];d(e.body,function(a){j.push(c.recurse(a.expression))});var k=0===e.body.length?n:1===e.body.length?j[0]:function(a,b){var c;return d(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),
k.literal=nc(e),k.constant=oc(e),k},recurse:function(a,b,c){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case Pf.Literal:return this.value(a.value,b);case Pf.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case Pf.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case Pf.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case Pf.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case Pf.Identifier:return bc(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||rc(a.name),b,c,h.expression);case Pf.MemberExpression:return e=this.recurse(a.object,!1,!!c),a.computed||(bc(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,c,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,b,c,h.expression);case Pf.CallExpression:return g=[],d(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,e));var j=f.apply(void 0,h,e);return b?{context:void 0,name:void 0,value:j}:j}:function(a,c,d,e){var i,j=f(a,c,d,e);if(null!=j.value){dc(j.context,h.expression),ec(j.value,h.expression);for(var k=[],l=0;l<g.length;++l)k.push(dc(g[l](a,c,d,e),h.expression));i=dc(j.value.apply(j.context,k),h.expression)}return b?{value:i}:i};case Pf.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var i=e(a,c,d,g),j=f(a,c,d,g);return dc(i.value,h.expression),fc(i.context),i.context[i.name]=j,b?{value:j}:j};case Pf.ArrayExpression:return g=[],d(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case Pf.ObjectExpression:return g=[],d(a.properties,function(a){a.computed?g.push({key:h.recurse(a.key),computed:!0,value:h.recurse(a.value)}):g.push({key:a.key.type===Pf.Identifier?a.key.name:""+a.key.value,computed:!1,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)g[h].computed?f[g[h].key(a,c,d,e)]=g[h].value(a,c,d,e):f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case Pf.ThisExpression:return function(a){return b?{value:a}:a};case Pf.LocalsExpression:return function(a,c){return b?{value:c}:c};case Pf.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=hc(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(s(h)?h:0)-(s(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,d,e){return function(f,g,h,i){var j=g&&a in g?g:f;d&&1!==d&&j&&!j[a]&&(j[a]={});var k=j?j[a]:void 0;return b&&dc(k,e),c?{context:j,name:a,value:k}:k}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),j=cc(j),bc(j,e),d&&1!==d&&(fc(l),l&&!l[j]&&(l[j]={})),k=l[j],dc(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,c,d,e,f){return function(g,h,i,j){var k=a(g,h,i,j);e&&1!==e&&(fc(k),k&&!k[b]&&(k[b]={}));var l=null!=k?k[b]:void 0;return(c||rc(b))&&dc(l,f),d?{context:k,name:b,value:l}:l}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var Qf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new Pf(a,c),this.astCompiler=c.csp?new qc(this.ast,b):new pc(this.ast,b)};Qf.prototype={constructor:Qf,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var Rf=b("$sce"),Sf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Tf=b("$compile"),Uf=a.document.createElement("a"),Vf=Ic(a.location.href);Lc.$inject=["$document"],Nc.$inject=["$provide"];var Wf=22,Xf=".",Yf="0";Sc.$inject=["$locale"],Tc.$inject=["$locale"];var Zf={yyyy:Yc("FullYear",4,0,!1,!0),yy:Yc("FullYear",2,0,!0,!0),y:Yc("FullYear",1,0,!1,!0),MMMM:Zc("Month"),MMM:Zc("Month",!0),MM:Yc("Month",2,1),M:Yc("Month",1,1),LLLL:Zc("Month",!1,!0),dd:Yc("Date",2),d:Yc("Date",1),HH:Yc("Hours",2),H:Yc("Hours",1),hh:Yc("Hours",2,-12),h:Yc("Hours",1,-12),mm:Yc("Minutes",2),m:Yc("Minutes",1),ss:Yc("Seconds",2),s:Yc("Seconds",1),sss:Yc("Milliseconds",3),EEEE:Zc("Day"),EEE:Zc("Day",!0),a:cd,Z:$c,ww:bd(2),w:bd(1),G:dd,GG:dd,GGG:dd,GGGG:ed},$f=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,_f=/^\-?\d+$/;fd.$inject=["$locale"];var ag=p(Nd),bg=p(Od);jd.$inject=["$parse"];var cg=p({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Yd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),dg={};d(Je,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!==a){var d=rb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),dg[d]=function(){return{restrict:"A",priority:100,link:e}}}}),d(Le,function(a,b){dg[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"===d.ngPattern.charAt(0)){var e=d.ngPattern.match(Kd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),d(["src","srcset","href"],function(a){var b=rb("ng-"+a);dg[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Yd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Rd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var eg={$addControl:n,$$renameControl:ld,$removeControl:n,$setValidity:n,$setDirty:n,$setPristine:n,$setSubmitted:n},fg="ng-submitted";md.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var gg=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||n}var e={name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:md,compile:function(c,e){c.addClass(Qg).addClass(Og);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var i=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};we(c[0],"submit",i),c.on("$destroy",function(){b(function(){xe(c[0],"submit",i)},0,!1)})}var k=g[1]||h.$$parentForm;k.$addControl(h);var l=f?d(h.$name):n;f&&(l(a,h),e.$observe(f,function(b){h.$name!==b&&(l(a,void 0),h.$$parentForm.$$renameControl(h,b),(l=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),l(a,void 0),j(h,eg)})}}}};return e}]},hg=gg(),ig=gg(!0),jg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,kg=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,lg=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,mg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ng=/^(\d{4,})-(\d{2})-(\d{2})$/,og=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,pg=/^(\d{4,})-W(\d\d)$/,qg=/^(\d{4,})-(\d\d)$/,rg=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,sg="keydown wheel mousedown",tg=pa();d("date,datetime-local,month,time,week".split(","),function(a){tg[a]=!0});var ug={text:od,date:sd("date",ng,rd(ng,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":sd("datetimelocal",og,rd(og,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:sd("time",rg,rd(rg,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:sd("week",pg,qd,"yyyy-Www"),month:sd("month",qg,rd(qg,["yyyy","MM"]),"yyyy-MM"),number:zd,url:Bd,email:Cd,radio:Dd,range:Ad,checkbox:Fd,hidden:n,button:n,submit:n,reset:n,file:n},vg=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){if(h[0]){var i=Nd(g.type);"range"!==i||g.hasOwnProperty("ngInputRange")||(i="text"),(ug[i]||ug.text)(e,f,g,h[0],b,a,c,d)}}}}}],wg=/^(true|false|\d+)$/,xg=function(){return{restrict:"A",priority:100,compile:function(a,b){return wg.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},yg=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=r(a)?"":a})}}}}],zg=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){var f=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,f.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=r(a)?"":a})}}}}],Ag=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){var c=f(b);d.html(a.getTrustedHtml(c)||"")})}}}}],Bg=p({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Cg=Gd("",!0),Dg=Gd("Odd",0),Eg=Gd("Even",1),Fg=kd({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),Gg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Hg={},Ig={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=rb("ng-"+a);Hg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};Ig[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Jg=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=oa(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],Kg=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:_d.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],Lg=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return Yd.call(d[0]).match(/SVG/)?(d.empty(),void b(Ba(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void b(d.contents())(c))}}}],Mg=kd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Ng=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,e){var f=b.attr(c.$attr.ngList)||", ",g="false"!==c.ngTrim,h=g?ee(f):f,i=function(a){if(!r(a)){var b=[];return a&&d(a.split(h),function(a){a&&b.push(g?ee(a):a)}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return ce(a)?a.join(f):void 0}),e.$isEmpty=function(a){return!a||!a.length}}}},Og="ng-valid",Pg="ng-invalid",Qg="ng-pristine",Rg="ng-dirty",Sg="ng-untouched",Tg="ng-touched",Ug="ng-pending",Vg="ng-empty",Wg="ng-not-empty",Xg=b("ngModel"),Yg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,c,e,f,g,h,i,j,k){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=k(c.name||"",!1)(a),this.$$parentForm=eg;var l,m=f(c.ngModel),o=m.assign,p=m,q=o,t=null,u=this;this.$$setOptions=function(a){if(u.$options=a,a&&a.getterSetter){var b=f(c.ngModel+"()"),d=f(c.ngModel+"($$$p)");p=function(a){var c=m(a);return y(c)&&(c=b(a)),c},q=function(a,b){y(m(a))?d(a,{$$$p:b}):o(a,b)}}else if(!m.assign)throw Xg("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,Y(e))},this.$render=n,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a},this.$$updateEmptyClasses=function(a){u.$isEmpty(a)?(g.removeClass(e,Wg),g.addClass(e,Vg)):(g.removeClass(e,Vg),g.addClass(e,Wg))};var v=0;Hd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:g}),this.$setPristine=function(){u.$dirty=!1,u.$pristine=!0,g.removeClass(e,Rg),g.addClass(e,Qg)},this.$setDirty=function(){u.$dirty=!0,u.$pristine=!1,g.removeClass(e,Qg),g.addClass(e,Rg),u.$$parentForm.$setDirty()},this.$setUntouched=function(){u.$touched=!1,u.$untouched=!0,g.setClass(e,Sg,Tg)},this.$setTouched=function(){u.$touched=!0,u.$untouched=!1,g.setClass(e,Tg,Sg)},this.$rollbackViewValue=function(){h.cancel(t),u.$viewValue=u.$$lastCommittedViewValue,u.$render()},this.$validate=function(){if(!be(u.$modelValue)){var a=u.$$lastCommittedViewValue,b=u.$$rawModelValue,c=u.$valid,d=u.$modelValue,e=u.$options&&u.$options.allowInvalid;u.$$runValidators(b,a,function(a){e||c===a||(u.$modelValue=a?b:void 0,u.$modelValue!==d&&u.$$writeModelToScope())})}},this.$$runValidators=function(a,b,c){function e(){var a=u.$$parserName||"parse";return r(l)?(h(a,null),!0):(l||(d(u.$validators,function(a,b){h(b,null)}),d(u.$asyncValidators,function(a,b){h(b,null)})),h(a,l),l)}function f(){var c=!0;return d(u.$validators,function(d,e){var f=d(a,b);c=c&&f,h(e,f)}),c?!0:(d(u.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var c=[],e=!0;d(u.$asyncValidators,function(d,f){var g=d(a,b);if(!G(g))throw Xg("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0),c.push(g.then(function(){h(f,!0)},function(){e=!1,h(f,!1)}))}),c.length?j.all(c).then(function(){i(e)},n):i(!0)}function h(a,b){k===v&&u.$setValidity(a,b)}function i(a){k===v&&c(a)}v++;var k=v;return e()&&f()?void g():void i(!1)},this.$commitViewValue=function(){var a=u.$viewValue;h.cancel(t),(u.$$lastCommittedViewValue!==a||""===a&&u.$$hasNativeValidators)&&(u.$$updateEmptyClasses(a),u.$$lastCommittedViewValue=a,u.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){u.$modelValue!==f&&u.$$writeModelToScope()}var c=u.$$lastCommittedViewValue,d=c;if(l=r(d)?void 0:!0)for(var e=0;e<u.$parsers.length;e++)if(d=u.$parsers[e](d),r(d)){l=!1;break}be(u.$modelValue)&&(u.$modelValue=p(a));var f=u.$modelValue,g=u.$options&&u.$options.allowInvalid;u.$$rawModelValue=d,g&&(u.$modelValue=d,b()),u.$$runValidators(d,u.$$lastCommittedViewValue,function(a){g||(u.$modelValue=a?d:void 0,b())})},this.$$writeModelToScope=function(){q(a,u.$modelValue),d(u.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){u.$viewValue=a,(!u.$options||u.$options.updateOnDefault)&&u.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=u.$options;e&&s(e.debounce)&&(c=e.debounce,w(c)?d=c:w(c[b])?d=c[b]:w(c["default"])&&(d=c["default"])),h.cancel(t),d?t=h(function(){u.$commitViewValue()},d):i.$$phase?u.$commitViewValue():a.$apply(function(){u.$commitViewValue()})},a.$watch(function(){var b=p(a);if(b!==u.$modelValue&&(u.$modelValue===u.$modelValue||b===b)){u.$modelValue=u.$$rawModelValue=b,l=void 0;for(var c=u.$formatters,d=c.length,e=b;d--;)e=c[d](e);u.$viewValue!==e&&(u.$$updateEmptyClasses(e),u.$viewValue=u.$$lastCommittedViewValue=e,u.$render(),u.$$runValidators(u.$modelValue,u.$viewValue,n))}return b})}],Zg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Yg,priority:1,compile:function(b){return b.addClass(Qg).addClass(Sg).addClass(Og),{pre:function(a,b,c,d){var e=d[0],f=d[1]||e.$$parentForm;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],$g=/(\s+|^)default(\s+|$)/,_g=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=N(a.$eval(b.ngModelOptions)),s(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=ee(this.$options.updateOn.replace($g,function(){return c.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ah=kd({terminal:!0,priority:1e3}),bh=b("ngOptions"),ch=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,dh=["$compile","$document","$parse",function(b,e,f){function g(a,b,d){function e(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&c(a))b=a;else{b=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b.push(d)}return b}var h=a.match(ch);if(!h)throw bh("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,Y(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=f(h[2]?h[1]:i),n=k&&f(k),o=n||m,p=l&&f(l),q=l?function(a,b){return p(d,b)}:function(a){return $a(a)},r=function(a,b){return q(a,x(a,b))},s=f(h[2]||h[1]),t=f(h[3]||""),u=f(h[4]||""),v=f(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:f(v,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;e>f;f++){var i=a===c?f:c[f],j=a[i],k=x(j,i),l=q(j,k);if(b.push(l),h[2]||h[1]){var m=s(d,k);b.push(m)}if(h[4]){var n=u(d,k);b.push(n)}}return b}),getOptions:function(){for(var a=[],b={},c=v(d)||[],f=g(c),h=f.length,i=0;h>i;i++){var j=c===f?i:f[i],k=c[j],m=x(k,j),n=o(d,m),p=q(n,m),w=s(d,m),y=t(d,m),z=u(d,m),A=new e(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?_d.copy(a.viewValue):a.viewValue}}}}}function h(a,c,f,h){function k(a,b){var c=i.cloneNode(!1);b.appendChild(c),l(a,c)}function l(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=x&&o.readValue();if(x)for(var b=x.items.length-1;b>=0;b--){var d=x.items[b];Sa(s(d.group)?d.element.parentNode:d.element)}x=y.getOptions();var e={};if(v&&c.prepend(n),x.items.forEach(function(a){var b;s(a.group)?(b=e[a.group],b||(b=j.cloneNode(!1),z.appendChild(b),b.label=null===a.group?"null":a.group,e[a.group]=b),k(a,b)):k(a,z)}),c[0].appendChild(z),p.$render(),!p.$isEmpty(a)){var f=o.readValue(),g=y.trackBy||q;(g?O(a,f):a===f)||(p.$setViewValue(f),p.$render())}}for(var n,o=h[0],p=h[1],q=f.multiple,r=0,t=c.children(),u=t.length;u>r;r++)if(""===t[r].value){n=t.eq(r);break}var v=!!n,w=Sd(i.cloneNode(!1));w.val("?");var x,y=g(f.ngOptions,c,a),z=e[0].createDocumentFragment(),A=function(){v||c.prepend(n),c.val(""),n.prop("selected",!0),n.attr("selected",!0)},B=function(){v?n.removeAttr("selected"):n.remove()},C=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},D=function(){w.remove()};q?(p.$isEmpty=function(a){return!a||0===a.length},o.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&(b.element.selected=!0)})},o.readValue=function(){var a=c.val()||[],b=[];return d(a,function(a){var c=x.selectValueMap[a];c&&!c.disabled&&b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&a.$watchCollection(function(){return ce(p.$viewValue)?p.$viewValue.map(function(a){return y.getTrackByValue(a)}):void 0},function(){p.$render()})):(o.writeValue=function(a){var b=x.selectValueMap[c.val()],d=x.getOptionFromViewValue(a);b&&b.element.removeAttribute("selected"),d?(c[0].value!==d.selectValue&&(D(),B(),c[0].value=d.selectValue,d.element.selected=!0),d.element.setAttribute("selected","selected")):null===a||v?(D(),A()):(B(),C())},o.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(B(),D(),x.getViewValueFromOption(a)):null},y.trackBy&&a.$watch(function(){return y.getTrackByValue(p.$viewValue)},function(){p.$render()})),v?(n.remove(),b(n)(a),n.removeClass("ng-scope")):n=Sd(i.cloneNode(!1)),c.empty(),m(),a.$watchCollection(y.getWatchables,m)}var i=a.document.createElement("option"),j=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=n},post:h}}}],eh=["$locale","$interpolate","$log",function(a,b,c){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),o=i.offset||0,p=g.$eval(m)||{},q={},s=b.startSymbol(),t=b.endSymbol(),u=s+l+"-"+o+t,v=_d.noop;d(i,function(a,b){var c=f.exec(b);if(c){var d=(c[1]?"-":"")+Nd(c[2]);p[d]=h.attr(i.$attr[b])}}),d(p,function(a,c){q[c]=b(a.replace(e,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=be(d);if(e||d in p||(d=a.pluralCat(d-o)),!(d===k||e&&be(k))){v();var f=q[d];r(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=n,j()):v=g.$watch(f,j),k=d}})}}}],fh=["$parse","$animate","$compile",function(a,e,f){var g="$$NG_REMOVED",h=b("ngRepeat"),i=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},j=function(a){return a.clone[0]},k=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,l){var m=l.ngRepeat,n=f.$$createComment("end ngRepeat",m),o=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!o)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var p=o[1],q=o[2],r=o[3],s=o[4];if(o=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!o)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var t=o[3]||o[1],u=o[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",r);var v,w,x,y,z={$id:$a};return s?v=a(s):(x=function(a,b){return $a(b)},y=function(a){return a}),function(a,b,f,l,o){v&&(w=function(b,c,d){return u&&(z[u]=b),z[t]=c,z.$index=d,v(a,z)});var p=pa();a.$watchCollection(q,function(f){var l,q,s,v,z,A,B,C,D,E,F,G,H=b[0],I=pa();if(r&&(a[r]=f),c(f))D=f,C=w||x;else{C=w||y,D=[];for(var J in f)Md.call(f,J)&&"$"!==J.charAt(0)&&D.push(J)}for(v=D.length,F=new Array(v),l=0;v>l;l++)if(z=f===D?l:D[l],A=f[z],B=C(z,A,l),p[B])E=p[B],delete p[B],I[B]=E,F[l]=E;else{if(I[B])throw d(F,function(a){a&&a.scope&&(p[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,B,A);F[l]={id:B,scope:void 0,clone:void 0},I[B]=!0}for(var K in p){if(E=p[K],G=oa(E.clone),e.leave(G),G[0].parentNode)for(l=0,q=G.length;q>l;l++)G[l][g]=!0;E.scope.$destroy()}for(l=0;v>l;l++)if(z=f===D?l:D[l],A=f[z],E=F[l],E.scope){s=H;do s=s.nextSibling;while(s&&s[g]);j(E)!==s&&e.move(oa(E.clone),null,H),H=k(E),i(E.scope,l,t,A,u,z,v)}else o(function(a,b){E.scope=b;var c=n.cloneNode(!1);a[a.length++]=c,e.enter(a,null,H),H=c,E.clone=a,I[E.id]=E,i(E.scope,l,t,A,u,z,v)});p=I})}}}}],gh="ng-hide",hh="ng-hide-animate",ih=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,gh,{tempClasses:hh})})}}}],jh=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,gh,{tempClasses:hh})})}}}],kh=kd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),lh=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,e,f,g){var h=f.ngSwitch||f.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var e,f;for(e=0,f=k.length;f>e;++e)a.cancel(k[e]);for(k.length=0,e=0,f=l.length;f>e;++e){var h=oa(j[e].clone);l[e].$destroy();var n=k[e]=a.leave(h);n.then(m(k,e))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&d(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],mh=kd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),nh=kd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),oh=b("ngTransclude"),ph=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var c=a(b.contents());return b.empty(),function(a,b,d,e,f){function g(a,c){a.length?b.append(a):(h(),c.$destroy())}function h(){c(a,function(a){b.append(a)})}if(!f)throw oh("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Y(b));d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");var i=d.ngTransclude||d.ngTranscludeSlot;f(g,null,i),i&&!f.isSlotFilled(i)&&h()}}}}],qh=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"===c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],rh={$setViewValue:n,$render:n},sh=["$element","$scope",function(b,c){var d=this,e=new _a;d.ngModelCtrl=rh,d.unknownOption=Sd(a.document.createElement("option")),d.renderUnknownOption=function(a){var c="? "+$a(a)+" ?";d.unknownOption.val(c),b.prepend(d.unknownOption),b.val(c)},c.$on("$destroy",function(){d.renderUnknownOption=n}),d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()},d.readValue=function(){return d.removeUnknownOption(),b.val()},d.writeValue=function(a){d.hasOption(a)?(d.removeUnknownOption(),b.val(a),""===a&&d.emptyOption.prop("selected",!0)):null==a&&d.emptyOption?(d.removeUnknownOption(),b.val("")):d.renderUnknownOption(a)},d.addOption=function(a,b){if(b[0].nodeType!==qe){ma(a,'"option value"'),""===a&&(d.emptyOption=b);var c=e.get(a)||0;e.put(a,c+1),d.ngModelCtrl.$render(),Jd(b)}},d.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(d.emptyOption=void 0)):e.put(a,b-1))},d.hasOption=function(a){return!!e.get(a)},d.registerOption=function(a,b,c,e,f){if(e){var g;c.$observe("value",function(a){s(g)&&d.removeOption(g),g=a,d.addOption(a,b)})}else f?a.$watch(f,function(a,e){c.$set("value",a),e!==a&&d.removeOption(e),d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value),d.ngModelCtrl.$render()})}}],th=function(){function a(a,b,c,e){var f=e[1];if(f){var g=e[0];if(g.ngModelCtrl=f,b.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return d(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new _a(a);d(b.find("option"),function(a){a.selected=s(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==f.$viewValue||O(h,f.$viewValue)||(h=ra(f.$viewValue),f.$render()),i=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}}function b(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:sh,priority:1,link:{pre:a,post:b}}},uh=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){if(s(c.value))var d=a(c.value,!0);else{var e=a(b.text(),!0);e||c.$set("value",b.text())}return function(a,b,c){var f="$selectController",g=b.parent(),h=g.data(f)||g.parent().data(f);h&&h.registerOption(a,b,c,d,e)}}}}],vh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},wh=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(v(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,Y(c));
f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||r(f)||f.test(b)}}}}},xh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=l(a);e=be(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},yh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=l(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void(a.console&&console.log("WARNING: Tried to load angular more than once.")):(ja(),ua(_d),_d.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}function c(a,c){var d=c;void 0===d&&(d=Math.min(b(a),3));var e=Math.pow(10,d),f=(a*e|0)%e;return{v:d,f:f}}var d={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,b){var e=0|a,f=c(a,b);return 1==e&&0==f.v?d.ONE:d.OTHER}})}]),void Sd(a.document).ready(function(){ea(a.document,fa)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){
c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),function(a,b){"use strict";function c(a,b,c){if(!a)throw pa("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function d(a,b){return a||b?a?b?(X(a)&&(a=a.join(" ")),X(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function e(a){var b={};return a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from),b}function f(a,b,c){var d="";return a=X(a)?a:a&&aa(a)&&a.length?a.split(/\s+/):[],W(a,function(a,e){a&&a.length>0&&(d+=e>0?" ":"",d+=c?b+a:a+b)}),d}function g(a,b){var c=a.indexOf(b);b>=0&&a.splice(c,1)}function h(a){if(a instanceof ca)switch(a.length){case 0:return a;case 1:if(a[0].nodeType===L)return a;break;default:return ca(i(a))}return a.nodeType===L?ca(a):void 0}function i(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===L)return c}}function j(a,b,c){W(b,function(b){a.addClass(b,c)})}function k(a,b,c){W(b,function(b){a.removeClass(b,c)})}function l(a){return function(b,c){c.addClass&&(j(a,b,c.addClass),c.addClass=null),c.removeClass&&(k(a,b,c.removeClass),c.removeClass=null)}}function m(a){if(a=a||{},!a.$$prepared){var b=a.domOperation||da;a.domOperation=function(){a.$$domOperationFired=!0,b(),b=da},a.$$prepared=!0}return a}function n(a,b){o(a,b),p(a,b)}function o(a,b){b.from&&(a.css(b.from),b.from=null)}function p(a,b){b.to&&(a.css(b.to),b.to=null)}function q(a,b,c){var d=b.options||{},e=c.options||{},f=(d.addClass||"")+" "+(e.addClass||""),g=(d.removeClass||"")+" "+(e.removeClass||""),h=r(a.attr("class"),f,g);e.preparationClasses&&(d.preparationClasses=y(e.preparationClasses,d.preparationClasses),delete e.preparationClasses);var i=d.domOperation!==da?d.domOperation:null;return V(d,e),i&&(d.domOperation=i),h.addClass?d.addClass=h.addClass:d.addClass=null,h.removeClass?d.removeClass=h.removeClass:d.removeClass=null,b.addClass=d.addClass,b.removeClass=d.removeClass,d}function r(a,b,c){function d(a){aa(a)&&(a=a.split(" "));var b={};return W(a,function(a){a.length&&(b[a]=!0)}),b}var e=1,f=-1,g={};a=d(a),b=d(b),W(b,function(a,b){g[b]=e}),c=d(c),W(c,function(a,b){g[b]=g[b]===e?null:f});var h={addClass:"",removeClass:""};return W(g,function(b,c){var d,g;b===e?(d="addClass",g=!a[c]||a[c+N]):b===f&&(d="removeClass",g=a[c]||a[c+M]),g&&(h[d].length&&(h[d]+=" "),h[d]+=c)}),h}function s(a){return a instanceof ca?a[0]:a}function t(a,b,c){var d="";b&&(d=f(b,O,!0)),c.addClass&&(d=y(d,f(c.addClass,M))),c.removeClass&&(d=y(d,f(c.removeClass,N))),d.length&&(c.preparationClasses=d,a.addClass(d))}function u(a,b){b.preparationClasses&&(a.removeClass(b.preparationClasses),b.preparationClasses=null),b.activeClasses&&(a.removeClass(b.activeClasses),b.activeClasses=null)}function v(a,b){var c=b?"-"+b+"s":"";return x(a,[na,c]),[na,c]}function w(a,b){var c=b?"paused":"",d=J+ja;return x(a,[d,c]),[d,c]}function x(a,b){var c=b[0],d=b[1];a.style[c]=d}function y(a,b){return a?b?a+" "+b:a:b}function z(a){return[ma,a+"s"]}function A(a,b){var c=b?la:na;return[c,a+"s"]}function B(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};return W(c,function(a,b){var c=e[a];if(c){var f=c.charAt(0);("-"===f||"+"===f||f>=0)&&(c=C(c)),0===c&&(c=null),d[b]=c}}),d}function C(a){var b=0,c=a.split(/\s*,\s*/);return W(c,function(a){"s"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=parseFloat(a)||0,b=b?Math.max(a,b):a}),b}function D(a){return 0===a||null!=a}function E(a,b){var c=H,d=a+"s";return b?c+=ea:d+=" linear all",[c,d]}function F(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){var c=a[b];return c?c.total:0},get:function(b){var c=a[b];return c&&c.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function G(a,b,c){W(c,function(c){a[c]=Y(a[c])?a[c]:b.style.getPropertyValue(c)})}var H,I,J,K,L=1,M="-add",N="-remove",O="ng-",P="-active",Q="-prepare",R="ng-animate",S="$$ngAnimateChildren",T="";void 0===a.ontransitionend&&void 0!==a.onwebkittransitionend?(T="-webkit-",H="WebkitTransition",I="webkitTransitionEnd transitionend"):(H="transition",I="transitionend"),void 0===a.onanimationend&&void 0!==a.onwebkitanimationend?(T="-webkit-",J="WebkitAnimation",K="webkitAnimationEnd animationend"):(J="animation",K="animationend");var U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea="Duration",fa="Property",ga="Delay",ha="TimingFunction",ia="IterationCount",ja="PlayState",ka=9999,la=J+ga,ma=J+ea,na=H+ga,oa=H+ea,pa=b.$$minErr("ng"),qa=["$$rAF",function(a){function b(a){d=d.concat(a),c()}function c(){if(d.length){for(var b=d.shift(),f=0;f<b.length;f++)b[f]();e||a(function(){e||c()})}}var d,e;return d=b.queue=[],b.waitUntilQuiet=function(b){e&&e(),e=a(function(){e=null,b(),c()})},b}],ra=["$interpolate",function(a){return{link:function(b,c,d){function e(a){a="on"===a||"true"===a,c.data(S,a)}var f=d.ngAnimateChildren;aa(f)&&0===f.length?c.data(S,!0):(e(a(f)(b)),d.$observe("ngAnimateChildren",e))}}}],sa="$$animateCss",ta=1e3,ua=3,va=1.5,wa={transitionDuration:oa,transitionDelay:na,transitionProperty:H+fa,animationDuration:ma,animationDelay:la,animationIterationCount:J+ia},xa={transitionDuration:oa,transitionDelay:na,animationDuration:ma,animationDelay:la},ya=["$animateProvider",function(a){var b=F(),c=F();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,d,h,i,j,k,q,r){function t(a,b){var c="$$ngAnimateParentKey",d=a.parentNode,e=d[c]||(d[c]=++Q);return e+"-"+a.getAttribute("class")+"-"+b}function u(c,d,e,f){var g=b.get(e);return g||(g=B(a,c,f),"infinite"===g.animationIterationCount&&(g.animationIterationCount=1)),b.put(e,g),g}function y(e,g,h,i){var j;if(b.count(h)>0&&(j=c.get(h),!j)){var k=f(g,"-stagger");d.addClass(e,k),j=B(a,e,i),j.animationDuration=Math.max(j.animationDuration,0),j.transitionDuration=Math.max(j.transitionDuration,0),d.removeClass(e,k),c.put(h,j)}return j||{}}function C(a){R.push(a),q.waitUntilQuiet(function(){b.flush(),c.flush();for(var a=j(),d=0;d<R.length;d++)R[d](a);R.length=0})}function F(a,b,c){var d=u(a,b,c,wa),e=d.animationDelay,f=d.transitionDelay;return d.maxDelay=e&&f?Math.max(e,f):e||f,d.maxDuration=Math.max(d.animationDuration*d.animationIterationCount,d.transitionDuration),d}var L=l(d),Q=0,R=[];return function(a,c){function j(){q()}function l(){q(!0)}function q(b){if(!(Y||$&&Z)){Y=!0,Z=!1,S.$$skipPreparationClasses||d.removeClass(a,wa),d.removeClass(a,za),w(V,!1),v(V,!1),W(ja,function(a){V.style[a[0]]=""}),L(a,S),n(a,S),Object.keys(T).length&&W(T,function(a,b){a?V.style.setProperty(b,a):V.style.removeProperty(b)}),S.onDone&&S.onDone(),na&&na.length&&a.off(na.join(" "),Q);var c=a.data(sa);c&&(i.cancel(c[0].timer),a.removeData(sa)),_&&_.complete(!b)}}function u(a){Na.blockTransition&&v(V,a),Na.blockKeyframeAnimation&&w(V,!!a)}function B(){return _=new h({end:j,cancel:l}),C(da),q(),{$$willAnimate:!1,start:function(){return _},end:j}}function Q(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||Date.now(),d=parseFloat(b.elapsedTime.toFixed(ua));Math.max(c-ia,0)>=ca&&d>=ea&&($=!0,q())}function R(){function b(){if(!Y){if(u(!1),W(ja,function(a){var b=a[0],c=a[1];V.style[b]=c}),L(a,S),d.addClass(a,za),Na.recalculateTimingStyles){if(ya=V.className+" "+wa,Ca=t(V,ya),La=F(V,ya,Ca),Ma=La.maxDelay,ba=Math.max(Ma,0),ea=La.maxDuration,0===ea)return void q();Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0}if(Na.applyAnimationDelay&&(Ma="boolean"!=typeof S.delay&&D(S.delay)?parseFloat(S.delay):Ma,ba=Math.max(Ma,0),La.animationDelay=Ma,Oa=A(Ma,!0),ja.push(Oa),V.style[Oa[0]]=Oa[1]),ca=ba*ta,ga=ea*ta,S.easing){var b,e=S.easing;Na.hasTransitions&&(b=H+ha,ja.push([b,e]),V.style[b]=e),Na.hasAnimations&&(b=J+ha,ja.push([b,e]),V.style[b]=e)}La.transitionDuration&&na.push(I),La.animationDuration&&na.push(K),ia=Date.now();var f=ca+va*ga,g=ia+f,h=a.data(sa)||[],j=!0;if(h.length){var k=h[0];j=g>k.expectedEndTime,j?i.cancel(k.timer):h.push(q)}if(j){var l=i(c,f,!1);h[0]={timer:l,expectedEndTime:g},h.push(q),a.data(sa,h)}na.length&&a.on(na.join(" "),Q),S.to&&(S.cleanupStyles&&G(T,V,Object.keys(S.to)),p(a,S))}}function c(){var b=a.data(sa);if(b){for(var c=1;c<b.length;c++)b[c]();a.removeData(sa)}}if(!Y){if(!V.parentNode)return void q();var e=function(a){if($)Z&&a&&(Z=!1,q());else if(Z=!a,La.animationDuration){var b=w(V,Z);Z?ja.push(b):g(ja,b)}},f=Ja>0&&(La.transitionDuration&&0===Da.transitionDuration||La.animationDuration&&0===Da.animationDuration)&&Math.max(Da.animationDelay,Da.transitionDelay);f?i(b,Math.floor(f*Ja*ta),!1):b(),aa.resume=function(){e(!0)},aa.pause=function(){e(!1)}}}var S=c||{};S.$$prepared||(S=m(U(S)));var T={},V=s(a);if(!V||!V.parentNode||!r.enabled())return B();var Y,Z,$,_,aa,ba,ca,ea,ga,ia,ja=[],la=a.attr("class"),ma=e(S),na=[];if(0===S.duration||!k.animations&&!k.transitions)return B();var oa=S.event&&X(S.event)?S.event.join(" "):S.event,pa=oa&&S.structural,qa="",ra="";pa?qa=f(oa,O,!0):oa&&(qa=oa),S.addClass&&(ra+=f(S.addClass,M)),S.removeClass&&(ra.length&&(ra+=" "),ra+=f(S.removeClass,N)),S.applyClassesEarly&&ra.length&&L(a,S);var wa=[qa,ra].join(" ").trim(),ya=la+" "+wa,za=f(wa,P),Aa=ma.to&&Object.keys(ma.to).length>0,Ba=(S.keyframeStyle||"").length>0;if(!Ba&&!Aa&&!wa)return B();var Ca,Da;if(S.stagger>0){var Ea=parseFloat(S.stagger);Da={transitionDelay:Ea,animationDelay:Ea,transitionDuration:0,animationDuration:0}}else Ca=t(V,ya),Da=y(V,wa,Ca,xa);S.$$skipPreparationClasses||d.addClass(a,wa);var Fa;if(S.transitionStyle){var Ga=[H,S.transitionStyle];x(V,Ga),ja.push(Ga)}if(S.duration>=0){Fa=V.style[H].length>0;var Ha=E(S.duration,Fa);x(V,Ha),ja.push(Ha)}if(S.keyframeStyle){var Ia=[J,S.keyframeStyle];x(V,Ia),ja.push(Ia)}var Ja=Da?S.staggerIndex>=0?S.staggerIndex:b.count(Ca):0,Ka=0===Ja;Ka&&!S.skipBlocking&&v(V,ka);var La=F(V,ya,Ca),Ma=La.maxDelay;ba=Math.max(Ma,0),ea=La.maxDuration;var Na={};if(Na.hasTransitions=La.transitionDuration>0,Na.hasAnimations=La.animationDuration>0,Na.hasTransitionAll=Na.hasTransitions&&"all"===La.transitionProperty,Na.applyTransitionDuration=Aa&&(Na.hasTransitions&&!Na.hasTransitionAll||Na.hasAnimations&&!Na.hasTransitions),Na.applyAnimationDuration=S.duration&&Na.hasAnimations,Na.applyTransitionDelay=D(S.delay)&&(Na.applyTransitionDuration||Na.hasTransitions),Na.applyAnimationDelay=D(S.delay)&&Na.hasAnimations,Na.recalculateTimingStyles=ra.length>0,(Na.applyTransitionDuration||Na.applyAnimationDuration)&&(ea=S.duration?parseFloat(S.duration):ea,Na.applyTransitionDuration&&(Na.hasTransitions=!0,La.transitionDuration=ea,Fa=V.style[H+fa].length>0,ja.push(E(ea,Fa))),Na.applyAnimationDuration&&(Na.hasAnimations=!0,La.animationDuration=ea,ja.push(z(ea)))),0===ea&&!Na.recalculateTimingStyles)return B();if(null!=S.delay){var Oa;"boolean"!=typeof S.delay&&(Oa=parseFloat(S.delay),ba=Math.max(Oa,0)),Na.applyTransitionDelay&&ja.push(A(Oa)),Na.applyAnimationDelay&&ja.push(A(Oa,!0))}return null==S.duration&&La.transitionDuration>0&&(Na.recalculateTimingStyles=Na.recalculateTimingStyles||Ka),ca=ba*ta,ga=ea*ta,S.skipBlocking||(Na.blockTransition=La.transitionDuration>0,Na.blockKeyframeAnimation=La.animationDuration>0&&Da.animationDelay>0&&0===Da.animationDuration),S.from&&(S.cleanupStyles&&G(T,V,Object.keys(S.from)),o(a,S)),Na.blockTransition||Na.blockKeyframeAnimation?u(ea):S.skipBlocking||v(V,!1),{$$willAnimate:!0,end:j,start:function(){return Y?void 0:(aa={end:j,cancel:l,resume:null,pause:null},_=new h(aa),C(R),_)}}}}]}],za=["$$animationProvider",function(a){function b(a){return a.parentNode&&11===a.parentNode.nodeType}a.drivers.push("$$animateCssDriver");var c="ng-animate-shim",d="ng-anchor",e="ng-anchor-out",f="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,g,h,i,j,k,l){function m(a){return a.replace(/\bng-\S+\b/g,"")}function n(a,b){return aa(a)&&(a=a.split(" ")),aa(b)&&(b=b.split(" ")),a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}function o(b,g,i){function j(a){var b={},c=s(a).getBoundingClientRect();return W(["width","height","top","left"],function(a){var d=c[a];switch(a){case"top":d+=r.scrollTop;break;case"left":d+=r.scrollLeft}b[a]=Math.floor(d)+"px"}),b}function k(){var b=a(q,{addClass:e,delay:!0,from:j(g)});return b.$$willAnimate?b:null}function l(a){return a.attr("class")||""}function o(){var b=m(l(i)),c=n(b,t),d=n(t,b),g=a(q,{to:j(i),addClass:f+" "+c,removeClass:e+" "+d,delay:!0});return g.$$willAnimate?g:null}function p(){q.remove(),g.removeClass(c),i.removeClass(c)}var q=ca(s(g).cloneNode(!0)),t=m(l(q));g.addClass(c),i.addClass(c),q.addClass(d),u.append(q);var v,w=k();if(!w&&(v=o(),!v))return p();var x=w||v;return{start:function(){function a(){c&&c.end()}var b,c=x.start();return c.done(function(){return c=null,!v&&(v=o())?(c=v.start(),c.done(function(){c=null,p(),b.complete()}),c):(p(),void b.complete())}),b=new h({end:a,cancel:a})}}}function p(a,b,c,d){var e=q(a,da),f=q(b,da),g=[];return W(d,function(a){var b=a.out,d=a["in"],e=o(c,b,d);e&&g.push(e)}),e||f||0!==g.length?{start:function(){function a(){W(b,function(a){a.end()})}var b=[];e&&b.push(e.start()),f&&b.push(f.start()),W(g,function(a){b.push(a.start())});var c=new h({end:a,cancel:a});return h.all(b,function(a){c.complete(a)}),c}}:void 0}function q(b){var c=b.element,d=b.options||{};b.structural&&(d.event=b.event,d.structural=!0,d.applyClassesEarly=!0,"leave"===b.event&&(d.onDone=d.domOperation)),d.preparationClasses&&(d.event=y(d.event,d.preparationClasses));var e=a(c,d);return e.$$willAnimate?e:null}if(!j.animations&&!j.transitions)return da;var r=l[0].body,t=s(i),u=ca(b(t)||r.contains(t)?t:r);return function(a){return a.from&&a.to?p(a.from,a.to,a.classes,a.anchors):q(a)}}]}],Aa=["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=X(c)?c:c.split(" ");for(var d=[],e={},f=0;f<c.length;f++){var g=c[f],h=a.$$registeredAnimations[g];h&&!e[g]&&(d.push(b.get(h)),e[g]=!0)}return d}var f=l(d);return function(a,b,d,g){function h(){g.domOperation(),f(a,g)}function i(){o=!0,h(),n(a,g)}function j(a,b,d,e,f){var g;switch(d){case"animate":g=[b,e.from,e.to,f];break;case"setClass":g=[b,r,s,f];break;case"addClass":g=[b,r,f];break;case"removeClass":g=[b,s,f];break;default:g=[b,f]}g.push(e);var h=a.apply(a,g);if(h)if($(h.start)&&(h=h.start()),h instanceof c)h.done(f);else if($(h))return h;return da}function k(a,b,d,e,f){var g=[];return W(e,function(e){var h=e[f];h&&g.push(function(){var e,f,g=!1,i=function(a){g||(g=!0,(f||da)(a),e.complete(!a))};return e=new c({end:function(){i()},cancel:function(){i(!0)}}),f=j(h,a,b,d,function(a){var b=a===!1;i(b)}),e})}),g}function l(a,b,d,e,f){var g=k(a,b,d,e,f);if(0===g.length){var h,i;"beforeSetClass"===f?(h=k(a,"removeClass",d,e,"beforeRemoveClass"),i=k(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=k(a,"removeClass",d,e,"removeClass"),i=k(a,"addClass",d,e,"addClass")),h&&(g=g.concat(h)),i&&(g=g.concat(i))}if(0!==g.length)return function(a){var b=[];return g.length&&W(g,function(a){b.push(a())}),b.length?c.all(b,a):a(),function(a){W(b,function(b){a?b.cancel():b.end()})}}}var o=!1;3===arguments.length&&_(d)&&(g=d,d=null),g=m(g),d||(d=a.attr("class")||"",g.addClass&&(d+=" "+g.addClass),g.removeClass&&(d+=" "+g.removeClass));var p,q,r=g.addClass,s=g.removeClass,t=e(d);if(t.length){var u,v;"leave"===b?(v="leave",u="afterLeave"):(v="before"+b.charAt(0).toUpperCase()+b.substr(1),u=b),"enter"!==b&&"move"!==b&&(p=l(a,b,g,t,v)),q=l(a,b,g,t,u)}if(p||q){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(i(),w=new c,w.complete(!0)),w},start:function(){function a(a){i(a),w.complete(a)}function b(b){o||((d||da)(b),a(b))}if(w)return w;w=new c;var d,e=[];return p&&e.push(function(a){d=p(a)}),e.length?e.push(function(a){h(),a(!0)}):h(),q&&e.push(function(a){d=q(a)}),w.setHost({end:function(){b()},cancel:function(){b(!0)}}),c.chain(e,a),w}}}}}]}],Ba=["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(a,b){function c(b){var c=b.element,d=b.event,e=b.options,f=b.classes;return a(c,d,f,e)}return function(a){if(a.from&&a.to){var d=c(a.from),e=c(a.to);if(!d&&!e)return;return{start:function(){function a(){return function(){W(f,function(a){a.end()})}}function c(a){g.complete(a)}var f=[];d&&f.push(d.start()),e&&f.push(e.start()),b.all(f,c);var g=new b({end:a(),cancel:a()});return g}}}return c(a)}}]}],Ca="data-ng-animate",Da="$ngAnimatePin",Ea=["$animateProvider",function(b){function d(a){if(!a)return null;var b=a.split(o),c=Object.create(null);return W(b,function(a){c[a]=!0}),c}function e(a,b){if(a&&b){var c=d(b);return a.split(o).some(function(a){return c[a]})}}function f(a,b,c,d){return p[a].some(function(a){return a(b,c,d)})}function g(a,b){var c=(a.addClass||"").length>0,d=(a.removeClass||"").length>0;return b?c&&d:c||d}var j=1,k=2,o=" ",p=this.rules={skip:[],cancel:[],join:[]};p.join.push(function(a,b,c){return!b.structural&&g(b)}),p.skip.push(function(a,b,c){return!b.structural&&!g(b)}),p.skip.push(function(a,b,c){return"leave"===c.event&&b.structural}),p.skip.push(function(a,b,c){return c.structural&&c.state===k&&!b.structural}),p.cancel.push(function(a,b,c){return c.structural&&b.structural}),p.cancel.push(function(a,b,c){return c.state===k&&b.structural}),p.cancel.push(function(a,b,c){if(c.structural)return!1;var d=b.addClass,f=b.removeClass,g=c.addClass,h=c.removeClass;return ba(d)&&ba(f)||ba(g)&&ba(h)?!1:e(d,h)||e(f,g)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(d,e,o,p,r,v,w,x,y,z){function A(){var a=!1;return function(b){a?b():e.$$postDigest(function(){a=!0,b()})}}function B(a,b){return q(a,b,{})}function C(a,b,c){var d=s(b),e=s(a),f=[],g=Q[c];return g&&W(g,function(a){da.call(a.node,d)?f.push(a.callback):"leave"===c&&da.call(a.node,e)&&f.push(a.callback)}),f}function D(a,b,c){var d=i(b);return a.filter(function(a){var b=a.node===d&&(!c||a.callback===c);return!b})}function E(a,b){"close"!==a||b[0].parentNode||ea.off(b)}function F(a,b,c){function i(b,c,e,f){z(function(){var b=C(r,a,c);b.length?d(function(){W(b,function(b){b(a,e,f)}),E(e,a)}):E(e,a)}),b.progress(c,e,f)}function l(b){u(a,x),$(a,x),n(a,x),x.domOperation(),y.complete(!b)}var o,r,x=U(c);a=h(a),a&&(o=s(a),r=a.parent()),x=m(x);var y=new w,z=A();if(X(x.addClass)&&(x.addClass=x.addClass.join(" ")),x.addClass&&!aa(x.addClass)&&(x.addClass=null),X(x.removeClass)&&(x.removeClass=x.removeClass.join(" ")),x.removeClass&&!aa(x.removeClass)&&(x.removeClass=null),x.from&&!_(x.from)&&(x.from=null),x.to&&!_(x.to)&&(x.to=null),!o)return l(),y;var D=[o.className,x.addClass,x.removeClass].join(" ");if(!T(D))return l(),y;var F=["enter","move","leave"].indexOf(b)>=0,I=p[0].hidden,L=!O||I||N.get(o),P=!L&&M.get(o)||{},Q=!!P.state;if(L||Q&&P.state===j||(L=!J(a,r,b)),L)return I&&i(y,b,"start"),l(),I&&i(y,b,"close"),y;F&&G(a);var R={structural:F,element:a,event:b,addClass:x.addClass,removeClass:x.removeClass,close:l,options:x,runner:y};if(Q){var S=f("skip",a,R,P);if(S)return P.state===k?(l(),y):(q(a,P,R),P.runner);var V=f("cancel",a,R,P);if(V)if(P.state===k)P.runner.end();else{if(!P.structural)return q(a,P,R),P.runner;P.close()}else{var Y=f("join",a,R,P);if(Y){if(P.state!==k)return t(a,F?b:null,x),b=R.event=P.event,x=q(a,P,R),P.runner;B(a,R)}}}else B(a,R);var Z=R.structural;if(Z||(Z="animate"===R.event&&Object.keys(R.options.to||{}).length>0||g(R)),!Z)return l(),H(a),y;var ba=(P.counter||0)+1;return R.counter=ba,K(a,j,R),e.$$postDigest(function(){var c=M.get(o),d=!c;c=c||{};var e=a.parent()||[],f=e.length>0&&("animate"===c.event||c.structural||g(c));if(d||c.counter!==ba||!f)return d&&($(a,x),n(a,x)),(d||F&&c.event!==b)&&(x.domOperation(),y.end()),void(f||H(a));b=!c.structural&&g(c,!0)?"setClass":c.event,K(a,k);var h=v(a,b,c.options);y.setHost(h),i(y,b,"start",{}),h.done(function(c){l(!c);var d=M.get(o);d&&d.counter===ba&&H(s(a)),i(y,b,"close",{})})}),y}function G(a){var b=s(a),c=b.querySelectorAll("["+Ca+"]");W(c,function(a){var b=parseInt(a.getAttribute(Ca),10),c=M.get(a);if(c)switch(b){case k:c.runner.end();case j:M.remove(a)}})}function H(a){var b=s(a);b.removeAttribute(Ca),M.remove(b)}function I(a,b){return s(a)===s(b)}function J(a,b,c){var d,e=ca(p[0].body),f=I(a,e)||"HTML"===a[0].nodeName,g=I(a,o),h=!1,i=N.get(s(a)),j=ca.data(a[0],Da);for(j&&(b=j),b=s(b);b&&(g||(g=I(b,o)),b.nodeType===L);){var k=M.get(b)||{};if(!h){var l=N.get(b);if(l===!0&&i!==!1){i=!0;break}l===!1&&(i=!1),h=k.structural}if(ba(d)||d===!0){var m=ca.data(b,S);Y(m)&&(d=m)}if(h&&d===!1)break;if(f||(f=I(b,e)),f&&g)break;b=g||!(j=ca.data(b,Da))?b.parentNode:s(j)}var n=(!h||d)&&i!==!0;return n&&g&&f}function K(a,b,c){c=c||{},c.state=b;var d=s(a);d.setAttribute(Ca,b);var e=M.get(d),f=e?V(e,c):c;M.put(d,f)}var M=new r,N=new r,O=null,P=e.$watch(function(){return 0===x.totalPendingRequests},function(a){a&&(P(),e.$$postDigest(function(){e.$$postDigest(function(){null===O&&(O=!0)})}))}),Q=Object.create(null),R=b.classNameFilter(),T=R?function(a){return R.test(a)}:function(){return!0},$=l(y),da=a.Node.prototype.contains||function(a){return this===a||!!(16&this.compareDocumentPosition(a))},ea={on:function(a,b,c){var d=i(b);Q[a]=Q[a]||[],Q[a].push({node:d,callback:c}),ca(b).on("$destroy",function(){var e=M.get(d);e||ea.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||aa(arguments[0])){var d=Q[a];d&&(Q[a]=1===arguments.length?null:D(d,b,c))}else{b=arguments[0];for(var e in Q)Q[e]=D(Q[e],b)}},pin:function(a,b){c(Z(a),"element","not an element"),c(Z(b),"parentElement","not an element"),a.data(Da,b)},push:function(a,b,c,d){return c=c||{},c.domOperation=d,F(a,b,c)},enabled:function(a,b){var c=arguments.length;if(0===c)b=!!O;else{var d=Z(a);if(d){var e=s(a);1===c?b=!N.get(e):N.put(e,!b)}else b=O=!!a}return b}};return ea}]}],Fa=["$animateProvider",function(a){function b(a,b){a.data(h,b)}function c(a){a.removeData(h)}function e(a){return a.data(h)}var f="ng-animate-ref",g=this.drivers=[],h="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,h,i,j,k,o){function p(a){function b(a){if(a.processed)return a;a.processed=!0;var c=a.domNode,d=c.parentNode;f.put(c,a);for(var g;d;){if(g=f.get(d)){g.processed||(g=b(g));break}d=d.parentNode}return(g||e).children.push(a),a}function c(a){var b,c=[],d=[];for(b=0;b<a.children.length;b++)d.push(a.children[b]);var e=d.length,f=0,g=[];for(b=0;b<d.length;b++){var h=d[b];0>=e&&(e=f,f=0,c.push(g),g=[]),g.push(h.fn),h.children.forEach(function(a){f++,d.push(a)}),e--}return g.length&&c.push(g),c}var d,e={children:[]},f=new k;for(d=0;d<a.length;d++){var g=a[d];f.put(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return c(e)}var q=[],r=l(a);return function(k,l,t){function u(a){var b="["+f+"]",c=a.hasAttribute(f)?[a]:a.querySelectorAll(b),d=[];return W(c,function(a){var b=a.getAttribute(f);b&&b.length&&d.push(a)}),d}function v(a){var b=[],c={};W(a,function(a,d){var e=a.element,g=s(e),h=a.event,i=["enter","move"].indexOf(h)>=0,j=a.structural?u(g):[];if(j.length){var k=i?"to":"from";W(j,function(a){var b=a.getAttribute(f);c[b]=c[b]||{},c[b][k]={animationID:d,element:ca(a)}})}else b.push(a)});var d={},e={};return W(c,function(c,f){var g=c.from,h=c.to;if(!g||!h){var i=g?g.animationID:h.animationID,j=i.toString();return void(d[j]||(d[j]=!0,b.push(a[i])))}var k=a[g.animationID],l=a[h.animationID],m=g.animationID.toString();if(!e[m]){var n=e[m]={structural:!0,beforeStart:function(){k.beforeStart(),l.beforeStart()},close:function(){k.close(),l.close()},classes:w(k.classes,l.classes),from:k,to:l,anchors:[]};n.classes.length?b.push(n):(b.push(k),b.push(l))}e[m].anchors.push({out:g.element,"in":h.element})}),b}function w(a,b){a=a.split(" "),b=b.split(" ");for(var c=[],d=0;d<a.length;d++){var e=a[d];if("ng-"!==e.substring(0,3))for(var f=0;f<b.length;f++)if(e===b[f]){c.push(e);break}}return c.join(" ")}function x(a){for(var b=g.length-1;b>=0;b--){var c=g[b],d=i.get(c),e=d(a);if(e)return e}}function y(){k.addClass(R),F&&a.addClass(k,F),G&&(a.removeClass(k,G),G=null)}function z(a,b){function c(a){var c=e(a);c&&c.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function A(){var a=e(k);!a||"leave"===l&&t.$$domOperationFired||a.end()}function B(b){k.off("$destroy",A),c(k),r(k,t),n(k,t),t.domOperation(),F&&a.removeClass(k,F),k.removeClass(R),D.complete(!b)}t=m(t);var C=["enter","move","leave"].indexOf(l)>=0,D=new j({end:function(){B()},cancel:function(){B(!0)}});if(!g.length)return B(),D;b(k,D);var E=d(k.attr("class"),d(t.addClass,t.removeClass)),F=t.tempClasses;F&&(E+=" "+F,t.tempClasses=null);var G;return C&&(G="ng-"+l+Q,a.addClass(k,G)),q.push({element:k,classes:E,event:l,structural:C,options:t,beforeStart:y,close:B}),k.on("$destroy",A),q.length>1?D:(h.$$postDigest(function(){var a=[];W(q,function(b){e(b.element)?a.push(b):b.close()}),q.length=0;var b=v(a),c=[];W(b,function(a){c.push({domNode:s(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close,d=a.anchors?a.from.element||a.to.element:a.element;if(e(d)){var f=x(a);f&&(b=f.start)}if(b){var g=b();g.done(function(a){c(!a)}),z(a,g)}else c()}})}),o(p(c))}),D)}}]}],Ga=["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,c,d,e,f){var g,h;b.$watchCollection(d.ngAnimateSwap||d["for"],function(d){g&&a.leave(g),h&&(h.$destroy(),h=null),(d||0===d)&&(h=b.$new(),f(h,function(b){g=b,a.enter(b,null,c)}))})}}}];b.module("ngAnimate",[],function(){da=b.noop,U=b.copy,V=b.extend,ca=b.element,W=b.forEach,X=b.isArray,aa=b.isString,_=b.isObject,ba=b.isUndefined,Y=b.isDefined,$=b.isFunction,Z=b.isElement}).directive("ngAnimateSwap",Ga).directive("ngAnimateChildren",ra).factory("$$rAFScheduler",qa).provider("$$animateQueue",Ea).provider("$$animation",Fa).provider("$animateCss",ya).provider("$$animateCssDriver",za).provider("$$animateJs",Aa).provider("$$animateJsDriver",Ba)}(window,window.angular),function(a,b){"use strict";function c(a,c,d){function e(a,d,e){var g,h;e=e||{},h=e.expires,g=b.isDefined(e.path)?e.path:f,b.isUndefined(d)&&(h="Thu, 01 Jan 1970 00:00:00 GMT",d=""),b.isString(h)&&(h=new Date(h));var i=encodeURIComponent(a)+"="+encodeURIComponent(d);i+=g?";path="+g:"",i+=e.domain?";domain="+e.domain:"",i+=h?";expires="+h.toUTCString():"",i+=e.secure?";secure":"";var j=i.length+1;return j>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+j+" > 4096 bytes)!"),i}var f=d.baseHref(),g=a[0];return function(a,b,c){g.cookie=e(a,b,c)}}b.module("ngCookies",["ng"]).provider("$cookies",[function(){function a(a){return a?b.extend({},c,a):c}var c=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(c,d){return{get:function(a){return c()[a]},getObject:function(a){var c=this.get(a);return c?b.fromJson(c):c},getAll:function(){return c()},put:function(b,c,e){d(b,c,a(e))},putObject:function(a,c,d){this.put(a,b.toJson(c),d)},remove:function(b,c){d(b,void 0,a(c))}}}]}]),b.module("ngCookies").factory("$cookieStore",["$cookies",function(a){return{get:function(b){return a.getObject(b)},put:function(b,c){a.putObject(b,c)},remove:function(b){a.remove(b)}}}]),c.$inject=["$document","$log","$browser"],b.module("ngCookies").provider("$$cookieWriter",function(){this.$get=c})}(window,window.angular),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(d,h){function i(a){return j(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function j(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function k(b,c){this.template=b,this.defaults=o({},a.defaults,c),this.urlParams={}}function l(i,j,r,s){function t(a,b){var c={};return b=o({},j,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function u(a){return a.resource}function v(a){f(a||{},this)}var w=new k(i,s);return r=o({},a.defaults.actions,r),v.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,a},n(r,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);v[e]=function(j,k,l,r){var s,x,y,z={};switch(arguments.length){case 4:y=r,x=l;case 3:case 2:if(!q(k)){z=j,s=k,x=l;break}if(q(j)){x=j,y=k;break}x=k,y=l;case 1:q(j)?x=j:i?s=j:z=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof v,B=A?s:a.isArray?[]:new v(s),C={},D=a.interceptor&&a.interceptor.response||u,E=a.interceptor&&a.interceptor.responseError||c;n(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(C[b]=p(a))}),i&&(C.data=s),w.setUrlParams(C,o({},t(s,a.params||{}),z),a.url);var F=d(C).then(function(c){var d=c.data,h=B.$promise;if(d){if(b.isArray(d)!==!!a.isArray)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",e,a.isArray?"array":"object",b.isArray(d)?"array":"object",C.method,C.url);a.isArray?(B.length=0,n(d,function(a){
"object"==typeof a?B.push(new v(a)):B.push(a)})):(f(d,B),B.$promise=h)}return B.$resolved=!0,c.resource=B,c},function(a){return B.$resolved=!0,(y||m)(a),h.reject(a)});return F=F.then(function(a){var b=D(a);return(x||m)(b,a.headers),b},E),A?F:(B.$promise=F,B.$resolved=!1,B)},v.prototype["$"+e]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=v[e].call(this,a,this,b,c);return d.$promise||d}}),v.bind=function(a){return l(i,o({},j,a),r)},v}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return k.prototype={setUrlParams:function(a,c,d){var e,f,h=this,j=d||h.template,k=h.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(h.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(e)&&null!==e?(f=i(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},l}]})}(window,window.angular),function(a,b,c){"use strict";function d(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,h,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,r||!d&&!q||c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d,g){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw i("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var h=b.module("ngRoute",["ng"]).provider("$route",d),i=b.$$minErr("ngRoute");h.provider("$routeParams",e),h.directive("ngView",f),h.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b){"use strict";function c(){function c(a,b){var c,d={},e=a.split(",");for(c=0;c<e.length;c++)d[b?i(e[c]):e[c]]=!0;return d}function d(b,c){null===b||void 0===b?b="":"string"!=typeof b&&(b=""+b),s.innerHTML=b;var d=5;do{if(0===d)throw m("uinput","Failed to sanitize html because the input is unstable");d--,a.document.documentMode&&q(s),b=s.innerHTML,s.innerHTML=b}while(b!==s.innerHTML);for(var e=s.firstChild;e;){switch(e.nodeType){case 1:c.start(e.nodeName.toLowerCase(),n(e.attributes));break;case 3:c.chars(e.textContent)}var f;if(!(f=e.firstChild)&&(1===e.nodeType&&c.end(e.nodeName.toLowerCase()),f=e.nextSibling,!f))for(;null==f&&(e=e.parentNode,e!==s);)f=e.nextSibling,1===e.nodeType&&c.end(e.nodeName.toLowerCase());e=f}for(;e=s.firstChild;)s.removeChild(e)}function n(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];b[e.name]=e.value}return b}function o(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(a,b){var c=!1,d=e(a,a.push);return{start:function(a,e){a=i(a),!c&&C[a]&&(c=a),c||D[a]!==!0||(d("<"),d(a),g(e,function(c,e){var f=i(e),g="img"===a&&"src"===f||"background"===f;H[f]!==!0||E[f]===!0&&!b(c,g)||(d(" "),d(e),d('="'),d(o(c)),d('"'))}),d(">"))},end:function(a){a=i(a),c||D[a]!==!0||v[a]===!0||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(o(a))}}}function q(b){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;e>d;d++){var f=c[d],g=f.name.toLowerCase();("xmlns:ns1"===g||0===g.lastIndexOf("ns1:",0))&&(b.removeAttributeNode(f),d--,e--)}var h=b.firstChild;h&&q(h),h=b.nextSibling,h&&q(h)}var r=!1;this.$get=["$$sanitizeUri",function(a){return r&&f(D,B),function(b){var c=[];return k(b,l(c,function(b,c){return!/^unsafe:/.test(a(b,c))})),c.join("")}}],this.enableSvg=function(a){return h(a)?(r=a,this):r},e=b.bind,f=b.extend,g=b.forEach,h=b.isDefined,i=b.lowercase,j=b.noop,k=d,l=p;var s,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^#-~ |!])/g,v=c("area,br,col,hr,img,wbr"),w=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=c("rp,rt"),y=f({},x,w),z=f({},w,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),A=f({},x,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=c("script,style"),D=f({},v,z,A,y),E=c("background,cite,href,longdesc,src,xlink:href"),F=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),G=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),H=f({},E,G,F);!function(a){var b;if(!a.document||!a.document.implementation)throw m("noinert","Can't create an inert html document");b=a.document.implementation.createHTMLDocument("inert");var c=b.documentElement||b.getDocumentElement(),d=c.getElementsByTagName("body");if(1===d.length)s=d[0];else{var e=b.createElement("html");s=b.createElement("body"),e.appendChild(s),b.appendChild(e)}}(a)}function d(a){var b=[],c=l(b,j);return c.chars(a),b.join("")}var e,f,g,h,i,j,k,l,m=b.$$minErr("$sanitize");b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isDefined,h=b.isFunction,i=b.isObject,j=b.isString;return function(b,k,l){function m(a){a&&t.push(d(a))}function n(a,b){var c,d=r(a);t.push("<a ");for(c in d)t.push(c+'="'+d[c]+'" ');!g(k)||"target"in d||t.push('target="',k,'" '),t.push('href="',a.replace(/"/g,"&quot;"),'">'),m(b),t.push("</a>")}if(null==b||""===b)return b;if(!j(b))throw f("notstring","Expected string but received: {0}",b);for(var o,p,q,r=h(l)?l:i(l)?function(){return l}:function(){return{}},s=b,t=[];o=s.match(c);)p=o[0],o[2]||o[4]||(p=(o[3]?"http://":"mailto:")+p),q=o.index,m(s.substr(0,q)),n(p,o[0].replace(e,"")),s=s.substring(q+o[0].length);return m(s),a(t.join(""))}}])}(window,window.angular),function(a,b){"use strict";function c(a){return b.lowercase(a.nodeName||a[0]&&a[0].nodeName)}function d(a,c){var d=!1,e=!1;this.ngClickOverrideEnabled=function(f){return b.isDefined(f)?(f&&!e&&(e=!0,g.$$moduleName="ngTouch",c.directive("ngClick",g),a.decorator("ngClickDirective",["$delegate",function(a){if(d)a.shift();else for(var b=a.length-1;b>=0;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),d=f,this):d},this.$get=function(){return{ngClickOverrideEnabled:function(){return d}}}}function e(a,c,d){f.directive(a,["$parse","$swipe",function(e,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=e(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a,b){n=a,o=!0},cancel:function(a){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(d),p(j,{$event:b})})}},q)}}])}var f=b.module("ngTouch",[]);f.provider("$touch",d),d.$inject=["$provide","$compileProvider"],f.factory("$swipe",[function(){function a(a){var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch","pointer"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]);var g=["$parse","$timeout","$rootElement",function(a,d,e){function f(a,b,c,d){return Math.abs(a-c)<q&&Math.abs(b-d)<q}function g(a,b,c){for(var d=0;d<a.length;d+=2)if(f(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function h(a){if(!(Date.now()-k>p)){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;1>d&&1>e||m&&m[0]===d&&m[1]===e||(m&&(m=null),"label"===c(a.target)&&(m=[d,e]),g(l,d,e)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur&&a.target.blur()))}}function i(a){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,e=b[0].clientY;l.push(c,e),d(function(){for(var a=0;a<l.length;a+=2)if(l[a]===c&&l[a+1]===e)return void l.splice(a,a+2)},p,!1)}function j(a,b){l||(e[0].addEventListener("click",h,!0),e[0].addEventListener("touchstart",i,!0),l=[]),k=Date.now(),g(l,a,b)}var k,l,m,n=750,o=12,p=2500,q=25,r="ng-click-active";return function(c,d,e){function f(){m=!1,d.removeClass(r)}var g,h,i,k,l=a(e.ngClick),m=!1;d.on("touchstart",function(a){m=!0,g=a.target?a.target:a.srcElement,3===g.nodeType&&(g=g.parentNode),d.addClass(r),h=Date.now();var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],e=c[0];i=e.clientX,k=e.clientY}),d.on("touchcancel",function(a){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.originalEvent||a,p=l.changedTouches&&l.changedTouches.length?l.changedTouches:l.touches&&l.touches.length?l.touches:[l],q=p[0],r=q.clientX,s=q.clientY,t=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-k,2));m&&n>c&&o>t&&(j(r,s),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(a){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(a){d.addClass(r)}),d.on("mousemove mouseup",function(a){d.removeClass(r)})}}];e("ngSwipeLeft",-1,"swipeleft"),e("ngSwipeRight",1,"swiperight")}(window,window.angular),!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function b(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function c(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function d(a){return null===a?NaN:+a}function e(a){return!isNaN(a)}function f(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function g(a){return a.length}function h(a){for(var b=1;a*b%1;)b*=10;return b}function i(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function j(){this._=Object.create(null)}function k(a){return(a+="")===ug||a[0]===vg?vg+a:a}function l(a){return(a+="")[0]===vg?a.slice(1):a}function m(a){return k(a)in this._}function n(a){return(a=k(a))in this._&&delete this._[a]}function o(){var a=[];for(var b in this._)a.push(l(b));return a}function p(){var a=0;for(var b in this._)++a;return a}function q(){for(var a in this._)return!1;return!0}function r(){this._=Object.create(null)}function s(a){return a}function t(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function u(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=wg.length;d>c;++c){var e=wg[c]+b;if(e in a)return e}}function v(){}function w(){}function x(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new j;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function y(){hg.event.preventDefault()}function z(){for(var a,b=hg.event;a=b.sourceEvent;)b=a;return b}function A(a){for(var b=new w,c=0,d=arguments.length;++c<d;)b[arguments[c]]=x(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=hg.event;e.target=a,hg.event=e,b[e.type].apply(c,d)}finally{hg.event=f}}},b}function B(a){return yg(a,Cg),a}function C(a){return"function"==typeof a?a:function(){return zg(a,this)}}function D(a){return"function"==typeof a?a:function(){return Ag(a,this)}}function E(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=hg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function G(a){return new RegExp("(?:^|\\s+)"+hg.requote(a)+"(?:\\s+|$)","g")}function H(a){return(a+"").trim().split(/^|\s+/)}function I(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=H(a).map(J);var e=a.length;return"function"==typeof b?d:c}function J(a){var b=G(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function K(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function M(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Dg&&b.documentElement.namespaceURI===Dg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=hg.ns.qualify(a)).local?c:b}function N(){var a=this.parentNode;a&&a.removeChild(this)}function O(a){return{__data__:a}}function P(a){return function(){return Bg(this,a)}}function Q(a){return arguments.length||(a=c),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function R(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function S(a){return yg(a,Fg),a}function T(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function U(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,jg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+hg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=V;h>0&&(a=a.slice(0,h));var j=Gg.get(a);return j&&(a=j,i=W),h?b?e:d:b?v:f}function V(a,b){return function(c){var d=hg.event;hg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{hg.event=d}}}function W(a,b){var c=V(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function X(c){var d=".dragsuppress-"+ ++Ig,e="click"+d,f=hg.select(b(c)).on("touchmove"+d,y).on("dragstart"+d,y).on("selectstart"+d,y);if(null==Hg&&(Hg="onselectstart"in c?!1:u(c.style,"userSelect")),Hg){var g=a(c).style,h=g[Hg];g[Hg]="none"}return function(a){if(f.on(d,null),Hg&&(g[Hg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){y(),b()},!0),setTimeout(b,0)}}}function Y(a,c){c.changedTouches&&(c=c.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Jg){var f=b(a);if(f.scrollX||f.scrollY){d=hg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Jg=!(g.f||g.e),d.remove()}}return Jg?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-h.top-a.clientTop]}function Z(){return hg.event.changedTouches[0].identifier}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function aa(a){return a>1?0:-1>a?Mg:Math.acos(a)}function ba(a){return a>1?Pg:-1>a?-Pg:Math.asin(a)}function ca(a){return((a=Math.exp(a))-1/a)/2}function da(a){return((a=Math.exp(a))+1/a)/2}function ea(a){return((a=Math.exp(2*a))-1)/(a+1)}function fa(a){return(a=Math.sin(a/2))*a}function ga(){}function ha(a,b,c){return this instanceof ha?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ha?new ha(a.h,a.s,a.l):va(""+a,wa,ha):new ha(a,b,c)}function ia(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new ra(e(a+120),e(a),e(a-120))}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof la?na(a.l,a.a,a.b):na((a=xa((a=hg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,c)}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new la(c,Math.cos(a*=Qg)*b,Math.sin(a)*b)}function la(a,b,c){return this instanceof la?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof la?new la(a.l,a.a,a.b):a instanceof ja?ka(a.h,a.c,a.l):xa((a=ra(a)).r,a.g,a.b):new la(a,b,c)}function ma(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=oa(e)*_g,d=oa(d)*ah,f=oa(f)*bh,new ra(qa(3.2404542*e-1.5371385*d-.4985314*f),qa(-.969266*e+1.8760108*d+.041556*f),qa(.0556434*e-.2040259*d+1.0572252*f))}function na(a,b,c){return a>0?new ja(Math.atan2(c,b)*Rg,Math.sqrt(b*b+c*c),a):new ja(NaN,NaN,a)}function oa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ra(a,b,c){return this instanceof ra?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ra?new ra(a.r,a.g,a.b):va(""+a,ra,ia):new ra(a,b,c)}function sa(a){return new ra(a>>16,a>>8&255,255&a)}function ta(a){return sa(a)+""}function ua(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function va(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(za(e[0]),za(e[1]),za(e[2]))}return(f=eh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ha(d,e,i)}function xa(a,b,c){a=ya(a),b=ya(b),c=ya(c);var d=pa((.4124564*a+.3575761*b+.1804375*c)/_g),e=pa((.2126729*a+.7151522*b+.072175*c)/ah),f=pa((.0193339*a+.119192*b+.9503041*c)/bh);return la(116*e-16,500*(d-e),200*(e-f))}function ya(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Aa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ca(b,c,a,d)}}function Ca(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ea(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=hg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=hg.event;hg.event=a;try{g.progress.call(f,i)}finally{hg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(jg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},hg.rebind(f,g,"on"),null==d?f:f.get(Da(d))}function Da(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ea(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Fa(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return gh?gh.n=f:fh=f,gh=f,hh||(ih=clearTimeout(ih),hh=1,jh(Ga)),f}function Ga(){var a=Ha(),b=Ia()-a;b>24?(isFinite(b)&&(clearTimeout(ih),ih=setTimeout(Ga,b)),hh=0):(hh=1,jh(Ga))}function Ha(){for(var a=Date.now(),b=fh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ia(){for(var a,b=fh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:fh=b.n;return gh=a,c}function Ja(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ka(a,b){var c=Math.pow(10,3*tg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function La(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:s;return function(a){var c=lh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=mh.get(n)||Ma;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=hg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Ma(a){return a+""}function Na(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Oa(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new oh(c-1)),1),c}function f(a,c){return b(a=new oh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{oh=Na;var d=new Na;return d._=a,g(d,b,c)}finally{oh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pa(a);return i.floor=i,i.round=Pa(d),i.ceil=Pa(e),i.offset=Pa(f),i.range=h,a}function Pa(a){return function(b,c){try{oh=Na;var d=new Na;return d._=b,a(d,c)._}finally{oh=Date}}}function Qa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=qh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&oh!==Na,g=new(f?Na:oh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in qh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{oh=Na;var b=new oh;return b._=a,d(b)}finally{oh=Date}}var d=b(a);return c.parse=function(a){try{oh=Na;var b=d.parse(a);return b&&b._}finally{oh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ib;var t=hg.map(),u=Sa(p),v=Ta(p),w=Sa(q),x=Ta(q),y=Sa(r),z=Ta(r),A=Sa(s),B=Ta(s);
o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ra(a.getDate(),b,2)},e:function(a,b){return Ra(a.getDate(),b,2)},H:function(a,b){return Ra(a.getHours(),b,2)},I:function(a,b){return Ra(a.getHours()%12||12,b,2)},j:function(a,b){return Ra(1+nh.dayOfYear(a),b,3)},L:function(a,b){return Ra(a.getMilliseconds(),b,3)},m:function(a,b){return Ra(a.getMonth()+1,b,2)},M:function(a,b){return Ra(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ra(a.getSeconds(),b,2)},U:function(a,b){return Ra(nh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ra(nh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ra(a.getFullYear()%100,b,2)},Y:function(a,b){return Ra(a.getFullYear()%1e4,b,4)},Z:gb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ab,e:ab,H:cb,I:cb,j:bb,L:fb,m:_a,M:db,p:k,S:eb,U:Va,w:Ua,W:Wa,x:i,X:j,y:Ya,Y:Xa,Z:Za,"%":hb};return b}function Ra(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Sa(a){return new RegExp("^(?:"+a.map(hg.requote).join("|")+")","i")}function Ta(a){for(var b=new j,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ua(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Va(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ya(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.y=$a(+d[0]),c+d[0].length):-1}function Za(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $a(a){return a+(a>68?1900:2e3)}function _a(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ab(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function db(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function eb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=tg(b)/60|0,e=tg(b)%60;return c+Ra(d,"0",2)+Ra(e,"0",2)}function hb(a,b,c){sh.lastIndex=0;var d=sh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ib(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jb(){}function kb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lb(a,b){a&&wh.hasOwnProperty(a.type)&&wh[a.type](a,b)}function mb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mb(a[c],b,1);b.polygonEnd()}function ob(){function a(a,b){a*=Qg,b=b*Qg/2+Mg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);yh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;zh.point=function(g,h){zh.point=a,d=(b=g)*Qg,e=Math.cos(h=(c=h)*Qg/2+Mg/4),f=Math.sin(h)},zh.lineEnd=function(){a(b,c)}}function pb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function ub(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vb(a){return[Math.atan2(a[1],a[0]),ba(a[2])]}function wb(a,b){return tg(a[0]-b[0])<Kg&&tg(a[1]-b[1])<Kg}function xb(a,b){a*=Qg;var c=Math.cos(b*=Qg);yb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yb(a,b,c){++Ah,Ch+=(a-Ch)/Ah,Dh+=(b-Dh)/Ah,Eh+=(c-Eh)/Ah}function zb(){function a(a,e){a*=Qg;var f=Math.cos(e*=Qg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Bh+=j,Fh+=j*(b+(b=g)),Gh+=j*(c+(c=h)),Hh+=j*(d+(d=i)),yb(b,c,d)}var b,c,d;Lh.point=function(e,f){e*=Qg;var g=Math.cos(f*=Qg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Lh.point=a,yb(b,c,d)}}function Ab(){Lh.point=xb}function Bb(){function a(a,b){a*=Qg;var c=Math.cos(b*=Qg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-aa(n)/m,p=Math.atan2(m,n);Ih+=o*j,Jh+=o*k,Kh+=o*l,Bh+=p,Fh+=p*(d+(d=g)),Gh+=p*(e+(e=h)),Hh+=p*(f+(f=i)),yb(d,e,f)}var b,c,d,e,f;Lh.point=function(g,h){b=g,c=h,Lh.point=a,g*=Qg;var i=Math.cos(h*=Qg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yb(d,e,f)},Lh.lineEnd=function(){a(b,c),Lh.lineEnd=Ab,Lh.point=xb}}function Cb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Db(){return!0}function Eb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Gb(c,a,null,!0),j=new Gb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Gb(d,a,null,!1),j=new Gb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Fb(f),Fb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Fb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Gb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Hb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Ib))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=hg.merge(n);var a=Ob(r,o);n.length?(v||(f.polygonStart(),v=!0),Eb(n,Kb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Jb(),u=b(t),v=!1;return s}}function Ib(a){return a.length>1}function Jb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:v,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Kb(a,b){return((a=a.x)[0]<0?a[1]-Pg-Kg:Pg-a[1])-((b=b.x)[0]<0?b[1]-Pg-Kg:Pg-b[1])}function Lb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Mg:-Mg,i=tg(f-c);tg(i-Mg)<Kg?(a.point(c,d=(d+g)/2>0?Pg:-Pg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Mg&&(tg(c-e)<Kg&&(c-=e*Kg),tg(f-h)<Kg&&(f-=h*Kg),d=Mb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Mb(a,b,c,d){var e,f,g=Math.sin(a-c);return tg(g)>Kg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Nb(a,b,c,d){var e;if(null==a)e=c*Pg,d.point(-Mg,e),d.point(0,e),d.point(Mg,e),d.point(Mg,0),d.point(Mg,-e),d.point(0,-e),d.point(-Mg,-e),d.point(-Mg,0),d.point(-Mg,e);else if(tg(a[0]-b[0])>Kg){var f=a[0]<b[0]?Mg:-Mg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Ob(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;yh.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Mg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Mg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Mg,z=o*t;if(yh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ng:v,y^m>=c^r>=c){var A=rb(pb(l),pb(a));ub(A);var B=rb(e,A);ub(B);var C=(y^v>=0?-1:1)*ba(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Kg>f||Kg>f&&-Kg>yh)^1&g}function Pb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Mg:-Mg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wb(c,n)||wb(o,n))&&(o[0]+=Kg,o[1]+=Kg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&wb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pb(a),e=pb(b),g=[1,0,0],h=rb(d,e),i=qb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rb(g,h),o=tb(g,l),p=tb(h,m);sb(o,p);var q=n,r=qb(o,q),s=qb(q,q),t=r*r-s*(qb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=tb(q,(-r-u)/s);if(sb(v,o),v=vb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=tg(B-Mg)<Kg,D=C||Kg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(tg(v[0]-x)<Kg?z:A):z<=v[1]&&v[1]<=A:B>Mg^(x<=v[0]&&v[0]<=y)){var E=tb(q,(-r+u)/s);return sb(E,o),[v,vb(E)]}}}function e(b,c){var d=g?a:Mg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=tg(f)>Kg,i=oc(a,6*Qg);return Hb(b,c,i,g?[0,-a]:[-Mg,a-Mg])}function Qb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Rb(a,b,c,d){function e(d,e){return tg(d[0]-a)<Kg?e>0?0:3:tg(d[0]-c)<Kg?e>0?2:1:tg(d[1]-b)<Kg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Nh,Math.min(Nh,a)),b=Math.max(-Nh,Math.min(Nh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Jb(),C=Qb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=hg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Eb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Sb(a){var b=0,c=Mg/3,d=gc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Mg/180,c=a[1]*Mg/180):[b/Mg*180,c/Mg*180]},e}function Tb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ba((f-(a*a+c*c)*e*e)/(2*e))]},c}function Ub(){function a(a,b){Ph+=e*a-d*b,d=a,e=b}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,b=d=f,c=e=g},Uh.lineEnd=function(){a(b,c)}}function Vb(a,b){Qh>a&&(Qh=a),a>Sh&&(Sh=a),Rh>b&&(Rh=b),b>Th&&(Th=b)}function Wb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yb(a,b){Ch+=a,Dh+=b,++Eh}function Zb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Fh+=g*(b+a)/2,Gh+=g*(c+d)/2,Hh+=g,Yb(b=a,c=d)}var b,c;Wh.point=function(d,e){Wh.point=a,Yb(b=d,c=e)}}function $b(){Wh.point=Yb}function _b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Fh+=g*(d+a)/2,Gh+=g*(e+b)/2,Hh+=g,g=e*a-d*b,Ih+=g*(d+a),Jh+=g*(e+b),Kh+=3*g,Yb(d=a,e=b)}var b,c,d,e;Wh.point=function(f,g){Wh.point=a,Yb(b=d=f,c=e=g)},Wh.lineEnd=function(){a(b,c)}}function ac(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ng)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:v};return h}function bc(a){function b(a){return(h?d:c)(a)}function c(b){return ec(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=pb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=tg(tg(x)-1)<Kg||tg(d-m)<Kg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||tg((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Qg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cc(a){var b=bc(function(b,c){return a([b*Rg,c*Rg])});return function(a){return hc(b(a))}}function dc(a){this.stream=a}function ec(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fc(a){return gc(function(){return a})()}function gc(a){function b(a){return a=h(a[0]*Qg,a[1]*Qg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Rg,a[1]*Rg]}function d(){h=Cb(g=kc(r,t,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,t=0,u=0,v=Mh,w=s,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=hc(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Mh):Pb((x=+a)*Qg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Rb(a[0][0],a[0][1],a[1][0],a[1][1]):s,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Qg,q=a[1]%360*Qg,d()):[p*Rg,q*Rg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Qg,t=a[1]%360*Qg,u=a.length>2?a[2]%360*Qg:0,d()):[r*Rg,t*Rg,u*Rg]},hg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hc(a){return ec(a,function(b,c){a.point(b*Qg,c*Qg)})}function ic(a,b){return[a,b]}function jc(a,b){return[a>Mg?a-Ng:-Mg>a?a+Ng:a,b]}function kc(a,b,c){return a?b||c?Cb(mc(a),nc(b,c)):mc(a):b||c?nc(b,c):jc}function lc(a){return function(b,c){return b+=a,[b>Mg?b-Ng:-Mg>b?b+Ng:b,c]}}function mc(a){var b=lc(a);return b.invert=lc(-a),b}function nc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ba(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ba(k*d-h*e)]},c}function oc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pc(c,e),f=pc(c,f),(g>0?f>e:e>f)&&(e+=g*Ng)):(e=a+g*Ng,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=vb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pc(a,b){var c=pb(b);c[0]-=a,ub(c);var d=aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Kg)%(2*Math.PI)}function qc(a,b,c){var d=hg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rc(a,b,c){var d=hg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sc(a){return a.source}function tc(a){return a.target}function uc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fa(d-b)+e*g*fa(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Rg,Math.atan2(g,Math.sqrt(d*d+e*e))*Rg]}:function(){return[a*Rg,b*Rg]};return o.distance=m,o}function vc(){function a(a,e){var f=Math.sin(e*=Qg),g=Math.cos(e),h=tg((a*=Qg)-b),i=Math.cos(h);Xh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Yh.point=function(e,f){b=e*Qg,c=Math.sin(f*=Qg),d=Math.cos(f),Yh.point=a},Yh.lineEnd=function(){Yh.point=Yh.lineEnd=v}}function wc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xc(a,b){function c(a,b){g>0?-Pg+Kg>b&&(b=-Pg+Kg):b>Pg-Kg&&(b=Pg-Kg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Mg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Pg]},c):zc}function yc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return tg(e)<Kg?ic:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zc(a,b){return[a,Math.log(Math.tan(Mg/4+b/2))]}function Ac(a){var b,c=fc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Mg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bc(a,b){return[Math.log(Math.tan(Mg/4+b/2)),-a]}function Cc(a){return a[0]}function Dc(a){return a[1]}function Ec(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fc(a,b){return a[0]-b[0]||a[1]-b[1]}function Gc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Ic(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jc(){cd(this),this.edge=this.site=this.circle=null}function Kc(a){var b=ii.pop()||new Jc;return b.site=a,b}function Lc(a){Vc(a),fi.remove(a),ii.push(a),cd(a)}function Mc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Lc(a);for(var i=f;i.circle&&tg(c-i.circle.x)<Kg&&tg(d-i.circle.cy)<Kg;)f=i.P,h.unshift(i),Lc(i),i=f;h.unshift(i),Vc(i);for(var j=g;j.circle&&tg(c-j.circle.x)<Kg&&tg(d-j.circle.cy)<Kg;)g=j.N,h.push(j),Lc(j),j=g;h.push(j),Vc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],_c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zc(i.site,j.site,null,e),Uc(i),Uc(j)}function Nc(a){for(var b,c,d,e,f=a.x,g=a.y,h=fi._;h;)if(d=Oc(h,g)-f,d>Kg)h=h.L;else{if(e=f-Pc(h,g),!(e>Kg)){d>-Kg?(b=h.P,c=h):e>-Kg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kc(a);if(fi.insert(b,i),b||c){if(b===c)return Vc(b),c=Kc(b.site),fi.insert(i,c),i.edge=c.edge=Zc(b.site,i.site),Uc(b),void Uc(c);if(!c)return void(i.edge=Zc(b.site,i.site));Vc(b),Vc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_c(c.edge,j,o,u),i.edge=Zc(j,a,null,u),c.edge=Zc(a,o,null,u),Uc(b),Uc(c)}}function Oc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pc(a,b){var c=a.N;if(c)return Oc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qc(a){this.site=a,this.edges=[]}function Rc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ei,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(tg(d-b)>Kg||tg(e-c)>Kg)&&(h.splice(g,0,new ad($c(f.site,k,tg(d-l)<Kg&&o-e>Kg?{x:l,y:tg(b-l)<Kg?c:o}:tg(e-o)<Kg&&m-d>Kg?{x:tg(c-o)<Kg?b:m,y:o}:tg(d-m)<Kg&&e-n>Kg?{x:m,y:tg(b-m)<Kg?c:n}:tg(e-n)<Kg&&d-l>Kg?{x:tg(c-n)<Kg?b:l,y:n}:null),f.site,null)),++i)}function Sc(a,b){return b.angle-a.angle}function Tc(){cd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Uc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Lg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ji.pop()||new Tc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=hi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}hi.insert(s,r),s||(gi=r)}}}}function Vc(a){var b=a.circle;b&&(b.P||(gi=b.N),hi.remove(b),ji.push(b),cd(b),a.circle=null)}function Wc(a){for(var b,c=di,d=Qb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xc(b,a)||!d(b)||tg(b.a.x-b.b.x)<Kg&&tg(b.a.y-b.b.y)<Kg)&&(b.a=b.b=null,c.splice(e,1))}function Xc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zc(a,b,c,d){var e=new Yc(a,b);return di.push(e),c&&_c(e,a,b,c),d&&_c(e,b,a,d),ei[a.i].edges.push(new ad(e,a,b)),ei[b.i].edges.push(new ad(e,b,a)),e}function $c(a,b,c){var d=new Yc(a,null);return d.a=b,d.b=c,di.push(d),d}function _c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ad(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function bd(){this._=null}function cd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function dd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ed(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fd(a){for(;a.L;)a=a.L;return a}function gd(a,b){var c,d,e,f=a.sort(hd).pop();for(di=[],ei=new Array(a.length),fi=new bd,hi=new bd;;)if(e=gi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(ei[f.i]=new Qc(f),Nc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Mc(e.arc)}b&&(Wc(b),Rc(b));var g={cells:ei,edges:di};return fi=hi=di=ei=null,g}function hd(a,b){return b.y-a.y||b.x-a.x}function id(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function jd(a){return a.x}function kd(a){return a.y}function ld(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function md(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&md(a,i[0],c,d,g,h),i[1]&&md(a,i[1],g,d,e,h),i[2]&&md(a,i[2],c,h,g,f),i[3]&&md(a,i[3],g,h,e,f)}}function nd(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function od(a,b){a=hg.rgb(a),b=hg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+f*a))+ua(Math.round(d+g*a))+ua(Math.round(e+h*a))}}function pd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=sd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function qd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function rd(a,b){var c,d,e,f=li.lastIndex=mi.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=li.exec(a))&&(d=mi.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:qd(c,d)})),f=mi.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function sd(a,b){for(var c,d=hg.interpolators.length;--d>=0&&!(c=hg.interpolators[d](a,b)););return c}function td(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(sd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function ud(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function vd(a){return function(b){return 1-a(1-b)}}function wd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function xd(a){return a*a}function yd(a){return a*a*a}function zd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Ad(a){return function(b){return Math.pow(b,a)}}function Bd(a){return 1-Math.cos(a*Pg)}function Cd(a){return Math.pow(2,10*(a-1))}function Dd(a){return 1-Math.sqrt(1-a*a)}function Ed(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ng*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ng/b)}}function Fd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Gd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Hd(a,b){a=hg.hcl(a),b=hg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=hg.hsl(a),b=hg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=hg.lab(a),b=hg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ld(a){var b=[a.a,a.b],c=[a.c,a.d],d=Nd(b),e=Md(b,c),f=Nd(Od(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Rg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Rg:0}function Md(a,b){return a[0]*b[0]+a[1]*b[1]}function Nd(a){var b=Math.sqrt(Md(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Od(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Pd(a){return a.length?a.pop()+",":""}function Qd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:qd(a[0],b[0])},{i:e-2,x:qd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Rd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Pd(c)+"rotate(",null,")")-2,x:qd(a,b)})):b&&c.push(Pd(c)+"rotate("+b+")")}function Sd(a,b,c,d){a!==b?d.push({i:c.push(Pd(c)+"skewX(",null,")")-2,x:qd(a,b)}):b&&c.push(Pd(c)+"skewX("+b+")")}function Td(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Pd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:qd(a[0],b[0])},{i:e-2,x:qd(a[1],b[1])})}else(1!==b[0]||1!==b[1])&&c.push(Pd(c)+"scale("+b+")")}function Ud(a,b){var c=[],d=[];return a=hg.transform(a),b=hg.transform(b),Qd(a.translate,b.translate,c,d),Rd(a.rotate,b.rotate,c,d),Sd(a.skew,b.skew,c,d),Td(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Vd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Xd(a){for(var b=a.source,c=a.target,d=Zd(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Yd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Zd(a,b){if(a===b)return a;
for(var c=Yd(a),d=Yd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function $d(a){a.fixed|=2}function _d(a){a.fixed&=-7}function ae(a){a.fixed|=4,a.px=a.x,a.py=a.y}function be(a){a.fixed&=-5}function ce(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(ce(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function de(a,b){return hg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=je,a}function ee(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function fe(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ge(a){return a.children}function he(a){return a.value}function ie(a,b){return b.value-a.value}function je(a){return hg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ke(a){return a.x}function le(a){return a.y}function me(a,b,c){a.y0=b,a.y=c}function ne(a){return hg.range(a.length)}function oe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function pe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function qe(a){return a.reduce(re,0)}function re(a,b){return a+b[1]}function se(a,b){return te(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function te(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ue(a){return[hg.min(a),hg.max(a)]}function ve(a,b){return a.value-b.value}function we(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function xe(a,b){a._pack_next=b,b._pack_prev=a}function ye(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function ze(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Ae),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],De(d,e,f),b(f),we(d,f),d._pack_prev=f,we(f,e),e=d._pack_next,g=3;j>g;g++){De(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ye(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ye(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?xe(d,e=h):xe(d=i,e),g--):(we(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Be)}}function Ae(a){a._pack_next=a._pack_prev=a}function Be(a){delete a._pack_next,delete a._pack_prev}function Ce(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Ce(e[f],b,c,d)}function De(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ee(a,b){return a.parent==b.parent?1:2}function Fe(a){var b=a.children;return b.length?b[0]:a.t}function Ge(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function He(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ie(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Je(a,b,c){return a.a.parent===b.parent?a.a:c}function Ke(a){return 1+hg.max(a,function(a){return a.y})}function Le(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Me(a){var b=a.children;return b&&b.length?Me(b[0]):a}function Ne(a){var b,c=a.children;return c&&(b=c.length)?Ne(c[b-1]):a}function Oe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Pe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Qe(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Re(a){return a.rangeExtent?a.rangeExtent():Qe(a.range())}function Se(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Te(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ue(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:xi}function Ve(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=hg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function We(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Ve:Se,i=d?Wd:Vd;return g=e(a,b,i,c),h=e(b,a,i,sd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Kd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return $e(a,b)},f.tickFormat=function(b,c){return _e(a,b,c)},f.nice=function(b){return Ye(a,b),e()},f.copy=function(){return We(a,b,c,d)},e()}function Xe(a,b){return hg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ye(a,b){return Te(a,Ue(Ze(a,b)[2])),Te(a,Ue(Ze(a,b)[2])),a}function Ze(a,b){null==b&&(b=10);var c=Qe(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function $e(a,b){return hg.range.apply(hg,Ze(a,b))}function _e(a,b,c){var d=Ze(a,b);if(c){var e=lh.exec(c);if(e.shift(),"s"===e[8]){var f=hg.formatPrefix(Math.max(tg(d[0]),tg(d[1])));return e[7]||(e[7]="."+af(f.scale(d[2]))),e[8]="f",c=hg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+bf(e[8],d)),c=e.join("")}else c=",."+af(d[2])+"f";return hg.format(c)}function af(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function bf(a,b){var c=af(b[2]);return a in yi?Math.abs(c-af(Math.max(tg(b[0]),tg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function cf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Te(d.map(e),c?Math:Ai);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Qe(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return zi;arguments.length<2?c=zi:"function"!=typeof c&&(c=hg.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return b-.5>g*b&&(g*=b),d>=g?c(a):""}},g.copy=function(){return cf(a.copy(),b,c,d)},Xe(g,a)}function df(a,b,c){function d(b){return a(e(b))}var e=ef(b),f=ef(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return $e(c,a)},d.tickFormat=function(a,b){return _e(c,a,b)},d.nice=function(a){return d.domain(Ye(c,a))},d.exponent=function(g){return arguments.length?(e=ef(b=g),f=ef(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return df(a.copy(),b,c)},Xe(d,a)}function ef(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ff(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return hg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new j;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Qe(b.a[0])},c.copy=function(){return ff(a,b)},c.domain(a)}function gf(a,b){function f(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=hg.quantile(a,c/d);return g}function g(a){return isNaN(a=+a)?void 0:b[hg.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(d).filter(e).sort(c),f()):a},g.range=function(a){return arguments.length?(b=a,f()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),0>c?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return gf(a,b)},f()}function hf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return hf(a,b,c)},e()}function jf(a,b){function c(c){return c>=c?b[hg.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return jf(a,b)},c}function kf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return $e(a,b)},b.tickFormat=function(b,c){return _e(a,b,c)},b.copy=function(){return kf(a)},b}function lf(){return 0}function mf(a){return a.innerRadius}function nf(a){return a.outerRadius}function of(a){return a.startAngle}function pf(a){return a.endAngle}function qf(a){return a&&a.padAngle}function rf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function sf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function tf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Aa(c),o=Aa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cc,d=Dc,e=Db,f=uf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Gi.get(a)||uf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function uf(a){return a.length>1?a.join("L"):a+"Z"}function vf(a){return a.join("L")+"Z"}function wf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function xf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function zf(a,b){return a.length<4?uf(a):a[1]+Cf(a.slice(1,-1),Df(a,b))}function Af(a,b){return a.length<3?vf(a):a[0]+Cf((a.push(a[0]),a),Df([a[a.length-2]].concat(a,[a[1]]),b))}function Bf(a,b){return a.length<3?uf(a):a[0]+Cf(a,Df(a,b))}function Cf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return uf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Df(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ef(a){if(a.length<3)return uf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",If(Ji,g),",",If(Ji,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Jf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Ff(a){if(a.length<4)return uf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(If(Ji,f)+","+If(Ji,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Jf(c,f,g);return c.join("")}function Gf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[If(Ji,g),",",If(Ji,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Jf(b,g,h);return b.join("")}function Hf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ef(a)}function If(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Jf(a,b,c){a.push("C",If(Hi,b),",",If(Hi,c),",",If(Ii,b),",",If(Ii,c),",",If(Ji,b),",",If(Ji,c))}function Kf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Lf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Kf(e,f);++b<c;)d[b]=(g+(g=Kf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Mf(a){for(var b,c,d,e,f=[],g=Lf(a),h=-1,i=a.length-1;++h<i;)b=Kf(a[h],a[h+1]),tg(b)<Kg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Nf(a){return a.length<3?uf(a):a[0]+Cf(a,Mf(a))}function Of(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Pg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Pf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Aa(c),v=Aa(e),w=c===d?function(){return n}:Aa(d),x=e===f?function(){return o}:Aa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cc,d=Cc,e=0,f=Dc,g=Db,h=uf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Gi.get(a)||uf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Qf(a){return a.radius}function Rf(a){return[a.x,a.y]}function Sf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Pg;return[c*Math.cos(d),c*Math.sin(d)]}}function Tf(){return 64}function Uf(){return"circle"}function Vf(a){var b=Math.sqrt(a/Mg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Wf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Xf(a,b,c){return yg(a,Qi),a.namespace=b,a.id=c,a}function Yf(a,b,c,d){var e=a.id,f=a.namespace;return R(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Zf(a){return null==a&&(a=""),function(){this.textContent=a}}function $f(a){return null==a?"__transition__":"__transition_"+a+"__"}function _f(a,b,c,d,e){function f(a){var b=p.delay;return k.t=b+i,a>=b?g(a-b):void(k.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(d>+g){var j=o[g];j.timer.c=null,j.timer.t=NaN,--o.count,delete o[g]}k.c=h,Fa(function(){return k.c&&h(c||1)&&(k.c=null,k.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);return f>=1?(p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1):void 0}var i,k,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,k=Fa(f,0,i),p=o[d]={tween:new j,time:i,timer:k,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function ag(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function cg(a){return a.toISOString()}function dg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=hg.bisect(Zi,e);return f==Zi.length?[b.year,Ze(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Zi[f-1]<Zi[f]/e?f-1:f]:[aj,Ze(a,c)[2]]}return d.invert=function(b){return eg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(eg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,eg(+c+1),b).length}var f=d.domain(),g=Qe(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Te(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=eg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=eg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Qe(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],eg(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return dg(a.copy(),b,c)},Xe(d,a)}function eg(a){return new Date(a)}function fg(a){return JSON.parse(a.responseText)}function gg(a){var b=kg.createRange();return b.selectNode(kg.body),b.createContextualFragment(a.responseText)}var hg={version:"3.5.17"},ig=[].slice,jg=function(a){return ig.call(a)},kg=this.document;if(kg)try{jg(kg.documentElement.childNodes)[0].nodeType}catch(lg){jg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),kg)try{kg.createElement("DIV").style.setProperty("opacity",0,"")}catch(mg){var ng=this.Element.prototype,og=ng.setAttribute,pg=ng.setAttributeNS,qg=this.CSSStyleDeclaration.prototype,rg=qg.setProperty;ng.setAttribute=function(a,b){og.call(this,a,b+"")},ng.setAttributeNS=function(a,b,c){pg.call(this,a,b,c+"")},qg.setProperty=function(a,b,c){rg.call(this,a,b+"",c)}}hg.ascending=c,hg.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},hg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},hg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},hg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},hg.sum=function(a,b){var c,d=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)e(c=+a[g])&&(d+=c);else for(;++g<f;)e(c=+b.call(a,a[g],g))&&(d+=c);return d},hg.mean=function(a,b){var c,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)e(c=d(a[h]))?f+=c:--i;else for(;++h<g;)e(c=d(b.call(a,a[h],h)))?f+=c:--i;return i?f/i:void 0},hg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},hg.median=function(a,b){var f,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)e(f=d(a[i]))&&g.push(f);else for(;++i<h;)e(f=d(b.call(a,a[i],i)))&&g.push(f);return g.length?hg.quantile(g.sort(c),.5):void 0},hg.variance=function(a,b){var c,f,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)e(c=d(a[j]))&&(f=c-h,h+=f/++k,i+=f*(c-h));else for(;++j<g;)e(c=d(b.call(a,a[j],j)))&&(f=c-h,h+=f/++k,i+=f*(c-h));return k>1?i/(k-1):void 0},hg.deviation=function(){var a=hg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var sg=f(c);hg.bisectLeft=sg.left,hg.bisect=hg.bisectRight=sg.right,hg.bisector=function(a){return f(1===a.length?function(b,d){return c(a(b),d)}:a)},hg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},hg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},hg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},hg.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=hg.min(a,g),d=new Array(c);++b<c;)for(var e,f=-1,h=d[b]=new Array(e);++f<e;)h[f]=a[f][b];return d},hg.zip=function(){return hg.transpose(arguments)},hg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},hg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},hg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},hg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var tg=Math.abs;hg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=h(tg(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},hg.map=function(a,b){var c=new j;if(a instanceof j)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var ug="__proto__",vg="\x00";i(j,{has:m,get:function(a){return this._[k(a)]},set:function(a,b){return this._[k(a)]=b},remove:n,keys:o,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:l(b),value:this._[b]});return a},size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}}),hg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,k,l,m,n=-1,o=g.length,p=f[h++],q=new j;++n<o;)(m=q.get(i=p(k=g[n])))?m.push(k):q.set(i,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(hg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},hg.set=function(a){var b=new r;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},i(r,{has:m,add:function(a){return this._[k(a+="")]=!0,a},remove:n,values:o,size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b))}}),hg.behavior={},hg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=t(a,b,b[c]);return a};var wg=["webkit","ms","moz","Moz","o","O"];hg.dispatch=function(){for(var a=new w,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a},w.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},hg.event=null,hg.requote=function(a){return a.replace(xg,"\\$&")};var xg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},zg=function(a,b){return b.querySelector(a)},Ag=function(a,b){return b.querySelectorAll(a)},Bg=function(a,b){var c=a.matches||a[u(a,"matchesSelector")];return(Bg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(zg=function(a,b){return Sizzle(a,b)[0]||null},Ag=Sizzle,Bg=Sizzle.matchesSelector),hg.selection=function(){return hg.select(kg.documentElement)};var Cg=hg.selection.prototype=[];Cg.select=function(a){var b,c,d,e,f=[];a=C(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return B(f)},Cg.selectAll=function(a){var b,c,d=[];a=D(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=jg(a.call(c,c.__data__,h,e))),b.parentNode=c);return B(d)};var Dg="http://www.w3.org/1999/xhtml",Eg={svg:"http://www.w3.org/2000/svg",xhtml:Dg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};hg.ns={prefix:Eg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Eg.hasOwnProperty(c)?{space:Eg[c],local:a}:a}},Cg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=hg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(E(b,a[b]));return this}return this.each(E(a,b))},Cg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=H(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!G(a[e]).test(b))return!1;return!0}for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},Cg.style=function(a,c,d){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c="");for(d in a)this.each(K(d,a[d],c));return this}if(2>e){var f=this.node();return b(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(K(a,c,d))},Cg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))},Cg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Cg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Cg.append=function(a){return a=M(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Cg.insert=function(a,b){return a=M(a),b=C(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Cg.remove=function(){return this.each(N)},Cg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new j,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=O(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=O(f);for(;l>d;++d)o[d]=O(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=S([]),i=B([]),k=B([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return k},i},Cg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Cg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return B(e)},Cg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Cg.sort=function(a){a=Q.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Cg.each=function(a){return R(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Cg.call=function(a){var b=jg(arguments);return a.apply(b[0]=this,b),this},Cg.empty=function(){return!this.node()},Cg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},Cg.size=function(){var a=0;return R(this,function(){++a}),a};var Fg=[];hg.selection.enter=S,hg.selection.enter.prototype=Fg,Fg.append=Cg.append,Fg.empty=Cg.empty,Fg.node=Cg.node,Fg.call=Cg.call,Fg.size=Cg.size,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return B(g)},Fg.insert=function(a,b){return arguments.length<2&&(b=T(this)),Cg.insert.call(this,a,b)},hg.select=function(b){var c;return"string"==typeof b?(c=[zg(b,kg)],c.parentNode=kg.documentElement):(c=[b],c.parentNode=a(b)),B([c])},hg.selectAll=function(a){var b;return"string"==typeof a?(b=jg(Ag(a,kg)),b.parentNode=kg.documentElement):(b=jg(a),b.parentNode=null),B([b])},Cg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(U(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(U(a,b,c))};var Gg=hg.map({mouseenter:"mouseover",mouseleave:"mouseout"});kg&&Gg.forEach(function(a){
"on"+a in kg&&Gg.remove(a)});var Hg,Ig=0;hg.mouse=function(a){return Y(a,z())};var Jg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;hg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=z().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return Y(a,d)},hg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=hg.event.target.correspondingElement||hg.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=hg.select(c(l)).on(f+q,h).on(g+q,i),s=X(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=A(a,"drag","dragstart","dragend"),e=null,f=c(v,hg.mouse,b,"mousemove","mouseup"),g=c(Z,hg.touch,s,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},hg.rebind(a,d,"on")},hg.touches=function(a,b){return arguments.length<2&&(b=z().touches),b?jg(b).map(function(b){var c=Y(a,b);return c.identifier=b.identifier,c}):[]};var Kg=1e-6,Lg=Kg*Kg,Mg=Math.PI,Ng=2*Mg,Og=Ng-Kg,Pg=Mg/2,Qg=Mg/180,Rg=180/Mg,Sg=Math.SQRT2,Tg=2,Ug=4;hg.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(Lg>m)d=Math.log(j/g)/Sg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Sg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Ug*m)/(2*g*Tg*n),p=(j*j-g*g-Ug*m)/(2*j*Tg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Sg,c=function(a){var b=a*d,c=da(q),h=g/(Tg*n)*(c*ea(Sg*b+q)-ca(q));return[e+h*k,f+h*l,g*c/da(Sg*b+q)]}}return c.duration=1e3*d,c},hg.behavior.zoom=function(){function a(a){a.on(F,l).on(Wg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function c(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function d(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function e(a){z.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:z.x,y:z.y,k:z.k},e(Math.pow(2,g)),f(q=c,d),b=hg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-z.x)/z.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-z.y)/z.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(hg.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=hg.select(b(e)).on(G,a).on(H,d),m=c(hg.mouse(e)),n=X(e);Pi.call(e),i(g)}function m(){function a(){var a=hg.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=c(a))}),a}function b(){var b=hg.event.target;hg.select(b).on(u,d).on(v,h),w.push(b);for(var c=hg.event.changedTouches,e=0,f=c.length;f>e;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(500>j-t){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),y()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=hg.touches(o);Pi.call(o);for(var h=0,i=g.length;i>h;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(hg.event.touches.length){for(var b=hg.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}hg.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+hg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=hg.select(o),A=X(o);b(),i(p),x.on(F,null).on(I,b)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Pi.call(this),p=c(q=r||hg.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),y(),e(Math.pow(2,.002*Vg())*z.k),f(q,p),j(a)}function o(){var a=hg.mouse(this),b=Math.log(z.k)/Math.LN2;g(this,a,c(a),hg.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var p,q,r,s,t,u,v,w,x,z={x:0,y:0,k:1},B=[960,500],C=Xg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=A(a,"zoomstart","zoom","zoomend");return Wg||(Wg="onwheel"in kg?(Vg=function(){return-hg.event.deltaY*(hg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in kg?(Vg=function(){return hg.event.wheelDelta},"mousewheel"):(Vg=function(){return-hg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=z;Ni?hg.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=B[0],d=B[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=hg.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=z,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},h(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:null},e(+b),h(),a):z.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Xg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(B=b&&[+b[0],+b[1]],a):B},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),z={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),z={x:0,y:0,k:1},a):x},hg.rebind(a,J,"on")};var Vg,Wg,Xg=[0,1/0];hg.color=ga,ga.prototype.toString=function(){return this.rgb()+""},hg.hsl=ha;var Yg=ha.prototype=new ga;Yg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,this.l/a)},Yg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,a*this.l)},Yg.rgb=function(){return ia(this.h,this.s,this.l)},hg.hcl=ja;var Zg=ja.prototype=new ga;Zg.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+$g*(arguments.length?a:1)))},Zg.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-$g*(arguments.length?a:1)))},Zg.rgb=function(){return ka(this.h,this.c,this.l).rgb()},hg.lab=la;var $g=18,_g=.95047,ah=1,bh=1.08883,ch=la.prototype=new ga;ch.brighter=function(a){return new la(Math.min(100,this.l+$g*(arguments.length?a:1)),this.a,this.b)},ch.darker=function(a){return new la(Math.max(0,this.l-$g*(arguments.length?a:1)),this.a,this.b)},ch.rgb=function(){return ma(this.l,this.a,this.b)},hg.rgb=ra;var dh=ra.prototype=new ga;dh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ra(e,e,e)},dh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(a*this.r,a*this.g,a*this.b)},dh.hsl=function(){return wa(this.r,this.g,this.b)},dh.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var eh=hg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eh.forEach(function(a,b){eh.set(a,sa(b))}),hg.functor=Aa,hg.xhr=Ba(s),hg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ca(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new r,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},hg.csv=hg.dsv(",","text/csv"),hg.tsv=hg.dsv("	","text/tab-separated-values");var fh,gh,hh,ih,jh=this[u(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};hg.timer=function(){Fa.apply(this,arguments)},hg.timer.flush=function(){Ha(),Ia()},hg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var kh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ka);hg.formatPrefix=function(a,b){var c=0;return(a=+a)&&(0>a&&(a*=-1),b&&(a=hg.round(a,Ja(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),kh[8+c/3]};var lh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mh=hg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=hg.round(a,Ja(a,b))).toFixed(Math.max(0,Math.min(20,Ja(a*(1+1e-15),b))))}}),nh=hg.time={},oh=Date;Na.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ph.setUTCDate.apply(this._,arguments)},setDay:function(){ph.setUTCDay.apply(this._,arguments)},setFullYear:function(){ph.setUTCFullYear.apply(this._,arguments)},setHours:function(){ph.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ph.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ph.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ph.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ph.setUTCSeconds.apply(this._,arguments)},setTime:function(){ph.setTime.apply(this._,arguments)}};var ph=Date.prototype;nh.year=Oa(function(a){return a=nh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),nh.years=nh.year.range,nh.years.utc=nh.year.utc.range,nh.day=Oa(function(a){var b=new oh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),nh.days=nh.day.range,nh.days.utc=nh.day.utc.range,nh.dayOfYear=function(a){var b=nh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=nh[a]=Oa(function(a){return(a=nh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});nh[a+"s"]=c.range,nh[a+"s"].utc=c.utc.range,nh[a+"OfYear"]=function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)}}),nh.week=nh.sunday,nh.weeks=nh.sunday.range,nh.weeks.utc=nh.sunday.utc.range,nh.weekOfYear=nh.sundayOfYear;var qh={"-":"",_:" ",0:"0"},rh=/^\s*\d+/,sh=/^%/;hg.locale=function(a){return{numberFormat:La(a),timeFormat:Qa(a)}};var th=hg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});hg.format=th.numberFormat,hg.geo={},jb.prototype={s:0,t:0,add:function(a){kb(a,this.t,uh),kb(uh.s,this.s,this),this.s?this.t+=uh.t:this.s=uh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uh=new jb;hg.geo.stream=function(a,b){a&&vh.hasOwnProperty(a.type)?vh[a.type](a,b):lb(a,b)};var vh={Feature:function(a,b){lb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lb(c[d].geometry,b)}},wh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b,0)},Polygon:function(a,b){nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lb(c[d],b)}};hg.geo.area=function(a){return xh=0,hg.geo.stream(a,zh),xh};var xh,yh=new jb,zh={sphere:function(){xh+=4*Mg},point:v,lineStart:v,lineEnd:v,polygonStart:function(){yh.reset(),zh.lineStart=ob},polygonEnd:function(){var a=2*yh;xh+=0>a?4*Mg+a:a,zh.lineStart=zh.lineEnd=zh.point=v}};hg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=pb([b*Qg,c*Qg]);if(r){var e=rb(r,d),f=[e[1],-e[0],0],g=rb(f,e);ub(g),g=vb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Rg*j,q=tg(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Rg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Rg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=tg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;zh.point(a,c),b(a,c)}function f(){zh.lineStart()}function g(){e(p,q),zh.lineEnd(),tg(s)>Kg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,zh.polygonStart()},polygonEnd:function(){zh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>yh?(k=-(m=180),l=-(n=90)):s>Kg?n=90:-Kg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],hg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),hg.geo.centroid=function(a){Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,hg.geo.stream(a,Lh);var b=Ih,c=Jh,d=Kh,e=b*b+c*c+d*d;return Lg>e&&(b=Fh,c=Gh,d=Hh,Kg>Bh&&(b=Ch,c=Dh,d=Eh),e=b*b+c*c+d*d,Lg>e)?[NaN,NaN]:[Math.atan2(c,b)*Rg,ba(d/Math.sqrt(e))*Rg]};var Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh={sphere:v,point:xb,lineStart:zb,lineEnd:Ab,polygonStart:function(){Lh.lineStart=Bb},polygonEnd:function(){Lh.lineStart=zb}},Mh=Hb(Db,Lb,Nb,[-Mg,-Mg/2]),Nh=1e9;hg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Rb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(hg.geo.conicEqualArea=function(){return Sb(Tb)}).raw=Tb,hg.geo.albers=function(){return hg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},hg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=hg.geo.albers(),g=hg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=hg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Kg,l+.12*j+Kg],[k-.214*j-Kg,l+.234*j-Kg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Kg,l+.166*j+Kg],[k-.115*j-Kg,l+.234*j-Kg]]).stream(i).point,a},a.scale(1070)};var Oh,Ph,Qh,Rh,Sh,Th,Uh={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Ph=0,Uh.lineStart=Ub},polygonEnd:function(){Uh.lineStart=Uh.lineEnd=Uh.point=v,Oh+=tg(Ph/2)}},Vh={point:Vb,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Wh={point:Yb,lineStart:Zb,lineEnd:$b,polygonStart:function(){Wh.lineStart=_b},polygonEnd:function(){Wh.point=Yb,Wh.lineStart=Zb,Wh.lineEnd=$b}};hg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),hg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Oh=0,hg.geo.stream(a,e(Uh)),Oh},a.centroid=function(a){return Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,hg.geo.stream(a,e(Wh)),Kh?[Ih/Kh,Jh/Kh]:Hh?[Fh/Hh,Gh/Hh]:Eh?[Ch/Eh,Dh/Eh]:[NaN,NaN]},a.bounds=function(a){return Sh=Th=-(Qh=Rh=1/0),hg.geo.stream(a,e(Vh)),[[Qh,Rh],[Sh,Th]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cc(a):s,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wb:new ac(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(hg.geo.albersUsa()).context(null)},hg.geo.transform=function(a){return{stream:function(b){var c=new dc(b);for(var d in a)c[d]=a[d];return c}}},dc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},hg.geo.projection=fc,hg.geo.projectionMutator=gc,(hg.geo.equirectangular=function(){return fc(ic)}).raw=ic.invert=ic,hg.geo.rotation=function(a){function b(b){return b=a(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b}return a=kc(a[0]%360*Qg,a[1]*Qg,a.length>2?a[2]*Qg:0),b.invert=function(b){return b=a.invert(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b},b},jc.invert=ic,hg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kc(-a[0]*Qg,-a[1]*Qg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Rg,a[1]*=Rg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=oc((b=+d)*Qg,e*Qg),a):b},a.precision=function(d){return arguments.length?(c=oc(b*Qg,(e=+d)*Qg),a):e},a.angle(90)},hg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Qg,e=a[1]*Qg,f=b[1]*Qg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},hg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return hg.range(Math.ceil(f/q)*q,e,q).map(m).concat(hg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(hg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return tg(a%q)>Kg}).map(k)).concat(hg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return tg(a%r)>Kg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qc(h,g,90),l=rc(d,c,s),m=qc(j,i,90),n=rc(f,e,s),a):s},a.majorExtent([[-180,-90+Kg],[180,90-Kg]]).minorExtent([[-180,-80-Kg],[180,80+Kg]])},hg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sc,e=tc;return a.distance=function(){return hg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},hg.geo.interpolate=function(a,b){return uc(a[0]*Qg,a[1]*Qg,b[0]*Qg,b[1]*Qg)},hg.geo.length=function(a){return Xh=0,hg.geo.stream(a,Yh),Xh};var Xh,Yh={sphere:v,point:v,lineStart:vc,lineEnd:v,polygonStart:v,polygonEnd:v},Zh=wc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(hg.geo.azimuthalEqualArea=function(){return fc(Zh)}).raw=Zh;var $h=wc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},s);(hg.geo.azimuthalEquidistant=function(){return fc($h)}).raw=$h,(hg.geo.conicConformal=function(){return Sb(xc)}).raw=xc,(hg.geo.conicEquidistant=function(){return Sb(yc)}).raw=yc;var _h=wc(function(a){return 1/a},Math.atan);(hg.geo.gnomonic=function(){return fc(_h)}).raw=_h,zc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Pg]},(hg.geo.mercator=function(){return Ac(zc)}).raw=zc;var ai=wc(function(){return 1},Math.asin);(hg.geo.orthographic=function(){return fc(ai)}).raw=ai;var bi=wc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(hg.geo.stereographic=function(){return fc(bi)}).raw=bi,Bc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Pg]},(hg.geo.transverseMercator=function(){var a=Ac(Bc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bc,hg.geom={},hg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Aa(c),f=Aa(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fc),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Ec(h),k=Ec(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cc,d=Dc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},hg.geom.polygon=function(a){return yg(a,ci),a};var ci=hg.geom.polygon.prototype=[];ci.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ci.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ci.clip=function(a){for(var b,c,d,e,f,g,h=Ic(a),i=-1,j=this.length-Ic(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gc(g,k,e)?(Gc(f,k,e)||a.push(Hc(f,g,k,e)),a.push(g)):Gc(f,k,e)&&a.push(Hc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var di,ei,fi,gi,hi,ii=[],ji=[];Qc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Sc),b.length},ad.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},bd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ed(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,dd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,dd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ed(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},hg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return gd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Kg)*Kg,y:Math.round(g(a,b)/Kg)*Kg,i:b}})}var d=Cc,e=Dc,f=d,g=e,h=ki;return a?b(a):(b.links=function(a){return gd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&id(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Aa(d=a),b):d},b.y=function(a){return arguments.length?(g=Aa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ki:a,b):h===ki?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ki?null:h&&h[1]},b)};var ki=[[-1e6,-1e6],[1e6,1e6]];hg.geom.delaunay=function(a){return hg.geom.voronoi().triangles(a)},hg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(tg(i-c)+tg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=ld()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Aa(h),u=Aa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,
g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=ld();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){md(a,z,p,q,r,s)},z.find=function(a){return nd(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cc,i=Dc;return(g=arguments.length)?(h=jd,i=kd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},hg.interpolateRgb=od,hg.interpolateObject=pd,hg.interpolateNumber=qd,hg.interpolateString=rd;var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(li.source,"g");hg.interpolate=sd,hg.interpolators=[function(a,b){var c=typeof b;return("string"===c?eh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?od:rd:b instanceof ga?od:Array.isArray(b)?td:"object"===c&&isNaN(b)?pd:qd)(a,b)}],hg.interpolateArray=td;var ni=function(){return s},oi=hg.map({linear:ni,poly:Ad,quad:function(){return xd},cubic:function(){return yd},sin:function(){return Bd},exp:function(){return Cd},circle:function(){return Dd},elastic:Ed,back:Fd,bounce:function(){return Gd}}),pi=hg.map({"in":s,out:vd,"in-out":wd,"out-in":function(a){return wd(vd(a))}});hg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=oi.get(c)||ni,d=pi.get(d)||s,ud(d(c.apply(null,ig.call(arguments,1))))},hg.interpolateHcl=Hd,hg.interpolateHsl=Id,hg.interpolateLab=Jd,hg.interpolateRound=Kd,hg.transform=function(a){var b=kg.createElementNS(hg.ns.prefix.svg,"g");return(hg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ld(c?c.matrix:qi)})(a)},Ld.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};hg.interpolateTransform=Ud,hg.layout={},hg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Xd(a[c]));return b}},hg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=hg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(hg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ng-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},hg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/r){if(p>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&p>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=hg.event.x,a.py=hg.event.y,i.resume()}var c,d,e,f,g,h,i={},j=hg.dispatch("start","tick","end"),k=[1,1],l=.9,m=ri,n=si,o=-30,p=ti,q=.1,r=.64,t=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,s,v,w=t.length,x=u.length;for(d=0;x>d;++d)i=u[d],m=i.source,n=i.target,s=n.x-m.x,v=n.y-m.y,(p=s*s+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,s*=p,v*=p,n.x-=s*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=s*(r=1-r),m.y+=v*r);if((r=e*q)&&(s=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=t[d],i.x+=(s-i.x)*r,i.y+=(v-i.y)*r;if(o)for(ce(b=hg.geom.quadtree(t),e,h),d=-1;++d<w;)(i=t[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=t[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(t=a,i):t},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Fa(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;e>i;++i)c[i]=[];for(i=0;j>i;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=t.length,j=u.length,l=k[0],p=k[1];for(b=0;e>b;++b)(d=t[b]).index=b,d.weight=0;for(b=0;j>b;++b)d=u[b],"number"==typeof d.source&&(d.source=t[d.source]),"number"==typeof d.target&&(d.target=t[d.target]),++d.source.weight,++d.target.weight;for(b=0;e>b;++b)d=t[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;j>b;++b)f[b]=+m.call(this,u[b],b);else for(b=0;j>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;j>b;++b)g[b]=+n.call(this,u[b],b);else for(b=0;j>b;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;e>b;++b)h[b]=+o.call(this,t[b],b);else for(b=0;e>b;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=hg.behavior.drag().origin(s).on("dragstart.force",$d).on("drag.force",b).on("dragend.force",_d)),arguments.length?void this.on("mouseover.force",ae).on("mouseout.force",be).call(d):d},hg.rebind(i,j,"on")};var ri=20,si=1,ti=1/0;hg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return fe(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ie,c=ge,d=he;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(ee(b,function(a){a.children&&(a.value=0)}),fe(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},hg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=hg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},de(c,d)},hg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=hg.sum(j),p=o?(l-i*n)/o:0,q=hg.range(i),r=[];return null!=c&&q.sort(c===ui?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ui,d=0,e=Ng,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ui={};hg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=hg.permute(j,l),k=hg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=s,c=ne,d=oe,e=me,f=ke,g=le;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:vi.get(b)||ne,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:wi.get(b)||oe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var vi=hg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(pe),f=a.map(qe),g=hg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return hg.range(a.length).reverse()},"default":ne}),wi=hg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:oe});hg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[hg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ue,e=se;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Aa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return te(a,b)}:Aa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},hg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,fe(h,function(a){a.r=+k(a.value)}),fe(h,ze),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;fe(h,function(a){a.r+=l}),fe(h,ze),fe(h,function(a){a.r-=l})}return Ce(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=hg.layout.hierarchy().sort(ve),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},de(a,c)},hg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(fe(m,c),m.parent.m=-m.z,ee(m,d),j)ee(l,f);else{var n=l,o=l,p=l;ee(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);ee(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ie(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ge(g),e=Fe(e),g&&e;)i=Fe(i),f=Ge(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(He(Je(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ge(f)&&(f.t=g,f.m+=l-k),e&&!Fe(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=hg.layout.hierarchy().sort(null).value(null),h=Ee,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},de(a,g)},hg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;fe(i,function(a){var b=a.children;b&&b.length?(a.x=Le(b),a.y=Ke(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Me(i),l=Ne(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return fe(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=hg.layout.hierarchy().sort(null).value(null),c=Ee,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},de(a,b)},hg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=hg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Oe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Oe(b):Pe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Pe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Oe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},de(f,h)},hg.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=hg.random.normal.apply(hg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=hg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},hg.scale={};var xi={floor:s,ceil:s};hg.scale.linear=function(){return We([0,1],[0,1],sd,!1)};var yi={s:1,g:1,p:1,r:1,e:1};hg.scale.log=function(){return cf(hg.scale.linear().domain([0,1]),10,!0,[1,10])};var zi=hg.format(".0e"),Ai={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};hg.scale.pow=function(){return df(hg.scale.linear(),1,[0,1])},hg.scale.sqrt=function(){return hg.scale.pow().exponent(.5)},hg.scale.ordinal=function(){return ff([],{t:"range",a:[[]]})},hg.scale.category10=function(){return hg.scale.ordinal().range(Bi)},hg.scale.category20=function(){return hg.scale.ordinal().range(Ci)},hg.scale.category20b=function(){return hg.scale.ordinal().range(Di)},hg.scale.category20c=function(){return hg.scale.ordinal().range(Ei)};var Bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ta),Ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ta),Di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ta),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ta);hg.scale.quantile=function(){return gf([],[])},hg.scale.quantize=function(){return hf(0,1,[0,1])},hg.scale.threshold=function(){return jf([.5],[0,1])},hg.scale.identity=function(){return kf([0,1])},hg.svg={},hg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Pg,l=h.apply(this,arguments)-Pg,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Og)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Fi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ba(q/j*Math.sin(r))),a&&(A=ba(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Mg?0:1;if(B&&rf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Mg?0:1;if(A&&rf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Kg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=o,I=o;if(Mg>m){var J=null==y?[w,x]:null==u?[s,t]:Hc([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=sf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=sf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^rf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=sf([s,t],[y,z],a,-I,n),T=sf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^rf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=mf,d=nf,e=lf,f=Fi,g=of,h=pf,i=qf;return a.innerRadius=function(b){return arguments.length?(c=Aa(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Aa(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Aa(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Fi?Fi:Aa(b),a):f},a.startAngle=function(b){return arguments.length?(g=Aa(b),a):g},a.endAngle=function(b){return arguments.length?(h=Aa(b),a):h},a.padAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Pg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Fi="auto";hg.svg.line=function(){return tf(s)};var Gi=hg.map({linear:uf,"linear-closed":vf,step:wf,"step-before":xf,"step-after":yf,basis:Ef,"basis-open":Ff,"basis-closed":Gf,bundle:Hf,cardinal:Bf,"cardinal-open":zf,"cardinal-closed":Af,monotone:Nf});Gi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Hi=[0,2/3,1/3,0],Ii=[0,1/3,2/3,0],Ji=[0,1/6,2/3,1/6];hg.svg.line.radial=function(){var a=tf(Of);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},xf.reverse=yf,yf.reverse=xf,hg.svg.area=function(){return Pf(s)},hg.svg.area.radial=function(){var a=Pf(Of);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},hg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Pg,k=j.call(a,e,d)-Pg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Mg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sc,g=tc,h=Qf,i=of,j=pf;return a.radius=function(b){return arguments.length?(h=Aa(b),a):h},a.source=function(b){return arguments.length?(f=Aa(b),a):f},a.target=function(b){return arguments.length?(g=Aa(b),a):g},a.startAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.endAngle=function(b){return arguments.length?(j=Aa(b),a):j},a},hg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sc,c=tc,d=Rf;return a.source=function(c){return arguments.length?(b=Aa(c),a):b},a.target=function(b){return arguments.length?(c=Aa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},hg.svg.diagonal.radial=function(){var a=hg.svg.diagonal(),b=Rf,c=a.projection;return a.projection=function(a){return arguments.length?c(Sf(b=a)):b},a},hg.svg.symbol=function(){function a(a,d){return(Ki.get(b.call(this,a,d))||Vf)(c.call(this,a,d))}var b=Uf,c=Tf;return a.type=function(c){return arguments.length?(b=Aa(c),a):b},a.size=function(b){return arguments.length?(c=Aa(b),a):c},a};var Ki=hg.map({circle:Vf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Mi)),c=b*Mi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});hg.svg.symbolTypes=Ki.keys();var Li=Math.sqrt(3),Mi=Math.tan(30*Qg);Cg.transition=function(a){for(var b,c,d=Ni||++Ri,e=$f(a),f=[],g=Oi||{time:Date.now(),ease:zd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&_f(c,k,e,d,g),b.push(c)}return Xf(f,e,d)},Cg.interrupt=function(a){return this.each(null==a?Pi:Wf($f(a)))};var Ni,Oi,Pi=Wf($f()),Qi=[],Ri=0;Qi.call=Cg.call,Qi.empty=Cg.empty,Qi.node=Cg.node,Qi.size=Cg.size,hg.transition=function(a,b){return a&&a.transition?Ni?a.transition(b):a:hg.selection().transition(a)},hg.transition.prototype=Qi,Qi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=C(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),_f(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Xf(g,f,e)},Qi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=D(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&_f(e,o,h,g,f),b.push(e)}return Xf(i,h,g)},Qi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Xf(e,this.namespace,this.id)},Qi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):R(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Qi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Ud:sd,h=hg.ns.qualify(a);return Yf(this,"attr."+a,b,h.local?f:e)},Qi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=hg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Qi.style=function(a,c,d){function e(){this.style.removeProperty(a)}function f(c){return null==c?e:(c+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(a);return f!==c&&(e=sd(f,c),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}return Yf(this,"style."+a,c,f)},Qi.styleTween=function(a,c,d){function e(e,f){var g=c.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Qi.text=function(a){return Yf(this,"text",a,Zf)},Qi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Qi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=hg.ease.apply(hg,arguments)),R(this,function(d){d[c][b].ease=a}))},Qi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:R(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Qi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:R(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Qi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Oi,f=Ni;try{Ni=c,R(this,function(b,e,f){Oi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Oi=e,Ni=f}}else R(this,function(e){var f=e[d][c];(f.event||(f.event=hg.dispatch("start","end","interrupt"))).on(a,b)});return this},Qi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ri,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],_f(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Xf(h,g,f)},hg.svg.axis=function(){function a(a){a.each(function(){var a,j=hg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):s:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Kg),q=hg.transition(o.exit()).style("opacity",Kg).remove(),r=hg.transition(o.order()).style("opacity",1),t=Math.max(e,0)+g,u=Re(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),hg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=ag,x="x",z="y",y="x2",A="y2",D.attr("dy",0>G?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=bg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*t),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*t),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=hg.scale.linear(),d=Si,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ti?b+"":Si,a):d},a.ticks=function(){return arguments.length?(h=jg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Si="bottom",Ti={top:1,right:1,bottom:1,left:1};hg.svg.brush=function(){function a(b){b.each(function(){var b=hg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=b.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(p,s);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){
return Ui[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=hg.transition(b),m=hg.transition(g);j&&(i=Re(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Re(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==hg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),y())}function p(){32==hg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,y())}function q(){var a=hg.mouse(v),b=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(hg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(z),b=!0),C&&r(a,k,1)&&(e(z),b=!0),b&&(c(z),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Re(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];return D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),d>k?(e=d,d=k):e=k),p[0]!=d||p[1]!=e?(c?h=null:g=null,p[0]=d,p[1]=e,!0):void 0}function s(){q(),z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),hg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=hg.select(hg.event.target),x=i.of(v,arguments),z=hg.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=X(v),F=hg.mouse(v),G=hg.select(b(v)).on("keydown.brush",f).on("keyup.brush",p);if(hg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),z.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else hg.event.altKey&&(t=F.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null),hg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=A(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Vi[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Ni?hg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=td(l,b.x),d=td(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Vi[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Vi[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),c>d&&(i=c,c=d,d=i),(c!=l[0]||d!=l[1])&&(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),e>f&&(i=e,e=f,f=i),(e!=m[0]||f!=m[1])&&(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),c>d&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),e>f&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},hg.rebind(a,i,"on")};var Ui={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wi=nh.format=th.timeFormat,Xi=Wi.utc,Yi=Xi("%Y-%m-%dT%H:%M:%S.%LZ");Wi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?cg:Yi,cg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},cg.toString=Yi.toString,nh.second=Oa(function(a){return new oh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),nh.seconds=nh.second.range,nh.seconds.utc=nh.second.utc.range,nh.minute=Oa(function(a){return new oh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),nh.minutes=nh.minute.range,nh.minutes.utc=nh.minute.utc.range,nh.hour=Oa(function(a){var b=a.getTimezoneOffset()/60;return new oh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),nh.hours=nh.hour.range,nh.hours.utc=nh.hour.utc.range,nh.month=Oa(function(a){return a=nh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),nh.months=nh.month.range,nh.months.utc=nh.month.utc.range;var Zi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$i=[[nh.second,1],[nh.second,5],[nh.second,15],[nh.second,30],[nh.minute,1],[nh.minute,5],[nh.minute,15],[nh.minute,30],[nh.hour,1],[nh.hour,3],[nh.hour,6],[nh.hour,12],[nh.day,1],[nh.day,2],[nh.week,1],[nh.month,1],[nh.month,3],[nh.year,1]],_i=Wi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Db]]),aj={range:function(a,b,c){return hg.range(Math.ceil(a/c)*c,+b,c).map(eg)},floor:s,ceil:s};$i.year=nh.year,nh.scale=function(){return dg(hg.scale.linear(),$i,_i)};var bj=$i.map(function(a){return[a[0].utc,a[1]]}),cj=Xi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Db]]);bj.year=nh.year.utc,nh.scale.utc=function(){return dg(hg.scale.linear(),bj,cj)},hg.text=Ba(function(a){return a.responseText}),hg.json=function(a,b){return Ca(a,"application/json",fg,b)},hg.html=function(a,b){return Ca(a,"text/html",gg,b)},hg.xml=Ba(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=hg,define(hg)):"object"==typeof module&&module.exports?module.exports=hg:this.d3=hg}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;c=Math.floor,j=Math.min,b=function(a,b){return b>a?-1:a>b?1:0},i=function(a,d,e,f,g){var h;if(null==e&&(e=0),null==g&&(g=b),0>e)throw new Error("lo must be non-negative");for(null==f&&(f=a.length);f>e;)h=c((e+f)/2),g(d,a[h])<0?f=h:e=h+1;return[].splice.apply(a,[e,e-e].concat(d)),d},f=function(a,c,d){return null==d&&(d=b),a.push(c),n(a,0,a.length-1,d)},e=function(a,c){var d,e;return null==c&&(c=b),d=a.pop(),a.length?(e=a[0],a[0]=d,o(a,0,c)):e=d,e},h=function(a,c,d){var e;return null==d&&(d=b),e=a[0],a[0]=c,o(a,0,d),e},g=function(a,c,d){var e;return null==d&&(d=b),a.length&&d(a[0],c)<0&&(e=[a[0],c],c=e[0],a[0]=e[1],o(a,0,d)),c},d=function(a,d){var e,f,g,h,i,j;for(null==d&&(d=b),h=function(){j=[];for(var b=0,d=c(a.length/2);d>=0?d>b:b>d;d>=0?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(o(a,e,d));return i},m=function(a,c,d){var e;return null==d&&(d=b),e=a.indexOf(c),-1!==e?(n(a,0,e,d),o(a,e,d)):void 0},k=function(a,c,e){var f,h,i,j,k;if(null==e&&(e=b),h=a.slice(0,c),!h.length)return h;for(d(h,e),k=a.slice(c),i=0,j=k.length;j>i;i++)f=k[i],g(h,f,e);return h.sort(e).reverse()},l=function(a,c,f){var g,h,k,l,m,n,o,p,q,r;if(null==f&&(f=b),10*c<=a.length){if(l=a.slice(0,c).sort(f),!l.length)return l;for(k=l[l.length-1],p=a.slice(c),m=0,o=p.length;o>m;m++)g=p[m],f(g,k)<0&&(i(l,g,0,null,f),l.pop(),k=l[l.length-1]);return l}for(d(a,f),r=[],h=n=0,q=j(c,a.length);q>=0?q>n:n>q;h=q>=0?++n:--n)r.push(e(a,f));return r},n=function(a,c,d,e){var f,g,h;for(null==e&&(e=b),f=a[d];d>c&&(h=d-1>>1,g=a[h],e(f,g)<0);)a[d]=g,d=h;return a[d]=f},o=function(a,c,d){var e,f,g,h,i;for(null==d&&(d=b),f=a.length,i=c,g=a[c],e=2*c+1;f>e;)h=e+1,f>h&&!(d(a[e],a[h])<0)&&(e=h),a[c]=a[e],c=e,e=2*c+1;return a[c]=g,n(a,i,c,d)},a=function(){function a(a){this.cmp=null!=a?a:b,this.nodes=[]}return a.push=f,a.pop=e,a.replace=h,a.pushpop=g,a.heapify=d,a.updateItem=m,a.nlargest=k,a.nsmallest=l,a.prototype.push=function(a){return f(this.nodes,a,this.cmp)},a.prototype.pop=function(){return e(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return h(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return g(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return d(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return m(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),function(a,b){return"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Heap=b()}(this,function(){return a})}.call(this),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.topojson=a.topojson||{})}(this,function(a){"use strict";function b(a){if(!a)return m;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function c(a){if(!a)return m;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=Math.round((a[0]-f)/d),j=Math.round((a[1]-g)/e);a[0]=i-b,a[1]=j-c,b=i,c=j}}function d(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function e(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function f(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:g(a,b)};return null==b.id&&delete c.id,c}function g(a,c){function e(a,b){b.length&&b.pop();for(var c,e=l[0>a?~a:a],f=0,g=e.length;g>f;++f)b.push(c=e[f].slice()),k(c,f);0>a&&d(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,d=a.length;d>c;++c)e(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=b(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(c)}function h(a,b,c){function d(a){var b=0>a?~a:a;(j[b]||(j[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in k&&(i=a,k[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,j=[],k={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),j.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var l=0,m=a.arcs.length;m>l;++l)h.push(l);return{type:"MultiLineString",arcs:o(a,h)}}function i(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function j(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function k(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=0>b?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return Math.abs(j(g(a,{type:"Polygon",arcs:[b]}).coordinates[0]))}var e={},f=[],h=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,h.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:h.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].length<2&&f.push(a)})})}),f=o(a,f),(c=f.length)>1)for(var g,h,i=1,j=d(f[0]);c>i;++i)(g=d(f[i]))>j&&(h=f[0],f[0]=f[i],f[i]=h,j=g);return f})}}function l(a,b){return a[1][2]-b[1][2]}var m=function(){},n=function(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return f(a,b)})}:f(a,b)},o=function(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h},p=function(a){return g(a,h.apply(this,arguments))},q=function(a){return g(a,k.apply(this,arguments))},r=function(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=f[a];c?c.push(b):f[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var f={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in f)for(var j=f[i],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=g[o])[i=e(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=e(n,o)]!==o&&n.splice(i,0,o)}return g},s=function(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(l(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&l(d[f],h)<0&&(h=d[g=f]),e>c&&l(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(l(f,c)<0?a:b)(d[f._=g]=f,g)),g},c},t=function(a,d){function e(a){h.remove(a),a[1][2]=d(a),h.push(a)}var f=b(a.transform),g=c(a.transform),h=s();return null==d&&(d=i),a.arcs.forEach(function(a){var b,c,i,j,k=[],l=0;for(c=0,i=a.length;i>c;++c)j=a[c],f(a[c]=[j[0],j[1],1/0],c);for(c=1,i=a.length-1;i>c;++c)b=a.slice(c-1,c+2),b[1][2]=d(b),k.push(b),h.push(b);for(c=0,i=k.length;i>c;++c)b=k[c],b.previous=k[c-1],b.next=k[c+1];for(;b=h.pop();){var m=b.previous,n=b.next;b[1][2]<l?b[1][2]=l:l=b[1][2],m&&(m.next=n,m[2]=b[2],e(m)),n&&(n.previous=m,n[0]=b[0],e(n))}a.forEach(g)}),a};a.mesh=p,a.meshArcs=h,a.merge=q,a.mergeArcs=k,a.feature=n,a.neighbors=r,a.presimplify=t,Object.defineProperty(a,"__esModule",{value:!0})}),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,c=a.length;c>b;++b)i[b]=a[b],j[a.charCodeAt(b)]=b;j["-".charCodeAt(0)]=62,j["_".charCodeAt(0)]=63}function e(a){var b,c,d,e,f,g,h=a.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");f="="===a[h-2]?2:"="===a[h-1]?1:0,g=new k(3*h/4-f),d=f>0?h-4:h;var i=0;for(b=0,c=0;d>b;b+=4,c+=3)e=j[a.charCodeAt(b)]<<18|j[a.charCodeAt(b+1)]<<12|j[a.charCodeAt(b+2)]<<6|j[a.charCodeAt(b+3)],g[i++]=e>>16&255,g[i++]=e>>8&255,g[i++]=255&e;return 2===f?(e=j[a.charCodeAt(b)]<<2|j[a.charCodeAt(b+1)]>>4,g[i++]=255&e):1===f&&(e=j[a.charCodeAt(b)]<<10|j[a.charCodeAt(b+1)]<<4|j[a.charCodeAt(b+2)]>>2,g[i++]=e>>8&255,g[i++]=255&e),g}function f(a){return i[a>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]}function g(a,b,c){for(var d,e=[],g=b;c>g;g+=3)d=(a[g]<<16)+(a[g+1]<<8)+a[g+2],e.push(f(d));return e.join("")}function h(a){for(var b,c=a.length,d=c%3,e="",f=[],h=16383,j=0,k=c-d;k>j;j+=h)f.push(g(a,j,j+h>k?k:j+h));return 1===d?(b=a[c-1],e+=i[b>>2],e+=i[b<<4&63],e+="=="):2===d&&(b=(a[c-2]<<8)+a[c-1],e+=i[b>>10],e+=i[b>>4&63],e+=i[b<<2&63],e+="="),f.push(e),f.join("")}c.toByteArray=e,c.fromByteArray=h;var i=[],j=[],k="undefined"!=typeof Uint8Array?Uint8Array:Array;d()},{}],2:[function(a,b,c){(function(b){"use strict";function d(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(b){return!1}}function e(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a,b){if(e()<b)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=g.prototype):(null===a&&(a=new g(b)),a.length=b),a}function g(a,b,c){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return k(this,a)}return h(this,a,b,c)}function h(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?n(a,b,c,d):"string"==typeof b?l(a,b,c):o(a,b)}function i(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number')}function j(a,b,c,d){return i(b),0>=b?f(a,b):void 0!==c?"string"==typeof d?f(a,b).fill(c,d):f(a,b).fill(c):f(a,b)}function k(a,b){if(i(b),a=f(a,0>b?0:0|p(b)),!g.TYPED_ARRAY_SUPPORT)for(var c=0;b>c;++c)a[c]=0;return a}function l(a,b,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!g.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|r(b,c);a=f(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function m(a,b){var c=0|p(b.length);a=f(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(a,b,c,d){if(b.byteLength,0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),g.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=g.prototype):a=m(a,b),a}function o(a,b){if(g.isBuffer(b)){var c=0|p(b.length);return a=f(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||Y(b.length)?f(a,0):m(a,b);if("Buffer"===b.type&&_(b.data))return m(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function q(a){return+a!=a&&(a=0),g.alloc(+a)}function r(a,b){if(g.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function s(a,b,c){var d=!1;if((void 0===b||0>b)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),0>=c)return"";if(c>>>=0,b>>>=0,b>=c)return"";for(a||(a="utf8");;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"latin1":case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function t(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function u(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:-2147483648>c&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),0>c&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(0>c){if(!e)return-1;c=0}if("string"==typeof b&&(b=g.from(b,d)),g.isBuffer(b))return 0===b.length?-1:v(a,b,c,d,e);if("number"==typeof b)return b=255&b,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):v(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function v(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,i=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;g=2,h/=2,i/=2,c/=2}var j;if(e){var k=-1;for(j=c;h>j;j++)if(f(a,j)===f(b,-1===k?0:j-k)){if(-1===k&&(k=j),j-k+1===i)return k*g}else-1!==k&&(j-=j-k),k=-1}else for(c+i>h&&(c=h-i),j=c;j>=0;j--){for(var l=!0,m=0;i>m;m++)if(f(a,j+m)!==f(b,m)){l=!1;break}if(l)return j}return-1}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Z.fromByteArray(a):Z.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(aa>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=aa));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;++e)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;++f)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(a,b,c,d,e,f){if(!g.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||f>b)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function L(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(ba,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return 16>a?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;++g){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Z.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Y(a){return a!==a}var Z=a("base64-js"),$=a("ieee754"),_=a("isarray");c.Buffer=g,c.SlowBuffer=q,c.INSPECT_MAX_BYTES=50,g.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),c.kMaxLength=e(),g.poolSize=8192,g._augment=function(a){return a.__proto__=g.prototype,a},g.from=function(a,b,c){return h(null,a,b,c)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]===g&&Object.defineProperty(g,Symbol.species,{value:null,configurable:!0})),g.alloc=function(a,b,c){return j(null,a,b,c)},g.allocUnsafe=function(a){return k(null,a)},g.allocUnsafeSlow=function(a){return k(null,a)},g.isBuffer=function(a){return!(null==a||!a._isBuffer)},g.compare=function(a,b){if(!g.isBuffer(a)||!g.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);f>e;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return d>c?-1:c>d?1:0},g.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(a,b){if(!_(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return g.alloc(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;++c)b+=a[c].length;var d=g.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){var f=a[c];if(!g.isBuffer(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(d,e),e+=f.length}return d},g.byteLength=r,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;a>b;b+=2)t(this,b,b+1);return this},g.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;a>b;b+=4)t(this,b,b+3),t(this,b+1,b+2);return this},g.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;a>b;b+=8)t(this,b,b+7),t(this,b+1,b+6),t(this,b+2,b+5),t(this,b+3,b+4);return this},g.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):s.apply(this,arguments)},g.prototype.equals=function(a){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===g.compare(this,a)},g.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},g.prototype.compare=function(a,b,c,d,e){if(!g.isBuffer(a))throw new TypeError("Argument must be a Buffer");if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;for(var f=e-d,h=c-b,i=Math.min(f,h),j=this.slice(d,e),k=a.slice(b,c),l=0;i>l;++l)if(j[l]!==k[l]){f=j[l],h=k[l];break}return h>f?-1:f>h?1:0},g.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)},g.prototype.indexOf=function(a,b,c){return u(this,a,b,c,!0)},g.prototype.lastIndexOf=function(a,b,c){return u(this,a,b,c,!1)},g.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else{if(!isFinite(b))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0)}var e=this.length-b;if((void 0===c||c>e)&&(c=e),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var f=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"latin1":case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),f=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var aa=4096;g.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c),0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c),a>b&&(b=a);var d;if(g.TYPED_ARRAY_SUPPORT)d=this.subarray(a,b),d.__proto__=g.prototype;else{var e=b-a;d=new g(e,void 0);for(var f=0;e>f;++f)d[f]=this[f+a]}return d},g.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;
return d},g.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},g.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},g.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},g.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},g.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},g.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},g.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},g.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},g.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},g.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},g.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},g.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},g.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!0,23,4)},g.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),$.read(this,a,!1,23,4)},g.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!0,52,8)},g.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),$.read(this,a,!1,52,8)},g.prototype.writeUIntLE=function(a,b,c,d){if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=1,g=0;for(this[b]=255&a;++g<c&&(f*=256);)this[b+g]=a/f&255;return b+c},g.prototype.writeUIntBE=function(a,b,c,d){if(a=+a,b=0|b,c=0|c,!d){var e=Math.pow(2,8*c)-1;K(this,a,b,c,e,0)}var f=c-1,g=1;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=a/g&255;return b+c},g.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,255,0),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},g.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):M(this,a,b,!0),b+4},g.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0;for(this[b]=255&a;++f<c&&(g*=256);)0>a&&0===h&&0!==this[b+f-1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0;for(this[b+f]=255&a;--f>=0&&(g*=256);)0>a&&0===h&&0!==this[b+f+1]&&(h=1),this[b+f]=(a/g>>0)-h&255;return b+c},g.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,1,127,-128),g.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),0>a&&(a=255+a+1),this[b]=255&a,b+1},g.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):L(this,a,b,!0),b+2},g.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):L(this,a,b,!1),b+2},g.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):M(this,a,b,!0),b+4},g.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||K(this,a,b,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),g.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):M(this,a,b,!1),b+4},g.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},g.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},g.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},g.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},g.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&c>d&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,f=d-c;if(this===a&&b>c&&d>b)for(e=f-1;e>=0;--e)a[e+b]=this[e+c];else if(1e3>f||!g.TYPED_ARRAY_SUPPORT)for(e=0;f>e;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+f),b);return f},g.prototype.fill=function(a,b,c,d){if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!=typeof d)throw new TypeError("encoding must be a string");if("string"==typeof d&&!g.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else"number"==typeof a&&(a=255&a);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(b>=c)return this;b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0);var f;if("number"==typeof a)for(f=b;c>f;++f)this[f]=a;else{var h=g.isBuffer(a)?a:T(new g(a,d).toString()),i=h.length;for(f=0;c-b>f;++f)this[f+b]=h[f%i]}return this};var ba=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:6,isarray:7}],3:[function(a,b,c){!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function c(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function d(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function e(a){return null===a?NaN:+a}function f(a){return!isNaN(a)}function g(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function h(a){return a.length}function i(a){for(var b=1;a*b%1;)b*=10;return b}function j(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function k(){this._=Object.create(null)}function l(a){return(a+="")===vg||a[0]===wg?wg+a:a}function m(a){return(a+="")[0]===wg?a.slice(1):a}function n(a){return l(a)in this._}function o(a){return(a=l(a))in this._&&delete this._[a]}function p(){var a=[];for(var b in this._)a.push(m(b));return a}function q(){var a=0;for(var b in this._)++a;return a}function r(){for(var a in this._)return!1;return!0}function s(){this._=Object.create(null)}function t(a){return a}function u(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function v(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=xg.length;d>c;++c){var e=xg[c]+b;if(e in a)return e}}function w(){}function x(){}function y(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new k;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function z(){ig.event.preventDefault()}function A(){for(var a,b=ig.event;a=b.sourceEvent;)b=a;return b}function B(a){for(var b=new x,c=0,d=arguments.length;++c<d;)b[arguments[c]]=y(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=ig.event;e.target=a,ig.event=e,b[e.type].apply(c,d)}finally{ig.event=f}}},b}function C(a){return zg(a,Dg),a}function D(a){return"function"==typeof a?a:function(){return Ag(a,this)}}function E(a){return"function"==typeof a?a:function(){return Bg(a,this)}}function F(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=ig.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function G(a){return a.trim().replace(/\s+/g," ")}function H(a){return new RegExp("(?:^|\\s+)"+ig.requote(a)+"(?:\\s+|$)","g")}function I(a){return(a+"").trim().split(/^|\s+/)}function J(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=I(a).map(K);var e=a.length;return"function"==typeof b?d:c}function K(a){var b=H(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",G(e+" "+a))):c.setAttribute("class",G(e.replace(b," ")))}}function L(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function M(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function N(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c&&c!==b.documentElement.namespaceURI?b.createElementNS(c,a):b.createElement(a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=ig.ns.qualify(a)).local?c:b}function O(){var a=this.parentNode;a&&a.removeChild(this)}function P(a){return{__data__:a}}function Q(a){return function(){return Cg(this,a)}}function R(a){return arguments.length||(a=d),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function S(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function T(a){return zg(a,Fg),a}function U(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function V(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,kg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+ig.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=W;h>0&&(a=a.slice(0,h));var j=Gg.get(a);return j&&(a=j,i=X),h?b?e:d:b?w:f}function W(a,b){return function(c){var d=ig.event;ig.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{ig.event=d}}}function X(a,b){var c=W(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Y(b){var d=".dragsuppress-"+ ++Ig,e="click"+d,f=ig.select(c(b)).on("touchmove"+d,z).on("dragstart"+d,z).on("selectstart"+d,z);if(null==Hg&&(Hg="onselectstart"in b?!1:v(b.style,"userSelect")),Hg){var g=a(b).style,h=g[Hg];g[Hg]="none"}return function(a){if(f.on(d,null),Hg&&(g[Hg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){z(),b()},!0),setTimeout(b,0)}}}function Z(a,b){b.changedTouches&&(b=b.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Jg){var f=c(a);if(f.scrollX||f.scrollY){d=ig.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Jg=!(g.f||g.e),d.remove()}}return Jg?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function $(){return ig.event.changedTouches[0].identifier}function _(a){return a>0?1:0>a?-1:0}function aa(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ba(a){return a>1?0:-1>a?Mg:Math.acos(a)}function ca(a){return a>1?Pg:-1>a?-Pg:Math.asin(a)}function da(a){return((a=Math.exp(a))-1/a)/2}function ea(a){return((a=Math.exp(a))+1/a)/2}function fa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ga(a){return(a=Math.sin(a/2))*a}function ha(){}function ia(a,b,c){return this instanceof ia?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ia?new ia(a.h,a.s,a.l):wa(""+a,xa,ia):new ia(a,b,c)}function ja(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new sa(e(a+120),e(a),e(a-120))}function ka(a,b,c){return this instanceof ka?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ka?new ka(a.h,a.c,a.l):a instanceof ma?oa(a.l,a.a,a.b):oa((a=ya((a=ig.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ka(a,b,c)}function la(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ma(c,Math.cos(a*=Qg)*b,Math.sin(a)*b)}function ma(a,b,c){return this instanceof ma?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ma?new ma(a.l,a.a,a.b):a instanceof ka?la(a.h,a.c,a.l):ya((a=sa(a)).r,a.g,a.b):new ma(a,b,c)}function na(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=pa(e)*_g,d=pa(d)*ah,f=pa(f)*bh,new sa(ra(3.2404542*e-1.5371385*d-.4985314*f),ra(-.969266*e+1.8760108*d+.041556*f),ra(.0556434*e-.2040259*d+1.0572252*f))}function oa(a,b,c){return a>0?new ka(Math.atan2(c,b)*Rg,Math.sqrt(b*b+c*c),a):new ka(NaN,NaN,a)}function pa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function qa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ra(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function sa(a,b,c){return this instanceof sa?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof sa?new sa(a.r,a.g,a.b):wa(""+a,sa,ja):new sa(a,b,c)}function ta(a){return new sa(a>>16,a>>8&255,255&a)}function ua(a){return ta(a)+""}function va(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function wa(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Aa(e[0]),Aa(e[1]),Aa(e[2]))}return(f=eh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function xa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ia(d,e,i)}function ya(a,b,c){a=za(a),b=za(b),c=za(c);var d=qa((.4124564*a+.3575761*b+.1804375*c)/_g),e=qa((.2126729*a+.7151522*b+.072175*c)/ah),f=qa((.0193339*a+.119192*b+.9503041*c)/bh);return ma(116*e-16,500*(d-e),200*(e-f))}function za(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Aa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ba(a){return"function"==typeof a?a:function(){return a}}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=ig.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=ig.event;ig.event=a;try{g.progress.call(f,i)}finally{ig.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(kg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},ig.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return gh?gh.n=f:fh=f,gh=f,hh||(ih=clearTimeout(ih),hh=1,jh(Ha)),f}function Ha(){var a=Ia(),b=Ja()-a;b>24?(isFinite(b)&&(clearTimeout(ih),ih=setTimeout(Ha,b)),hh=0):(hh=1,jh(Ha))}function Ia(){for(var a=Date.now(),b=fh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ja(){for(var a,b=fh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:fh=b.n;return gh=a,c}function Ka(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function La(a,b){var c=Math.pow(10,3*ug(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ma(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:t;return function(a){var c=lh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=mh.get(n)||Na;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=ig.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Na(a){return a+""}function Oa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pa(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new oh(c-1)),1),c}function f(a,c){return b(a=new oh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{oh=Oa;var d=new Oa;return d._=a,g(d,b,c)}finally{oh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Qa(a);return i.floor=i,i.round=Qa(d),i.ceil=Qa(e),i.offset=Qa(f),i.range=h,a}function Qa(a){return function(b,c){try{oh=Oa;var d=new Oa;return d._=b,a(d,c)._}finally{oh=Date}}}function Ra(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=qh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&oh!==Oa,g=new(f?Oa:oh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in qh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{oh=Oa;var b=new oh;return b._=a,d(b)}finally{oh=Date}}var d=b(a);return c.parse=function(a){try{oh=Oa;var b=d.parse(a);return b&&b._}finally{oh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=jb;var t=ig.map(),u=Ta(p),v=Ua(p),w=Ta(q),x=Ua(q),y=Ta(r),z=Ua(r),A=Ta(s),B=Ua(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+nh.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(nh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(nh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1e4,b,4)},Z:hb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:bb,e:bb,H:db,I:db,j:cb,L:gb,m:ab,M:eb,p:k,S:fb,U:Wa,w:Va,W:Xa,x:i,X:j,y:Za,Y:Ya,Z:$a,"%":ib};return b}function Sa(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Ta(a){return new RegExp("^(?:"+a.map(ig.requote).join("|")+")","i")}function Ua(a){for(var b=new k,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Va(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Wa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Xa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Ya(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Za(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.y=_a(+d[0]),c+d[0].length):-1}function $a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function _a(a){return a+(a>68?1900:2e3)}function ab(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function bb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function cb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function db(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function eb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function fb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function gb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function hb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=ug(b)/60|0,e=ug(b)%60;return c+Sa(d,"0",2)+Sa(e,"0",2)}function ib(a,b,c){sh.lastIndex=0;var d=sh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function kb(){}function lb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function mb(a,b){a&&wh.hasOwnProperty(a.type)&&wh[a.type](a,b)}function nb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ob(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)nb(a[c],b,1);b.polygonEnd()}function pb(){function a(a,b){a*=Qg,b=b*Qg/2+Mg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);yh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;zh.point=function(g,h){zh.point=a,d=(b=g)*Qg,e=Math.cos(h=(c=h)*Qg/2+Mg/4),f=Math.sin(h)},zh.lineEnd=function(){a(b,c)}}function qb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function sb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function tb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function wb(a){return[Math.atan2(a[1],a[0]),ca(a[2])]}function xb(a,b){return ug(a[0]-b[0])<Kg&&ug(a[1]-b[1])<Kg}function yb(a,b){a*=Qg;var c=Math.cos(b*=Qg);zb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function zb(a,b,c){++Ah,Ch+=(a-Ch)/Ah,Dh+=(b-Dh)/Ah,Eh+=(c-Eh)/Ah}function Ab(){function a(a,e){a*=Qg;var f=Math.cos(e*=Qg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Bh+=j,Fh+=j*(b+(b=g)),Gh+=j*(c+(c=h)),Hh+=j*(d+(d=i)),zb(b,c,d)}var b,c,d;Lh.point=function(e,f){e*=Qg;var g=Math.cos(f*=Qg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Lh.point=a,zb(b,c,d)}}function Bb(){Lh.point=yb}function Cb(){function a(a,b){a*=Qg;var c=Math.cos(b*=Qg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ba(n)/m,p=Math.atan2(m,n);Ih+=o*j,Jh+=o*k,Kh+=o*l,Bh+=p,Fh+=p*(d+(d=g)),Gh+=p*(e+(e=h)),Hh+=p*(f+(f=i)),zb(d,e,f)}var b,c,d,e,f;Lh.point=function(g,h){b=g,c=h,Lh.point=a,g*=Qg;var i=Math.cos(h*=Qg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),zb(d,e,f)},Lh.lineEnd=function(){a(b,c),Lh.lineEnd=Bb,Lh.point=yb}}function Db(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Eb(){return!0}function Fb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Hb(c,a,null,!0),j=new Hb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Hb(d,a,null,!1),j=new Hb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Gb(f),Gb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Gb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Hb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Ib(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Jb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=ig.merge(n);var a=Pb(r,o);n.length?(v||(f.polygonStart(),v=!0),Fb(n,Lb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Kb(),u=b(t),v=!1;return s}}function Jb(a){return a.length>1}function Kb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:w,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return((a=a.x)[0]<0?a[1]-Pg-Kg:Pg-a[1])-((b=b.x)[0]<0?b[1]-Pg-Kg:Pg-b[1])}function Mb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Mg:-Mg,i=ug(f-c);ug(i-Mg)<Kg?(a.point(c,d=(d+g)/2>0?Pg:-Pg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Mg&&(ug(c-e)<Kg&&(c-=e*Kg),ug(f-h)<Kg&&(f-=h*Kg),d=Nb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Nb(a,b,c,d){var e,f,g=Math.sin(a-c);return ug(g)>Kg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ob(a,b,c,d){var e;if(null==a)e=c*Pg,d.point(-Mg,e),d.point(0,e),d.point(Mg,e),d.point(Mg,0),d.point(Mg,-e),d.point(0,-e),d.point(-Mg,-e),d.point(-Mg,0),d.point(-Mg,e);else if(ug(a[0]-b[0])>Kg){var f=a[0]<b[0]?Mg:-Mg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Pb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;yh.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Mg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){
q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Mg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Mg,z=o*t;if(yh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ng:v,y^m>=c^r>=c){var A=sb(qb(l),qb(a));vb(A);var B=sb(e,A);vb(B);var C=(y^v>=0?-1:1)*ca(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Kg>f||Kg>f&&0>yh)^1&g}function Qb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Mg:-Mg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(xb(c,n)||xb(o,n))&&(o[0]+=Kg,o[1]+=Kg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&xb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=qb(a),e=qb(b),g=[1,0,0],h=sb(d,e),i=rb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=sb(g,h),o=ub(g,l),p=ub(h,m);tb(o,p);var q=n,r=rb(o,q),s=rb(q,q),t=r*r-s*(rb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=ub(q,(-r-u)/s);if(tb(v,o),v=wb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=ug(B-Mg)<Kg,D=C||Kg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(ug(v[0]-x)<Kg?z:A):z<=v[1]&&v[1]<=A:B>Mg^(x<=v[0]&&v[0]<=y)){var E=ub(q,(-r+u)/s);return tb(E,o),[v,wb(E)]}}}function e(b,c){var d=g?a:Mg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=ug(f)>Kg,i=pc(a,6*Qg);return Ib(b,c,i,g?[0,-a]:[-Mg,a-Mg])}function Rb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Sb(a,b,c,d){function e(d,e){return ug(d[0]-a)<Kg?e>0?0:3:ug(d[0]-c)<Kg?e>0?2:1:ug(d[1]-b)<Kg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&aa(j,f,a)>0&&++b:f[1]<=d&&aa(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Nh,Math.min(Nh,a)),b=Math.max(-Nh,Math.min(Nh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Kb(),C=Rb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=ig.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Fb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Tb(a){var b=0,c=Mg/3,d=hc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Mg/180,c=a[1]*Mg/180):[b/Mg*180,c/Mg*180]},e}function Ub(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ca((f-(a*a+c*c)*e*e)/(2*e))]},c}function Vb(){function a(a,b){Ph+=e*a-d*b,d=a,e=b}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,b=d=f,c=e=g},Uh.lineEnd=function(){a(b,c)}}function Wb(a,b){Qh>a&&(Qh=a),a>Sh&&(Sh=a),Rh>b&&(Rh=b),b>Th&&(Th=b)}function Xb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Yb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Yb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Yb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Zb(a,b){Ch+=a,Dh+=b,++Eh}function $b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Fh+=g*(b+a)/2,Gh+=g*(c+d)/2,Hh+=g,Zb(b=a,c=d)}var b,c;Wh.point=function(d,e){Wh.point=a,Zb(b=d,c=e)}}function _b(){Wh.point=Zb}function ac(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Fh+=g*(d+a)/2,Gh+=g*(e+b)/2,Hh+=g,g=e*a-d*b,Ih+=g*(d+a),Jh+=g*(e+b),Kh+=3*g,Zb(d=a,e=b)}var b,c,d,e;Wh.point=function(f,g){Wh.point=a,Zb(b=d=f,c=e=g)},Wh.lineEnd=function(){a(b,c)}}function bc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ng)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:w};return h}function cc(a){function b(a){return(h?d:c)(a)}function c(b){return fc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=qb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=ug(ug(x)-1)<Kg||ug(d-m)<Kg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||ug((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Qg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function dc(a){var b=cc(function(b,c){return a([b*Rg,c*Rg])});return function(a){return ic(b(a))}}function ec(a){this.stream=a}function fc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function gc(a){return hc(function(){return a})()}function hc(a){function b(a){return a=h(a[0]*Qg,a[1]*Qg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Rg,a[1]*Rg]}function d(){h=Db(g=lc(r,s,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=cc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,u=0,v=Mh,w=t,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=ic(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Mh):Qb((x=+a)*Qg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Sb(a[0][0],a[0][1],a[1][0],a[1][1]):t,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Qg,q=a[1]%360*Qg,d()):[p*Rg,q*Rg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Qg,s=a[1]%360*Qg,u=a.length>2?a[2]%360*Qg:0,d()):[r*Rg,s*Rg,u*Rg]},ig.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function ic(a){return fc(a,function(b,c){a.point(b*Qg,c*Qg)})}function jc(a,b){return[a,b]}function kc(a,b){return[a>Mg?a-Ng:-Mg>a?a+Ng:a,b]}function lc(a,b,c){return a?b||c?Db(nc(a),oc(b,c)):nc(a):b||c?oc(b,c):kc}function mc(a){return function(b,c){return b+=a,[b>Mg?b-Ng:-Mg>b?b+Ng:b,c]}}function nc(a){var b=mc(a);return b.invert=mc(-a),b}function oc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ca(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ca(k*d-h*e)]},c}function pc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=qc(c,e),f=qc(c,f),(g>0?f>e:e>f)&&(e+=g*Ng)):(e=a+g*Ng,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=wb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function qc(a,b){var c=qb(b);c[0]-=a,vb(c);var d=ba(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Kg)%(2*Math.PI)}function rc(a,b,c){var d=ig.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function sc(a,b,c){var d=ig.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function tc(a){return a.source}function uc(a){return a.target}function vc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ga(d-b)+e*g*ga(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Rg,Math.atan2(g,Math.sqrt(d*d+e*e))*Rg]}:function(){return[a*Rg,b*Rg]};return o.distance=m,o}function wc(){function a(a,e){var f=Math.sin(e*=Qg),g=Math.cos(e),h=ug((a*=Qg)-b),i=Math.cos(h);Xh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Yh.point=function(e,f){b=e*Qg,c=Math.sin(f*=Qg),d=Math.cos(f),Yh.point=a},Yh.lineEnd=function(){Yh.point=Yh.lineEnd=w}}function xc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function yc(a,b){function c(a,b){g>0?-Pg+Kg>b&&(b=-Pg+Kg):b>Pg-Kg&&(b=Pg-Kg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Mg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=_(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Pg]},c):Ac}function zc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return ug(e)<Kg?jc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-_(e)*Math.sqrt(a*a+c*c)]},c)}function Ac(a,b){return[a,Math.log(Math.tan(Mg/4+b/2))]}function Bc(a){var b,c=gc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Mg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Cc(a,b){return[Math.log(Math.tan(Mg/4+b/2)),-a]}function Dc(a){return a[0]}function Ec(a){return a[1]}function Fc(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&aa(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Gc(a,b){return a[0]-b[0]||a[1]-b[1]}function Hc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ic(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Jc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Kc(){dd(this),this.edge=this.site=this.circle=null}function Lc(a){var b=ii.pop()||new Kc;return b.site=a,b}function Mc(a){Wc(a),fi.remove(a),ii.push(a),dd(a)}function Nc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Mc(a);for(var i=f;i.circle&&ug(c-i.circle.x)<Kg&&ug(d-i.circle.cy)<Kg;)f=i.P,h.unshift(i),Mc(i),i=f;h.unshift(i),Wc(i);for(var j=g;j.circle&&ug(c-j.circle.x)<Kg&&ug(d-j.circle.cy)<Kg;)g=j.N,h.push(j),Mc(j),j=g;h.push(j),Wc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],ad(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=$c(i.site,j.site,null,e),Vc(i),Vc(j)}function Oc(a){for(var b,c,d,e,f=a.x,g=a.y,h=fi._;h;)if(d=Pc(h,g)-f,d>Kg)h=h.L;else{if(e=f-Qc(h,g),!(e>Kg)){d>-Kg?(b=h.P,c=h):e>-Kg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Lc(a);if(fi.insert(b,i),b||c){if(b===c)return Wc(b),c=Lc(b.site),fi.insert(i,c),i.edge=c.edge=$c(b.site,i.site),Vc(b),void Vc(c);if(!c)return void(i.edge=$c(b.site,i.site));Wc(b),Wc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};ad(c.edge,j,o,u),i.edge=$c(j,a,null,u),c.edge=$c(a,o,null,u),Vc(b),Vc(c)}}function Pc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Qc(a,b){var c=a.N;if(c)return Pc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Rc(a){this.site=a,this.edges=[]}function Sc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ei,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(ug(d-b)>Kg||ug(e-c)>Kg)&&(h.splice(g,0,new bd(_c(f.site,k,ug(d-l)<Kg&&o-e>Kg?{x:l,y:ug(b-l)<Kg?c:o}:ug(e-o)<Kg&&m-d>Kg?{x:ug(c-o)<Kg?b:m,y:o}:ug(d-m)<Kg&&e-n>Kg?{x:m,y:ug(b-m)<Kg?c:n}:ug(e-n)<Kg&&d-l>Kg?{x:ug(c-n)<Kg?b:l,y:n}:null),f.site,null)),++i)}function Tc(a,b){return b.angle-a.angle}function Uc(){dd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Lg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ji.pop()||new Uc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=hi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}hi.insert(s,r),s||(gi=r)}}}}function Wc(a){var b=a.circle;b&&(b.P||(gi=b.N),hi.remove(b),ji.push(b),dd(b),a.circle=null)}function Xc(a){for(var b,c=di,d=Rb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Yc(b,a)||!d(b)||ug(b.a.x-b.b.x)<Kg&&ug(b.a.y-b.b.y)<Kg)&&(b.a=b.b=null,c.splice(e,1))}function Yc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Zc(a,b){this.l=a,this.r=b,this.a=this.b=null}function $c(a,b,c,d){var e=new Zc(a,b);return di.push(e),c&&ad(e,a,b,c),d&&ad(e,b,a,d),ei[a.i].edges.push(new bd(e,a,b)),ei[b.i].edges.push(new bd(e,b,a)),e}function _c(a,b,c){var d=new Zc(a,null);return d.a=b,d.b=c,di.push(d),d}function ad(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function bd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function cd(){this._=null}function dd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ed(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gd(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(id).pop();for(di=[],ei=new Array(a.length),fi=new cd,hi=new cd;;)if(e=gi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(ei[f.i]=new Rc(f),Oc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Nc(e.arc)}b&&(Xc(b),Sc(b));var g={cells:ei,edges:di};return fi=hi=di=ei=null,g}function id(a,b){return b.y-a.y||b.x-a.x}function jd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function kd(a){return a.x}function ld(a){return a.y}function md(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&nd(a,i[0],c,d,g,h),i[1]&&nd(a,i[1],g,d,e,h),i[2]&&nd(a,i[2],c,h,g,f),i[3]&&nd(a,i[3],g,h,e,f)}}function od(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function pd(a,b){a=ig.rgb(a),b=ig.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+va(Math.round(c+f*a))+va(Math.round(d+g*a))+va(Math.round(e+h*a))}}function qd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=td(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function rd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function sd(a,b){var c,d,e,f=li.lastIndex=mi.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=li.exec(a))&&(d=mi.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:rd(c,d)})),f=mi.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function td(a,b){for(var c,d=ig.interpolators.length;--d>=0&&!(c=ig.interpolators[d](a,b)););return c}function ud(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(td(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function vd(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function wd(a){return function(b){return 1-a(1-b)}}function xd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function yd(a){return a*a}function zd(a){return a*a*a}function Ad(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function Bd(a){return function(b){return Math.pow(b,a)}}function Cd(a){return 1-Math.cos(a*Pg)}function Dd(a){return Math.pow(2,10*(a-1))}function Ed(a){return 1-Math.sqrt(1-a*a)}function Fd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ng*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ng/b)}}function Gd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Hd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Id(a,b){a=ig.hcl(a),b=ig.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return la(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=ig.hsl(a),b=ig.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ja(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=ig.lab(a),b=ig.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return na(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Md(a){var b=[a.a,a.b],c=[a.c,a.d],d=Od(b),e=Nd(b,c),f=Od(Pd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Rg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Rg:0}function Nd(a,b){return a[0]*b[0]+a[1]*b[1]}function Od(a){var b=Math.sqrt(Nd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Pd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Qd(a){return a.length?a.pop()+",":""}function Rd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Sd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Qd(c)+"rotate(",null,")")-2,x:rd(a,b)})):b&&c.push(Qd(c)+"rotate("+b+")")}function Td(a,b,c,d){a!==b?d.push({i:c.push(Qd(c)+"skewX(",null,")")-2,x:rd(a,b)}):b&&c.push(Qd(c)+"skewX("+b+")")}function Ud(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Qd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:rd(a[0],b[0])},{i:e-2,x:rd(a[1],b[1])})}else(1!==b[0]||1!==b[1])&&c.push(Qd(c)+"scale("+b+")")}function Vd(a,b){var c=[],d=[];return a=ig.transform(a),b=ig.transform(b),Rd(a.translate,b.translate,c,d),Sd(a.rotate,b.rotate,c,d),Td(a.skew,b.skew,c,d),Ud(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Xd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Yd(a){for(var b=a.source,c=a.target,d=$d(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Zd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function $d(a,b){if(a===b)return a;for(var c=Zd(a),d=Zd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function _d(a){a.fixed|=2}function ae(a){a.fixed&=-7}function be(a){a.fixed|=4,a.px=a.x,a.py=a.y}function ce(a){a.fixed&=-5}function de(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(de(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function ee(a,b){return ig.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=ke,a}function fe(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function ge(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function he(a){return a.children}function ie(a){return a.value}function je(a,b){return b.value-a.value}function ke(a){return ig.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function le(a){return a.x}function me(a){return a.y}function ne(a,b,c){a.y0=b,a.y=c}function oe(a){return ig.range(a.length)}function pe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function qe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function re(a){return a.reduce(se,0)}function se(a,b){return a+b[1]}function te(a,b){return ue(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ue(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ve(a){return[ig.min(a),ig.max(a)]}function we(a,b){return a.value-b.value}function xe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function ye(a,b){a._pack_next=b,b._pack_prev=a}function ze(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ae(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Be),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],Ee(d,e,f),b(f),xe(d,f),d._pack_prev=f,xe(f,e),e=d._pack_next,g=3;j>g;g++){Ee(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ze(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ze(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?ye(d,e=h):ye(d=i,e),g--):(xe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Ce)}}function Be(a){a._pack_next=a._pack_prev=a}function Ce(a){delete a._pack_next,delete a._pack_prev}function De(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)De(e[f],b,c,d)}function Ee(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Fe(a,b){return a.parent==b.parent?1:2}function Ge(a){var b=a.children;return b.length?b[0]:a.t}function He(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Ie(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Je(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ke(a,b,c){return a.a.parent===b.parent?a.a:c}function Le(a){return 1+ig.max(a,function(a){return a.y})}function Me(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ne(a){var b=a.children;return b&&b.length?Ne(b[0]):a}function Oe(a){var b,c=a.children;return c&&(b=c.length)?Oe(c[b-1]):a}function Pe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Qe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Re(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Se(a){return a.rangeExtent?a.rangeExtent():Re(a.range())}function Te(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ue(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ve(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:xi}function We(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=ig.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Xe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?We:Te,i=d?Xd:Wd;return g=e(a,b,i,c),h=e(b,a,i,td),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ld)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return _e(a,b)},f.tickFormat=function(b,c){return af(a,b,c)},f.nice=function(b){return Ze(a,b),e()},f.copy=function(){return Xe(a,b,c,d)},e()}function Ye(a,b){return ig.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ze(a,b){return Ue(a,Ve($e(a,b)[2])),Ue(a,Ve($e(a,b)[2])),a}function $e(a,b){null==b&&(b=10);var c=Re(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function _e(a,b){return ig.range.apply(ig,$e(a,b))}function af(a,b,c){var d=$e(a,b);if(c){var e=lh.exec(c);if(e.shift(),"s"===e[8]){var f=ig.formatPrefix(Math.max(ug(d[0]),ug(d[1])));return e[7]||(e[7]="."+bf(f.scale(d[2]))),e[8]="f",c=ig.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+cf(e[8],d)),c=e.join("")}else c=",."+bf(d[2])+"f";return ig.format(c)}function bf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function cf(a,b){var c=bf(b[2]);return a in yi?Math.abs(c-bf(Math.max(ug(b[0]),ug(b[1]))))+ +("e"!==a):c-2*("%"===a)}function df(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ue(d.map(e),c?Math:Ai);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Re(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return zi;arguments.length<2?c=zi:"function"!=typeof c&&(c=ig.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return b-.5>g*b&&(g*=b),d>=g?c(a):""}},g.copy=function(){return df(a.copy(),b,c,d)},Ye(g,a)}function ef(a,b,c){function d(b){return a(e(b))}var e=ff(b),f=ff(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return _e(c,a)},d.tickFormat=function(a,b){return af(c,a,b)},d.nice=function(a){return d.domain(Ze(c,a))},d.exponent=function(g){return arguments.length?(e=ff(b=g),f=ff(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return ef(a.copy(),b,c)},Ye(d,a)}function ff(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function gf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return ig.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new k;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){
arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Re(b.a[0])},c.copy=function(){return gf(a,b)},c.domain(a)}function hf(a,b){function c(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=ig.quantile(a,c/d);return g}function g(a){return isNaN(a=+a)?void 0:b[ig.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(e).filter(f).sort(d),c()):a},g.range=function(a){return arguments.length?(b=a,c()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),0>c?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return hf(a,b)},c()}function jf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return jf(a,b,c)},e()}function kf(a,b){function c(c){return c>=c?b[ig.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return kf(a,b)},c}function lf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return _e(a,b)},b.tickFormat=function(b,c){return af(a,b,c)},b.copy=function(){return lf(a)},b}function mf(){return 0}function nf(a){return a.innerRadius}function of(a){return a.outerRadius}function pf(a){return a.startAngle}function qf(a){return a.endAngle}function rf(a){return a&&a.padAngle}function sf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function tf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function uf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ba(c),o=Ba(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Dc,d=Ec,e=Eb,f=vf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Gi.get(a)||vf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function vf(a){return a.length>1?a.join("L"):a+"Z"}function wf(a){return a.join("L")+"Z"}function xf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function zf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Af(a,b){return a.length<4?vf(a):a[1]+Df(a.slice(1,-1),Ef(a,b))}function Bf(a,b){return a.length<3?wf(a):a[0]+Df((a.push(a[0]),a),Ef([a[a.length-2]].concat(a,[a[1]]),b))}function Cf(a,b){return a.length<3?vf(a):a[0]+Df(a,Ef(a,b))}function Df(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return vf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Ef(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ff(a){if(a.length<3)return vf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Jf(Ji,g),",",Jf(Ji,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Kf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Gf(a){if(a.length<4)return vf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Jf(Ji,f)+","+Jf(Ji,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Kf(c,f,g);return c.join("")}function Hf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Jf(Ji,g),",",Jf(Ji,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Kf(b,g,h);return b.join("")}function If(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ff(a)}function Jf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Kf(a,b,c){a.push("C",Jf(Hi,b),",",Jf(Hi,c),",",Jf(Ii,b),",",Jf(Ii,c),",",Jf(Ji,b),",",Jf(Ji,c))}function Lf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Mf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Lf(e,f);++b<c;)d[b]=(g+(g=Lf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Nf(a){for(var b,c,d,e,f=[],g=Mf(a),h=-1,i=a.length-1;++h<i;)b=Lf(a[h],a[h+1]),ug(b)<Kg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Of(a){return a.length<3?vf(a):a[0]+Df(a,Nf(a))}function Pf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Pg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Qf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ba(c),v=Ba(e),w=c===d?function(){return n}:Ba(d),x=e===f?function(){return o}:Ba(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Dc,d=Dc,e=0,f=Ec,g=Eb,h=vf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Gi.get(a)||vf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Rf(a){return a.radius}function Sf(a){return[a.x,a.y]}function Tf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Pg;return[c*Math.cos(d),c*Math.sin(d)]}}function Uf(){return 64}function Vf(){return"circle"}function Wf(a){var b=Math.sqrt(a/Mg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Xf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Yf(a,b,c){return zg(a,Qi),a.namespace=b,a.id=c,a}function Zf(a,b,c,d){var e=a.id,f=a.namespace;return S(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function $f(a){return null==a&&(a=""),function(){this.textContent=a}}function _f(a){return null==a?"__transition__":"__transition_"+a+"__"}function ag(a,b,c,d,e){function f(a){var b=p.delay;return j.t=b+i,a>=b?g(a-b):void(j.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(d>+g){var k=o[g];k.timer.c=null,k.timer.t=NaN,--o.count,delete o[g]}j.c=h,Ga(function(){return j.c&&h(c||1)&&(j.c=null,j.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);return f>=1?(p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1):void 0}var i,j,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,j=Ga(f,0,i),p=o[d]={tween:new k,time:i,timer:j,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function cg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function dg(a){return a.toISOString()}function eg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=ig.bisect(Zi,e);return f==Zi.length?[b.year,$e(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Zi[f-1]<Zi[f]/e?f-1:f]:[aj,$e(a,c)[2]]}return d.invert=function(b){return fg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(fg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,fg(+c+1),b).length}var f=d.domain(),g=Re(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ue(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=fg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=fg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Re(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],fg(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return eg(a.copy(),b,c)},Ye(d,a)}function fg(a){return new Date(a)}function gg(a){return JSON.parse(a.responseText)}function hg(a){var b=lg.createRange();return b.selectNode(lg.body),b.createContextualFragment(a.responseText)}var ig={version:"3.5.15"},jg=[].slice,kg=function(a){return jg.call(a)},lg=this.document;if(lg)try{kg(lg.documentElement.childNodes)[0].nodeType}catch(mg){kg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),lg)try{lg.createElement("DIV").style.setProperty("opacity",0,"")}catch(ng){var og=this.Element.prototype,pg=og.setAttribute,qg=og.setAttributeNS,rg=this.CSSStyleDeclaration.prototype,sg=rg.setProperty;og.setAttribute=function(a,b){pg.call(this,a,b+"")},og.setAttributeNS=function(a,b,c){qg.call(this,a,b,c+"")},rg.setProperty=function(a,b,c){sg.call(this,a,b+"",c)}}ig.ascending=d,ig.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},ig.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},ig.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},ig.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},ig.sum=function(a,b){var c,d=0,e=a.length,g=-1;if(1===arguments.length)for(;++g<e;)f(c=+a[g])&&(d+=c);else for(;++g<e;)f(c=+b.call(a,a[g],g))&&(d+=c);return d},ig.mean=function(a,b){var c,d=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)f(c=e(a[h]))?d+=c:--i;else for(;++h<g;)f(c=e(b.call(a,a[h],h)))?d+=c:--i;return i?d/i:void 0},ig.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},ig.median=function(a,b){var c,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)f(c=e(a[i]))&&g.push(c);else for(;++i<h;)f(c=e(b.call(a,a[i],i)))&&g.push(c);return g.length?ig.quantile(g.sort(d),.5):void 0},ig.variance=function(a,b){var c,d,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)f(c=e(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<g;)f(c=e(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));return k>1?i/(k-1):void 0},ig.deviation=function(){var a=ig.variance.apply(this,arguments);return a?Math.sqrt(a):a};var tg=g(d);ig.bisectLeft=tg.left,ig.bisect=ig.bisectRight=tg.right,ig.bisector=function(a){return g(1===a.length?function(b,c){return d(a(b),c)}:a)},ig.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},ig.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},ig.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},ig.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=ig.min(a,h),d=new Array(c);++b<c;)for(var e,f=-1,g=d[b]=new Array(e);++f<e;)g[f]=a[f][b];return d},ig.zip=function(){return ig.transpose(arguments)},ig.keys=function(a){var b=[];for(var c in a)b.push(c);return b},ig.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},ig.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},ig.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var ug=Math.abs;ig.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=i(ug(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},ig.map=function(a,b){var c=new k;if(a instanceof k)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var vg="__proto__",wg="\x00";j(k,{has:n,get:function(a){return this._[l(a)]},set:function(a,b){return this._[l(a)]=b},remove:o,keys:p,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:m(b),value:this._[b]});return a},size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b),this._[b])}}),ig.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,l,m,n=-1,o=g.length,p=f[h++],q=new k;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),l=function(c,d){j.set(c,a(b,d,h))}):(j={},l=function(c,d){j[c]=a(b,d,h)}),q.forEach(l),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(ig.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},ig.set=function(a){var b=new s;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},j(s,{has:n,add:function(a){return this._[l(a+="")]=!0,a},remove:o,values:p,size:q,empty:r,forEach:function(a){for(var b in this._)a.call(this,m(b))}}),ig.behavior={},ig.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=u(a,b,b[c]);return a};var xg=["webkit","ms","moz","Moz","o","O"];ig.dispatch=function(){for(var a=new x,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=y(a);return a},x.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},ig.event=null,ig.requote=function(a){return a.replace(yg,"\\$&")};var yg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,zg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Ag=function(a,b){return b.querySelector(a)},Bg=function(a,b){return b.querySelectorAll(a)},Cg=function(a,b){var c=a.matches||a[v(a,"matchesSelector")];return(Cg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(Ag=function(a,b){return Sizzle(a,b)[0]||null},Bg=Sizzle,Cg=Sizzle.matchesSelector),ig.selection=function(){return ig.select(lg.documentElement)};var Dg=ig.selection.prototype=[];Dg.select=function(a){var b,c,d,e,f=[];a=D(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return C(f)},Dg.selectAll=function(a){var b,c,d=[];a=E(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=kg(a.call(c,c.__data__,h,e))),b.parentNode=c);return C(d)};var Eg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ig.ns={prefix:Eg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Eg.hasOwnProperty(c)?{space:Eg[c],local:a}:a}},Dg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=ig.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},Dg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=I(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!H(a[e]).test(b))return!1;return!0}for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},Dg.style=function(a,b,d){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(d in a)this.each(L(d,a[d],b));return this}if(2>e){var f=this.node();return c(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(L(a,b,d))},Dg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(M(b,a[b]));return this}return this.each(M(a,b))},Dg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Dg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Dg.append=function(a){return a=N(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Dg.insert=function(a,b){return a=N(a),b=D(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Dg.remove=function(){return this.each(O)},Dg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new k,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=P(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=P(f);for(;l>d;++d)o[d]=P(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=T([]),i=C([]),j=C([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},Dg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Dg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return C(e)},Dg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Dg.sort=function(a){a=R.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Dg.each=function(a){return S(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Dg.call=function(a){var b=kg(arguments);return a.apply(b[0]=this,b),this},Dg.empty=function(){return!this.node()},Dg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},Dg.size=function(){var a=0;return S(this,function(){++a}),a};var Fg=[];ig.selection.enter=T,ig.selection.enter.prototype=Fg,Fg.append=Dg.append,Fg.empty=Dg.empty,Fg.node=Dg.node,Fg.call=Dg.call,Fg.size=Dg.size,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return C(g)},Fg.insert=function(a,b){return arguments.length<2&&(b=U(this)),Dg.insert.call(this,a,b)},ig.select=function(b){var c;return"string"==typeof b?(c=[Ag(b,lg)],c.parentNode=lg.documentElement):(c=[b],c.parentNode=a(b)),C([c])},ig.selectAll=function(a){var b;return"string"==typeof a?(b=kg(Bg(a,lg)),b.parentNode=lg.documentElement):(b=kg(a),b.parentNode=null),C([b])},Dg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(V(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(V(a,b,c))};var Gg=ig.map({mouseenter:"mouseover",mouseleave:"mouseout"});lg&&Gg.forEach(function(a){"on"+a in lg&&Gg.remove(a)});var Hg,Ig=0;ig.mouse=function(a){return Z(a,A())};var Jg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ig.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=A().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return Z(a,d)},ig.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=ig.event.target.correspondingElement||ig.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=ig.select(c(l)).on(f+q,h).on(g+q,i),s=Y(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=B(a,"drag","dragstart","dragend"),e=null,f=b(w,ig.mouse,c,"mousemove","mouseup"),g=b($,ig.touch,t,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},ig.rebind(a,d,"on")},ig.touches=function(a,b){return arguments.length<2&&(b=A().touches),b?kg(b).map(function(b){var c=Z(a,b);return c.identifier=b.identifier,c}):[]};var Kg=1e-6,Lg=Kg*Kg,Mg=Math.PI,Ng=2*Mg,Og=Ng-Kg,Pg=Mg/2,Qg=Mg/180,Rg=180/Mg,Sg=Math.SQRT2,Tg=2,Ug=4;ig.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(Lg>m)d=Math.log(j/g)/Sg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Sg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Ug*m)/(2*g*Tg*n),p=(j*j-g*g-Ug*m)/(2*j*Tg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Sg,c=function(a){var b=a*d,c=ea(q),h=g/(Tg*n)*(c*fa(Sg*b+q)-da(q));return[e+h*k,f+h*l,g*c/ea(Sg*b+q)]}}return c.duration=1e3*d,c},ig.behavior.zoom=function(){function a(a){a.on(F,l).on(Wg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function d(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=ig.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(ig.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=ig.select(c(e)).on(G,a).on(H,d),m=b(ig.mouse(e)),n=Y(e);Pi.call(e),i(g)}function m(){function a(){var a=ig.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=ig.event.target;ig.select(b).on(u,d).on(v,h),w.push(b);for(var c=ig.event.changedTouches,e=0,f=c.length;f>e;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(500>j-t){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),z()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=ig.touches(o);Pi.call(o);for(var h=0,i=g.length;i>h;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(ig.event.touches.length){for(var b=ig.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}ig.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+ig.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=ig.select(o),A=Y(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Pi.call(this),p=b(q=r||ig.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),z(),e(Math.pow(2,.002*Vg())*y.k),f(q,p),j(a)}function o(){var a=ig.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),ig.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},A=[960,500],C=Xg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=B(a,"zoomstart","zoom","zoomend");return Wg||(Wg="onwheel"in lg?(Vg=function(){return-ig.event.deltaY*(ig.event.deltaMode?120:1)},"wheel"):"onmousewheel"in lg?(Vg=function(){return ig.event.wheelDelta},"mousewheel"):(Vg=function(){return-ig.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Ni?ig.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=A[0],d=A[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=ig.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:null},e(+b),h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Xg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(A=b&&[+b[0],+b[1]],a):A},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},ig.rebind(a,J,"on")};var Vg,Wg,Xg=[0,1/0];ig.color=ha,ha.prototype.toString=function(){return this.rgb()+""},ig.hsl=ia;var Yg=ia.prototype=new ha;Yg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,this.l/a)},Yg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ia(this.h,this.s,a*this.l)},Yg.rgb=function(){return ja(this.h,this.s,this.l)},ig.hcl=ka;var Zg=ka.prototype=new ha;Zg.brighter=function(a){return new ka(this.h,this.c,Math.min(100,this.l+$g*(arguments.length?a:1)))},Zg.darker=function(a){return new ka(this.h,this.c,Math.max(0,this.l-$g*(arguments.length?a:1)))},Zg.rgb=function(){return la(this.h,this.c,this.l).rgb()},ig.lab=ma;var $g=18,_g=.95047,ah=1,bh=1.08883,ch=ma.prototype=new ha;ch.brighter=function(a){return new ma(Math.min(100,this.l+$g*(arguments.length?a:1)),this.a,this.b)},ch.darker=function(a){return new ma(Math.max(0,this.l-$g*(arguments.length?a:1)),this.a,this.b)},ch.rgb=function(){return na(this.l,this.a,this.b)},ig.rgb=sa;var dh=sa.prototype=new ha;dh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new sa(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new sa(e,e,e)},dh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new sa(a*this.r,a*this.g,a*this.b)},dh.hsl=function(){return xa(this.r,this.g,this.b)},dh.toString=function(){return"#"+va(this.r)+va(this.g)+va(this.b)};var eh=ig.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,
mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eh.forEach(function(a,b){eh.set(a,ta(b))}),ig.functor=Ba,ig.xhr=Ca(t),ig.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new s,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},ig.csv=ig.dsv(",","text/csv"),ig.tsv=ig.dsv("	","text/tab-separated-values");var fh,gh,hh,ih,jh=this[v(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};ig.timer=function(){Ga.apply(this,arguments)},ig.timer.flush=function(){Ia(),Ja()},ig.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var kh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(La);ig.formatPrefix=function(a,b){var c=0;return(a=+a)&&(0>a&&(a*=-1),b&&(a=ig.round(a,Ka(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),kh[8+c/3]};var lh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mh=ig.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=ig.round(a,Ka(a,b))).toFixed(Math.max(0,Math.min(20,Ka(a*(1+1e-15),b))))}}),nh=ig.time={},oh=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ph.setUTCDate.apply(this._,arguments)},setDay:function(){ph.setUTCDay.apply(this._,arguments)},setFullYear:function(){ph.setUTCFullYear.apply(this._,arguments)},setHours:function(){ph.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ph.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ph.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ph.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ph.setUTCSeconds.apply(this._,arguments)},setTime:function(){ph.setTime.apply(this._,arguments)}};var ph=Date.prototype;nh.year=Pa(function(a){return a=nh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),nh.years=nh.year.range,nh.years.utc=nh.year.utc.range,nh.day=Pa(function(a){var b=new oh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),nh.days=nh.day.range,nh.days.utc=nh.day.utc.range,nh.dayOfYear=function(a){var b=nh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=nh[a]=Pa(function(a){return(a=nh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});nh[a+"s"]=c.range,nh[a+"s"].utc=c.utc.range,nh[a+"OfYear"]=function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)}}),nh.week=nh.sunday,nh.weeks=nh.sunday.range,nh.weeks.utc=nh.sunday.utc.range,nh.weekOfYear=nh.sundayOfYear;var qh={"-":"",_:" ",0:"0"},rh=/^\s*\d+/,sh=/^%/;ig.locale=function(a){return{numberFormat:Ma(a),timeFormat:Ra(a)}};var th=ig.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ig.format=th.numberFormat,ig.geo={},kb.prototype={s:0,t:0,add:function(a){lb(a,this.t,uh),lb(uh.s,this.s,this),this.s?this.t+=uh.t:this.s=uh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uh=new kb;ig.geo.stream=function(a,b){a&&vh.hasOwnProperty(a.type)?vh[a.type](a,b):mb(a,b)};var vh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},wh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){nb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b,0)},Polygon:function(a,b){ob(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],b)}};ig.geo.area=function(a){return xh=0,ig.geo.stream(a,zh),xh};var xh,yh=new kb,zh={sphere:function(){xh+=4*Mg},point:w,lineStart:w,lineEnd:w,polygonStart:function(){yh.reset(),zh.lineStart=pb},polygonEnd:function(){var a=2*yh;xh+=0>a?4*Mg+a:a,zh.lineStart=zh.lineEnd=zh.point=w}};ig.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=qb([b*Qg,c*Qg]);if(r){var e=sb(r,d),f=[e[1],-e[0],0],g=sb(f,e);vb(g),g=wb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Rg*j,q=ug(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Rg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Rg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=ug(d)>180?d+(d>0?360:-360):d}else p=a,q=c;zh.point(a,c),b(a,c)}function f(){zh.lineStart()}function g(){e(p,q),zh.lineEnd(),ug(s)>Kg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,zh.polygonStart()},polygonEnd:function(){zh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>yh?(k=-(m=180),l=-(n=90)):s>Kg?n=90:-Kg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],ig.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),ig.geo.centroid=function(a){Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,ig.geo.stream(a,Lh);var b=Ih,c=Jh,d=Kh,e=b*b+c*c+d*d;return Lg>e&&(b=Fh,c=Gh,d=Hh,Kg>Bh&&(b=Ch,c=Dh,d=Eh),e=b*b+c*c+d*d,Lg>e)?[NaN,NaN]:[Math.atan2(c,b)*Rg,ca(d/Math.sqrt(e))*Rg]};var Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh={sphere:w,point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){Lh.lineStart=Cb},polygonEnd:function(){Lh.lineStart=Ab}},Mh=Ib(Eb,Mb,Ob,[-Mg,-Mg/2]),Nh=1e9;ig.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Sb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(ig.geo.conicEqualArea=function(){return Tb(Ub)}).raw=Ub,ig.geo.albers=function(){return ig.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ig.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=ig.geo.albers(),g=ig.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=ig.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Kg,l+.12*j+Kg],[k-.214*j-Kg,l+.234*j-Kg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Kg,l+.166*j+Kg],[k-.115*j-Kg,l+.234*j-Kg]]).stream(i).point,a},a.scale(1070)};var Oh,Ph,Qh,Rh,Sh,Th,Uh={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ph=0,Uh.lineStart=Vb},polygonEnd:function(){Uh.lineStart=Uh.lineEnd=Uh.point=w,Oh+=ug(Ph/2)}},Vh={point:Wb,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Wh={point:Zb,lineStart:$b,lineEnd:_b,polygonStart:function(){Wh.lineStart=ac},polygonEnd:function(){Wh.point=Zb,Wh.lineStart=$b,Wh.lineEnd=_b}};ig.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),ig.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Oh=0,ig.geo.stream(a,e(Uh)),Oh},a.centroid=function(a){return Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,ig.geo.stream(a,e(Wh)),Kh?[Ih/Kh,Jh/Kh]:Hh?[Fh/Hh,Gh/Hh]:Eh?[Ch/Eh,Dh/Eh]:[NaN,NaN]},a.bounds=function(a){return Sh=Th=-(Qh=Rh=1/0),ig.geo.stream(a,e(Vh)),[[Qh,Rh],[Sh,Th]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||dc(a):t,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Xb:new bc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(ig.geo.albersUsa()).context(null)},ig.geo.transform=function(a){return{stream:function(b){var c=new ec(b);for(var d in a)c[d]=a[d];return c}}},ec.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ig.geo.projection=gc,ig.geo.projectionMutator=hc,(ig.geo.equirectangular=function(){return gc(jc)}).raw=jc.invert=jc,ig.geo.rotation=function(a){function b(b){return b=a(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b}return a=lc(a[0]%360*Qg,a[1]*Qg,a.length>2?a[2]*Qg:0),b.invert=function(b){return b=a.invert(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b},b},kc.invert=jc,ig.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=lc(-a[0]*Qg,-a[1]*Qg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Rg,a[1]*=Rg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=pc((b=+d)*Qg,e*Qg),a):b},a.precision=function(d){return arguments.length?(c=pc(b*Qg,(e=+d)*Qg),a):e},a.angle(90)},ig.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Qg,e=a[1]*Qg,f=b[1]*Qg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},ig.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return ig.range(Math.ceil(f/q)*q,e,q).map(m).concat(ig.range(Math.ceil(j/r)*r,i,r).map(n)).concat(ig.range(Math.ceil(d/o)*o,c,o).filter(function(a){return ug(a%q)>Kg}).map(k)).concat(ig.range(Math.ceil(h/p)*p,g,p).filter(function(a){return ug(a%r)>Kg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=rc(h,g,90),l=sc(d,c,s),m=rc(j,i,90),n=sc(f,e,s),a):s},a.majorExtent([[-180,-90+Kg],[180,90-Kg]]).minorExtent([[-180,-80-Kg],[180,80+Kg]])},ig.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=tc,e=uc;return a.distance=function(){return ig.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},ig.geo.interpolate=function(a,b){return vc(a[0]*Qg,a[1]*Qg,b[0]*Qg,b[1]*Qg)},ig.geo.length=function(a){return Xh=0,ig.geo.stream(a,Yh),Xh};var Xh,Yh={sphere:w,point:w,lineStart:wc,lineEnd:w,polygonStart:w,polygonEnd:w},Zh=xc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(ig.geo.azimuthalEqualArea=function(){return gc(Zh)}).raw=Zh;var $h=xc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},t);(ig.geo.azimuthalEquidistant=function(){return gc($h)}).raw=$h,(ig.geo.conicConformal=function(){return Tb(yc)}).raw=yc,(ig.geo.conicEquidistant=function(){return Tb(zc)}).raw=zc;var _h=xc(function(a){return 1/a},Math.atan);(ig.geo.gnomonic=function(){return gc(_h)}).raw=_h,Ac.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Pg]},(ig.geo.mercator=function(){return Bc(Ac)}).raw=Ac;var ai=xc(function(){return 1},Math.asin);(ig.geo.orthographic=function(){return gc(ai)}).raw=ai;var bi=xc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(ig.geo.stereographic=function(){return gc(bi)}).raw=bi,Cc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Pg]},(ig.geo.transverseMercator=function(){var a=Bc(Cc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Cc,ig.geom={},ig.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ba(c),f=Ba(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Gc),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Fc(h),k=Fc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Dc,d=Ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},ig.geom.polygon=function(a){return zg(a,ci),a};var ci=ig.geom.polygon.prototype=[];ci.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ci.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ci.clip=function(a){for(var b,c,d,e,f,g,h=Jc(a),i=-1,j=this.length-Jc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Hc(g,k,e)?(Hc(f,k,e)||a.push(Ic(f,g,k,e)),a.push(g)):Hc(f,k,e)&&a.push(Ic(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var di,ei,fi,gi,hi,ii=[],ji=[];Rc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Tc),b.length},bd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},cd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ed(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ed(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},ig.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return hd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Kg)*Kg,y:Math.round(g(a,b)/Kg)*Kg,i:b}})}var d=Dc,e=Ec,f=d,g=e,h=ki;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Tc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&jd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ba(d=a),b):d},b.y=function(a){return arguments.length?(g=Ba(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ki:a,b):h===ki?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ki?null:h&&h[1]},b)};var ki=[[-1e6,-1e6],[1e6,1e6]];ig.geom.delaunay=function(a){return ig.geom.voronoi().triangles(a)},ig.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(ug(i-c)+ug(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=md()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ba(h),u=Ba(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=md();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){nd(a,z,p,q,r,s)},z.find=function(a){return od(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Dc,i=Ec;return(g=arguments.length)?(h=kd,i=ld,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},ig.interpolateRgb=pd,ig.interpolateObject=qd,ig.interpolateNumber=rd,ig.interpolateString=sd;var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(li.source,"g");ig.interpolate=td,ig.interpolators=[function(a,b){var c=typeof b;return("string"===c?eh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?pd:sd:b instanceof ha?pd:Array.isArray(b)?ud:"object"===c&&isNaN(b)?qd:rd)(a,b)}],ig.interpolateArray=ud;var ni=function(){return t},oi=ig.map({linear:ni,poly:Bd,quad:function(){return yd},cubic:function(){return zd},sin:function(){return Cd},exp:function(){return Dd},circle:function(){return Ed},elastic:Fd,back:Gd,bounce:function(){return Hd}}),pi=ig.map({"in":t,out:wd,"in-out":xd,"out-in":function(a){return xd(wd(a))}});ig.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=oi.get(c)||ni,d=pi.get(d)||t,vd(d(c.apply(null,jg.call(arguments,1))))},ig.interpolateHcl=Id,ig.interpolateHsl=Jd,ig.interpolateLab=Kd,ig.interpolateRound=Ld,ig.transform=function(a){var b=lg.createElementNS(ig.ns.prefix.svg,"g");return(ig.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Md(c?c.matrix:qi)})(a)},Md.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};ig.interpolateTransform=Vd,ig.layout={},ig.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Yd(a[c]));return b}},ig.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=ig.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(ig.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ng-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},ig.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/r){if(p>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&p>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=ig.event.x,a.py=ig.event.y,i.resume()}var c,d,e,f,g,h,i={},j=ig.dispatch("start","tick","end"),k=[1,1],l=.9,m=ri,n=si,o=-30,p=ti,q=.1,r=.64,s=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,t,v,w=s.length,x=u.length;for(d=0;x>d;++d)i=u[d],m=i.source,n=i.target,t=n.x-m.x,v=n.y-m.y,(p=t*t+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,t*=p,v*=p,n.x-=t*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=t*(r=1-r),m.y+=v*r);if((r=e*q)&&(t=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=s[d],i.x+=(t-i.x)*r,i.y+=(v-i.y)*r;if(o)for(de(b=ig.geom.quadtree(s),e,h),d=-1;++d<w;)(i=s[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=s[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(s=a,i):s},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Ga(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;e>i;++i)c[i]=[];for(i=0;j>i;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=s.length,j=u.length,l=k[0],p=k[1];for(b=0;e>b;++b)(d=s[b]).index=b,d.weight=0;for(b=0;j>b;++b)d=u[b],"number"==typeof d.source&&(d.source=s[d.source]),"number"==typeof d.target&&(d.target=s[d.target]),++d.source.weight,++d.target.weight;for(b=0;e>b;++b)d=s[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;j>b;++b)f[b]=+m.call(this,u[b],b);else for(b=0;j>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;j>b;++b)g[b]=+n.call(this,u[b],b);else for(b=0;j>b;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;e>b;++b)h[b]=+o.call(this,s[b],b);else for(b=0;e>b;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=ig.behavior.drag().origin(t).on("dragstart.force",_d).on("drag.force",b).on("dragend.force",ae)),arguments.length?void this.on("mouseover.force",be).on("mouseout.force",ce).call(d):d},ig.rebind(i,j,"on")};var ri=20,si=1,ti=1/0;ig.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return ge(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=je,c=he,d=ie;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(fe(b,function(a){a.children&&(a.value=0)}),ge(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},ig.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=ig.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},ee(c,d)},ig.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=ig.sum(j),p=o?(l-i*n)/o:0,q=ig.range(i),r=[];return null!=c&&q.sort(c===ui?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ui,d=0,e=Ng,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,
a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ui={};ig.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=ig.permute(j,l),k=ig.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=t,c=oe,d=pe,e=ne,f=le,g=me;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:vi.get(b)||oe,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:wi.get(b)||pe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var vi=ig.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(qe),f=a.map(re),g=ig.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return ig.range(a.length).reverse()},"default":oe}),wi=ig.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:pe});ig.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[ig.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ve,e=te;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ba(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ue(a,b)}:Ba(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},ig.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,ge(h,function(a){a.r=+k(a.value)}),ge(h,Ae),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;ge(h,function(a){a.r+=l}),ge(h,Ae),ge(h,function(a){a.r-=l})}return De(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=ig.layout.hierarchy().sort(we),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},ee(a,c)},ig.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(ge(m,c),m.parent.m=-m.z,fe(m,d),j)fe(l,f);else{var n=l,o=l,p=l;fe(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);fe(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Je(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=He(g),e=Ge(e),g&&e;)i=Ge(i),f=He(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Ie(Ke(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!He(f)&&(f.t=g,f.m+=l-k),e&&!Ge(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=ig.layout.hierarchy().sort(null).value(null),h=Fe,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},ee(a,g)},ig.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;ge(i,function(a){var b=a.children;b&&b.length?(a.x=Me(b),a.y=Le(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ne(i),l=Oe(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return ge(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=ig.layout.hierarchy().sort(null).value(null),c=Fe,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},ee(a,b)},ig.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=ig.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Pe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Pe(b):Qe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Qe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Pe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},ee(f,h)},ig.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=ig.random.normal.apply(ig,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=ig.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},ig.scale={};var xi={floor:t,ceil:t};ig.scale.linear=function(){return Xe([0,1],[0,1],td,!1)};var yi={s:1,g:1,p:1,r:1,e:1};ig.scale.log=function(){return df(ig.scale.linear().domain([0,1]),10,!0,[1,10])};var zi=ig.format(".0e"),Ai={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};ig.scale.pow=function(){return ef(ig.scale.linear(),1,[0,1])},ig.scale.sqrt=function(){return ig.scale.pow().exponent(.5)},ig.scale.ordinal=function(){return gf([],{t:"range",a:[[]]})},ig.scale.category10=function(){return ig.scale.ordinal().range(Bi)},ig.scale.category20=function(){return ig.scale.ordinal().range(Ci)},ig.scale.category20b=function(){return ig.scale.ordinal().range(Di)},ig.scale.category20c=function(){return ig.scale.ordinal().range(Ei)};var Bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ua),Ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ua),Di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ua),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ua);ig.scale.quantile=function(){return hf([],[])},ig.scale.quantize=function(){return jf(0,1,[0,1])},ig.scale.threshold=function(){return kf([.5],[0,1])},ig.scale.identity=function(){return lf([0,1])},ig.svg={},ig.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Pg,l=h.apply(this,arguments)-Pg,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Og)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Fi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ca(q/j*Math.sin(r))),a&&(A=ca(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Mg?0:1;if(B&&sf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Mg?0:1;if(A&&sf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Kg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=o,I=o;if(Mg>m){var J=null==y?[w,x]:null==u?[s,t]:Ic([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=tf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=tf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^sf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=tf([s,t],[y,z],a,-I,n),T=tf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^sf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=nf,d=of,e=mf,f=Fi,g=pf,h=qf,i=rf;return a.innerRadius=function(b){return arguments.length?(c=Ba(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ba(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ba(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Fi?Fi:Ba(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ba(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ba(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Pg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Fi="auto";ig.svg.line=function(){return uf(t)};var Gi=ig.map({linear:vf,"linear-closed":wf,step:xf,"step-before":yf,"step-after":zf,basis:Ff,"basis-open":Gf,"basis-closed":Hf,bundle:If,cardinal:Cf,"cardinal-open":Af,"cardinal-closed":Bf,monotone:Of});Gi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Hi=[0,2/3,1/3,0],Ii=[0,1/3,2/3,0],Ji=[0,1/6,2/3,1/6];ig.svg.line.radial=function(){var a=uf(Pf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},yf.reverse=zf,zf.reverse=yf,ig.svg.area=function(){return Qf(t)},ig.svg.area.radial=function(){var a=Qf(Pf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},ig.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Pg,k=j.call(a,e,d)-Pg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Mg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=tc,g=uc,h=Rf,i=pf,j=qf;return a.radius=function(b){return arguments.length?(h=Ba(b),a):h},a.source=function(b){return arguments.length?(f=Ba(b),a):f},a.target=function(b){return arguments.length?(g=Ba(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ba(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ba(b),a):j},a},ig.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=tc,c=uc,d=Sf;return a.source=function(c){return arguments.length?(b=Ba(c),a):b},a.target=function(b){return arguments.length?(c=Ba(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},ig.svg.diagonal.radial=function(){var a=ig.svg.diagonal(),b=Sf,c=a.projection;return a.projection=function(a){return arguments.length?c(Tf(b=a)):b},a},ig.svg.symbol=function(){function a(a,d){return(Ki.get(b.call(this,a,d))||Wf)(c.call(this,a,d))}var b=Vf,c=Uf;return a.type=function(c){return arguments.length?(b=Ba(c),a):b},a.size=function(b){return arguments.length?(c=Ba(b),a):c},a};var Ki=ig.map({circle:Wf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Mi)),c=b*Mi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});ig.svg.symbolTypes=Ki.keys();var Li=Math.sqrt(3),Mi=Math.tan(30*Qg);Dg.transition=function(a){for(var b,c,d=Ni||++Ri,e=_f(a),f=[],g=Oi||{time:Date.now(),ease:Ad,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&ag(c,k,e,d,g),b.push(c)}return Yf(f,e,d)},Dg.interrupt=function(a){return this.each(null==a?Pi:Xf(_f(a)))};var Ni,Oi,Pi=Xf(_f()),Qi=[],Ri=0;Qi.call=Dg.call,Qi.empty=Dg.empty,Qi.node=Dg.node,Qi.size=Dg.size,ig.transition=function(a,b){return a&&a.transition?Ni?a.transition(b):a:ig.selection().transition(a)},ig.transition.prototype=Qi,Qi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=D(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),ag(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Yf(g,f,e)},Qi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=E(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&ag(e,o,h,g,f),b.push(e)}return Yf(i,h,g)},Qi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=Q(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Yf(e,this.namespace,this.id)},Qi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):S(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Qi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Vd:td,h=ig.ns.qualify(a);return Zf(this,"attr."+a,b,h.local?f:e)},Qi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=ig.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Qi.style=function(a,b,d){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=c(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=td(f,b),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(b="");for(d in a)this.style(d,a[d],b);return this}d=""}return Zf(this,"style."+a,b,f)},Qi.styleTween=function(a,b,d){function e(e,f){var g=b.call(this,e,f,c(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Qi.text=function(a){return Zf(this,"text",a,$f)},Qi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Qi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=ig.ease.apply(ig,arguments)),S(this,function(d){d[c][b].ease=a}))},Qi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:S(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Qi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:S(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Qi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Oi,f=Ni;try{Ni=c,S(this,function(b,e,f){Oi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Oi=e,Ni=f}}else S(this,function(e){var f=e[d][c];(f.event||(f.event=ig.dispatch("start","end","interrupt"))).on(a,b)});return this},Qi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ri,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],ag(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Yf(h,g,f)},ig.svg.axis=function(){function a(a){a.each(function(){var a,j=ig.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):t:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Kg),q=ig.transition(o.exit()).style("opacity",Kg).remove(),r=ig.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,u=Se(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),ig.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=bg,x="x",z="y",y="x2",A="y2",D.attr("dy",0>G?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=cg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=ig.scale.linear(),d=Si,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ti?b+"":Si,a):d},a.ticks=function(){return arguments.length?(h=kg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Si="bottom",Ti={top:1,right:1,bottom:1,left:1};ig.svg.brush=function(){function a(c){c.each(function(){var c=ig.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=c.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),c.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=c.selectAll(".resize").data(p,t);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ui[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=ig.transition(c),m=ig.transition(g);j&&(i=Se(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Se(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==ig.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),z())}function p(){32==ig.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,z())}function q(){var a=ig.mouse(v),c=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(ig.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(y),c=!0),C&&r(a,k,1)&&(e(y),c=!0),c&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Se(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];return D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),d>k?(e=d,d=k):e=k),p[0]!=d||p[1]!=e?(c?h=null:g=null,p[0]=d,p[1]=e,!0):void 0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),ig.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=ig.select(ig.event.target),x=i.of(v,arguments),y=ig.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=Y(v),F=ig.mouse(v),G=ig.select(c(v)).on("keydown.brush",f).on("keyup.brush",p);if(ig.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else ig.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),ig.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=B(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Vi[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Ni?ig.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=ud(l,b.x),d=ud(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Vi[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Vi[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),c>d&&(i=c,c=d,d=i),(c!=l[0]||d!=l[1])&&(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),e>f&&(i=e,e=f,f=i),(e!=m[0]||f!=m[1])&&(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),c>d&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),e>f&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},ig.rebind(a,i,"on")};var Ui={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wi=nh.format=th.timeFormat,Xi=Wi.utc,Yi=Xi("%Y-%m-%dT%H:%M:%S.%LZ");Wi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?dg:Yi,dg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},dg.toString=Yi.toString,nh.second=Pa(function(a){return new oh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),nh.seconds=nh.second.range,nh.seconds.utc=nh.second.utc.range,nh.minute=Pa(function(a){return new oh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),nh.minutes=nh.minute.range,nh.minutes.utc=nh.minute.utc.range,nh.hour=Pa(function(a){var b=a.getTimezoneOffset()/60;return new oh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),nh.hours=nh.hour.range,nh.hours.utc=nh.hour.utc.range,nh.month=Pa(function(a){return a=nh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),nh.months=nh.month.range,nh.months.utc=nh.month.utc.range;var Zi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$i=[[nh.second,1],[nh.second,5],[nh.second,15],[nh.second,30],[nh.minute,1],[nh.minute,5],[nh.minute,15],[nh.minute,30],[nh.hour,1],[nh.hour,3],[nh.hour,6],[nh.hour,12],[nh.day,1],[nh.day,2],[nh.week,1],[nh.month,1],[nh.month,3],[nh.year,1]],_i=Wi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),aj={range:function(a,b,c){return ig.range(Math.ceil(a/c)*c,+b,c).map(fg)},floor:t,ceil:t};$i.year=nh.year,nh.scale=function(){return eg(ig.scale.linear(),$i,_i)};var bj=$i.map(function(a){return[a[0].utc,a[1]]}),cj=Xi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Eb]]);bj.year=nh.year.utc,nh.scale.utc=function(){return eg(ig.scale.linear(),bj,cj)},ig.text=Ca(function(a){return a.responseText}),ig.json=function(a,b){return Da(a,"application/json",gg,b)},ig.html=function(a,b){return Da(a,"text/html",hg,b)},ig.xml=Ca(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=ig,define(ig)):"object"==typeof b&&b.exports?b.exports=ig:this.d3=ig}()},{}],4:[function(a,b,c){b.exports=a("./lib/heap")},{"./lib/heap":5}],5:[function(a,b,c){(function(){var a,d,e,f,g,h,i,j,k,l,m,n,o,p,q;e=Math.floor,l=Math.min,d=function(a,b){return b>a?-1:a>b?1:0},k=function(a,b,c,f,g){var h;if(null==c&&(c=0),null==g&&(g=d),0>c)throw new Error("lo must be non-negative");for(null==f&&(f=a.length);f>c;)h=e((c+f)/2),g(b,a[h])<0?f=h:c=h+1;return[].splice.apply(a,[c,c-c].concat(b)),b},h=function(a,b,c){return null==c&&(c=d),a.push(b),p(a,0,a.length-1,c)},g=function(a,b){var c,e;return null==b&&(b=d),c=a.pop(),a.length?(e=a[0],a[0]=c,q(a,0,b)):e=c,e},j=function(a,b,c){var e;return null==c&&(c=d),e=a[0],a[0]=b,q(a,0,c),e},i=function(a,b,c){var e;return null==c&&(c=d),a.length&&c(a[0],b)<0&&(e=[a[0],b],b=e[0],a[0]=e[1],q(a,0,c)),b},f=function(a,b){var c,f,g,h,i,j;for(null==b&&(b=d),h=function(){j=[];for(var b=0,c=e(a.length/2);c>=0?c>b:b>c;c>=0?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(q(a,c,b));return i},o=function(a,b,c){var e;return null==c&&(c=d),e=a.indexOf(b),-1!==e?(p(a,0,e,c),q(a,e,c)):void 0},m=function(a,b,c){var e,g,h,j,k;if(null==c&&(c=d),g=a.slice(0,b),!g.length)return g;for(f(g,c),k=a.slice(b),h=0,j=k.length;j>h;h++)e=k[h],i(g,e,c);return g.sort(c).reverse()},n=function(a,b,c){var e,h,i,j,m,n,o,p,q,r;if(null==c&&(c=d),10*b<=a.length){if(j=a.slice(0,b).sort(c),!j.length)return j;for(i=j[j.length-1],p=a.slice(b),m=0,o=p.length;o>m;m++)e=p[m],c(e,i)<0&&(k(j,e,0,null,c),j.pop(),i=j[j.length-1]);return j}for(f(a,c),r=[],h=n=0,q=l(b,a.length);q>=0?q>n:n>q;h=q>=0?++n:--n)r.push(g(a,c));return r},p=function(a,b,c,e){var f,g,h;for(null==e&&(e=d),f=a[c];c>b&&(h=c-1>>1,g=a[h],e(f,g)<0);)a[c]=g,c=h;return a[c]=f},q=function(a,b,c){var e,f,g,h,i;for(null==c&&(c=d),f=a.length,i=b,g=a[b],e=2*b+1;f>e;)h=e+1,f>h&&!(c(a[e],a[h])<0)&&(e=h),a[b]=a[e],b=e,e=2*b+1;return a[b]=g,p(a,i,b,c)},a=function(){function a(a){this.cmp=null!=a?a:d,this.nodes=[]}return a.push=h,a.pop=g,a.replace=j,
a.pushpop=i,a.heapify=f,a.updateItem=o,a.nlargest=m,a.nsmallest=n,a.prototype.push=function(a){return h(this.nodes,a,this.cmp)},a.prototype.pop=function(){return g(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return j(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return i(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return f(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return o(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),function(a,d){return"function"==typeof define&&define.amd?define([],d):"object"==typeof c?b.exports=d():a.Heap=d()}(this,function(){return a})}).call(this)},{}],6:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],7:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],8:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(a,b){var c,d,e,f;for("undefined"==typeof b&&(b=15),e=.5,c=new Date;;){for(e*=2,f=e;f>3;f-=4)a(),a(),a(),a();for(;f>0;)a(),f--;if(d=new Date,d-c>b)break}for(f=e;f>3;f-=4)a(),a(),a(),a();for(;f>0;)a(),f--;return d=new Date,1e3*(3*e-1)/(d-c)},numeric._myIndexOf=function(a){var b,c=this.length;for(b=0;c>b;++b)if(this[b]===a)return b;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(a){function b(a){if(0===a)return"0";if(isNaN(a))return"NaN";if(0>a)return"-"+b(-a);if(isFinite(a)){var c=Math.floor(Math.log(a)/Math.log(10)),d=a/Math.pow(10,c),e=d.toPrecision(numeric.precision);return 10===parseFloat(e)&&(c++,d=1,e=d.toPrecision(numeric.precision)),parseFloat(e).toString()+"e"+c.toString()}return"Infinity"}function c(a){var e;if("undefined"==typeof a)return d.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof a)return d.push('"'+a+'"'),!1;if("boolean"==typeof a)return d.push(a.toString()),!1;if("number"==typeof a){var f=b(a),g=a.toPrecision(numeric.precision),h=parseFloat(a.toString()).toString(),i=[f,g,h,parseFloat(g).toString(),parseFloat(h).toString()];for(e=1;e<i.length;e++)i[e].length<f.length&&(f=i[e]);return d.push(Array(numeric.precision+8-f.length).join(" ")+f),!1}if(null===a)return d.push("null"),!1;if("function"==typeof a){d.push(a.toString());var j=!1;for(e in a)a.hasOwnProperty(e)&&(j?d.push(",\n"):d.push("\n{"),j=!0,d.push(e),d.push(": \n"),c(a[e]));return j&&d.push("}\n"),!0}if(a instanceof Array){if(a.length>numeric.largeArray)return d.push("...Large Array..."),!0;var j=!1;for(d.push("["),e=0;e<a.length;e++)e>0&&(d.push(","),j&&d.push("\n ")),j=c(a[e]);return d.push("]"),!0}d.push("{");var j=!1;for(e in a)a.hasOwnProperty(e)&&(j&&d.push(",\n"),j=!0,d.push(e),d.push(": \n"),c(a[e]));return d.push("}"),!0}var d=[];return c(a),d.join("")},numeric.parseDate=function(a){function b(a){if("string"==typeof a)return Date.parse(a.replace(/-/g,"/"));if(!(a instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var c,d=[];for(c=0;c<a.length;c++)d[c]=b(a[c]);return d}return b(a)},numeric.parseFloat=function(a){function b(a){if("string"==typeof a)return parseFloat(a);if(!(a instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var c,d=[];for(c=0;c<a.length;c++)d[c]=b(a[c]);return d}return b(a)},numeric.parseCSV=function(a){var b,c,d=a.split("\n"),e=[],f=/(([^'",]*)|('[^']*')|("[^"]*")),/g,g=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,h=function(a){return a.substr(0,a.length-1)},i=0;for(c=0;c<d.length;c++){var j,k=(d[c]+",").match(f);if(k.length>0){for(e[i]=[],b=0;b<k.length;b++)j=h(k[b]),g.test(j)?e[i][b]=parseFloat(j):e[i][b]=j;i++}}return e},numeric.toCSV=function(a){var b,c,d,e,f,g,h=numeric.dim(a);for(d=h[0],e=h[1],g=[],b=0;d>b;b++){for(f=[],c=0;d>c;c++)f[c]=a[b][c].toString();g[b]=f.join(", ")}return g.join("\n")+"\n"},numeric.getURL=function(a){var b=new XMLHttpRequest;return b.open("GET",a,!1),b.send(),b},numeric.imageURL=function(a){function b(a){var b,c,d,e,f,g,h,i,j=a.length,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";for(b=0;j>b;b+=3)c=a[b],d=a[b+1],e=a[b+2],f=c>>2,g=((3&c)<<4)+(d>>4),h=((15&d)<<2)+(e>>6),i=63&e,b+1>=j?h=i=64:b+2>=j&&(i=64),l+=k.charAt(f)+k.charAt(g)+k.charAt(h)+k.charAt(i);return l}function c(a,b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=a.length);var d,e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],f=-1,g=0;a.length;for(d=b;c>d;d++)g=255&(f^a[d]),f=f>>>8^e[g];return-1^f}var d,e,f,g,h,i,j,k,l,m,n=a[0].length,o=a[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,o>>24&255,o>>16&255,o>>8&255,255&o,n>>24&255,n>>16&255,n>>8&255,255&n,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(m=c(p,12,29),p[29]=m>>24&255,p[30]=m>>16&255,p[31]=m>>8&255,p[32]=255&m,d=1,e=0,j=0;n>j;j++){for(n-1>j?p.push(0):p.push(1),h=3*o+1+(0===j)&255,i=3*o+1+(0===j)>>8&255,p.push(h),p.push(i),p.push(255&~h),p.push(255&~i),0===j&&p.push(0),k=0;o>k;k++)for(f=0;3>f;f++)h=a[f][j][k],h=h>255?255:0>h?0:Math.round(h),d=(d+h)%65521,e=(e+d)%65521,p.push(h);p.push(0)}return l=(e<<16)+d,p.push(l>>24&255),p.push(l>>16&255),p.push(l>>8&255),p.push(255&l),g=p.length-41,p[33]=g>>24&255,p[34]=g>>16&255,p[35]=g>>8&255,p[36]=255&g,m=c(p,37),p.push(m>>24&255),p.push(m>>16&255),p.push(m>>8&255),p.push(255&m),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+b(p)},numeric._dim=function(a){for(var b=[];"object"==typeof a;)b.push(a.length),a=a[0];return b},numeric.dim=function(a){var b,c;return"object"==typeof a?(b=a[0],"object"==typeof b?(c=b[0],"object"==typeof c?numeric._dim(a):[a.length,b.length]):[a.length]):[]},numeric.mapreduce=function(a,b){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+b+';\nif(typeof x === "number") { var xi = x; '+a+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+a+";\n    xi = x[i-1];\n    "+a+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+a+"\n}\nreturn accum;")},numeric.mapreduce2=function(a,b){return Function("x","var n = x.length;\nvar i,xi;\n"+b+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+a+";\n}\nreturn accum;")},numeric.same=function a(b,c){var d,e;if(!(b instanceof Array&&c instanceof Array))return!1;if(e=b.length,e!==c.length)return!1;for(d=0;e>d;d++)if(b[d]!==c[d]){if("object"!=typeof b[d])return!1;if(!a(b[d],c[d]))return!1}return!0},numeric.rep=function(a,b,c){"undefined"==typeof c&&(c=0);var d,e=a[c],f=Array(e);if(c===a.length-1){for(d=e-2;d>=0;d-=2)f[d+1]=b,f[d]=b;return-1===d&&(f[0]=b),f}for(d=e-1;d>=0;d--)f[d]=numeric.rep(a,b,c+1);return f},numeric.dotMMsmall=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;for(f=a.length,g=b.length,h=b[0].length,i=Array(f),c=f-1;c>=0;c--){for(j=Array(h),k=a[c],e=h-1;e>=0;e--){for(l=k[g-1]*b[g-1][e],d=g-2;d>=1;d-=2)m=d-1,l+=k[d]*b[d][e]+k[m]*b[m][e];0===d&&(l+=k[0]*b[0][e]),j[e]=l}i[c]=j}return i},numeric._getCol=function(a,b,c){var d,e=a.length;for(d=e-1;d>0;--d)c[d]=a[d][b],--d,c[d]=a[d][b];0===d&&(c[0]=a[0][b])},numeric.dotMMbig=function(a,b){var c,d,e,f,g=numeric._getCol,h=b.length,i=Array(h),j=a.length,k=b[0].length,l=new Array(j),m=numeric.dotVV;for(--h,--j,d=j;-1!==d;--d)l[d]=Array(k);for(--k,d=k;-1!==d;--d)for(g(b,d,i),e=j;-1!==e;--e)f=0,c=a[e],l[e][d]=m(c,i);return l},numeric.dotMV=function(a,b){var c,d=a.length,e=(b.length,Array(d)),f=numeric.dotVV;for(c=d-1;c>=0;c--)e[c]=f(a[c],b);return e},numeric.dotVM=function(a,b){var c,d,e,f,g,h,i;for(e=a.length,f=b[0].length,g=Array(f),d=f-1;d>=0;d--){for(h=a[e-1]*b[e-1][d],c=e-2;c>=1;c-=2)i=c-1,h+=a[c]*b[c][d]+a[i]*b[i][d];0===c&&(h+=a[0]*b[0][d]),g[d]=h}return g},numeric.dotVV=function(a,b){var c,d,e=a.length,f=a[e-1]*b[e-1];for(c=e-2;c>=1;c-=2)d=c-1,f+=a[c]*b[c]+a[d]*b[d];return 0===c&&(f+=a[0]*b[0]),f},numeric.dot=function(a,b){var c=numeric.dim;switch(1e3*c(a).length+c(b).length){case 2002:return b.length<10?numeric.dotMMsmall(a,b):numeric.dotMMbig(a,b);case 2001:return numeric.dotMV(a,b);case 1002:return numeric.dotVM(a,b);case 1001:return numeric.dotVV(a,b);case 1e3:return numeric.mulVS(a,b);case 1:return numeric.mulSV(a,b);case 0:return a*b;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(a){var b,c,d,e,f=a.length,g=Array(f);for(b=f-1;b>=0;b--){for(e=Array(f),c=b+2,d=f-1;d>=c;d-=2)e[d]=0,e[d-1]=0;for(d>b&&(e[d]=0),e[b]=a[b],d=b-1;d>=1;d-=2)e[d]=0,e[d-1]=0;0===d&&(e[0]=0),g[b]=e}return g},numeric.getDiag=function(a){var b,c=Math.min(a.length,a[0].length),d=Array(c);for(b=c-1;b>=1;--b)d[b]=a[b][b],--b,d[b]=a[b][b];return 0===b&&(d[0]=a[0][0]),d},numeric.identity=function(a){return numeric.diag(numeric.rep([a],1))},numeric.pointwise=function(a,b,c){"undefined"==typeof c&&(c="");var d,e,f=[],g=/\[i\]$/,h="",i=!1;for(d=0;d<a.length;d++)g.test(a[d])?(e=a[d].substring(0,a[d].length-3),h=e):e=a[d],"ret"===e&&(i=!0),f.push(e);return f[a.length]="_s",f[a.length+1]="_k",f[a.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+h+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(i?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+a.join(",")+",_s,_k+1);\n    return ret;\n}\n"+c+"\nfor(i=_n-1;i!==-1;--i) {\n    "+b+"\n}\nreturn ret;",Function.apply(null,f)},numeric.pointwise2=function(a,b,c){"undefined"==typeof c&&(c="");var d,e,f=[],g=/\[i\]$/,h="",i=!1;for(d=0;d<a.length;d++)g.test(a[d])?(e=a[d].substring(0,a[d].length-3),h=e):e=a[d],"ret"===e&&(i=!0),f.push(e);return f[a.length]="var _n = "+h+".length;\nvar i"+(i?"":", ret = Array(_n)")+";\n"+c+"\nfor(i=_n-1;i!==-1;--i) {\n"+b+"\n}\nreturn ret;",Function.apply(null,f)},numeric._biforeach=function b(a,c,d,e,f){if(e===d.length-1)return void f(a,c);var g,h=d[e];for(g=h-1;g>=0;g--)b("object"==typeof a?a[g]:a,"object"==typeof c?c[g]:c,d,e+1,f)},numeric._biforeach2=function c(a,b,d,e,f){if(e===d.length-1)return f(a,b);var g,h=d[e],i=Array(h);for(g=h-1;g>=0;--g)i[g]=c("object"==typeof a?a[g]:a,"object"==typeof b?b[g]:b,d,e+1,f);return i},numeric._foreach=function d(a,b,c,e){if(c===b.length-1)return void e(a);var f,g=b[c];for(f=g-1;f>=0;f--)d(a[f],b,c+1,e)},numeric._foreach2=function e(a,b,c,d){if(c===b.length-1)return d(a);var f,g=b[c],h=Array(g);for(f=g-1;f>=0;f--)h[f]=e(a[f],b,c+1,d);return h},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var a,b;for(a=0;a<numeric.mathfuns2.length;++a)b=numeric.mathfuns2[a],numeric.ops2[b]=b;for(a in numeric.ops2)if(numeric.ops2.hasOwnProperty(a)){b=numeric.ops2[a];var c,d,e="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,a)?(e="var "+b+" = Math."+b+";\n",c=function(a,c,d){return a+" = "+b+"("+c+","+d+")"},d=function(a,c){return a+" = "+b+"("+a+","+c+")"}):(c=function(a,c,d){return a+" = "+c+" "+b+" "+d},d=numeric.opseq.hasOwnProperty(a+"eq")?function(a,c){return a+" "+b+"= "+c}:function(a,c){return a+" = "+a+" "+b+" "+c}),numeric[a+"VV"]=numeric.pointwise2(["x[i]","y[i]"],c("ret[i]","x[i]","y[i]"),e),numeric[a+"SV"]=numeric.pointwise2(["x","y[i]"],c("ret[i]","x","y[i]"),e),numeric[a+"VS"]=numeric.pointwise2(["x[i]","y"],c("ret[i]","x[i]","y"),e),numeric[a]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+a+"VV, VS = numeric."+a+"VS, SV = numeric."+a+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+d("x","y")+"\n}\nreturn x;\n"),numeric[b]=numeric[a],numeric[a+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],d("ret[i]","x[i]"),e),numeric[a+"eqS"]=numeric.pointwise2(["ret[i]","x"],d("ret[i]","x"),e),numeric[a+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+a+"eqV, S = numeric."+a+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(a=0;a<numeric.mathfuns2.length;++a)b=numeric.mathfuns2[a],delete numeric.ops2[b];for(a=0;a<numeric.mathfuns.length;++a)b=numeric.mathfuns[a],numeric.ops1[b]=b;for(a in numeric.ops1)numeric.ops1.hasOwnProperty(a)&&(e="",b=numeric.ops1[a],-1!==numeric.myIndexOf.call(numeric.mathfuns,a)&&Math.hasOwnProperty(b)&&(e="var "+b+" = Math."+b+";\n"),numeric[a+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+b+"(ret[i]);",e),numeric[a+"eq"]=Function("x",'if(typeof x !== "object") return '+b+"x\nvar i;\nvar V = numeric."+a+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[a+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+b+"(x[i]);",e),numeric[a]=Function("x",'if(typeof x !== "object") return '+b+"(x)\nvar i;\nvar V = numeric."+a+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(a=0;a<numeric.mathfuns.length;++a)b=numeric.mathfuns[a],delete numeric.ops1[b];for(a in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(a)&&(b=numeric.mapreducers[a],numeric[a+"V"]=numeric.mapreduce2(b[0],b[1]),numeric[a]=Function("x","s","k",b[1]+'if(typeof x !== "object") {    xi = x;\n'+b[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+a+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+b[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(a,b){return"object"==typeof a?"object"==typeof b?numeric.truncVV(a,b):numeric.truncVS(a,b):"object"==typeof b?numeric.truncSV(a,b):Math.round(a/b)*b},numeric.inv=function(a){var b,c,d,e,f,g,h,a,i=numeric.dim(a),j=Math.abs,k=i[0],l=i[1],m=numeric.clone(a),n=numeric.identity(k);for(g=0;l>g;++g){var o=-1,p=-1;for(f=g;f!==k;++f)h=j(m[f][g]),h>p&&(o=f,p=h);for(c=m[o],m[o]=m[g],m[g]=c,e=n[o],n[o]=n[g],n[g]=e,a=c[g],h=g;h!==l;++h)c[h]/=a;for(h=l-1;-1!==h;--h)e[h]/=a;for(f=k-1;-1!==f;--f)if(f!==g){for(b=m[f],d=n[f],a=b[g],h=g+1;h!==l;++h)b[h]-=c[h]*a;for(h=l-1;h>0;--h)d[h]-=e[h]*a,--h,d[h]-=e[h]*a;0===h&&(d[0]-=e[0]*a)}}return n},numeric.det=function(a){var b=numeric.dim(a);if(2!==b.length||b[0]!==b[1])throw new Error("numeric: det() only works on square matrices");var c,d,e,f,g,h,i,j,k=b[0],l=1,m=numeric.clone(a);for(d=0;k-1>d;d++){for(e=d,c=d+1;k>c;c++)Math.abs(m[c][d])>Math.abs(m[e][d])&&(e=c);for(e!==d&&(i=m[e],m[e]=m[d],m[d]=i,l*=-1),f=m[d],c=d+1;k>c;c++){for(g=m[c],h=g[d]/f[d],e=d+1;k-1>e;e+=2)j=e+1,g[e]-=f[e]*h,g[j]-=f[j]*h;e!==k&&(g[e]-=f[e]*h)}if(0===f[d])return 0;l*=f[d]}return l*m[d][d]},numeric.transpose=function(a){var b,c,d,e,f,g=a.length,h=a[0].length,i=Array(h);for(c=0;h>c;c++)i[c]=Array(g);for(b=g-1;b>=1;b-=2){for(e=a[b],d=a[b-1],c=h-1;c>=1;--c)f=i[c],f[b]=e[c],f[b-1]=d[c],--c,f=i[c],f[b]=e[c],f[b-1]=d[c];0===c&&(f=i[0],f[b]=e[0],f[b-1]=d[0])}if(0===b){for(d=a[0],c=h-1;c>=1;--c)i[c][0]=d[c],--c,i[c][0]=d[c];0===c&&(i[0][0]=d[0])}return i},numeric.negtranspose=function(a){var b,c,d,e,f,g=a.length,h=a[0].length,i=Array(h);for(c=0;h>c;c++)i[c]=Array(g);for(b=g-1;b>=1;b-=2){for(e=a[b],d=a[b-1],c=h-1;c>=1;--c)f=i[c],f[b]=-e[c],f[b-1]=-d[c],--c,f=i[c],f[b]=-e[c],f[b-1]=-d[c];0===c&&(f=i[0],f[b]=-e[0],f[b-1]=-d[0])}if(0===b){for(d=a[0],c=h-1;c>=1;--c)i[c][0]=-d[c],--c,i[c][0]=-d[c];0===c&&(i[0][0]=-d[0])}return i},numeric._random=function f(a,b){var c,d,e=a[b],g=Array(e);if(b===a.length-1){for(d=Math.random,c=e-1;c>=1;c-=2)g[c]=d(),g[c-1]=d();return 0===c&&(g[0]=d()),g}for(c=e-1;c>=0;c--)g[c]=f(a,b+1);return g},numeric.random=function(a){return numeric._random(a,0)},numeric.norm2=function(a){return Math.sqrt(numeric.norm2Squared(a))},numeric.linspace=function(a,b,c){if("undefined"==typeof c&&(c=Math.max(Math.round(b-a)+1,1)),2>c)return 1===c?[a]:[];var d,e=Array(c);for(c--,d=c;d>=0;d--)e[d]=(d*b+(c-d)*a)/c;return e},numeric.getBlock=function(a,b,c){function d(a,f){var g,h=b[f],i=c[f]-h,j=Array(i);if(f===e.length-1){for(g=i;g>=0;g--)j[g]=a[g+h];return j}for(g=i;g>=0;g--)j[g]=d(a[g+h],f+1);return j}var e=numeric.dim(a);return d(a,0)},numeric.setBlock=function(a,b,c,d){function e(a,d,g){var h,i=b[g],j=c[g]-i;if(g===f.length-1)for(h=j;h>=0;h--)a[h+i]=d[h];for(h=j;h>=0;h--)e(a[h+i],d[h],g+1)}var f=numeric.dim(a);return e(a,d,0),a},numeric.getRange=function(a,b,c){var d,e,f,g,h=b.length,i=c.length,j=Array(h);for(d=h-1;-1!==d;--d)for(j[d]=Array(i),f=j[d],g=a[b[d]],e=i-1;-1!==e;--e)f[e]=g[c[e]];return j},numeric.blockMatrix=function(a){var b=numeric.dim(a);if(b.length<4)return numeric.blockMatrix([a]);var c,d,e,f,g,h=b[0],i=b[1];for(c=0,d=0,e=0;h>e;++e)c+=a[e][0].length;for(f=0;i>f;++f)d+=a[0][f][0].length;var j=Array(c);for(e=0;c>e;++e)j[e]=Array(d);var k,l,m,n,o,p=0;for(e=0;h>e;++e){for(k=d,f=i-1;-1!==f;--f)for(g=a[e][f],k-=g[0].length,m=g.length-1;-1!==m;--m)for(o=g[m],l=j[p+m],n=o.length-1;-1!==n;--n)l[k+n]=o[n];p+=a[e][0].length}return j},numeric.tensor=function(a,b){if("number"==typeof a||"number"==typeof b)return numeric.mul(a,b);var c=numeric.dim(a),d=numeric.dim(b);if(1!==c.length||1!==d.length)throw new Error("numeric: tensor product is only defined for vectors");var e,f,g,h,i=c[0],j=d[0],k=Array(i);for(f=i-1;f>=0;f--){for(e=Array(j),h=a[f],g=j-1;g>=3;--g)e[g]=h*b[g],--g,e[g]=h*b[g],--g,e[g]=h*b[g],--g,e[g]=h*b[g];for(;g>=0;)e[g]=h*b[g],--g;k[f]=e}return k},numeric.T=function(a,b){this.x=a,this.y=b},numeric.t=function(a,b){return new numeric.T(a,b)},numeric.Tbinop=function(a,b,c,d,e){numeric.indexOf;if("string"!=typeof e){var f;e="";for(f in numeric)numeric.hasOwnProperty(f)&&(a.indexOf(f)>=0||b.indexOf(f)>=0||c.indexOf(f)>=0||d.indexOf(f)>=0)&&f.length>1&&(e+="var "+f+" = numeric."+f+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+e+"\nif(x.y) {  if(y.y) {    return new numeric.T("+d+");\n  }\n  return new numeric.T("+c+");\n}\nif(y.y) {\n  return new numeric.T("+b+");\n}\nreturn new numeric.T("+a+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var a=numeric.mul,b=numeric.div;if(this.y){var c=numeric.add(a(this.x,this.x),a(this.y,this.y));return new numeric.T(b(this.x,c),b(numeric.neg(this.y),c))}return new T(b(1,this.x))},numeric.T.prototype.div=function g(a){if(a instanceof numeric.T||(a=new numeric.T(a)),a.y)return this.mul(a.reciprocal());var g=numeric.div;return this.y?new numeric.T(g(this.x,a.x),g(this.y,a.x)):new numeric.T(g(this.x,a.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var a=numeric.transpose,b=this.x,c=this.y;return c?new numeric.T(a(b),a(c)):new numeric.T(a(b))},numeric.T.prototype.transjugate=function(){var a=numeric.transpose,b=this.x,c=this.y;return c?new numeric.T(a(b),numeric.negtranspose(c)):new numeric.T(a(b))},numeric.Tunop=function(a,b,c){return"string"!=typeof c&&(c=""),Function("var x = this;\n"+c+"\nif(x.y) {  "+b+";\n}\n"+a+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var a=this;if("undefined"==typeof a.y)return new numeric.T(numeric.inv(a.x));var b,c,d,e,f,g,h,i,j,k,l,b,c,d,m,n,o,p,q,r,s,t=a.x.length,u=numeric.identity(t),v=numeric.rep([t,t],0),w=numeric.clone(a.x),x=numeric.clone(a.y);for(b=0;t>b;b++){for(o=w[b][b],p=x[b][b],m=o*o+p*p,d=b,c=b+1;t>c;c++)o=w[c][b],p=x[c][b],n=o*o+p*p,n>m&&(d=c,m=n);for(d!==b&&(s=w[b],w[b]=w[d],w[d]=s,s=x[b],x[b]=x[d],x[d]=s,s=u[b],u[b]=u[d],u[d]=s,s=v[b],v[b]=v[d],v[d]=s),e=w[b],f=x[b],i=u[b],j=v[b],o=e[b],p=f[b],c=b+1;t>c;c++)q=e[c],r=f[c],e[c]=(q*o+r*p)/m,f[c]=(r*o-q*p)/m;for(c=0;t>c;c++)q=i[c],r=j[c],i[c]=(q*o+r*p)/m,j[c]=(r*o-q*p)/m;for(c=b+1;t>c;c++){for(g=w[c],h=x[c],k=u[c],l=v[c],o=g[b],p=h[b],d=b+1;t>d;d++)q=e[d],r=f[d],g[d]-=q*o-r*p,h[d]-=r*o+q*p;for(d=0;t>d;d++)q=i[d],r=j[d],k[d]-=q*o-r*p,l[d]-=r*o+q*p}}for(b=t-1;b>0;b--)for(i=u[b],j=v[b],c=b-1;c>=0;c--)for(k=u[c],l=v[c],o=w[c][b],p=x[c][b],d=t-1;d>=0;d--)q=i[d],r=j[d],k[d]-=o*q-p*r,l[d]-=o*r+p*q;return new numeric.T(u,v)},numeric.T.prototype.get=function(a){var b,c=this.x,d=this.y,e=0,f=a.length;if(d){for(;f>e;)b=a[e],c=c[b],d=d[b],e++;return new numeric.T(c,d)}for(;f>e;)b=a[e],c=c[b],e++;return new numeric.T(c)},numeric.T.prototype.set=function(a,b){var c,d=this.x,e=this.y,f=0,g=a.length,h=b.x,i=b.y;if(0===g)return i?this.y=i:e&&(this.y=void 0),this.x=d,this;if(i){for(e||(e=numeric.rep(numeric.dim(d),0),this.y=e);g-1>f;)c=a[f],d=d[c],e=e[c],f++;return c=a[f],d[c]=h,e[c]=i,this}if(e){for(;g-1>f;)c=a[f],d=d[c],e=e[c],f++;return c=a[f],d[c]=h,h instanceof Array?e[c]=numeric.rep(numeric.dim(h),0):e[c]=0,this}for(;g-1>f;)c=a[f],d=d[c],f++;return c=a[f],d[c]=h,this},numeric.T.prototype.getRows=function(a,b){var c,d,e=b-a+1,f=Array(e),g=this.x,h=this.y;for(c=a;b>=c;c++)f[c-a]=g[c];if(h){for(d=Array(e),c=a;b>=c;c++)d[c-a]=h[c];return new numeric.T(f,d)}return new numeric.T(f)},numeric.T.prototype.setRows=function(a,b,c){var d,e=this.x,f=this.y,g=c.x,h=c.y;for(d=a;b>=d;d++)e[d]=g[d-a];if(h)for(f||(f=numeric.rep(numeric.dim(e),0),this.y=f),d=a;b>=d;d++)f[d]=h[d-a];else if(f)for(d=a;b>=d;d++)f[d]=numeric.rep([g[d-a].length],0);return this},numeric.T.prototype.getRow=function(a){var b=this.x,c=this.y;return c?new numeric.T(b[a],c[a]):new numeric.T(b[a])},numeric.T.prototype.setRow=function(a,b){var c=this.x,d=this.y,e=b.x,f=b.y;return c[a]=e,f?(d||(d=numeric.rep(numeric.dim(c),0),this.y=d),d[a]=f):d&&(d=numeric.rep([e.length],0)),this},numeric.T.prototype.getBlock=function(a,b){var c=this.x,d=this.y,e=numeric.getBlock;return d?new numeric.T(e(c,a,b),e(d,a,b)):new numeric.T(e(c,a,b))},numeric.T.prototype.setBlock=function(a,b,c){c instanceof numeric.T||(c=new numeric.T(c));var d=this.x,e=this.y,f=numeric.setBlock,g=c.x,h=c.y;return h?(e||(this.y=numeric.rep(numeric.dim(this),0),e=this.y),f(d,a,b,g),f(e,a,b,h),this):(f(d,a,b,g),void(e&&f(e,a,b,numeric.rep(numeric.dim(g),0))))},numeric.T.rep=function(a,b){var c=numeric.T;b instanceof c||(b=new c(b));var d=b.x,e=b.y,f=numeric.rep;return e?new c(f(a,d),f(a,e)):new c(f(a,d))},numeric.T.diag=function h(a){a instanceof numeric.T||(a=new numeric.T(a));var b=a.x,c=a.y,h=numeric.diag;return c?new numeric.T(h(b),h(c)):new numeric.T(h(b))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(a){return new numeric.T(numeric.identity(a))},numeric.T.prototype.getDiag=function(){var a=numeric,b=this.x,c=this.y;return c?new a.T(a.getDiag(b),a.getDiag(c)):new a.T(a.getDiag(b))},numeric.house=function(a){var b=numeric.clone(a),c=a[0]>=0?1:-1,d=c*numeric.norm2(a);b[0]+=d;var e=numeric.norm2(b);if(0===e)throw new Error("eig: internal error");return numeric.div(b,e)},numeric.toUpperHessenberg=function(a){var b=numeric.dim(a);if(2!==b.length||b[0]!==b[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var c,d,e,f,g,h,i,j,k,l,m=b[0],n=numeric.clone(a),o=numeric.identity(m);for(d=0;m-2>d;d++){for(f=Array(m-d-1),c=d+1;m>c;c++)f[c-d-1]=n[c][d];if(numeric.norm2(f)>0){for(g=numeric.house(f),h=numeric.getBlock(n,[d+1,d],[m-1,m-1]),i=numeric.tensor(g,numeric.dot(g,h)),c=d+1;m>c;c++)for(j=n[c],k=i[c-d-1],e=d;m>e;e++)j[e]-=2*k[e-d];for(h=numeric.getBlock(n,[0,d+1],[m-1,m-1]),i=numeric.tensor(numeric.dot(h,g),g),c=0;m>c;c++)for(j=n[c],k=i[c],e=d+1;m>e;e++)j[e]-=2*k[e-d-1];for(h=Array(m-d-1),c=d+1;m>c;c++)h[c-d-1]=o[c];for(i=numeric.tensor(g,numeric.dot(g,h)),c=d+1;m>c;c++)for(l=o[c],k=i[c-d-1],e=0;m>e;e++)l[e]-=2*k[e]}}return{H:n,Q:o}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(a,b){"undefined"==typeof b&&(b=1e4),a=numeric.clone(a);var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=(numeric.clone(a),numeric.dim(a)),v=u[0],w=numeric.identity(v);if(3>v)return{Q:w,B:[[0,v-1]]};var x=numeric.epsilon;for(t=0;b>t;t++){for(r=0;v-1>r;r++)if(Math.abs(a[r+1][r])<x*(Math.abs(a[r][r])+Math.abs(a[r+1][r+1]))){var y=numeric.QRFrancis(numeric.getBlock(a,[0,0],[r,r]),b),z=numeric.QRFrancis(numeric.getBlock(a,[r+1,r+1],[v-1,v-1]),b);for(n=Array(r+1),q=0;r>=q;q++)n[q]=w[q];for(o=numeric.dot(y.Q,n),q=0;r>=q;q++)w[q]=o[q];for(n=Array(v-r-1),q=r+1;v>q;q++)n[q-r-1]=w[q];for(o=numeric.dot(z.Q,n),q=r+1;v>q;q++)w[q]=o[q-r-1];return{Q:w,B:y.B.concat(numeric.add(z.B,r+1))}}if(e=a[v-2][v-2],f=a[v-2][v-1],g=a[v-1][v-2],h=a[v-1][v-1],j=e+h,
i=e*h-f*g,k=numeric.getBlock(a,[0,0],[2,2]),j*j>=4*i){var A,B;A=.5*(j+Math.sqrt(j*j-4*i)),B=.5*(j-Math.sqrt(j*j-4*i)),k=numeric.add(numeric.sub(numeric.dot(k,k),numeric.mul(k,A+B)),numeric.diag(numeric.rep([3],A*B)))}else k=numeric.add(numeric.sub(numeric.dot(k,k),numeric.mul(k,j)),numeric.diag(numeric.rep([3],i)));for(c=[k[0][0],k[1][0],k[2][0]],d=numeric.house(c),n=[a[0],a[1],a[2]],o=numeric.tensor(d,numeric.dot(d,n)),q=0;3>q;q++)for(m=a[q],p=o[q],s=0;v>s;s++)m[s]-=2*p[s];for(n=numeric.getBlock(a,[0,0],[v-1,2]),o=numeric.tensor(numeric.dot(n,d),d),q=0;v>q;q++)for(m=a[q],p=o[q],s=0;3>s;s++)m[s]-=2*p[s];for(n=[w[0],w[1],w[2]],o=numeric.tensor(d,numeric.dot(d,n)),q=0;3>q;q++)for(l=w[q],p=o[q],s=0;v>s;s++)l[s]-=2*p[s];var C;for(r=0;v-2>r;r++){for(s=r;r+1>=s;s++)if(Math.abs(a[s+1][s])<x*(Math.abs(a[s][s])+Math.abs(a[s+1][s+1]))){var y=numeric.QRFrancis(numeric.getBlock(a,[0,0],[s,s]),b),z=numeric.QRFrancis(numeric.getBlock(a,[s+1,s+1],[v-1,v-1]),b);for(n=Array(s+1),q=0;s>=q;q++)n[q]=w[q];for(o=numeric.dot(y.Q,n),q=0;s>=q;q++)w[q]=o[q];for(n=Array(v-s-1),q=s+1;v>q;q++)n[q-s-1]=w[q];for(o=numeric.dot(z.Q,n),q=s+1;v>q;q++)w[q]=o[q-s-1];return{Q:w,B:y.B.concat(numeric.add(z.B,s+1))}}for(C=Math.min(v-1,r+3),c=Array(C-r),q=r+1;C>=q;q++)c[q-r-1]=a[q][r];for(d=numeric.house(c),n=numeric.getBlock(a,[r+1,r],[C,v-1]),o=numeric.tensor(d,numeric.dot(d,n)),q=r+1;C>=q;q++)for(m=a[q],p=o[q-r-1],s=r;v>s;s++)m[s]-=2*p[s-r];for(n=numeric.getBlock(a,[0,r+1],[v-1,C]),o=numeric.tensor(numeric.dot(n,d),d),q=0;v>q;q++)for(m=a[q],p=o[q],s=r+1;C>=s;s++)m[s]-=2*p[s-r-1];for(n=Array(C-r),q=r+1;C>=q;q++)n[q-r-1]=w[q];for(o=numeric.tensor(d,numeric.dot(d,n)),q=r+1;C>=q;q++)for(l=w[q],p=o[q-r-1],s=0;v>s;s++)l[s]-=2*p[s]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=numeric.toUpperHessenberg(a),u=numeric.QRFrancis(t.H,b),v=numeric.T,w=a.length,x=u.B,y=numeric.dot(u.Q,numeric.dot(t.H,numeric.transpose(u.Q))),z=new v(numeric.dot(u.Q,t.Q)),A=x.length,B=Math.sqrt;for(d=0;A>d;d++)if(c=x[d][0],c===x[d][1]);else{if(f=c+1,g=y[c][c],h=y[c][f],i=y[f][c],j=y[f][f],0===h&&0===i)continue;k=-g-j,l=g*j-h*i,m=k*k-4*l,m>=0?(n=0>k?-.5*(k-B(m)):-.5*(k+B(m)),r=(g-n)*(g-n)+h*h,s=i*i+(j-n)*(j-n),r>s?(r=B(r),p=(g-n)/r,q=h/r):(s=B(s),p=i/s,q=(j-n)/s),e=new v([[q,-p],[p,q]]),z.setRows(c,f,e.dot(z.getRows(c,f)))):(n=-.5*k,o=.5*B(-m),r=(g-n)*(g-n)+h*h,s=i*i+(j-n)*(j-n),r>s?(r=B(r+o*o),p=(g-n)/r,q=h/r,n=0,o/=r):(s=B(s+o*o),p=i/s,q=(j-n)/s,n=o/s,o=0),e=new v([[q,-p],[p,q]],[[n,o],[o,-n]]),z.setRows(c,f,e.dot(z.getRows(c,f))))}var C=z.dot(a).dot(z.transjugate()),w=a.length,D=numeric.T.identity(w);for(f=0;w>f;f++)if(f>0)for(d=f-1;d>=0;d--){var E=C.get([d,d]),F=C.get([f,f]);numeric.neq(E.x,F.x)||numeric.neq(E.y,F.y)?(n=C.getRow(d).getBlock([d],[f-1]),o=D.getRow(f).getBlock([d],[f-1]),D.set([f,d],C.get([d,f]).neg().sub(n.dot(o)).div(E.sub(F)))):D.setRow(f,D.getRow(d))}for(f=0;w>f;f++)n=D.getRow(f),D.setRow(f,n.div(n.norm2()));return D=D.transpose(),D=z.transjugate().dot(D),{lambda:C.getDiag(),E:D}},numeric.ccsSparse=function(a){var b,c,d,e,f=a.length,g=[];for(d=f-1;-1!==d;--d){c=a[d];for(e in c){for(e=parseInt(e);e>=g.length;)g[g.length]=0;0!==c[e]&&g[e]++}}var b=g.length,h=Array(b+1);for(h[0]=0,d=0;b>d;++d)h[d+1]=h[d]+g[d];var i=Array(h[b]),j=Array(h[b]);for(d=f-1;-1!==d;--d){c=a[d];for(e in c)0!==c[e]&&(g[e]--,i[h[e]+g[e]]=d,j[h[e]+g[e]]=c[e])}return[h,i,j]},numeric.ccsFull=function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2],i=numeric.ccsDim(a),j=i[0],k=i[1],l=numeric.rep([j,k],0);for(b=0;k>b;b++)for(d=f[b],e=f[b+1],c=d;e>c;++c)l[g[c]][b]=h[c];return l},numeric.ccsTSolve=function(a,b,c,d,e){function f(a){var b;if(0===c[a]){for(c[a]=1,b=g[a];b<g[a+1];++b)f(h[b]);e[l]=a,++l}}var g=a[0],h=a[1],i=a[2],j=g.length-1,k=Math.max,l=0;"undefined"==typeof d&&(c=numeric.rep([j],0)),"undefined"==typeof d&&(d=numeric.linspace(0,c.length-1)),"undefined"==typeof e&&(e=[]);var m,n,o,p,q,r,s;for(m=d.length-1;-1!==m;--m)f(d[m]);for(e.length=l,m=e.length-1;-1!==m;--m)c[e[m]]=0;for(m=d.length-1;-1!==m;--m)n=d[m],c[n]=b[n];for(m=e.length-1;-1!==m;--m){for(n=e[m],o=g[n],p=k(g[n+1],o),q=o;q!==p;++q)if(h[q]===n){c[n]/=i[q];break}for(s=c[n],q=o;q!==p;++q)r=h[q],r!==n&&(c[r]-=s*i[q])}return c},numeric.ccsDFS=function(a){this.k=Array(a),this.k1=Array(a),this.j=Array(a)},numeric.ccsDFS.prototype.dfs=function(a,b,c,d,e,f){var g,h,i,j=0,k=e.length,l=this.k,m=this.k1,n=this.j;if(0===d[a])for(d[a]=1,n[0]=a,l[0]=h=b[a],m[0]=i=b[a+1];;)if(h>=i){if(e[k]=n[j],0===j)return;++k,--j,h=l[j],i=m[j]}else g=f[c[h]],0===d[g]?(d[g]=1,l[j]=h,++j,n[j]=g,h=b[g],m[j]=i=b[g+1]):++h},numeric.ccsLPSolve=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q=a[0],r=a[1],s=a[2],t=(q.length-1,b[0]),u=b[1],v=b[2];for(i=t[e],j=t[e+1],d.length=0,h=i;j>h;++h)g.dfs(f[u[h]],q,r,c,d,f);for(h=d.length-1;-1!==h;--h)c[d[h]]=0;for(h=i;h!==j;++h)k=f[u[h]],c[k]=v[h];for(h=d.length-1;-1!==h;--h){for(k=d[h],l=q[k],m=q[k+1],n=l;m>n;++n)if(f[r[n]]===k){c[k]/=s[n];break}for(p=c[k],n=l;m>n;++n)o=f[r[n]],o!==k&&(c[o]-=p*s[n])}return c},numeric.ccsLUP1=function(a,b){var c,d,e,f,g,h,i,j=a[0].length-1,k=[numeric.rep([j+1],0),[],[]],l=[numeric.rep([j+1],0),[],[]],m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=numeric.rep([j],0),t=numeric.rep([j],0),u=numeric.ccsLPSolve,v=(Math.max,Math.abs),w=numeric.linspace(0,j-1),x=numeric.linspace(0,j-1),y=new numeric.ccsDFS(j);for("undefined"==typeof b&&(b=1),c=0;j>c;++c){for(u(k,a,s,t,c,x,y),f=-1,g=-1,d=t.length-1;-1!==d;--d)e=t[d],c>=e||(h=v(s[e]),h>f&&(g=e,f=h));for(v(s[c])<b*f&&(d=w[c],f=w[g],w[c]=f,x[f]=c,w[g]=d,x[d]=g,f=s[c],s[c]=s[g],s[g]=f),f=m[c],g=p[c],i=s[c],n[f]=w[c],o[f]=1,++f,d=t.length-1;-1!==d;--d)e=t[d],h=s[e],t[d]=0,s[e]=0,c>=e?(q[g]=e,r[g]=h,++g):(n[f]=w[e],o[f]=h/i,++f);m[c+1]=f,p[c+1]=g}for(d=n.length-1;-1!==d;--d)n[d]=x[n[d]];return{L:k,U:l,P:w,Pinv:x}},numeric.ccsDFS0=function(a){this.k=Array(a),this.k1=Array(a),this.j=Array(a)},numeric.ccsDFS0.prototype.dfs=function(a,b,c,d,e,f,g){var h,i,j,k=0,l=e.length,m=this.k,n=this.k1,o=this.j;if(0===d[a])for(d[a]=1,o[0]=a,m[0]=i=b[f[a]],n[0]=j=b[f[a]+1];;){if(isNaN(i))throw new Error("Ow!");if(i>=j){if(e[l]=f[o[k]],0===k)return;++l,--k,i=m[k],j=n[k]}else h=c[i],0===d[h]?(d[h]=1,m[k]=i,++k,o[k]=h,h=f[h],i=b[h],n[k]=j=b[h+1]):++i}},numeric.ccsLPSolve0=function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r=a[0],s=a[1],t=a[2],u=(r.length-1,b[0]),v=b[1],w=b[2];for(j=u[e],k=u[e+1],d.length=0,i=j;k>i;++i)h.dfs(v[i],r,s,c,d,f,g);for(i=d.length-1;-1!==i;--i)l=d[i],c[g[l]]=0;for(i=j;i!==k;++i)l=v[i],c[l]=w[i];for(i=d.length-1;-1!==i;--i){for(l=d[i],p=g[l],m=r[l],n=r[l+1],o=m;n>o;++o)if(s[o]===p){c[p]/=t[o];break}for(q=c[p],o=m;n>o;++o)c[s[o]]-=q*t[o];c[p]=q}},numeric.ccsLUP0=function(a,b){var c,d,e,f,g,h,i,j=a[0].length-1,k=[numeric.rep([j+1],0),[],[]],l=[numeric.rep([j+1],0),[],[]],m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=numeric.rep([j],0),t=numeric.rep([j],0),u=numeric.ccsLPSolve0,v=(Math.max,Math.abs),w=numeric.linspace(0,j-1),x=numeric.linspace(0,j-1),y=new numeric.ccsDFS0(j);for("undefined"==typeof b&&(b=1),c=0;j>c;++c){for(u(k,a,s,t,c,x,w,y),f=-1,g=-1,d=t.length-1;-1!==d;--d)e=t[d],c>=e||(h=v(s[w[e]]),h>f&&(g=e,f=h));for(v(s[w[c]])<b*f&&(d=w[c],f=w[g],w[c]=f,x[f]=c,w[g]=d,x[d]=g),f=m[c],g=p[c],i=s[w[c]],n[f]=w[c],o[f]=1,++f,d=t.length-1;-1!==d;--d)e=t[d],h=s[w[e]],t[d]=0,s[w[e]]=0,c>=e?(q[g]=e,r[g]=h,++g):(n[f]=w[e],o[f]=h/i,++f);m[c+1]=f,p[c+1]=g}for(d=n.length-1;-1!==d;--d)n[d]=x[n[d]];return{L:k,U:l,P:w,Pinv:x}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(a){return[numeric.sup(a[1])+1,a[0].length-1]},numeric.ccsGetBlock=function(a,b,c){var d=numeric.ccsDim(a),e=d[0],f=d[1];"undefined"==typeof b?b=numeric.linspace(0,e-1):"number"==typeof b&&(b=[b]),"undefined"==typeof c?c=numeric.linspace(0,f-1):"number"==typeof c&&(c=[c]);var g,h,i,j,k,l=b.length,m=c.length,n=numeric.rep([f],0),o=[],p=[],q=[n,o,p],r=a[0],s=a[1],t=a[2],u=numeric.rep([e],0),v=0,w=numeric.rep([e],0);for(h=0;m>h;++h){j=c[h];var x=r[j],y=r[j+1];for(g=x;y>g;++g)i=s[g],w[i]=1,u[i]=t[g];for(g=0;l>g;++g)k=b[g],w[k]&&(o[v]=g,p[v]=u[b[g]],++v);for(g=x;y>g;++g)i=s[g],w[i]=0;n[h+1]=v}return q},numeric.ccsDot=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=a[0],o=a[1],p=a[2],q=b[0],r=b[1],s=b[2],t=numeric.ccsDim(a),u=numeric.ccsDim(b),v=t[0],w=(t[1],u[1]),x=numeric.rep([v],0),y=numeric.rep([v],0),z=Array(v),A=numeric.rep([w],0),B=[],C=[],D=[A,B,C];for(e=0;e!==w;++e){for(f=q[e],g=q[e+1],k=0,d=f;g>d;++d)for(l=r[d],m=s[d],h=n[l],i=n[l+1],c=h;i>c;++c)j=o[c],0===y[j]&&(z[k]=j,y[j]=1,k+=1),x[j]=x[j]+p[c]*m;for(f=A[e],g=f+k,A[e+1]=g,d=k-1;-1!==d;--d)m=f+d,c=z[d],B[m]=c,C[m]=x[c],y[c]=0,x[c]=0;A[e+1]=A[e]+k}return D},numeric.ccsLUPSolve=function(a,b){var c=a.L,d=a.U,e=(a.P,b[0]),f=!1;"object"!=typeof e&&(b=[[0,b.length],numeric.linspace(0,b.length-1),b],e=b[0],f=!0);var g,h,i,j,k,l,m=b[1],n=b[2],o=c[0].length-1,p=e.length-1,q=numeric.rep([o],0),r=Array(o),s=numeric.rep([o],0),t=Array(o),u=numeric.rep([p+1],0),v=[],w=[],x=numeric.ccsTSolve,y=0;for(g=0;p>g;++g){for(k=0,i=e[g],j=e[g+1],h=i;j>h;++h)l=a.Pinv[m[h]],t[k]=l,s[l]=n[h],++k;for(t.length=k,x(c,s,q,t,r),h=t.length-1;-1!==h;--h)s[t[h]]=0;if(x(d,q,s,r,t),f)return s;for(h=r.length-1;-1!==h;--h)q[r[h]]=0;for(h=t.length-1;-1!==h;--h)l=t[h],v[y]=l,w[y]=s[l],s[l]=0,++y;u[g+1]=y}return[u,v,w]},numeric.ccsbinop=function(a,b){return"undefined"==typeof b&&(b=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+b+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+a+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(a){var b,c=a[0],d=a[1],e=a[2],f=numeric.sup(d)+1,g=c.length,h=numeric.rep([f],0),i=Array(g),j=Array(g),k=numeric.rep([f],0);for(b=0;g>b;++b)k[d[b]]++;for(b=0;f>b;++b)h[b+1]=h[b]+k[b];var l,m,n=h.slice(0);for(b=0;g>b;++b)m=d[b],l=n[m],i[l]=c[b],j[l]=e[b],n[m]=n[m]+1;return[h,i,j]},numeric.ccsGather=function(a){var b,c,d,e,f,g=a[0],h=a[1],i=a[2],j=g.length-1,k=h.length,l=Array(k),m=Array(k),n=Array(k);for(f=0,b=0;j>b;++b)for(d=g[b],e=g[b+1],c=d;c!==e;++c)m[f]=b,l[f]=h[c],n[f]=i[c],++f;return[l,m,n]},numeric.sdim=function i(a,b,c){if("undefined"==typeof b&&(b=[]),"object"!=typeof a)return b;"undefined"==typeof c&&(c=0),c in b||(b[c]=0),a.length>b[c]&&(b[c]=a.length);var d;for(d in a)a.hasOwnProperty(d)&&i(a[d],b,c+1);return b},numeric.sclone=function j(a,b,c){"undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=numeric.sdim(a).length);var d,e=Array(a.length);if(b===c-1){for(d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);return e}for(d in a)a.hasOwnProperty(d)&&(e[d]=j(a[d],b+1,c));return e},numeric.sdiag=function(a){var b,c,d=a.length,e=Array(d);for(b=d-1;b>=1;b-=2)c=b-1,e[b]=[],e[b][b]=a[b],e[c]=[],e[c][c]=a[c];return 0===b&&(e[0]=[],e[0][0]=a[b]),e},numeric.sidentity=function(a){return numeric.sdiag(numeric.rep([a],1))},numeric.stranspose=function(a){var b,c,d,e=[];a.length;for(b in a)if(a.hasOwnProperty(b)){d=a[b];for(c in d)d.hasOwnProperty(c)&&("object"!=typeof e[c]&&(e[c]=[]),e[c][b]=d[c])}return e},numeric.sLUP=function(a,b){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(a,b){var c,d,e,f,g,h,i,j=a.length,k=(b.length,numeric.stranspose(b)),l=k.length,m=Array(j);for(e=j-1;e>=0;e--){for(i=[],c=a[e],g=l-1;g>=0;g--){h=0,d=k[g];for(f in c)c.hasOwnProperty(f)&&f in d&&(h+=c[f]*d[f]);h&&(i[g]=h)}m[e]=i}return m},numeric.sdotMV=function(a,b){var c,d,e,f,g=a.length,h=Array(g);for(d=g-1;d>=0;d--){c=a[d],f=0;for(e in c)c.hasOwnProperty(e)&&b[e]&&(f+=c[e]*b[e]);f&&(h[d]=f)}return h},numeric.sdotVM=function(a,b){var c,d,e,f,g=[];for(c in a)if(a.hasOwnProperty(c)){e=b[c],f=a[c];for(d in e)e.hasOwnProperty(d)&&(g[d]||(g[d]=0),g[d]+=f*e[d])}return g},numeric.sdotVV=function(a,b){var c,d=0;for(c in a)a[c]&&b[c]&&(d+=a[c]*b[c]);return d},numeric.sdot=function(a,b){var c=numeric.sdim(a).length,d=numeric.sdim(b).length,e=1e3*c+d;switch(e){case 0:return a*b;case 1001:return numeric.sdotVV(a,b);case 2001:return numeric.sdotMV(a,b);case 1002:return numeric.sdotVM(a,b);case 2002:return numeric.sdotMM(a,b);default:throw new Error("numeric.sdot not implemented for tensors of order "+c+" and "+d)}},numeric.sscatter=function(a){var b,c,d,e,f=a[0].length,g=a.length,h=[];for(c=f-1;c>=0;--c)if(a[g-1][c]){for(e=h,d=0;g-2>d;d++)b=a[d][c],e[b]||(e[b]=[]),e=e[b];e[a[d][c]]=a[d+1][c]}return h},numeric.sgather=function k(a,b,c){"undefined"==typeof b&&(b=[]),"undefined"==typeof c&&(c=[]);var d,e,f;d=c.length;for(e in a)if(a.hasOwnProperty(e))if(c[d]=parseInt(e),f=a[e],"number"==typeof f){if(f){if(0===b.length)for(e=d+1;e>=0;--e)b[e]=[];for(e=d;e>=0;--e)b[e].push(c[e]);b[d+1].push(f)}}else k(f,b,c);return c.length>d&&c.pop(),b},numeric.cLU=function(a){var b,c,d,e,f,g,h=a[0],i=a[1],j=a[2],k=h.length,l=0;for(b=0;k>b;b++)h[b]>l&&(l=h[b]);l++;var m,n,o,p=Array(l),q=Array(l),r=numeric.rep([l],1/0),s=numeric.rep([l],-(1/0));for(d=0;k>d;d++)b=h[d],c=i[d],c<r[b]&&(r[b]=c),c>s[b]&&(s[b]=c);for(b=0;l-1>b;b++)s[b]>s[b+1]&&(s[b+1]=s[b]);for(b=l-1;b>=1;b--)r[b]<r[b-1]&&(r[b-1]=r[b]);var t=0,u=0;for(b=0;l>b;b++)q[b]=numeric.rep([s[b]-r[b]+1],0),p[b]=numeric.rep([b-r[b]],0),t+=b-r[b]+1,u+=s[b]-b+1;for(d=0;k>d;d++)b=h[d],q[b][i[d]-r[b]]=j[d];for(b=0;l-1>b;b++)for(e=b-r[b],m=q[b],c=b+1;r[c]<=b&&l>c;c++)if(f=b-r[c],g=s[b]-b,n=q[c],o=n[f]/m[e]){for(d=1;g>=d;d++)n[d+f]-=o*m[d+e];p[c][b-r[c]]=o}var k,v,w,m=[],n=[],x=[],y=[],z=[],A=[];for(k=0,v=0,b=0;l>b;b++){for(e=r[b],f=s[b],w=q[b],c=b;f>=c;c++)w[c-e]&&(m[k]=b,n[k]=c,x[k]=w[c-e],k++);for(w=p[b],c=e;b>c;c++)w[c-e]&&(y[v]=b,z[v]=c,A[v]=w[c-e],v++);y[v]=b,z[v]=b,A[v]=1,v++}return{U:[m,n,x],L:[y,z,A]}},numeric.cLUsolve=function(a,b){var c,d,e=a.L,f=a.U,g=numeric.clone(b),h=e[0],i=e[1],j=e[2],k=f[0],l=f[1],m=f[2],n=k.length,o=(h.length,g.length);for(d=0,c=0;o>c;c++){for(;i[d]<c;)g[c]-=j[d]*g[i[d]],d++;d++}for(d=n-1,c=o-1;c>=0;c--){for(;l[d]>c;)g[c]-=m[d]*g[l[d]],d--;g[c]/=m[d],d--}return g},numeric.cgrid=function(a,b){"number"==typeof a&&(a=[a,a]);var c,d,e,f=numeric.rep(a,-1);if("function"!=typeof b)switch(b){case"L":b=function(b,c){return b>=a[0]/2||c<a[1]/2};break;default:b=function(a,b){return!0}}for(e=0,c=1;c<a[0]-1;c++)for(d=1;d<a[1]-1;d++)b(c,d)&&(f[c][d]=e,e++);return f},numeric.cdelsq=function(a){var b,c,d,e,f,g=[[-1,0],[0,-1],[0,1],[1,0]],h=numeric.dim(a),i=h[0],j=h[1],k=[],l=[],m=[];for(b=1;i-1>b;b++)for(c=1;j-1>c;c++)if(!(a[b][c]<0)){for(d=0;4>d;d++)e=b+g[d][0],f=c+g[d][1],a[e][f]<0||(k.push(a[b][c]),l.push(a[e][f]),m.push(-1));k.push(a[b][c]),l.push(a[b][c]),m.push(4)}return[k,l,m]},numeric.cdotMV=function(a,b){var c,d,e,f=a[0],g=a[1],h=a[2],i=f.length;for(e=0,d=0;i>d;d++)f[d]>e&&(e=f[d]);for(e++,c=numeric.rep([e],0),d=0;i>d;d++)c[f[d]]+=h[d]*b[g[d]];return c},numeric.Spline=function(a,b,c,d,e){this.x=a,this.yl=b,this.yr=c,this.kl=d,this.kr=e},numeric.Spline.prototype._at=function(a,b){var a,c,d,e,f=this.x,g=this.yl,h=this.yr,i=this.kl,j=this.kr,k=numeric.add,l=numeric.sub,m=numeric.mul;c=l(m(i[b],f[b+1]-f[b]),l(h[b+1],g[b])),d=k(m(j[b+1],f[b]-f[b+1]),l(h[b+1],g[b])),e=(a-f[b])/(f[b+1]-f[b]);var n=e*(1-e);return k(k(k(m(1-e,g[b]),m(e,h[b+1])),m(c,n*(1-e))),m(d,n*e))},numeric.Spline.prototype.at=function(a){if("number"==typeof a){var b,c,d,e=this.x,f=e.length,g=Math.floor;for(b=0,c=f-1;c-b>1;)d=g((b+c)/2),e[d]<=a?b=d:c=d;return this._at(a,b)}var h,f=a.length,i=Array(f);for(h=f-1;-1!==h;--h)i[h]=this.at(a[h]);return i},numeric.Spline.prototype.diff=function(){var a,b,c,d=this.x,e=this.yl,f=this.yr,g=this.kl,h=this.kr,i=e.length,j=g,k=h,l=Array(i),m=Array(i),n=numeric.add,o=numeric.mul,p=numeric.div,q=numeric.sub;for(a=i-1;-1!==a;--a)b=d[a+1]-d[a],c=q(f[a+1],e[a]),l[a]=p(n(o(c,6),o(g[a],-4*b),o(h[a+1],-2*b)),b*b),m[a+1]=p(n(o(c,-6),o(g[a],2*b),o(h[a+1],4*b)),b*b);return new numeric.Spline(d,j,k,l,m)},numeric.Spline.prototype.roots=function(){function a(a){return a*a}var b=[],c=this.x,d=this.yl,e=this.yr,f=this.kl,g=this.kr;"number"==typeof d[0]&&(d=[d],e=[e],f=[f],g=[g]);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F=d.length,G=c.length-1,b=Array(F),H=Math.sqrt;for(h=0;h!==F;++h){for(k=d[h],l=e[h],m=f[h],n=g[h],o=[],i=0;i!==G;i++){for(i>0&&l[i]*k[i]<0&&o.push(c[i]),w=c[i+1]-c[i],x=c[i],r=k[i],s=l[i+1],p=m[i]/w,q=n[i+1]/w,v=a(p-q+3*(r-s))+12*q*r,t=q+3*r+2*p-3*s,u=3*(q+p+2*(r-s)),0>=v?(z=t/u,y=z>c[i]&&z<c[i+1]?[c[i],z,c[i+1]]:[c[i],c[i+1]]):(z=(t-H(v))/u,A=(t+H(v))/u,y=[c[i]],z>c[i]&&z<c[i+1]&&y.push(z),A>c[i]&&A<c[i+1]&&y.push(A),y.push(c[i+1])),C=y[0],z=this._at(C,i),j=0;j<y.length-1;j++)if(D=y[j+1],A=this._at(D,i),0!==z)if(0===A||z*A>0)C=D,z=A;else{for(var I=0;;){if(E=(z*D-A*C)/(z-A),C>=E||E>=D)break;if(B=this._at(E,i),B*A>0)D=E,A=B,-1===I&&(z*=.5),I=-1;else{if(!(B*z>0))break;C=E,z=B,1===I&&(A*=.5),I=1}}o.push(E),C=y[j+1],z=this._at(C,i)}else o.push(C),C=D,z=A;0===A&&o.push(D)}b[h]=o}return"number"==typeof this.yl[0]?b[0]:b},numeric.spline=function(a,b,c,d){var e,f=a.length,g=[],h=[],i=[],j=numeric.sub,k=numeric.mul,l=numeric.add;for(e=f-2;e>=0;e--)h[e]=a[e+1]-a[e],i[e]=j(b[e+1],b[e]);("string"==typeof c||"string"==typeof d)&&(c=d="periodic");var m=[[],[],[]];switch(typeof c){case"undefined":g[0]=k(3/(h[0]*h[0]),i[0]),m[0].push(0,0),m[1].push(0,1),m[2].push(2/h[0],1/h[0]);break;case"string":g[0]=l(k(3/(h[f-2]*h[f-2]),i[f-2]),k(3/(h[0]*h[0]),i[0])),m[0].push(0,0,0),m[1].push(f-2,0,1),m[2].push(1/h[f-2],2/h[f-2]+2/h[0],1/h[0]);break;default:g[0]=c,m[0].push(0),m[1].push(0),m[2].push(1)}for(e=1;f-1>e;e++)g[e]=l(k(3/(h[e-1]*h[e-1]),i[e-1]),k(3/(h[e]*h[e]),i[e])),m[0].push(e,e,e),m[1].push(e-1,e,e+1),m[2].push(1/h[e-1],2/h[e-1]+2/h[e],1/h[e]);switch(typeof d){case"undefined":g[f-1]=k(3/(h[f-2]*h[f-2]),i[f-2]),m[0].push(f-1,f-1),m[1].push(f-2,f-1),m[2].push(1/h[f-2],2/h[f-2]);break;case"string":m[1][m[1].length-1]=0;break;default:g[f-1]=d,m[0].push(f-1),m[1].push(f-1),m[2].push(1)}g="number"!=typeof g[0]?numeric.transpose(g):[g];var n=Array(g.length);if("string"==typeof c)for(e=n.length-1;-1!==e;--e)n[e]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(m)),g[e]),n[e][f-1]=n[e][0];else for(e=n.length-1;-1!==e;--e)n[e]=numeric.cLUsolve(numeric.cLU(m),g[e]);return n="number"==typeof b[0]?n[0]:numeric.transpose(n),new numeric.Spline(a,b,b,n,n)},numeric.fftpow2=function l(a,b){var c=a.length;if(1!==c){var d,e,f=Math.cos,g=Math.sin,h=Array(c/2),i=Array(c/2),j=Array(c/2),k=Array(c/2);for(e=c/2,d=c-1;-1!==d;--d)--e,j[e]=a[d],k[e]=b[d],--d,h[e]=a[d],i[e]=b[d];l(h,i),l(j,k),e=c/2;var m,n,o,p=-6.283185307179586/c;for(d=c-1;-1!==d;--d)--e,-1===e&&(e=c/2-1),m=p*d,n=f(m),o=g(m),a[d]=h[e]+n*j[e]-o*k[e],b[d]=i[e]+n*k[e]+o*j[e]}},numeric._ifftpow2=function m(a,b){var c=a.length;if(1!==c){var d,e,f=Math.cos,g=Math.sin,h=Array(c/2),i=Array(c/2),j=Array(c/2),k=Array(c/2);for(e=c/2,d=c-1;-1!==d;--d)--e,j[e]=a[d],k[e]=b[d],--d,h[e]=a[d],i[e]=b[d];m(h,i),m(j,k),e=c/2;var l,n,o,p=6.283185307179586/c;for(d=c-1;-1!==d;--d)--e,-1===e&&(e=c/2-1),l=p*d,n=f(l),o=g(l),a[d]=h[e]+n*j[e]-o*k[e],b[d]=i[e]+n*k[e]+o*j[e]}},numeric.ifftpow2=function(a,b){numeric._ifftpow2(a,b),numeric.diveq(a,a.length),numeric.diveq(b,b.length)},numeric.convpow2=function(a,b,c,d){numeric.fftpow2(a,b),numeric.fftpow2(c,d);var e,f,g,h,i,j=a.length;for(e=j-1;-1!==e;--e)f=a[e],h=b[e],g=c[e],i=d[e],a[e]=f*g-h*i,b[e]=f*i+h*g;numeric.ifftpow2(a,b)},numeric.T.prototype.fft=function(){var a,b,c=this.x,d=this.y,e=c.length,f=Math.log,g=f(2),h=Math.ceil(f(2*e-1)/g),i=Math.pow(2,h),j=numeric.rep([i],0),k=numeric.rep([i],0),l=Math.cos,m=Math.sin,n=-3.141592653589793/e,o=numeric.rep([i],0),p=numeric.rep([i],0);Math.floor(e/2);for(a=0;e>a;a++)o[a]=c[a];if("undefined"!=typeof d)for(a=0;e>a;a++)p[a]=d[a];for(j[0]=1,a=1;i/2>=a;a++)b=n*a*a,j[a]=l(b),k[a]=m(b),j[i-a]=l(b),k[i-a]=m(b);var q=new numeric.T(o,p),r=new numeric.T(j,k);return q=q.mul(r),numeric.convpow2(q.x,q.y,numeric.clone(r.x),numeric.neg(r.y)),q=q.mul(r),q.x.length=e,q.y.length=e,q},numeric.T.prototype.ifft=function(){var a,b,c=this.x,d=this.y,e=c.length,f=Math.log,g=f(2),h=Math.ceil(f(2*e-1)/g),i=Math.pow(2,h),j=numeric.rep([i],0),k=numeric.rep([i],0),l=Math.cos,m=Math.sin,n=3.141592653589793/e,o=numeric.rep([i],0),p=numeric.rep([i],0);Math.floor(e/2);for(a=0;e>a;a++)o[a]=c[a];if("undefined"!=typeof d)for(a=0;e>a;a++)p[a]=d[a];for(j[0]=1,a=1;i/2>=a;a++)b=n*a*a,j[a]=l(b),k[a]=m(b),j[i-a]=l(b),k[i-a]=m(b);var q=new numeric.T(o,p),r=new numeric.T(j,k);return q=q.mul(r),numeric.convpow2(q.x,q.y,numeric.clone(r.x),numeric.neg(r.y)),q=q.mul(r),q.x.length=e,q.y.length=e,q.div(e)},numeric.gradient=function(a,b){var c=b.length,d=a(b);if(isNaN(d))throw new Error("gradient: f(x) is a NaN!");var e,f,g,h,i,j,k,l,m,n,o=Math.max,p=numeric.clone(b),q=Array(c),o=(numeric.div,numeric.sub,Math.max),r=.001,s=Math.abs,t=Math.min,u=0;for(e=0;c>e;e++)for(var v=o(1e-6*d,1e-8);;){if(++u,u>20)throw new Error("Numerical gradient fails");if(p[e]=b[e]+v,f=a(p),p[e]=b[e]-v,g=a(p),p[e]=b[e],isNaN(f)||isNaN(g))v/=16;else{if(q[e]=(f-g)/(2*v),i=b[e]-v,j=b[e],k=b[e]+v,l=(f-d)/v,m=(d-g)/v,n=o(s(q[e]),s(d),s(f),s(g),s(i),s(j),s(k),1e-8),h=t(o(s(l-q[e]),s(m-q[e]),s(l-m))/n,v/n),!(h>r))break;v/=16}}return q},numeric.uncmin=function(a,b,c,d,e,f,g){var h=numeric.gradient;"undefined"==typeof g&&(g={}),"undefined"==typeof c&&(c=1e-8),"undefined"==typeof d&&(d=function(b){return h(a,b)}),"undefined"==typeof e&&(e=1e3),b=numeric.clone(b);var i,j,k=b.length,l=a(b);if(isNaN(l))throw new Error("uncmin: f(x0) is a NaN!");var m=Math.max,n=numeric.norm2;c=m(c,numeric.epsilon);var o,p,q,r,s,t,u,v,w,x,y=g.Hinv||numeric.identity(k),z=numeric.dot,A=(numeric.inv,numeric.sub),B=numeric.add,C=numeric.tensor,D=numeric.div,E=numeric.mul,F=numeric.all,G=numeric.isFinite,H=numeric.neg,I=0,J="";for(p=d(b);e>I;){if("function"==typeof f&&f(I,b,l,p,y)){J="Callback returned true";break}if(!F(G(p))){J="Gradient has Infinity or NaN";break}if(o=H(z(y,p)),!F(G(o))){J="Search direction has Infinity or NaN";break}if(x=n(o),c>x){J="Newton step smaller than tol";break}for(w=1,j=z(p,o),s=b;e>I&&!(c>w*x)&&(r=E(o,w),s=B(b,r),i=a(s),i-l>=.1*w*j||isNaN(i));)w*=.5,++I;if(c>w*x){J="Line search step size smaller than tol";break}if(I===e){J="maxit reached during line search";break}q=d(s),t=A(q,p),v=z(t,r),u=z(y,t),y=A(B(y,E((v+z(t,u))/(v*v),C(r,r))),D(B(C(u,r),C(r,u)),v)),b=s,l=i,p=q,++I}return{solution:b,f:l,gradient:p,invHessian:y,iterations:I,message:J}},numeric.Dopri=function(a,b,c,d,e,f,g){this.x=a,this.y=b,this.f=c,this.ymid=d,this.iterations=e,this.events=g,this.message=f},numeric.Dopri.prototype._at=function(a,b){function c(a){return a*a}var d,e,f,g,h,i,a,j,k,l,m,n=this,o=n.x,p=n.y,q=n.f,r=n.ymid,s=(o.length,Math.floor,.5),t=numeric.add,u=numeric.mul,v=numeric.sub;return d=o[b],e=o[b+1],g=p[b],h=p[b+1],j=e-d,f=d+s*j,i=r[b],k=v(q[b],u(g,1/(d-f)+2/(d-e))),l=v(q[b+1],u(h,1/(e-f)+2/(e-d))),m=[c(a-e)*(a-f)/c(d-e)/(d-f),c(a-d)*c(a-e)/c(d-f)/c(e-f),c(a-d)*(a-f)/c(e-d)/(e-f),(a-d)*c(a-e)*(a-f)/c(d-e)/(d-f),(a-e)*c(a-d)*(a-f)/c(d-e)/(e-f)],t(t(t(t(u(g,m[0]),u(i,m[1])),u(h,m[2])),u(k,m[3])),u(l,m[4]))},numeric.Dopri.prototype.at=function(a){var b,c,d,e=Math.floor;if("number"!=typeof a){var f=a.length,g=Array(f);for(b=f-1;-1!==b;--b)g[b]=this.at(a[b]);return g}var h=this.x;for(b=0,c=h.length-1;c-b>1;)d=e(.5*(b+c)),h[d]<=a?b=d:c=d;return this._at(a,b)},numeric.dopri=function(a,b,c,d,e,f,g){"undefined"==typeof e&&(e=1e-6),"undefined"==typeof f&&(f=1e3);var h,i,j,k,l,m,n,o,p,q,r,s,t,u=[a],v=[c],w=[d(a,c)],x=[],y=.2,z=[.075,.225],A=[44/45,-56/15,32/9],B=[19372/6561,-25360/2187,64448/6561,-212/729],C=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],D=[35/384,0,500/1113,125/192,-2187/6784,11/84],E=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],F=[.2,.3,.8,8/9,1,1],G=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],H=0,I=(b-a)/10,J=0,K=numeric.add,L=numeric.mul,M=(Math.max,Math.min),N=Math.abs,O=numeric.norminf,P=Math.pow,Q=numeric.any,R=numeric.lt,S=numeric.and,T=(numeric.sub,new numeric.Dopri(u,v,w,x,-1,""));for("function"==typeof g&&(r=g(a,c));b>a&&f>J;)if(++J,a+I>b&&(I=b-a),h=d(a+F[0]*I,K(c,L(y*I,w[H]))),i=d(a+F[1]*I,K(K(c,L(z[0]*I,w[H])),L(z[1]*I,h))),j=d(a+F[2]*I,K(K(K(c,L(A[0]*I,w[H])),L(A[1]*I,h)),L(A[2]*I,i))),k=d(a+F[3]*I,K(K(K(K(c,L(B[0]*I,w[H])),L(B[1]*I,h)),L(B[2]*I,i)),L(B[3]*I,j))),l=d(a+F[4]*I,K(K(K(K(K(c,L(C[0]*I,w[H])),L(C[1]*I,h)),L(C[2]*I,i)),L(C[3]*I,j)),L(C[4]*I,k))),p=K(K(K(K(K(c,L(w[H],I*D[0])),L(i,I*D[2])),L(j,I*D[3])),L(k,I*D[4])),L(l,I*D[5])),m=d(a+I,p),n=K(K(K(K(K(L(w[H],I*G[0]),L(i,I*G[2])),L(j,I*G[3])),L(k,I*G[4])),L(l,I*G[5])),L(m,I*G[6])),q="number"==typeof n?N(n):O(n),q>e){if(I=.2*I*P(e/q,.25),a+I===a){T.msg="Step size became too small";break}}else{if(x[H]=K(K(K(K(K(K(c,L(w[H],I*E[0])),L(i,I*E[2])),L(j,I*E[3])),L(k,I*E[4])),L(l,I*E[5])),L(m,I*E[6])),++H,u[H]=a+I,v[H]=p,w[H]=m,"function"==typeof g){var U,V,W=a,X=a+.5*I;if(s=g(X,x[H-1]),t=S(R(r,0),R(0,s)),Q(t)||(W=X,X=a+I,r=s,s=g(X,p),t=S(R(r,0),R(0,s))),Q(t)){for(var Y,Z,$=0,_=1,aa=1;;){if("number"==typeof r)V=(aa*s*W-_*r*X)/(aa*s-_*r);else for(V=X,o=r.length-1;-1!==o;--o)r[o]<0&&s[o]>0&&(V=M(V,(aa*s[o]*W-_*r[o]*X)/(aa*s[o]-_*r[o])));if(W>=V||V>=X)break;U=T._at(V,H-1),Z=g(V,U),Y=S(R(r,0),R(0,Z)),Q(Y)?(X=V,s=Z,t=Y,aa=1,-1===$?_*=.5:_=1,$=-1):(W=V,r=Z,_=1,1===$?aa*=.5:aa=1,$=1)}return p=T._at(.5*(a+V),H-1),T.f[H]=d(V,U),T.x[H]=V,T.y[H]=U,T.ymid[H-1]=p,T.events=t,T.iterations=J,T}}a+=I,c=p,r=s,I=M(.8*I*P(e/q,.25),4*I)}return T.iterations=J,T},numeric.LU=function(a,b){b=b||!1;var c,d,e,f,g,h,i,j,k,l=Math.abs,m=a.length,n=m-1,o=new Array(m);for(b||(a=numeric.clone(a)),e=0;m>e;++e){for(i=e,h=a[e],k=l(h[e]),d=e+1;m>d;++d)f=l(a[d][e]),f>k&&(k=f,i=d);for(o[e]=i,i!=e&&(a[e]=a[i],a[i]=h,h=a[e]),g=h[e],c=e+1;m>c;++c)a[c][e]/=g;for(c=e+1;m>c;++c){for(j=a[c],d=e+1;n>d;++d)j[d]-=j[e]*h[d],++d,j[d]-=j[e]*h[d];d===n&&(j[d]-=j[e]*h[d])}}return{LU:a,P:o}},numeric.LUsolve=function(a,b){var c,d,e,f,g,h=a.LU,i=h.length,j=numeric.clone(b),k=a.P;for(c=i-1;-1!==c;--c)j[c]=b[c];for(c=0;i>c;++c)for(e=k[c],k[c]!==c&&(g=j[c],j[c]=j[e],j[e]=g),f=h[c],d=0;c>d;++d)j[c]-=j[d]*f[d];for(c=i-1;c>=0;--c){for(f=h[c],d=c+1;i>d;++d)j[c]-=j[d]*f[d];j[c]/=f[c]}return j},numeric.solve=function(a,b,c){return numeric.LUsolve(numeric.LU(a,c),b)},numeric.echelonize=function(a){var b,c,d,e,f,g,h,i,j=numeric.dim(a),k=j[0],l=j[1],m=numeric.identity(k),n=Array(k),o=Math.abs,p=numeric.diveq;for(a=numeric.clone(a),b=0;k>b;++b){for(d=0,f=a[b],g=m[b],c=1;l>c;++c)o(f[d])<o(f[c])&&(d=c);for(n[b]=d,p(g,f[d]),p(f,f[d]),c=0;k>c;++c)if(c!==b){for(h=a[c],i=h[d],e=l-1;-1!==e;--e)h[e]-=f[e]*i;for(h=m[c],e=k-1;-1!==e;--e)h[e]-=g[e]*i}}return{I:m,A:a,P:n}},numeric.__solveLP=function(a,b,c,d,e,f,g){var h,i,j,k,l=numeric.sum,m=(numeric.log,numeric.mul),n=numeric.sub,o=numeric.dot,p=numeric.div,q=numeric.add,r=a.length,s=c.length,t=!1,u=0,v=1,w=(numeric.transpose(b),numeric.svd,numeric.transpose),x=(numeric.leq,Math.sqrt),y=Math.abs,z=(numeric.muleq,numeric.norminf,numeric.any,Math.min),A=numeric.all,B=numeric.gt,C=Array(r),D=Array(s),E=(numeric.rep([s],1),numeric.solve),F=n(c,o(b,f)),G=o(a,a);for(j=u;e>j;++j){var H,I;for(H=s-1;-1!==H;--H)D[H]=p(b[H],F[H]);var J=w(D);for(H=r-1;-1!==H;--H)C[H]=l(J[H]);v=.25*y(G/o(a,C));var K=100*x(G/o(C,C));for((!isFinite(v)||v>K)&&(v=K),k=q(a,m(v,C)),i=o(J,D),H=r-1;-1!==H;--H)i[H][H]+=1;I=E(i,p(k,v),!0);var L=p(F,o(b,I)),M=1;for(H=s-1;-1!==H;--H)L[H]<0&&(M=z(M,-.999*L[H]));if(h=n(f,m(I,M)),F=n(c,o(b,h)),!A(B(F,0)))return{solution:f,message:"",iterations:j};if(f=h,d>v)return{solution:h,message:"",iterations:j};if(g){var N=o(a,k),O=o(b,k);for(t=!0,H=s-1;-1!==H;--H)if(N*O[H]<0){t=!1;break}}else t=f[r-1]>=0?!1:!0;if(t)return{solution:h,message:"Unbounded",iterations:j}}return{solution:f,message:"maximum iteration count exceeded",iterations:j}},numeric._solveLP=function(a,b,c,d,e){var f,g=a.length,h=c.length,i=(numeric.sum,numeric.log,numeric.mul,numeric.sub),j=numeric.dot,k=(numeric.div,numeric.add,numeric.rep([g],0).concat([1])),l=numeric.rep([h,1],-1),m=numeric.blockMatrix([[b,l]]),n=c,f=numeric.rep([g],0).concat(Math.max(0,numeric.sup(numeric.neg(c)))+1),o=numeric.__solveLP(k,m,n,d,e,f,!1),p=numeric.clone(o.solution);p.length=g;var q=numeric.inf(i(c,j(b,p)));if(0>q)return{solution:NaN,message:"Infeasible",iterations:o.iterations};var r=numeric.__solveLP(a,b,c,d,e-o.iterations,p,!0);return r.iterations+=o.iterations,r},numeric.solveLP=function(a,b,c,d,e,f,g){if("undefined"==typeof g&&(g=1e3),"undefined"==typeof f&&(f=numeric.epsilon),"undefined"==typeof d)return numeric._solveLP(a,b,c,f,g);var h,i=d.length,j=d[0].length,k=b.length,l=numeric.echelonize(d),m=numeric.rep([j],0),n=l.P,o=[];for(h=n.length-1;-1!==h;--h)m[n[h]]=1;for(h=j-1;-1!==h;--h)0===m[h]&&o.push(h);var p=numeric.getRange,q=numeric.linspace(0,i-1),r=numeric.linspace(0,k-1),s=p(d,q,o),t=p(b,r,n),u=p(b,r,o),v=numeric.dot,w=numeric.sub,x=v(t,l.I),y=w(u,v(x,s)),z=w(c,v(x,e)),A=Array(n.length),B=Array(o.length);for(h=n.length-1;-1!==h;--h)A[h]=a[n[h]];for(h=o.length-1;-1!==h;--h)B[h]=a[o[h]];var C=w(B,v(A,v(l.I,s))),D=numeric._solveLP(C,y,z,f,g),E=D.solution;if(E!==E)return D;var F=v(l.I,w(e,v(s,E))),G=Array(a.length);for(h=n.length-1;-1!==h;--h)G[n[h]]=F[h];for(h=o.length-1;-1!==h;--h)G[o[h]]=E[h];return{solution:G,message:D.message,iterations:D.iterations}},numeric.MPStoLP=function(a){function b(b){throw new Error("MPStoLP: "+b+"\nLine "+c+": "+a[c]+"\nCurrent state: "+h[g]+"\n")}a instanceof String&&a.split("\n");var c,d,e,f,g=0,h=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],i=a.length,j=0,k={},l=[],m=0,n={},o=0,p=[],q=[],r=[];for(c=0;i>c;++c){e=a[c];var s=e.match(/\S*/g),t=[];for(d=0;d<s.length;++d)""!==s[d]&&t.push(s[d]);if(0!==t.length){for(d=0;d<h.length&&e.substr(0,h[d].length)!==h[d];++d);if(d<h.length){if(g=d,1===d&&(f=t[1]),6===d)return{name:f,c:p,A:numeric.transpose(q),b:r,rows:k,vars:n}}else switch(g){case 0:case 1:b("Unexpected line");case 2:switch(t[0]){case"N":0===j?j=t[1]:b("Two or more N rows");break;case"L":k[t[1]]=m,l[m]=1,r[m]=0,++m;break;case"G":k[t[1]]=m,l[m]=-1,r[m]=0,++m;break;case"E":k[t[1]]=m,l[m]=0,r[m]=0,++m;break;default:b("Parse error "+numeric.prettyPrint(t))}break;case 3:n.hasOwnProperty(t[0])||(n[t[0]]=o,p[o]=0,q[o]=numeric.rep([m],0),++o);var u=n[t[0]];for(d=1;d<t.length;d+=2)if(t[d]!==j){var v=k[t[d]];q[u][v]=(l[v]<0?-1:1)*parseFloat(t[d+1])}else p[u]=parseFloat(t[d+1]);break;case 4:for(d=1;d<t.length;d+=2)r[k[t[d]]]=(l[k[t[d]]]<0?-1:1)*parseFloat(t[d+1]);break;case 5:break;case 6:b("Internal error")}}}b("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(a,b,c,d,e,f,g){function h(a){var b,d,e=this,f=a.length,g=0,h=e.i=e.j=e.m=0;for(e.S=[],e.c=[],f||(a=[f++]);c>g;)e.S[g]=g++;
for(g=0;c>g;g++)b=e.S[g],h=k(h+b+a[g%f]),d=e.S[h],e.S[g]=d,e.S[h]=b;e.g=function(a){var b=e.S,d=k(e.i+1),f=b[d],g=k(e.j+f),h=b[g];b[d]=h,b[g]=f;for(var i=b[k(f+h)];--a;)d=k(d+1),f=b[d],g=k(g+f),h=b[g],b[d]=h,b[g]=f,i=i*c+b[k(f+h)];return e.i=d,e.j=g,i},e.g(c)}function i(a,b,c,d,e){if(c=[],e=typeof a,b&&"object"==e)for(d in a)if(d.indexOf("S")<5)try{c.push(i(a[d],b-1))}catch(f){}return c.length?c:a+("string"!=e?"\x00":"")}function j(a,b,c,d){for(a+="",c=0,d=0;d<a.length;d++)b[k(d)]=k((c^=19*b[k(d)])+a.charCodeAt(d));a="";for(d in b)a+=String.fromCharCode(b[d]);return a}function k(a){return a&c-1}b.seedrandom=function(k,l){var m,n=[];return k=j(i(l?[k,a]:arguments.length?k:[(new Date).getTime(),a,window],3),n),m=new h(n),j(m.S,a),b.random=function(){for(var a=m.g(d),b=g,h=0;e>a;)a=(a+h)*c,b*=c,h=m.g(1);for(;a>=f;)a/=2,b/=2,h>>>=1;return(a+h)/b},k},g=b.pow(c,d),e=b.pow(2,e),f=2*e,j(b.random(),a)}([],numeric.seedrandom,256,6,52),function(a){function b(a){if("object"!=typeof a)return a;var c,d=[],e=a.length;for(c=0;e>c;c++)d[c+1]=b(a[c]);return d}function c(a){if("object"!=typeof a)return a;var b,d=[],e=a.length;for(b=1;e>b;b++)d[b-1]=c(a[b]);return d}function d(a,b,c){var d,e,f,g,h;for(f=1;c>=f;f+=1){for(a[f][f]=1/a[f][f],h=-a[f][f],d=1;f>d;d+=1)a[d][f]=h*a[d][f];if(g=f+1,g>c)break;for(e=g;c>=e;e+=1)for(h=a[f][e],a[f][e]=0,d=1;f>=d;d+=1)a[d][e]=a[d][e]+h*a[d][f]}}function e(a,b,c,d){var e,f,g,h;for(f=1;c>=f;f+=1){for(h=0,e=1;f>e;e+=1)h+=a[e][f]*d[e];d[f]=(d[f]-h)/a[f][f]}for(g=1;c>=g;g+=1)for(f=c+1-g,d[f]=d[f]/a[f][f],h=-d[f],e=1;f>e;e+=1)d[e]=d[e]+h*a[e][f]}function f(a,b,c,d){var e,f,g,h,i,j;for(f=1;c>=f;f+=1){if(d[1]=f,j=0,g=f-1,1>g){if(j=a[f][f]-j,0>=j)break;a[f][f]=Math.sqrt(j)}else{for(h=1;g>=h;h+=1){for(i=a[h][f],e=1;h>e;e+=1)i-=a[e][f]*a[e][h];i/=a[h][h],a[h][f]=i,j+=i*i}if(j=a[f][f]-j,0>=j)break;a[f][f]=Math.sqrt(j)}d[1]=0}}function g(a,b,c,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){for(q[1]=q[1]+1,A=H,y=1;m>=y;y+=1){for(A+=1,N=-k[y],z=1;g>=z;z+=1)N+=j[z][y]*h[z];if(Math.abs(N)<V&&(N=0),y>n)r[A]=N;else if(r[A]=-Math.abs(N),N>0){for(z=1;g>=z;z+=1)j[z][y]=-j[z][y];k[y]=-k[y]}}for(y=1;p>=y;y+=1)r[H+o[y]]=0;for(J=0,M=0,y=1;m>=y;y+=1)r[H+y]<M*r[L+y]&&(J=y,M=r[H+y]/r[L+y]);return 0===J?999:0}function u(){for(y=1;g>=y;y+=1){for(N=0,z=1;g>=z;z+=1)N+=a[z][y]*j[z][J];r[y]=N}for(B=E,y=1;g>=y;y+=1)r[B+y]=0;for(z=p+1;g>=z;z+=1)for(y=1;g>=y;y+=1)r[B+y]=r[B+y]+a[y][z]*r[z];for(T=!0,y=p;y>=1;y-=1){for(N=r[y],A=G+y*(y+3)/2,B=A-y,z=y+1;p>=z;z+=1)N-=r[A]*r[F+z],A+=z;if(N/=r[B],r[F+y]=N,o[y]<n)break;if(0>N)break;T=!1,D=y}if(!T)for(O=r[I+D]/r[F+D],y=1;p>=y&&!(o[y]<n)&&!(r[F+y]<0);y+=1)M=r[I+y]/r[F+y],O>M&&(O=M,D=y);for(N=0,y=E+1;E+g>=y;y+=1)N+=r[y]*r[y];if(Math.abs(N)<=V){if(T)return s[1]=1,999;for(y=1;p>=y;y+=1)r[I+y]=r[I+y]-O*r[F+y];return r[I+p+1]=r[I+p+1]+O,700}for(N=0,y=1;g>=y;y+=1)N+=r[E+y]*j[y][J];for(P=-r[H+J]/N,U=!0,T||P>O&&(P=O,U=!1),y=1;g>=y;y+=1)h[y]=h[y]+P*r[E+y],Math.abs(h[y])<V&&(h[y]=0);for(i[1]=i[1]+P*N*(P/2+r[I+p+1]),y=1;p>=y;y+=1)r[I+y]=r[I+y]-P*r[F+y];if(r[I+p+1]=r[I+p+1]+P,!U){for(N=-k[J],z=1;g>=z;z+=1)N+=h[z]*j[z][J];if(J>n)r[H+J]=N;else if(r[H+J]=-Math.abs(N),N>0){for(z=1;g>=z;z+=1)j[z][J]=-j[z][J];k[J]=-k[J]}return 700}for(p+=1,o[p]=J,A=G+(p-1)*p/2+1,y=1;p-1>=y;y+=1)r[A]=r[y],A+=1;if(p===g)r[A]=r[g];else{for(y=g;y>=p+1&&0!==r[y]&&(Q=Math.max(Math.abs(r[y-1]),Math.abs(r[y])),R=Math.min(Math.abs(r[y-1]),Math.abs(r[y])),M=r[y-1]>=0?Math.abs(Q*Math.sqrt(1+R*R/(Q*Q))):-Math.abs(Q*Math.sqrt(1+R*R/(Q*Q))),Q=r[y-1]/M,R=r[y]/M,1!==Q);y-=1)if(0===Q)for(r[y-1]=R*M,z=1;g>=z;z+=1)M=a[z][y-1],a[z][y-1]=a[z][y],a[z][y]=M;else for(r[y-1]=M,S=R/(1+Q),z=1;g>=z;z+=1)M=Q*a[z][y-1]+R*a[z][y],a[z][y]=S*(a[z][y-1]+M)-a[z][y],a[z][y-1]=M;r[A]=r[p]}return 0}function v(){if(A=G+D*(D+1)/2+1,B=A+D,0===r[B])return 798;if(Q=Math.max(Math.abs(r[B-1]),Math.abs(r[B])),R=Math.min(Math.abs(r[B-1]),Math.abs(r[B])),M=r[B-1]>=0?Math.abs(Q*Math.sqrt(1+R*R/(Q*Q))):-Math.abs(Q*Math.sqrt(1+R*R/(Q*Q))),Q=r[B-1]/M,R=r[B]/M,1===Q)return 798;if(0===Q){for(y=D+1;p>=y;y+=1)M=r[B-1],r[B-1]=r[B],r[B]=M,B+=y;for(y=1;g>=y;y+=1)M=a[y][D],a[y][D]=a[y][D+1],a[y][D+1]=M}else{for(S=R/(1+Q),y=D+1;p>=y;y+=1)M=Q*r[B-1]+R*r[B],r[B]=S*(r[B-1]+M)-r[B],r[B-1]=M,B+=y;for(y=1;g>=y;y+=1)M=Q*a[y][D]+R*a[y][D+1],a[y][D+1]=S*(a[y][D]+M)-a[y][D+1],a[y][D]=M}return 0}function w(){for(B=A-D,y=1;D>=y;y+=1)r[B]=r[A],A+=1,B+=1;return r[I+D]=r[I+D+1],o[D]=o[D+1],D+=1,p>D?797:0}function x(){return r[I+p]=r[I+p+1],r[I+p+1]=0,o[p]=0,p-=1,q[2]=q[2]+1,0}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;K=Math.min(g,m),A=2*g+K*(K+5)/2+2*m+1,V=1e-60;do V+=V,W=1+.1*V,X=1+.2*V;while(1>=W||1>=X);for(y=1;g>=y;y+=1)r[y]=b[y];for(y=g+1;A>=y;y+=1)r[y]=0;for(y=1;m>=y;y+=1)o[y]=0;if(C=[],0===s[1]){if(f(a,c,g,C),0!==C[1])return void(s[1]=2);e(a,c,g,b),d(a,c,g)}else{for(z=1;g>=z;z+=1)for(h[z]=0,y=1;z>=y;y+=1)h[z]=h[z]+a[y][z]*b[y];for(z=1;g>=z;z+=1)for(b[z]=0,y=z;g>=y;y+=1)b[z]=b[z]+a[z][y]*h[y]}for(i[1]=0,z=1;g>=z;z+=1)for(h[z]=b[z],i[1]=i[1]+r[z]*h[z],r[z]=0,y=z+1;g>=y;y+=1)a[y][z]=0;for(i[1]=-i[1]/2,s[1]=0,E=g,F=E+g,I=F+K,G=I+K+1,H=G+K*(K+1)/2,L=H+m,y=1;m>=y;y+=1){for(N=0,z=1;g>=z;z+=1)N+=j[z][y]*j[z][y];r[L+y]=Math.sqrt(N)}for(p=0,q[1]=0,q[2]=0,Y=0;;){if(Y=t(),999===Y)return;for(;;){if(Y=u(),0===Y)break;if(999===Y)return;if(700===Y)if(D===p)x();else{for(;;)if(v(),Y=w(),797!==Y)break;x()}}}}function h(a,d,e,f,h,i){a=b(a),d=b(d),e=b(e);var j,k,l,m,n,o,p=[],q=[],r=[],s=[],t=[];if(h=h||0,i=i?b(i):[void 0,0],f=f?b(f):[],k=a.length-1,l=e[1].length-1,!f)for(j=1;l>=j;j+=1)f[j]=0;for(j=1;l>=j;j+=1)q[j]=0;for(m=0,n=Math.min(k,l),j=1;k>=j;j+=1)r[j]=0;for(p[1]=0,j=1;2*k+n*(n+5)/2+2*l+1>=j;j+=1)s[j]=0;for(j=1;2>=j;j+=1)t[j]=0;return g(a,d,k,k,r,p,e,f,k,l,h,q,m,t,s,i),o="",1===i[1]&&(o="constraints are inconsistent, no solution!"),2===i[1]&&(o="matrix D in quadratic function is not positive definite!"),{solution:c(r),value:c(p),unconstrained_solution:c(d),iterations:c(t),iact:c(q),message:o}}a.solveQP=h}(numeric),numeric.svd=function(a){function b(a,b){return a=Math.abs(a),b=Math.abs(b),a>b?a*Math.sqrt(1+b*b/a/a):0==b?a:b*Math.sqrt(1+a*a/b/b)}var c,d=numeric.epsilon,e=1e-64/d,f=50,g=0,h=0,i=0,j=0,k=0,l=numeric.clone(a),m=l.length,n=l[0].length;if(n>m)throw"Need more rows than columns";var o=new Array(n),p=new Array(n);for(h=0;n>h;h++)o[h]=p[h]=0;var q=numeric.rep([n,n],0),r=0,s=0,t=0,u=0,v=0,w=0,x=0;for(h=0;n>h;h++){for(o[h]=s,x=0,k=h+1,i=h;m>i;i++)x+=l[i][h]*l[i][h];if(e>=x)s=0;else for(r=l[h][h],s=Math.sqrt(x),r>=0&&(s=-s),t=r*s-x,l[h][h]=r-s,i=k;n>i;i++){for(x=0,j=h;m>j;j++)x+=l[j][h]*l[j][i];for(r=x/t,j=h;m>j;j++)l[j][i]+=r*l[j][h]}for(p[h]=s,x=0,i=k;n>i;i++)x+=l[h][i]*l[h][i];if(e>=x)s=0;else{for(r=l[h][h+1],s=Math.sqrt(x),r>=0&&(s=-s),t=r*s-x,l[h][h+1]=r-s,i=k;n>i;i++)o[i]=l[h][i]/t;for(i=k;m>i;i++){for(x=0,j=k;n>j;j++)x+=l[i][j]*l[h][j];for(j=k;n>j;j++)l[i][j]+=x*o[j]}}v=Math.abs(p[h])+Math.abs(o[h]),v>u&&(u=v)}for(h=n-1;-1!=h;h+=-1){if(0!=s){for(t=s*l[h][h+1],i=k;n>i;i++)q[i][h]=l[h][i]/t;for(i=k;n>i;i++){for(x=0,j=k;n>j;j++)x+=l[h][j]*q[j][i];for(j=k;n>j;j++)q[j][i]+=x*q[j][h]}}for(i=k;n>i;i++)q[h][i]=0,q[i][h]=0;q[h][h]=1,s=o[h],k=h}for(h=n-1;-1!=h;h+=-1){for(k=h+1,s=p[h],i=k;n>i;i++)l[h][i]=0;if(0!=s){for(t=l[h][h]*s,i=k;n>i;i++){for(x=0,j=k;m>j;j++)x+=l[j][h]*l[j][i];for(r=x/t,j=h;m>j;j++)l[j][i]+=r*l[j][h]}for(i=h;m>i;i++)l[i][h]=l[i][h]/s}else for(i=h;m>i;i++)l[i][h]=0;l[h][h]+=1}for(d*=u,j=n-1;-1!=j;j+=-1)for(var y=0;f>y;y++){var z=!1;for(k=j;-1!=k;k+=-1){if(Math.abs(o[k])<=d){z=!0;break}if(Math.abs(p[k-1])<=d)break}if(!z){g=0,x=1;var A=k-1;for(h=k;j+1>h&&(r=x*o[h],o[h]=g*o[h],!(Math.abs(r)<=d));h++)for(s=p[h],t=b(r,s),p[h]=t,g=s/t,x=-r/t,i=0;m>i;i++)v=l[i][A],w=l[i][h],l[i][A]=v*g+w*x,l[i][h]=-v*x+w*g}if(w=p[j],k==j){if(0>w)for(p[j]=-w,i=0;n>i;i++)q[i][j]=-q[i][j];break}if(y>=f-1)throw"Error: no convergence.";for(u=p[k],v=p[j-1],s=o[j-1],t=o[j],r=((v-w)*(v+w)+(s-t)*(s+t))/(2*t*v),s=b(r,1),r=0>r?((u-w)*(u+w)+t*(v/(r-s)-t))/u:((u-w)*(u+w)+t*(v/(r+s)-t))/u,g=1,x=1,h=k+1;j+1>h;h++){for(s=o[h],v=p[h],t=x*s,s=g*s,w=b(r,t),o[h-1]=w,g=r/w,x=t/w,r=u*g+s*x,s=-u*x+s*g,t=v*x,v*=g,i=0;n>i;i++)u=q[i][h-1],w=q[i][h],q[i][h-1]=u*g+w*x,q[i][h]=-u*x+w*g;for(w=b(r,t),p[h-1]=w,g=r/w,x=t/w,r=g*s+x*v,u=-x*s+g*v,i=0;m>i;i++)v=l[i][h-1],w=l[i][h],l[i][h-1]=v*g+w*x,l[i][h]=-v*x+w*g}o[k]=0,o[j]=r,p[j]=u}for(h=0;h<p.length;h++)p[h]<d&&(p[h]=0);for(h=0;n>h;h++)for(i=h-1;i>=0;i--)if(p[i]<p[h]){for(g=p[i],p[i]=p[h],p[h]=g,j=0;j<l.length;j++)c=l[j][h],l[j][h]=l[j][i],l[j][i]=c;for(j=0;j<q.length;j++)c=q[j][h],q[j][h]=q[j][i],q[j][i]=c;h=i}return{U:l,S:p,V:q}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){!function(){"use strict";function a(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d}function c(a,b,c){var d=b.x,e=b.y,f=c.x-d,g=c.y-e;if(0!==f||0!==g){var h=((a.x-d)*f+(a.y-e)*g)/(f*f+g*g);h>1?(d=c.x,e=c.y):h>0&&(d+=f*h,e+=g*h)}return f=a.x-d,g=a.y-e,f*f+g*g}function d(b,c){for(var d,e=b[0],f=[e],g=1,h=b.length;h>g;g++)d=b[g],a(d,e)>c&&(f.push(d),e=d);return e!==d&&f.push(d),f}function e(a,b){var d,e,f,g,h=a.length,i="undefined"!=typeof Uint8Array?Uint8Array:Array,j=new i(h),k=0,l=h-1,m=[],n=[];for(j[k]=j[l]=1;l;){for(e=0,d=k+1;l>d;d++)f=c(a[d],a[k],a[l]),f>e&&(g=d,e=f);e>b&&(j[g]=1,m.push(k,g,g,l)),l=m.pop(),k=m.pop()}for(d=0;h>d;d++)j[d]&&n.push(a[d]);return n}function f(a,b,c){var f=void 0!==b?b*b:1;return a=c?a:d(a,f),a=e(a,f)}"function"==typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof b?b.exports=f:"undefined"!=typeof self?self.simplify=f:window.simplify=f}()},{}],10:[function(a,b,c){"use strict";function d(a,b,c,d){this.points=a,this.ids=b,this.dimension=d,this.length=c}function e(a){var b,c,e;if(Array.isArray(a)){if(b=a.length,0===b)return new d(null,null,0,0);c=a[0].length,e=g(l.mallocDouble(b*(c+1)),[b,c+1]),i(a,e.hi(b,c))}else{b=a.shape[0],c=a.shape[1];var f=a.dtype;f="int8"===f||"int16"===f||"int32"===f?"int32":"uint8"===f||"uint8_clamped"===f||"buffer"===f||"uint16"===f||"uint32"===f?"uint32":"float32"===f?"float32":"float64",e=g(l.malloc(b*(c+1)),[b,c+1]),j.assign(e.hi(b,c),a)}for(var o=0;b>o;++o)e.set(o,c,o);for(var p=k.malloc([b,c],a.dtype),q=l.mallocInt32(b),r=0,s=p.data,t=e.data,u=(n.log2(n.nextPow2(b)),h.compile(e.order,!0,e.dtype)),v=[e];b>r;){var w=v.shift(),x=w,y=0|x.shape[0];if(y>1){var z,A=n.log2(r+1)%c,B=m.root(y);z=u(x,B,function(a,b){return a.get(A)-b.get(A)});for(var C=p.index(r,0),D=z.offset,o=0;c>o;++o)s[C++]=t[D++];q[r]=t[D],r+=1,v.push(x.hi(B)),y>2&&v.push(x.lo(B+1))}else{for(var D=x.offset,C=p.index(r,0),o=0;c>o;++o)s[C+o]=t[D++];q[r]=t[D],r+=1}}return l.free(e.data),new d(p,q,b,c)}function f(a){var b=a.p,c=a.i;if(b){for(var e=b.length,f=l.mallocFloat64(e),h=0;e>h;++h)f[h]=b[h];for(var i=c.length,j=l.mallocInt32(i),h=0;i>h;++h)j[h]=c[h];var k=e/i|0;return new d(g(f,[i,k]),j,i,k)}return new d(null,null,0,a.d)}b.exports=e,b.exports.deserialize=f;var g=a("ndarray"),h=a("ndarray-select"),i=a("ndarray-pack"),j=a("ndarray-ops"),k=a("ndarray-scratch"),l=a("typedarray-pool"),m=a("inorder-tree-layout"),n=a("bit-twiddle"),o=a("./lib/heap.js"),p=d.prototype;p.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},p.range=function(a,b,c){var d=this.length;if(!(1>d)){for(var e=this.dimension,f=0;e>f;++f)if(b[f]<a[f])return;var g,h=this.points,j=this.ids,m=k.malloc([d,2,e]),o=l.mallocInt32(d),p=m.data,q=h.data,r=1,s=0;for(o[0]=0,i(a,m.pick(0,0)),i(b,m.pick(0,1));r>s;){for(var t=o[s],u=n.log2(t+1)%e,v=m.index(s,0,0),w=m.index(s,1,0),x=h.index(t,0),y=!0,f=0;e>f;++f){var z=q[x+f];if(z<p[v+f]||p[w+f]<z){y=!1;break}}if(y&&(g=c(j[t]),void 0!==g))break;var A=q[x+u],B=p[w+u],C=p[v+u];if(A>=C){var D=2*t+1;if(d>D){o[r]=D;for(var E=m.index(r,0,0),f=0;e>f;++f)p[E+f]=p[v+f];for(var F=m.index(r,1,0),f=0;e>f;++f)p[F+f]=p[w+f];p[F+u]=Math.min(B,A),r+=1}}if(B>=A){var G=2*(t+1);if(d>G){o[r]=G;for(var E=m.index(r,0,0),f=0;e>f;++f)p[E+f]=p[v+f];for(var F=m.index(r,1,0),f=0;e>f;++f)p[F+f]=p[w+f];p[E+u]=Math.max(C,A),r+=1}}s+=1}return k.free(m),l.free(o),g}},p.rnn=function(a,b,c){if(!(0>b)){var d=this.length;if(!(1>d)){var e,f=this.dimension,g=this.points,h=this.ids,i=k.malloc([d,f]),j=l.mallocInt32(d),m=i.data,o=g.data,p=1,q=0,r=b*b;j[0]=0;for(var s=0;f>s;++s)i.set(0,s,0);for(;p>q;){for(var t=j[q],u=g.index(t,0),v=0,s=0;f>s;++s)v+=Math.pow(a[s]-o[u+s],2);if(r>=v&&(e=c(h[t]),void 0!==e))break;for(var w=n.log2(t+1)%f,x=0,y=i.index(q,0),s=0;f>s;++s)s!==w&&(x+=m[y+s]);var z=a[w],A=o[u+w],B=m[y+w],C=B,D=B;A>z?D=Math.max(B,Math.pow(A-z,2)):C=Math.max(B,Math.pow(A-z,2));var E=C+x,F=D+x;if(r>=E){var G=2*t+1;if(d>G){j[p]=G;for(var H=i.index(p,0),s=0;f>s;++s)m[H+s]=m[y+s];m[H+w]=C,p+=1}}if(r>=F){var I=2*(t+1);if(d>I){j[p]=I;for(var H=i.index(p,0),s=0;f>s;++s)m[H+s]=m[y+s];m[H+w]=D,p+=1}}q+=1}return k.free(i),l.free(j),e}}},p.nn=function(a,b){var c=this.length;if(1>c)return-1;if("number"==typeof b){if(0>b)return-1}else b=1/0;var d=this.dimension,e=this.points,f=e.data,g=l.mallocFloat64(d),h=new o(c,d+1),i=h.index,j=h.data;i[0]=0;for(var k=0;d>=k;++k)j[k]=0;h.count+=1;for(var m=-1,p=b;h.count>0&&!(j[0]>=p);){for(var q=i[0],r=e.index(q,0),s=0,k=0;d>k;++k)s+=Math.pow(a[k]-f[r+k],2);p>s&&(p=s,m=q);for(var t=n.log2(q+1)%d,u=0,k=0;d>k;++k){var v=j[k+1];k!==t&&(u+=v),g[k]=v}var w=a[t],x=f[r+t],y=g[t],z=y,A=y;x>w?A=Math.max(y,Math.pow(x-w,2)):z=Math.max(y,Math.pow(x-w,2));var B=z+u,C=A+u;if(h.pop(),p>B){var D=2*q+1;if(c>D){var E=h.count;i[E]=D;var F=E*(d+1);j[F]=B;for(var k=1;d>=k;++k)j[F+k]=g[k-1];j[F+t+1]=z,h.push()}}if(p>C){var G=2*(q+1);if(c>G){var E=h.count;i[E]=G;var F=E*(d+1);j[F]=C;for(var k=1;d>=k;++k)j[F+k]=g[k-1];j[F+t+1]=A,h.push()}}}return l.freeFloat64(g),h.dispose(),0>m?-1:this.ids[m]},p.knn=function(a,b,c){if("number"==typeof c){if(0>c)return[]}else c=1/0;var d=this.length;if(1>d)return[];if("number"==typeof b){if(0>=b)return[];b=0|Math.min(b,d)}else b=d;var e=this.ids,f=this.dimension,g=this.points,h=g.data,i=l.mallocFloat64(f),j=new o(b,1),k=j.index,m=j.data,p=new o(d,f+1),q=p.index,r=p.data;q[0]=0;for(var s=0;f>=s;++s)r[s]=0;p.count+=1;for(var t=c;p.count>0&&!(r[0]>=t);){for(var u=q[0],v=g.index(u,0),w=0,s=0;f>s;++s)w+=Math.pow(a[s]-h[v+s],2);if(t>w){j.count>=b&&j.pop();var x=j.count;k[x]=u,m[x]=-w,j.push(),j.count>=b&&(t=-m[0])}for(var y=n.log2(u+1)%f,z=0,s=0;f>s;++s){var A=r[s+1];s!==y&&(z+=A),i[s]=A}var B=a[y],C=h[v+y],D=i[y],E=D,F=D;C>B?F=Math.max(D,Math.pow(C-B,2)):E=Math.max(D,Math.pow(C-B,2));var G=E+z,H=F+z;if(p.pop(),t>G){var I=2*u+1;if(d>I){var J=p.count;q[J]=I;var K=J*(f+1);r[K]=G;for(var s=1;f>=s;++s)r[K+s]=i[s-1];r[K+y+1]=E,p.push()}}if(t>H){var L=2*(u+1);if(d>L){var J=p.count;q[J]=L;var K=J*(f+1);r[K]=H;for(var s=1;f>=s;++s)r[K+s]=i[s-1];r[K+y+1]=F,p.push()}}}l.freeFloat64(i),p.dispose();for(var M=new Array(j.count),e=this.ids,s=j.count-1;s>=0;--s)M[s]=e[k[0]],j.pop();return j.dispose(),M},p.dispose=function(){l.free(this.points.data),l.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":11,"bit-twiddle":12,"inorder-tree-layout":13,ndarray:28,"ndarray-ops":15,"ndarray-pack":20,"ndarray-scratch":26,"ndarray-select":27,"typedarray-pool":32}],11:[function(a,b,c){"use strict";function d(a){return 1&a?a-1>>1:(a>>1)-1}function e(a,b){this.count=0,this.dataSize=b,this.index=f.mallocInt32(a),this.data=f.mallocFloat64(a*b)}b.exports=e;var f=a("typedarray-pool"),g=e.prototype;g.heapSwap=function(a,b){var c=this.data,d=this.index,e=this.dataSize,f=d[a];d[a]=d[b],d[b]=f;for(var g=e*a,h=e*b,i=0;e>i;++i){var j=c[g];c[g]=c[h],c[h]=j,g+=1,h+=1}},g.heapUp=function(a){for(var b=this.dataSize,c=(this.index,this.data),e=c[b*a];a>0;){var f=d(a);if(f>=0){var g=c[b*f];if(g>e){this.heapSwap(a,f),a=f;continue}}break}},g.heapDown=function(a){for(var b=this.dataSize,c=(this.index,this.data),d=this.count,e=c[b*a];;){var f=e,g=2*a+1,h=2*(a+1),i=a;if(d>g){var j=c[b*g];f>j&&(i=g,f=j)}if(d>h){var k=c[b*h];f>k&&(i=h)}if(i===a)break;this.heapSwap(a,i),a=i}},g.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},g.push=function(){this.heapUp(this.count),this.count+=1},g.dispose=function(){f.freeInt32(this.index),f.freeFloat64(this.data)}},{"typedarray-pool":32}],12:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(0>a)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(b>a)},c.max=function(a,b){return a^(a^b)&-(b>a)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;256>b;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],13:[function(a,b,c){"use strict";function d(a){var b=(p.nextPow2(a+1)>>>1)-1,c=a-b;return p.nextPow2(c)-1>=b?b:(b>>>1)+c}function e(a){return 0}function f(a){return a-1}function g(a,b){if(0>=a)return 0;var c=d(a);return b>c?g(a-c-1,b-c-1):b===c?p.log2(a):g(c,b)}function h(a,b){return Math.max(b-1,0)}function i(a,b){return Math.min(b+1,a-1)}function j(a,b){if(0>=a)return-1;var c=d(a);if(b>c){var e=j(a-c-1,b-c-1);return 0>e?c:e+c+1}if(b===c)return-1;var e=j(c,b);return 0>e?c:e}function k(a,b){if(0>=a)return 0;var c=d(a);return b>c?k(a-c-1,b-c-1)+c+1:b===c?d(b):k(c,b)}function l(a,b){if(0>=a)return 0;var c=d(a);return b>c?l(a-c-1,b-c-1)+c+1:b===c?d(a-c-1)+c+1:l(c,b)}function m(a,b){return 0===g(a,b)}function n(a,b){a|=0,b|=0;for(var c=0;a>1;){var e=d(a);if(b>e)c+=e+1,a-=e+1,b-=e+1;else{if(b===e)break;a=e}}return c}function o(a,b){a|=0,b|=0;for(var c=0;a>1;){var e=d(a);if(b>e)c+=e+1,a-=e+1,b-=e+1;else{if(b===e){c+=a-1;break}a=e}}return c}var p=a("bit-twiddle");c.root=d,c.begin=e,c.end=f,c.height=g,c.prev=h,c.next=i,c.parent=j,c.left=k,c.right=l,c.leaf=m,c.lo=n,c.hi=o},{"bit-twiddle":14}],14:[function(a,b,c){arguments[4][12][0].apply(c,arguments)},{dup:12}],15:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];0===b?a.args[b]={name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[b]={name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);var d=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));return d(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":16}],16:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":18}],17:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;f>d;++d)j.push(["i",d,"=0"].join(""));for(e=0;g>e;++e)for(d=0;f>d;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;f>d;++d){for(l=k,k=a[d],e=0;g>e;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;g>k;++k)j.push(["var offset",k,"=p",k].join(""));
for(var k=a;f>k;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;g>k;++k){for(var l=["offset"+k],m=a;f>m;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;f>k;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;c>b;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[l];k=m.array,j="+q"+l;case"array":j="p"+k+j;var n="l"+g,o="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),f.push([o,".set(",j,",",n,")"].join(""))):d=d.replace(i,[o,".get(",j,")"].join("")):d=d.replace(i,[o,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,".set(",j,",",n,")"].join(""))):(e.push(["var ",n,"=",o,"[",j,"]"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,"[",j,"]=",n].join("")));else{for(var p=[h.name],q=[j],r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)p.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(r+1)+"*t"+k+"b"+r);if(i=new RegExp(p.join(""),"g"),j=q.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[o,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;c>s;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;c>s;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;c>l;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);c>B?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join(""),D=new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""));return D()}var j=a("uniq");b.exports=i},{uniq:19}],18:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");var m=new Function("compile",b.join("\n"));return m(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":17}],19:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;d>g;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;c>f;++f,e=d)if(e=d,d=a[f],d!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],20:[function(a,b,c){"use strict";var d=a("ndarray"),e=a("./doConvert.js");b.exports=function(a,b){for(var c=[],f=a,g=1;f instanceof Array;)c.push(f.length),g*=f.length,f=f[0];return 0===c.length?d():(b||(b=d(new Float64Array(g),c)),e(b,a),b)}},{"./doConvert.js":21,ndarray:28}],21:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":22}],22:[function(a,b,c){arguments[4][16][0].apply(c,arguments)},{"./lib/thunk.js":24,dup:16}],23:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{dup:17,uniq:25}],24:[function(a,b,c){arguments[4][18][0].apply(c,arguments)},{"./compile.js":23,dup:18}],25:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],26:[function(a,b,c){"use strict";function d(a){var b=a.dtype;("generic"===b||"array"===b)&&(b="double");var c=l.malloc(a.size,b),d=j(c,a.shape);return k.assign(d,a),d}function e(a,b){b||(b="double");for(var c=1,d=new Array(a.length),e=a.length-1;e>=0;--e)d[e]=c,c*=a[e];return j(l.malloc(c,b),a,d,0)}function f(a){"generic"!==a.dtype&&"array"!==a.dtype&&l.free(a.data)}function g(a,b){b||(b="double");for(var c=1,d=new Array(a.length),e=a.length-1;e>=0;--e)d[e]=c,c*=a[e];for(var f=l.malloc(c,b),e=0;c>e;++e)f[e]=0;return j(f,a,d,0)}function h(a,b){b||(b="double");for(var c=1,d=new Array(a.length),e=a.length-1;e>=0;--e)d[e]=c,c*=a[e];for(var f=l.malloc(c,b),e=0;c>e;++e)f[e]=1;return j(f,a,d,0)}function i(a,b){var c,d;b||(b="double");var e=1,f=new Array(a.length);for(c=a.length-1;c>=0;--c)f[c]=e,e*=a[c];var g=l.malloc(e,b);for(c=0;e>c;++c)g[c]=0;var h=1/0,i=0;for(c=a.length-1;c>=0;c--)i+=f[c],h=Math.min(h,a[c]);for(c=0,d=0;h>c;c++,d+=i)g[d]=1;return j(g,a,f,0)}var j=a("ndarray"),k=a("ndarray-ops"),l=a("typedarray-pool");c.clone=d,c.malloc=e,c.free=f,c.zeros=g,c.ones=h,c.eye=i},{ndarray:28,"ndarray-ops":15,"typedarray-pool":32}],27:[function(a,b,c){"use strict";function d(a){return"s"+a}function e(a){return"t"+a}function f(a){return"u"+a}function g(a){return"v"+a}function h(a){return"i"+a}function i(a){return"p"+a}function j(a){return"x"+a}function k(a){var b=a.slice();return b.splice(a.indexOf(0),1),b.unshift(0),b}function l(a,b,c){function l(c,f,k){if(b)A.push(i(0),".offset=",s,"+",e(a[0]),"*(",f,");",i(1),".offset=",s,"+",e(a[0]),"*(",k,");",c,"=",q,"(",i(0),",",i(1),");");else{A.push(j(0),"=",s,"+",e(0),"*(",f,");",j(1),"=",s,"+",e(0),"*(",k,");"),n>1&&A.push("_cmp:");for(var l=n-1;l>0;--l)A.push("for(",h(l),"=0;",h(l),"<",d(l),";",h(l),"++){");y?A.push(c,"=",r,".get(",j(0),")-",r,".get(",j(1),");"):A.push(c,"=",r,"[",j(0),"]-",r,"[",j(1),"];"),n>1&&A.push("if(",c,")break _cmp;");for(var l=1;n>l;++l)A.push(j(0),"+=",g(l),";",j(1),"+=",g(l),"}")}}function m(b,c){A.push(j(0),"=",s,"+",e(a[0]),"*(",b,");",j(1),"=",s,"+",e(a[0]),"*(",c,");");for(var g=n-1;g>0;--g)A.push("for(",h(a[g]),"=0;",h(a[g]),"<",d(a[g]),";",h(a[g]),"++){");y?A.push(u,"=",r,".get(",j(0),");",r,".set(",j(0),",",r,".get(",j(1),"));",r,".set(",j(1),",",u,");"):A.push(u,"=",r,"[",j(0),"];",r,"[",j(0),"]=",r,"[",j(1),"];",r,"[",j(1),"]=",u,";");for(var g=1;n>g;++g)A.push(j(0),"+=",f(a[g]),";",j(1),"+=",f(a[g]),"}")}a=k(a);var n=a.length,y="generic"===c,z="ndSelect"+c+a.join("_")+"_"+(b?"cmp":"lex"),A=[],B=[o,p];b&&B.push(q);for(var C=[r+"="+o+".data",s+"="+o+".offset|0",t+"=Math.random",u],D=0;2>D;++D)C.push(j(D)+"=0");for(var D=0;n>D;++D)C.push(d(D)+"="+o+".shape["+D+"]|0",e(D)+"="+o+".stride["+D+"]|0",h(D)+"=0");for(var D=1;n>D;++D)D>1?C.push(g(D)+"=("+e(D)+"-"+d(D-1)+"*"+e(D-1)+")|0",f(a[D])+"=("+e(a[D])+"-"+d(a[D-1])+"*"+e(a[D-1])+")|0"):C.push(g(D)+"="+e(D),f(a[D])+"="+e(a[D]));if(b)for(var D=0;2>D;++D)C.push(i(D)+"="+o+".pick(0)");C.push(x+"=0",v+"=0",w+"="+d(a[0])+"-1"),A.push("while(",v,"<",w,"){",x,"=(",t,"()*(",w,"-",v,"+1)+",v,")|0;"),m(x,w),A.push(x,"=",v,";","for(",h(0),"=",v,";",h(0),"<",w,";",h(0),"++){"),l(u,h(0),w),A.push("if(",u,"<0){"),m(x,h(0)),A.push(x,"++;"),A.push("}}"),m(x,w),A.push("if(",x,"===",p,"){",v,"=",x,";","break;","}else if(",p,"<",x,"){",w,"=",x,"-1;","}else{",v,"=",x,"+1;","}","}"),b?A.push(i(0),".offset=",s,"+",v,"*",e(0),";","return ",i(0),";"):A.push("return ",o,".pick(",v,");");var E=["'use strict';function ",z,"(",B,"){","var ",C.join(),";",A.join(""),"};return ",z].join(""),F=new Function(E);return F()}function m(a,b,c){var d=a.join()+b+c,e=y[d];return e?e:y[d]=l(a,b,c)}function n(a,b,c){if(b|=0,0===a.dimension||a.shape[0]<=b||0>b)return null;var d=!!c,e=m(a.order,d,a.dtype);return d?e(a,b,c):e(a,b)}b.exports=n,b.exports.compile=m;var o="a",p="K",q="C",r="d",s="o",t="R",u="T",v="L",w="H",x="X",y={}},{}],28:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");0>b&&(c="View_Nil"+a);var d="generic"===a;if(-1===b){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>b?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;b>q;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;b>q;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;h>i;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":29,"is-buffer":30}],29:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;a>c;++c)b[c]=c;return b}b.exports=d},{}],30:[function(a,b,c){b.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],31:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(0>=e)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;e>f;++f)g[f]=b;else for(f=0;e>f;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;a>d;++d)c[d]=b;return c}function f(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],32:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;32>a;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":12,buffer:2,dup:31}],33:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d(a.topojson={})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=(a[0]-g)/e|0,j=(a[1]-h)/f|0;a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[0>a?~a:a],f=0,g=d.length;g>f;++f)b.push(c=d[f].slice()),k(c,f);0>a&&e(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;e>c;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=0>b?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h=d(b[0][0]),i=0;c>i;++i)if(h===d(f[i])){g=f[0],f[0]=f[i],f[i]=g;break}return f})}}function q(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&r(d[f],h)<0&&(h=d[g=f]),e>c&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;i>d;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;i>d;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;i>d;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.24";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t})},{}],34:[function(a,b,c){var d;d=a("../color/sort.coffee"),b.exports=function(a,b,c,e,f,g,h){var i,j,k;for(e||(e="asc"),f instanceof Array||(f=[f]),c instanceof Array||(c=[c]),g&&void 0!==h&&"number"!=typeof h&&(h=g.id.nesting.indexOf(h)),k=0,i=0;i<c.length&&(j=c[i],a=g&&a.d3plus&&a.d3plus.sortKeys?a.d3plus.sortKeys[j]:a[j],b=g&&b.d3plus&&b.d3plus.sortKeys?b.d3plus.sortKeys[j]:b[j],k=g&&f.indexOf(j)>=0?d(a,b):b>a?-1:1,0===k&&i!==c.length-1);)i++;return"asc"===e?k:-k}},{"../color/sort.coffee":51}],35:[function(a,b,c){b.exports=function(a,b){var c;return a instanceof Array?(c=void 0===b||null===b?b:b.constructor,a.indexOf(b)>=0||a.indexOf(c)>=0):!1}},{}],36:[function(a,b,c){var d,e;d=a("./comparator.coffee"),e=a("../core/fetch/sort.coffee"),b.exports=function(a,b,c,f,g,h){var i,j,k,l;if(!a||a.length<=1)return a||[];if(g)for(b||(b=g.order.value||g.size.value||g.id.value),c||(c=g.order.sort.value),f||(f=g.color.value||[]),k=0,l=a.length;l>k;k++)i=a[k],i.d3plus||(i.d3plus={}),j="d3plus"in i&&"d3plus"in i.d3plus?i.d3plus:i,i.d3plus.sortKeys=e(g,j,b,f,h);return a.sort(function(a,e){return d(a,e,b,c,f,g,h)})}},{"../core/fetch/sort.coffee":67,"./comparator.coffee":34}],37:[function(a,b,c){b.exports=function(a,b){return void 0===b?a:b===!1?[]:b instanceof Array?b:(a instanceof Array||(a=[]),a.indexOf(b)>=0?a.splice(a.indexOf(b),1):a.push(b),a)}},{}],38:[function(a,b,c){var d;d=function(a){var b,c,e,f;if(f=d.tested,a in f)return f[a];for(c=0,e=!1;c<document.styleSheets.length;){if(b=document.styleSheets[c],b.href&&b.href.indexOf(a)>=0){e=!0;break}c++}return e},d.tested={},b.exports=d},{}],39:[function(a,b,c){b.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],40:[function(a,b,c){var d,e;d=a("./ie.js"),e=a("./touch.coffee"),e?b.exports={click:"click",down:"touchstart",up:"touchend",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}:b.exports={click:"click",down:"mousedown",up:"mouseup",over:d?"mouseenter":"mouseover",out:d?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":39,"./touch.coffee":45}],41:[function(a,b,c){var d;d=function(){var a;return a="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",d=function(){return a},a},b.exports=d},{}],42:[function(a,b,c){b.exports="rtl"===d3.select("html").attr("dir")},{}],43:[function(a,b,c){b.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],44:[function(a,b,c){var d;d=function(){var a,b,c,e,f;return a=document.createElement("p"),a.style.width="100%",a.style.height="200px",b=document.createElement("div"),b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),document.body.appendChild(b),e=a.offsetWidth,b.style.overflow="scroll",f=a.offsetWidth,e===f&&(f=b.clientWidth),document.body.removeChild(b),c=e-f,d=function(){return c},c},b.exports=d},{}],45:[function(a,b,c){b.exports="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},{}],46:[function(a,b,c){b.exports=function(a){var b;return b=d3.hsl(a),b.l>.45&&(b.s>.8&&(b.s=.8),b.l=.45),b.toString()}},{}],47:[function(a,b,c){b.exports=function(a,b){var c;return void 0===b&&(b=.5),c=d3.hsl(a),b=(1-c.l)*b,c.l+=b,c.s-=b,c.toString()}},{}],48:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g;return c||(c=1),d||(d=1),a=d3.rgb(a),b=d3.rgb(b),g=(c*a.r+d*b.r-c*d*b.r)/(c+d-c*d),f=(c*a.g+d*b.g-c*d*b.g)/(c+d-c*d),e=(c*a.b+d*b.b-c*d*b.b)/(c+d-c*d),d3.rgb(g,f,e).toString()}},{}],49:[function(a,b,c){var d;d=a("./scale.coffee"),b.exports=function(a,b){var c;return c=a||Math.floor(20*Math.random()),(b=b||d)(c)}},{"./scale.coffee":50}],50:[function(a,b,c){b.exports=d3.scale.ordinal().range(["#b22200","#282F6B","#EACE3F","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"]);
},{}],51:[function(a,b,c){b.exports=function(a,b){var c,d;return c=d3.hsl(a),d=d3.hsl(b),a=0===c.s?361:c.h,b=0===d.s?361:d.h,a===b?c.l-d.l:a-b}},{}],52:[function(a,b,c){b.exports=function(a){var b,c,d,e,f;return e=d3.rgb(a),d=e.r,c=e.g,b=e.b,f=(299*d+587*c+114*b)/1e3,f>=128?"#444444":"#f7f7f7"}},{}],53:[function(a,b,c){b.exports=function(a){var b,c,d;return a+="",a=a.replace(RegExp(" ","g"),""),0===a.indexOf("rgb")&&(a=a.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===a.indexOf("hsl")&&(a=a.split(",")[2].split(")")[0]),c=d3.rgb(a).toString(),b=["black","#000","#000000","0%","0,0,0"],d=b.indexOf(a)>=0,"#000000"!==c||d}},{}],54:[function(a,b,c){var d,e,f;d=a("../../client/ie.js"),f=a("./wiki.coffee"),e=function(a,b,c){c=c||"",d||"undefined"!=typeof InstallTrigger?console.log("[ D3plus ] "+b):0===a.indexOf("group")?console[a]("%c[ D3plus ]%c "+b,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+c):console[a]("%c"+b,c+"font-weight:200;")},e.comment=function(a){this("log",a,"color:#aaa;")},e.error=function(a,b){this("groupCollapsed","ERROR: "+a,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(b),this.groupEnd()},e.group=function(a){this("group",a,"color:#888;")},e.groupCollapsed=function(a){this("groupCollapsed",a,"color:#888;")},e.groupEnd=function(){d||console.groupEnd()},e.log=function(a){this("log",a,"color:#444444;")},e.stack=function(){var a,b,c,e,f,g,h;d||(a=new Error,a.stack&&(g=a.stack.split("\n"),g=g.filter(function(a){return 0!==a.indexOf("Error")&&a.indexOf("d3plus.js:")<0&&a.indexOf("d3plus.min.js:")<0}),g.length&&g[0].length&&(f=window.chrome?"at ":"@",h=g[0],h.indexOf(f)>=0&&(h=h.split(f)[1]),g=h.split(":"),3===g.length&&g.pop(),b=g.pop(),e=g.join(":").split("/"),e=e[e.length-1],c="line "+b+" of "+e+": "+h,this("log",c,"color:#D74B03;"))))},e.time=function(a){d||console.time(a)},e.timeEnd=function(a){d||console.timeEnd(a)},e.warning=function(a,b){this("groupCollapsed",a,"color:#888;"),this.stack(),this.wiki(b),this.groupEnd()},e.wiki=function(a){a&&(a in f&&(a=d3plus.repo+"wiki/"+f[a]),this("log","documentation: "+a,"color:#aaa;"))},b.exports=e},{"../../client/ie.js":39,"./wiki.coffee":55}],55:[function(a,b,c){b.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}},{}],56:[function(a,b,c){var d=a("../../util/buckets.coffee"),e=a("../fetch/value.coffee"),f=a("../console/print.coffee");b.exports=function(a){if(a.dev.value&&f.time("getting color data range"),a.color.domain.value)var b=a.color.domain.value;else{var b=[];a.data.pool.forEach(function(c){var d=parseFloat(e(a,c,a.color.value));"number"==typeof d&&!isNaN(d)&&b.indexOf(d)<0&&b.push(d)})}if(a.dev.value&&f.timeEnd("getting color data range"),b.length>1){if(a.dev.value&&f.time("calculating color scale"),b=d3.extent(b),b[0]<0&&b[1]>0){var c=a.color.range;3==c.length&&(b.push(b[1]),b[1]=0)}else if(b[1]>0&&b[0]>=0){var c=a.color.heatmap;b=d(b,c.length)}else{var c=a.color.range.slice(0);b[0]<0?c.pop():c.shift()}a.color.valueScale=d3.scale.sqrt().domain(b).range(c).interpolate(d3.interpolateRgb),a.dev.value&&f.timeEnd("calculating color scale")}else a.color.valueScale=null}},{"../../util/buckets.coffee":207,"../console/print.coffee":54,"../fetch/value.coffee":69}],57:[function(a,b,c){var d=a("../fetch/value.coffee"),e=a("../console/print.coffee"),f=a("../../object/validate.coffee");b.exports=function(a,b){a.dev.value&&e.time("filtering data");var c=d3.keys(a.data.keys||{});"attrs"in a&&(c=c.concat(d3.keys(a.attrs.keys||{}))),b=b.filter(function(b){var c=d(a,b,a.id.value);return null!==c});var g=a.types[a.type.value].requirements||[];a.data.filters.forEach(function(e){c.indexOf(a[e].value)>=0&&g.indexOf(e)>=0&&(b=b.filter(function(b){var c=d(a,b,a[e].value);return"y"===e&&a.y2.value&&null===c?c=d(a,b,a.y2.value):"x"===e&&a.x2.value&&null===c&&(c=d(a,b,a.x2.value)),"size"===e?"number"==typeof c:null!==c}))});var h=a.data.solo.length?"solo":"mute";return a.data[h].length?a.data[h].forEach(function(c){function g(b){var d=a[c][h].value,e=!1;return d.forEach(function(a){"function"==typeof a?e=a(b):a===b&&(e=!0)}),"solo"===h?e:!e}function i(b,e){if(!e&&a[c].nesting){var h=a[c].nesting;f(h)&&(h=d3.values(h));for(var i=0;i<h.length;i++){var j=b.filter(function(b){return g(d(a,b,h[i]))});j.length&&(b=j)}}else b=b.filter(function(b){return g(d(a,b,a[c].value))});return b}b=i(b),"id"===c&&("nodes"in a&&a.nodes.value&&(a.dev.value&&e.time("filtering nodes"),a.nodes.restricted=i(a.nodes.value),a.dev.value&&e.timeEnd("filtering nodes")),"edges"in a&&a.edges.value&&(a.dev.value&&e.time("filtering edges"),a.edges.restricted=a.edges.value.filter(function(b){var c=i([b[a.edges.source],b[a.edges.target]]);return 2===c.length}),a.dev.value&&e.timeEnd("filtering edges")))}):"nodes"in a&&(a.nodes.restricted=void 0,a.edges.restricted=void 0),a.dev.value&&e.timeEnd("filtering data"),b}},{"../../object/validate.coffee":175,"../console/print.coffee":54,"../fetch/value.coffee":69}],58:[function(a,b,c){var d=a("./nest.js"),e=a("../fetch/value.coffee"),f=a("../console/print.coffee"),g=a("../../util/uniques.coffee");b.exports=function(a){var b;if(a.data.time={values:[]},a.time&&a.time.value){a.dev.value&&(b="analyzing time periods",f.time(b)),a.data.time.values=g(a.data.value,a.time.value,e,a),a.data.time.values.sort(function(a,b){return a-b});var c=[];a.data.time.values.forEach(function(b,d){if(0!==d){var e=a.data.time.values[d-1];c.push(b-e),d===a.data.time.values.length-1&&(a.data.time.total=b-a.data.time.values[0])}}),c=d3.min(c),a.data.time.step=c;var h=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],i=[1e3,60,60,24,30,12,1];a.data.time.periods=h;var j=function(b,c,d){return a.data.time.stepDivider||(arr=i.slice(0,d),arr.length?a.data.time.stepDivider=arr.reduce(function(a,b){return a*b}):a.data.time.stepDivider=1),Math.round(Math.floor(c-b)/a.data.time.stepDivider)},k=a.data.time.total;h.forEach(function(b,d){var e="Date"===b?28:i[d];if(!a.data.time.stepType&&(d===h.length-1||Math.round(c)<e)){a.data.time.stepType=b;var f=a.data.time.values[0],g=a.data.time.values[a.data.time.values.length-1];a.data.time.stepIntervals=j(f,g,d)}!a.data.time.totalType&&(d===h.length-1||Math.round(k)<e)&&(a.data.time.totalType=b),c/=e,k/=e}),a.data.time.values.forEach(function(b,c){if(0!==c){var d=a.data.time.values[0];a.data.time.dataSteps.push(j(d,b,h.indexOf(a.data.time.stepType)))}else a.data.time.dataSteps=[0]});var l=a.time.format.value,m=a.format.locale.value,n=[function(a){return a.getMilliseconds()},function(a){return a.getSeconds()},function(a){return a.getMinutes()},function(a){return a.getHours()},function(a){return 1!=a.getDate()},function(a){return a.getMonth()},function(a){return!0}];a.data.time.functions=n;var o=function(a,b,c){if(a===b)return c&&m.timeFormat[a+"Small"]?m.timeFormat[a+"Small"]:m.timeFormat[a];if(h.indexOf(a)>=4||h.indexOf(b)<=3)return m.timeFormat[b+"-"+a];var d;return d="Date"===b?m.timeFormat[b]:m.timeFormat[b+"-Date"],"Hours"===a?d+" "+m.timeFormat[a]:d+" "+m.timeFormat["Hours-"+a]};if(a.data.time.getFormat=o,l)"string"==typeof l?a.data.time.format=d3.locale(m.format).timeFormat(l):"function"==typeof l?a.data.time.format=l:l instanceof Array&&(a.data.time.format=d3.locale(m.format).timeFormat.multi(l)),a.data.time.multiFormat=a.data.time.format;else{for(var p=a.data.time.stepType,q=a.data.time.totalType,r=[],s=h.indexOf(p);s<=h.indexOf(q);s++){var t=s-1<h.indexOf(p)?h[s]:h[s-1],u=h[s]===t&&p!==q,v=o(t,h[s],u);r.push([v,n[s]])}a.data.time.format=d3.locale(m.format).timeFormat(o(p,q)),r.length>1?(r[r.length-1][1]=function(a){return!0},a.data.time.multiFormat=d3.locale(m.format).timeFormat.multi(r)):a.data.time.multiFormat=a.data.time.format}a.data.time.ticks=[];for(var w=d3.min(a.data.time.values),x=d3.max(a.data.time.values),y=0;y<=a.data.time.stepIntervals;y++){var z=new Date(w);z["set"+a.data.time.stepType](z["get"+a.data.time.stepType]()+y),x>=z&&a.data.time.ticks.push(z)}a.dev.value&&f.timeEnd(b)}if(a.dev.value&&(b="nesting data by time and depths",f.time(b)),a.data.nested={},0===a.data.time.values.length)a.data.nested.all={},a.id.nesting.forEach(function(b,c){var e=a.id.nesting.slice(0,c+1);a.data.nested.all[b]=d(a,a.data.value,e)});else{var A=a.data.value.reduce(function(b,c){var d=e(a,c,a.time.value).getTime();return d in b||(b[d]=[]),b[d].push(c),b},{});a.data.time.values.forEach(function(b){var c=b.getTime();a.data.nested[c]={},a.id.nesting.forEach(function(b,e){var f=a.id.nesting.slice(0,e+1);a.data.nested[c][b]=d(a,A[c],f)})})}a.dev.value&&f.timeEnd(b)}},{"../../util/uniques.coffee":213,"../console/print.coffee":54,"../fetch/value.coffee":69,"./nest.js":62}],59:[function(a,b,c){var d;d=a("../fetch/value.coffee"),b.exports=function(a,b,c){var e,f,g,h,i,j,k,l,m,n;if(f=d3.nest(),a.id.grouping.value)for(void 0===c&&(c=a.id.nesting),g=h=0,j=c.length;j>h;g=++h)l=c[g],g<a.depth.value&&!function(b){return f.key(function(c){return d(a,c.d3plus,b)})}(l);for(m=[],i=0,k=b.length;k>i;i++)e=b[i],n=a.size.value?d(a,e,a.size.value):1,n&&"number"==typeof n&&n>0&&(delete e.d3plus.r,delete e.d3plus.x,delete e.d3plus.y,m.push({d3plus:e,id:e[a.id.value],value:n}));return f.entries(m)}},{"../fetch/value.coffee":69}],60:[function(a,b,c){var d,e,f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=a("../console/print.coffee"),e=a("../../object/validate.coffee"),b.exports=function(a,b){var c,g,h,i,j,k,l,m,n;if(l=b+" key analysis",a.dev.value&&d.time(l),a[b].keys={},c=function(d){var g,h,i,j,k,l,m;if(d instanceof Array){for(k=[],h=0,j=d.length;j>h;h++)g=d[h],k.push(c(g));return k}if(e(d)){l=[];for(i in d)m=d[i],0===i.indexOf("d3plus")||f.call(a[b].keys,i)>=0||null===m?l.push(void 0):l.push(a[b].keys[i]=typeof m);return l}},e(a[b].value)){i=d3.keys(a[b].value).length===a.id.nesting.length,j=a[b].value;for(g in j)if(m=j[g],i&&a.id.nesting.indexOf(g)>=0&&e(m))for(h in m)n=m[h],c(n);else c(m)}else{k=a[b].value;for(g in k)m=k[g],c(m)}return a.dev.value?d.time(l):void 0}},{"../../object/validate.coffee":175,"../console/print.coffee":54}],61:[function(a,b,c){var d,e;d=a("../console/print.coffee"),e=a("../../object/validate.coffee"),b.exports=function(a,b,c){var f,g,h,i;return f=a.dev.value,f&&d.time("loading "+b),i=a[b].url,a[b].filetype.value?g=a[b].filetype.value:(g=i.slice(i.length-5).split("."),g=g.length>1?g[1]:!1,g?("txt"===g&&(g="text"),a[b].filetype.accepted.indexOf(g)<0&&(g="json")):g="json"),(h="dsv"===g?d3.dsv(a[b].delimiter.value,"text/plain"):d3[g])(i,function(h,j){var k,l;if(!h&&j){if("function"==typeof a[b].callback){if(l=a[b].callback(j))if(e(l)&&b in l)for(k in l)k in a&&(a[k].value=l[k]);else a[b].value=l}else a[b].value=j;["json"].indexOf(g)<0&&a[b].value.forEach(function(a){var b;b=[];for(k in a)isNaN(a[k])?"false"===a[k].toLowerCase()?b.push(a[k]=!1):"true"===a[k].toLowerCase()?b.push(a[k]=!0):"null"===a[k].toLowerCase()?b.push(a[k]=null):"undefined"===a[k].toLowerCase()?b.push(a[k]=void 0):b.push(void 0):b.push(a[k]=parseFloat(a[k]));return b}),a[b].changed=!0,a[b].loaded=!0}else a.error.internal='Could not load data from: "'+i+'"';return f&&d.timeEnd("loading "+b),c()})}},{"../../object/validate.coffee":175,"../console/print.coffee":54}],62:[function(a,b,c){var d=a("../fetch/value.coffee"),e=a("../../object/validate.coffee"),f=a("../../util/uniques.coffee"),g=function(a,b,c,e){void 0===e&&(e=!0);var g=d3.nest(),k=[],l="temp"in a?["active","temp","total"]:[];c.length?c.forEach(function(b,c){g.key(function(c){return d(a,c,b)})}):g.key(function(a){return!0}),e&&a.axes&&a.axes.discrete&&(!a.time||a[a.axes.discrete].value!==a.time.value)&&g.key(function(b){return d(a,b,a[a.axes.discrete].value)});var m=c.length&&a.id.nesting.indexOf(c[c.length-1])>=0,n=c.length&&m?c.length-1:0;m?a.id.nesting[n]:a.depth.value;g.rollup(function(b){if(1===b.length&&"d3plus"in b[0])return k.push(b[0]),b[0];b=b.reduce(function(a,b){return b.values instanceof Array?a.concat(b.values):(a.push(b),a)},[]);var e={d3plus:{data:{},depth:n}},g=d3.sum(b,function(a){return"d3plus"in a&&a.d3plus.merged?1:0});if(g===b.length)for(var j=0;j<b.length;j++){var m=b[j];e.d3plus.merged||(e.d3plus.merged=[]),e.d3plus.merged=e.d3plus.merged.concat(m.d3plus.merged),m.d3plus.text&&(e.d3plus.text=m.d3plus.text)}for(var o=0;o<l.length;o++){var p=l[o],q=a.aggs&&a.aggs.value[r]?a.aggs.value[r]:"sum";"d3plus"in b[0]&&p in b[0].d3plus?e.d3plus[p]=d3.sum(b,function(a){return a.d3plus[p]}):"function"==typeof q?e.d3plus[p]=q(b):e.d3plus[p]=d3[q](b,function(b){var c="total"===p?1:0;return a[p].value&&(c=d(a,b,a[p].value),"number"!=typeof c&&(c=c?1:0)),c})}for(var r in a.data.keys){if(r in e.d3plus.data)e[r]=e.d3plus[r];else{var s=a.aggs&&a.aggs.value[r]?a.aggs.value[r]:"sum",t=typeof s,u=a.data.keys[r],v=a.id.nesting.indexOf(r)>=0,w="time"in a&&r===a.time.value;if(r in e.d3plus.data)e[r]=e.d3plus[r];else if("function"===t)e[r]=a.aggs.value[r](b);else if(w)e[r]=i(f(b,r));else if(a.axes&&a.axes.discrete&&a[a.axes.discrete].value===r)e[r]=f(b,r);else if("number"!==u||"string"!==t||v){var x=h(b,r),y=1===x.length?x[0][r]:f(x,r);if(1===x.length)e[r]=y;else if(y&&y.length)y instanceof Array||(y=[y]),v&&a.id.nesting.indexOf(r)>n?e[r]=x:e[r]=y;else if(v){var z=a.id.nesting.indexOf(r)-1;z>=n&&(!("endPoint"in e.d3plus)||e.d3plus.endPoint>n)&&(e.d3plus.endPoint=n)}}else{var A=b.map(function(a){return a[r]});A=A.filter(function(a){return typeof a===u}),A.length&&(e[r]=d3[s](A))}}r in e&&e[r]instanceof Array&&1===e[r].length&&(e[r]=e[r][0])}for(var B=0;B<c.length;B++){var C=c[B];C in e||(e[C]=d(a,b[0],C))}return k.push(e),e});var o=function(b,d,e){if(b.children){"number"==a.data.keys[c[d]]&&(b.key=parseFloat(b.key)),e[c[d]]=b.key,delete b.key;for(var f in e)b[f]=e[f];d++,b.children.forEach(function(a){o(a,d,e)})}};return g=g.entries(b).map(j).map(function(a){return o(a,0,{}),a}),k},h=function(a,b){function c(a){a instanceof Array?a.forEach(c):e(a)&&b in a&&(a[b]instanceof Array?a[b].forEach(c):d.push(a))}var d=[];return c(a),d},i=function(a){function b(a){for(var d=0;d<a.length;d++){var e=a[d];e&&(e.constructor===Array?b(e):c.push(e))}}var c=[];return b(a),f(c)},j=function(a){return a.values&&a.values.length?(a.children=a.values.map(function(a){return j(a)}),delete a.values,a):a.values?a.values:a};b.exports=g},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"../fetch/value.coffee":69}],63:[function(a,b,c){var d=a("../../array/sort.coffee"),e=a("./nest.js"),f=a("../fetch/value.coffee"),g=(a("../fetch/color.coffee"),a("../fetch/text.js"));b.exports=function(a,b,c){var h;if(h=a.size.threshold.value===!1?0:"number"==typeof a.size.threshold.value?a.size.threshold.value:"function"==typeof a.size.threshold.value?a.size.threshold.value(a):"number"==typeof a.types[a.type.value].threshold?a.types[a.type.value].threshold:"function"==typeof a.types[a.type.value].threshold?a.types[a.type.value].threshold(a):.02,"number"==typeof h&&h>0){var i=[],j=0===a.depth.value?0:{},k=[],l=[],m=[],n={},o=d3.nest();c&&o.key(function(b){return f(a,b,c)}),o.rollup(function(b){var d=b.length;a.aggs.value[a.size.value]?"function"==typeof a.aggs.value[a.size.value]?d=a.aggs.value[a.size.value](b):"string"==typeof a.aggs.value[a.size.value]&&(d=d3[a.aggs.value[a.size.value]](b,function(b){return f(a,b,a.size.value)})):d=d3.sum(b,function(b){return f(a,b,a.size.value)});var e=c?f(a,b[0],c):"all";return n[e]=d,d}).entries(b),b.forEach(function(b){var d=f(a,b,a.id.value),e=f(a,b,a.size.value),g=c?f(a,b,c):"all",j=e/n[g]>=h;if(j&&i.indexOf(d)<0&&(i.push(d),a.depth.value)){var k=f(a,b,a.id.nesting[a.depth.value-1]);l.indexOf(k)<0&&l.push(k)}});var p=b.filter(function(b){var c=f(a,b,a.id.value),d=i.indexOf(c)>=0,e=a.depth.value?f(a,b,a.id.nesting[a.depth.value-1]):null;if(null!==e&&l.indexOf(e)<0&&m.indexOf(e)<0&&m.push(e),!d){var g=f(a,b,a.size.value);g>0&&(0===a.depth.value?g>j&&(j=g):(e in j||(j[e]=0),g>j[e]&&(j[e]=g)),k.push(b))}return d});if(k.length>1){k=d(k,a.size.value,"desc",[],a);var q=a.id.nesting.slice(0,a.depth.value);a.types[a.type.value].requirements.indexOf(a.axes.discrete)>=0&&q.push(a[a.axes.discrete].value);var r=e(a,k,q);r.forEach(function(b){var c=a.id.nesting[a.depth.value-1],d=f(a,b,c);if(children=c?k.filter(function(b){return f(a,b,c)===d}):k,children.length>1){a.id.nesting.forEach(function(c,d){if(a.depth.value==d){var e=b[c];"string"==typeof e?b[c]="d3plus_other_"+e:b[c]="d3plus_other"}else d>a.depth.value&&delete b[c]}),a.color.value&&"string"===a.color.type&&(0===a.depth.value?b[a.color.value]=a.color.missing:b[a.color.value]=f(a,d,a.color.value,c)),a.icon.value&&(b[a.icon.value]=f(a,d,a.icon.value,c)),d&&(b.d3plus.depth=a.depth.value);var e;0===a.depth.value?(e=a.format.value(a.format.locale.value.ui.values,{key:"threshold",vars:a}),e+=" < "+a.format.value(j,{key:a.size.value,vars:a})):(e=g(a,b,a.depth.value-1),e=e.length?e[0].split(" < ")[0]:a.format.value(a.format.locale.value.ui.values,{key:"threshold",vars:a}),m.indexOf(d)<0&&(e+=" < "+a.format.value(j[d],{key:a.size.value,vars:a}))),m.indexOf(d)<0&&(e+=" ("+a.format.value(100*h,{key:"share",vars:a})+")"),b.d3plus.threshold=j,b.d3plus.merged=children,a.text.value&&(b[a.text.value]=e),b.d3plus.text=e}})}else r=k;return p.concat(r)}return b}},{"../../array/sort.coffee":36,"../fetch/color.coffee":65,"../fetch/text.js":68,"../fetch/value.coffee":69,"./nest.js":62}],64:[function(a,b,c){var d;d=a("../../font/sizes.coffee"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;if(u=b.values||a.data.time.ticks,q=b.style||{},h=b.limit||a.width.value,r={},k=a.data.time.periods,p=a.data.time.stepType,s=a.data.time.totalType,f=a.data.time.functions,g=a.data.time.getFormat,i=a.format.locale.value.format,a.time.format.value)r.format=a.data.time.format,r.values=u,r.sizes=d(u.map(function(a){return r.format(a)}),q);else for(j=k.indexOf(p);j<=k.indexOf(s);){if(t=u.filter(function(a){var b,c;if(j===k.indexOf(p))return!0;if(b=!0,c=j-1,0>j)return!0;for(;c>=k.indexOf(p)&&b;)b=!f[c](a),c--;return b}),k[j]===s)e=d3.locale(i).timeFormat(g(k[j],s));else{for(l=j,e=[];l<=k.indexOf(s);)m=l-1<k.indexOf(p)?l:l-1,m=k[m],o=k[l]===m&&p!==s,c=g(m,k[l],o),e.push([c,f[l]]),l++;e[e.length-1][1]=function(){return!0},e=d3.locale(i).timeFormat.multi(e)}if(n=d(t.map(function(a){return e(a)}),q),d3.sum(n,function(a){return a.width})<h||j===k.indexOf(s)){r.format=e,r.values=t,r.sizes=n;break}j++}return r}},{"../../font/sizes.coffee":104}],65:[function(a,b,c){var d,e,f,g,h,i,j;d=a("./value.coffee"),g=a("../../color/random.coffee"),i=a("../../color/validate.coffee"),j=a("../../object/validate.coffee"),h=a("../../util/uniques.coffee"),b.exports=function(a,b,c){var g,i,k,l,m,n;if(m=j(b),m&&"d3plus"in b&&"color"in b.d3plus)return b.d3plus.color;if(void 0===c&&(c=a.id.value),"number"==typeof c&&(c=a.id.nesting[c]),a.color.value){for(k=[],l=a.id.nesting.indexOf(c);l>=0;){if(i=a.id.nesting[l],n=h(b,a.color.value,d,a,i),1===n.length&&(n=n[0]),!(n instanceof Array)&&void 0!==n&&null!==n){g=e(a,b,n,c),k.indexOf(g)<0&&k.push(g);break}l--}return 1===k.length?k[0]:a.color.missing}return f(a,b,c)},e=function(a,b,c,d){return c?a.color.valueScale?a.color.valueScale(c):i(c)?c:f(a,c,d):a.color.value&&"function"==typeof a.color.valueScale?a.color.valueScale(0):f(a,b,d)},f=function(a,b,c){return j(b)&&(b=d(a,b,c)),b instanceof Array&&(b=b[0]),g(b,a.color.scale.value)}},{"../../color/random.coffee":49,"../../color/validate.coffee":53,"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"./value.coffee":69}],66:[function(a,b,c){var d=a("../data/filter.js"),e=a("../data/nest.js"),f=a("../console/print.coffee"),g=a("../../string/format.js"),h=a("../../string/list.coffee");b.exports=function(a,b,c){if(!a.data.value)return[];void 0===c&&(c=a.depth.value);var i=a.id.nesting[c];if(!b||b instanceof Array||(b=[b]),!b&&"time"in a){b=[];var j=a.time.solo.value.length?"solo":"mute",k=a.time[j].value;if(k.length){b=[];for(var l=0;l<k.length;l++){var m=k[l];if("function"==typeof m)for(var n=0;n<a.data.time.values.length;n++){var o=a.data.time.values[n].getTime();m(o)&&b.push(o)}else if(m.constructor===Date)b.push(new Date(m).getTime());else{m+="",4===m.length&&parseInt(m)+""===m&&(m+="/01/01");var p=new Date(m);"Invalid Date"!==p&&b.push(p.getTime())}}"mute"===j&&(b=a.data.time.values.filter(function(a){return b.indexOf(a.getTime())<0}))}else b.push("all")}else b=["all"];if(b.indexOf("all")>=0&&a.data.time.values.length){b=a.data.time.values.slice(0);for(var q=0;q<b.length;q++)b[q]=b[q].getTime()}var r=[a.type.value,i,c].concat(a.data.filters).concat(b),s=a.data.solo.length?"solo":"mute",t=d3.keys(a.data.cache),u=a.types[a.type.value].filter||void 0;if(a.data[s].length)for(var v=0;v<a.data[s].length;v++){var w=a.data[s][v],x=a[w][s].value.slice(0);x.unshift(w),x.unshift(s),r=r.concat(x)}a.axes&&a.axes.discrete&&r.push(a.axes.discrete),r=r.join("_"),a.data.cacheID=r;for(var y=0;y<t.length;y++){var z=t[y].split("_").slice(1).join("_");if(z===r){r=(new Date).getTime()+"_"+r,a.data.cache[r]=a.data.cache[t[y]],delete a.data.cache[t[y]];break}}var A;if(a.data.cache[r])return a.dev.value&&f.comment("data already cached"),A=a.data.cache[r].data,"nodes"in a&&(a.nodes.restricted=a.data.cache[r].nodes,a.edges.restricted=a.data.cache[r].edges),"function"==typeof u&&(A=u(a,A)),A;var B=[];if(A=[],a.data.value&&a.data.value.length)for(var C=0;C<b.length;C++){var D=b[C];a.data.nested[D]?A=A.concat(a.data.nested[D][i]):B.push(D)}if(0===A.length&&B.length&&!a.error.internal){B.length>1&&(B=d3.extent(B)),B=B.map(function(b){return a.data.time.format(new Date(b))}),B=B.join(" - ");var E=a.format.locale.value.error.dataYear,F=a.format.locale.value.ui.and;B=h(B,F),a.error.internal=g(E,B),a.time.missing=!0}else{if(a.time&&(a.time.missing=!1),b.length>1){var G=!1;if(["x","y","x2","y2"].forEach(function(b){a[b].value===a.time.value&&"discrete"===a[b].scale.value&&(G=!0)}),!G){var H=a.id.nesting.slice(0,c+1);A=e(a,A,H)}}A=A?d(a,A):[],20===t.length&&(t.sort(),delete a.data.cache[t[0]]),r=(new Date).getTime()+"_"+r,a.data.cache[r]={data:A},"nodes"in a&&(a.data.cache[r].nodes=a.nodes.restricted,a.data.cache[r].edges=a.edges.restricted),"function"==typeof u&&(A=u(a,A)),a.dev.value&&f.comment("storing data in cache")}return A}},{"../../string/format.js":176,"../../string/list.coffee":177,"../console/print.coffee":54,"../data/filter.js":57,"../data/nest.js":62}],67:[function(a,b,c){var d,e,f;f=a("./value.coffee"),d=a("./color.coffee"),e=a("./text.js"),b.exports=function(a,b,c,g,h){var i,j,k,l,m,n;for(c instanceof Array||(c=[c]),g instanceof Array||(g=[g]),a&&(void 0===h?h=a.id.value:"number"!=typeof h&&(h=a.id.nesting.indexOf(h))),m={},j=0,l=c.length;l>j;j++)k=c[j],n=a?g.indexOf(k)>=0?d(a,b,h):k===a.text.value?e(a,b,h):3===d3.keys(b).length&&b.d3plus&&b.key&&b.values?f(a,b.values.map(function(a){return a.d3plus}),k,h):f(a,b,k,h):b[k],[a.data.keys[k],a.attrs.keys[k]].indexOf("number")>=0?(i=a.order.agg.value||a.aggs.value[k]||"sum",i.constructor===String&&(i=d3[i]),n instanceof Array||(n=[n]),n=i(n)):(n instanceof Array&&(n=n[0]),n="string"==typeof n?n.toLowerCase():n),m[k]=n;return m}},{"./color.coffee":65,"./text.js":68,"./value.coffee":69}],68:[function(a,b,c){var d=a("./value.coffee"),e=a("../../object/validate.coffee"),f=a("../../util/uniques.coffee");b.exports=function(a,b,c){"number"!=typeof c&&(c=a.depth.value);var g,h=a.id.nesting[c];a.text.nesting&&e(a.text.nesting)?g=a.text.nesting[h]?a.text.nesting[h]:a.text.value:(g=[],a.text.value&&c===a.depth.value&&g.push(a.text.value),g.push(h)),g instanceof Array||(g=[g]);var i=[];if(e(b)&&"d3plus"in b&&b.d3plus.text)i.push(b.d3plus.text.toString()),i.push(a.format.value(b.d3plus.text.toString(),{vars:a,data:b}));else{var j=e(b)?b:void 0;j&&b[a.id.value]instanceof Array?b=b[a.id.value]:b instanceof Array||(b=[b]),g.forEach(function(c){var e=f(b,c,d,a,h);e.length&&(e.length>1&&(e=e.filter(function(a){return a instanceof Array||"string"==typeof a&&a.indexOf(" < ")<0})),e=e.map(function(b){return b instanceof Array?(b=b.filter(function(a){return a}),b.map(function(b){return a.format.value(b.toString(),{vars:a,data:j,key:c})})):b?a.format.value(b.toString(),{vars:a,data:j,key:c}):void 0}),1===e.length&&(e=e[0]),i.push(e))})}return i}},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213,"./value.coffee":69}],69:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m;l=a("../../object/validate.coffee"),k=a("../../util/uniques.coffee"),j=function(a,b,c,g){var h,i,j,m;if(i=l(b),"function"==typeof c&&i)return c(b,a);if(i){if(c in b)return b[c];if(h=a.data.cacheID+"_"+g,d(b,h,a),c in b.d3plus.data[h])return b.d3plus.data[h][c];if(g in b)b=b[g];else{if(!(a.id.value in b))return null;if(b=b[a.id.value],g!==c&&(j=f(a,b,g,a.id.value)),(null===j||void 0===j)&&(j=e(a,b,g,a.id.value)),null===j||void 0===j)return null;if(g===c)return j;b=j}}return b instanceof Array&&!l(b[0])&&(b=k(b)),b instanceof Array&&l(b[0])&&(m=k(b,c),m.length)?m:(m=f(a,b,c,g))?m:m=e(a,b,c,g)},f=function(a,b,c,d){var e;return a.data.viz instanceof Array&&c in a.data.keys&&(e=k(i(a.data.viz,b,d),c)),e&&e.length?e:null},e=function(a,b,c,d){var e,f,g,h;if("attrs"in a&&a.attrs.value&&c in a.attrs.keys)if(e=l(a.attrs.value)&&d in a.attrs.value?a.attrs.value[d]:a.attrs.value,e instanceof Array){if(g=k(i(e,b,d),c),g.length)return g}else if(b instanceof Array){if(e=[function(){var a,c,d;if(f in e){for(d=[],a=0,c=b.length;c>a;a++)f=b[a],d.push(e[f]);return d}}()],e.length&&(h=k(e,c),h.length))return h}else if(b in e)return e[b][c];return null},i=function(a,b,c){return b instanceof Array?a.filter(function(a){return b.indexOf(a[c])>=0}):a.filter(function(a){return a[c]===b})},d=function(a,b,c){return"d3plus"in a||(a.d3plus={}),"data"in a.d3plus||(a.d3plus.data={}),(c.data.changed||c.attrs&&c.attrs.changed||!(b in a.d3plus.data))&&(a.d3plus.data[b]={}),a},m=function(a,b,c,d,e){var f,g,h,i,j,k,m;if(null===e)return e;k="time"in a&&a.time.value===d,e instanceof Array||(e=[e]);for(h=i=0,j=e.length;j>i;h=++i)m=e[h],k&&null!==m&&m.constructor!==Date&&(m+="",4===m.length&&parseInt(m)+""===m&&(m+="/01/01"),g=new Date(m),"Invalid Date"!==g&&(e[h]=g));return 1===e.length&&(e=e[0]),null===e||!l(b)||"string"!=typeof d||d in b||(f=a.data.cacheID+"_"+c,b.d3plus.data[f][d]=e),e},h=function(a,b,c,d){var e,f,g,h,i;for(i=[],f=0,g=b.length;g>f;f++)e=b[f],l(e)?(h=j(a,e,c,d),i.push(m(a,e,d,c,h))):i.push(e);return"number"!=typeof i[0]&&(i=k(i)),1===i.length?i[0]:i},g=function(a,b,c,d){var e,f;return c?"number"==typeof c?c:(e=l(b),d||(d=a.id.value),e&&b.values instanceof Array?f=h(a,b.values,c,d):e&&b[c]instanceof Array?f=h(a,b[c],c,d):b instanceof Array?f=h(a,b,c,d):(f=j(a,b,c,d),f=m(a,b,d,c,f)),f):null},b.exports=g},{"../../object/validate.coffee":175,"../../util/uniques.coffee":213}],70:[function(a,b,c){b.exports=function(a){var b,c,d;return["div","svg"].indexOf(a)<0&&(a="div"),c={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},b="div"===a?{}:{position:"absolute"},d=d3.select("body").selectAll(a+".d3plus_tester").data([0]),d.enter().append(a).attr("class","d3plus_tester").style(c).attr(b),d}},{}],71:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},error:{accepted:"{0} ist kein gültiger {1} für {2}-Darstellungen. Benutzen Sie bitte: {3}.",connections:"Keine Verbindungen verfügbar für {0}.",data:"Keine Daten verfügbar",dataYear:"Für {0} sind keine Daten verfügbar.",lib:"{0}-Darstellungen erfordern das Laden der Bibliothek {1}.",libs:"{0}-Darstellungen erfordern das Laden folgender Bibliotheken: {1}.",method:"{0}-Darstellungen erfordern die Methode {1}.",methods:"Weitere Einstellungen für folgende Methoden {1} sind bei {0}-Darstellungen erforderlich."},lowercase:["ein","ein","und","wie","bei","aber","durch","für","von","wenn","in","in","in der Nähe","noch","von","auf","auf","oder","pro","das","die","zu","mit","über","gegen","gegen."],method:{active:"aktive Segmente",color:"Farbe",depth:"Tiefe",dev:"ausführlich",focus:"Fokus",icon:"Symbol",id:"Kennung",height:"Höhe",labels:"Beschriftungen",legend:"Legende",margin:"Rand",messages:"Statusmeldungen",order:"Reihenfolge",search:"Suche",shape:"Form",size:"Größe",style:"Stil",temp:"temporäre Segmente",text:"Text",time:"Zeit",timeline:"Zeitleiste",total:"Segmente gesamt",type:"Typ",width:"Breite",x:"x-Achse",y:"y-Achse",zoom:"Zoom",mode:"Modus",mute:"ausblenden",solo:"isolieren"},time:["Datum","Tag","Monat","Zeit","Jahr"],visualization:{bubbles:"Blasen",chart:"Diagramm",geo_map:"Karte",line:"Liniendiagramm",network:"Netzwerk",rings:"Ringe",scatter:"Punktdiagramm",stacked:"Gestapelte Fläche",tree_map:"Baumdiagramm",bar:"Balkendiagramm",box:"Boxplot",paths:"Pfade",pie:"Kreisdiagramm",table:"Tabelle"},ui:{and:"und",back:"zurück",collapse:"Zum Ausblenden klicken",error:"Fehler",expand:"Zum Einblenden klicken",loading:"Lade...",more:"{0} weitere",moreInfo:"Für zusätzliche Informationen klicken",noResults:"Keine Ergebnisse für {0} gefunden.",primary:"Primäre Verbindungen",share:"teilen",total:"gesamt",values:"Werte",including:"einschließlich",or:"oder",iqr:"Interquartilsabstände {0}",max:"Maximalwert",min:"Minimalwert",percentile:"Perzentil P{0}",tukey_bottom:"Unterer Ausreißer",tukey_top:"Oberer Ausreißer",quartile_first:"Unteres Quartil Q1",quartile_third:"Oberes Quartil Q3",median:"Medianwert"},message:{data:"analysiere Daten",draw:"Darstellung wird gerendert",initializing:"initialisiere {0}",loading:"Daten werden geladen",tooltipReset:"Tooltips zurücksetzen",ui:"aktualisiere Oberfläche"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","BIP","HVAC","ID","IT","FuE","TV","UI"]}},{}],72:[function(a,b,c){b.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",
sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",iqr:"interquartile range for {0}",loading:"loading...",max:"maximum",median:"median",min:"minimum",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",percentile:"{0} percentile",primary:"primary connections",quartile_first:"first quartile",quartile_third:"third quartile",share:"share",total:"total",tukey_bottom:"bottom tukey",tukey_top:"top tukey",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],73:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",deprecated:"el método {0} ha sido eliminado, por favor, actualiza tu código para utilizar {1}.",noChange:"{0} no se actualiza porque no cambió.",noContainer:"no se puede encontrar un contenedor en la página correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vínculos no se pueden enlazar con si mismos. eliminando automáticamente el vínculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",method:"{0} visualizaciones requieren establecer el ​​método {1}.",methods:"{0} visualizaciones requieren establecer los siguientes métodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"ícono",id:"id",height:"alto",labels:"rótulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",order:"orden",search:"búsqueda",shape:"forma",size:"tamaño",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"línea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"aislar"},time:["fecha","día","mes","hora","año"],visualization:{bubbles:"Burbujas",chart:"Gráfico",geo_map:"Mapa",line:"Gráfico de linea",network:"Red",rings:"Anillos",scatter:"Gráfico De Dispersión",stacked:"Área Apilada",tree_map:"Tree Map",bar:"Gráfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gráfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrás",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} más",moreInfo:"clic para más información",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"porcentaje",total:"total",values:"valores",including:"Incluyendo",or:"o",iqr:"rango intercuartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"Tukey inferior",tukey_top:"la parte superior de Tukey",quartile_first:"primer cuartil",quartile_third:"tercer cuartil",median:"mediana"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],74:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",deprecated:"{0} a été éliminé de la version courante, mettez à jour votre code source avec {1}.",noChange:"{0} n'a pas été mis à jour car inchangé.",noContainer:"impossible de trouver un contenant correspondant à {0}.",of:"de",oldStyle:"les propriétés de {0} ont été imbriquées dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui même. L'auto-référence est automatiquement éliminée {0}.",set:"{0} a été mis à jour.",setLong:"{0} a été mis à jour à {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de données disponibles",dataYear:"Pas de données disponibles pour {0}.",lib:"La visualisation de {0} nécessite le chargement de la librairie {1}.",libs:"La visualisation de {0} nécessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la définition de {1}.",methods:"La visualisation du {0} exige les définitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","près","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"ícone",id:"id",height:"hauteur",labels:"labels",legend:"légende",margin:"marge",messages:"messages",order:"ordre",search:"recherche",shape:"format",size:"taille",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode",mute:"cacher",solo:"isoler"},time:["année","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geo_map:"Carte",line:"Courbes",network:"Réseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empilées",tree_map:"Arbre",bar:"Diagramme en barres",box:"Boîtes à Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour réduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de résultat correspondant à {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou",iqr:"gamme interquartile pour {0}",max:"maximum",min:"le minimum",percentile:"{0} percentile",tukey_bottom:"tukey bas",tukey_top:"top tukey",quartile_first:"premier quartile",quartile_third:"le troisième quartile",median:"médian"},message:{data:"analyse des données",draw:"tracé en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"réinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],75:[function(a,b,c){b.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["₩",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},error:{accepted:"{0}하지 허용 {1} {2} 시각화는 다음 중 하나를 사용하십시오에 대해 : {3}.",connections:"{0}에 대한 연결이 없음.",data:"자료 없음",dataYear:"{0}에 대한 자료가 없음.",lib:"{0} 시각화는 {1} 라이브러리를로드 할 필요합니다.",libs:"{0} 시각화는 다음과 같은 라이브러리를로드 할 필요 : {1}.",method:"{0} 시각화를 위해 {1} 메서드를 설정해야 한다.",methods:"{0} 시각화를 위해 다음과 같은 메서드를 설정해야한다: {1}."},lowercase:[""],method:{active:"활성 세그먼트",color:"색",depth:"깊이",dev:"풀어서",focus:"집중하다",icon:"상",id:"신분증",height:"높이",labels:"라벨",legend:"범례",margin:"여유",messages:"상태 메시지",order:"주문",search:"수색",shape:"모양",size:"크기",style:"스타일",temp:"임시 세그먼트",text:"본문",time:"시각",timeline:"타임 라인",total:"총 세그먼트",type:"유형",width:"폭",x:"X 축",y:"Y 축",zoom:"줌",mode:"모드",mute:"숨김",solo:"독주"},time:["날짜","요일","월","시간","년"],visualization:{bubbles:"버블 차트",chart:"차트",geo_map:"지도형",line:"선형 그래프",network:"네트워크 그래프",rings:"반지",scatter:"산포도",stacked:"누적 된 지역",tree_map:"트리 맵",bar:"막대 차트",box:"박스 플롯",paths:"경로",pie:"파이 차트",table:"탁자"},ui:{and:"과",back:"뒤로",collapse:"축소하려면 클릭",error:"오류",expand:"확장하려면 클릭",loading:"로드 중 ...",more:"{0} 이상",moreInfo:"추가 정보를 위해 클릭하십시오",noResults:"일치하는 결과값이 없음 {0}.",primary:"기본 연결",share:"비중",total:"합계",values:"값",including:"...을 포함하여",or:"또는",iqr:"대한 사 분위 범위 {0}",max:"최고",min:"최저한의",percentile:"{0} 백분위 수",tukey_bottom:"바닥 Tukey에",tukey_top:"상단 Tukey에",quartile_first:"1 분위",quartile_third:"3 분위",median:"중앙값"},message:{data:"데이터 분석 중",draw:"데이터 시각화 중",initializing:"초기화 {0}",loading:"데이터 로딩 중",tooltipReset:"툴팁을 재설정",ui:"UI 업데이트 중"},uppercase:["CEO","최고 경영자","최고 재무 책임자 (CFO)","CFO는","CNC","COO","구구","CPU","CPU에","GDP","HVAC","ID","IT","R & D","TV","UI"]}},{}],76:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ден."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]},error:{accepted:"{0} не е прифатлива за {1} {2} визуелизација, ве молиме користете една од следниве: {3}.",connections:"не е достапна за врски {0}.",data:"нема податоци",dataYear:"Не е достапен за податоци {0}.",lib:"{0} визуализации бараат вчитување на библиотеката {1} .",libs:"{0} визуализации бараат вчитување на следниве библиотеки: {1}.",method:"{0} визуализации бара поставување на {1} методот.",methods:"{0} визуализации бараат поставување на следниве методи: {1}."},lowercase:["a","и","во","но","на","или","да","се","со"],method:{active:"активни сегменти",color:"боја",depth:"длабочина",dev:"опширно",focus:"фокус",icon:"икона",id:"проект",height:"височина",labels:"етикети",legend:"легенда",margin:"маргина",messages:"пораки за статусот",order:"со цел",search:"барај",shape:"форма",size:"големина",style:"стил",temp:"привремени сегменти",text:"текст",time:"време",timeline:"времеплов",total:"Вкупно сегменти",type:"тип",width:"ширина",x:"x оската",y:"Y оската",zoom:"зум",mode:"режим",mute:"се скрие",solo:"изолирање"},time:["датум","ден","месец","време","година"],visualization:{bubbles:"меурчиња",chart:"Графикон",geo_map:"Гео мапа",line:"Линиски график",network:"мрежа",rings:"прстени",scatter:"Распрскан график",stacked:"Наредена површина",tree_map:"Мапа во вид на дрво",bar:"бар шема",box:"правоаголен дијаграм",paths:"патеки",pie:"пита графикон",table:"Табела"},ui:{and:"и",back:"назад",collapse:"кликни за да се собере",error:"грешка",expand:"Кликни за проширување",loading:"Се вчитува ...",more:"{0} повеќе",moreInfo:"кликнете за повеќе информации",noResults:"Не се пронајдени резултати за појавување на {0}.",primary:"основните врски",share:"удел",total:"Вкупниот",values:"вредности",including:"Вклучувајќи",or:"или",iqr:"interquartile опсег за {0}",max:"максималната",min:"минимум",percentile:"{0} перцентил",tukey_bottom:"дното Tukey",tukey_top:"Топ Tukey",quartile_first:"првиот квартал",quartile_third:"третиот квартал",median:"средната"},message:{data:"анализа на податоци",draw:"цртање на визуелизација",initializing:"иницијализација {0}",loading:"податоци за товарење",tooltipReset:"ресетирање на објаснувањата",ui:"ажурирање на кориничкиот интерфејс"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],77:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} não é um valor válido para {1}, por favor use um dos seguintes procedimentos: {2}.",deprecated:"{0} método foi removido, por favor atualize seu código para utilizar {1}.",noChange:"{0} não foi atualizado porque ele não mudou.",noContainer:"Não foi possível encontrar um local na página correspondente a {0}.",of:"do",oldStyle:"propriedades de estilo para {0} já foram incorporados diretamente no. {1} ().",sameEdge:"bordas não podem vincular a si mesmos. removendo automaticamente borda de auto-referência {0}.",set:"{0} foi definido.",setLong:"{0} foi definido para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} não é um {1} reconhecido para visualizações {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"Não há conexões disponíveis para {0}.",data:"Não há dados disponíveis",dataYear:"Não há dados disponíveis para {0}.",lib:"A visualização {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualização {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"Tempo",timeline:"cronograma",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Gráfico",geo_map:"Mapa",line:"Gráfico de Linha",network:"Rede",rings:"Anéis",scatter:"dispersão",stacked:"Evolução",tree_map:"Tree Map",bar:"Gráfico de Barras",box:"box Plot",paths:"caminhos",pie:"Carta de torta",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"clique para entrar em colapso",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"conexões primárias",share:"participação",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"analisando dados",draw:"desenhando visualização",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],78:[function(a,b,c){b.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},error:{accepted:"{0} não é uma {1} válida para a visualização {2}, por favor escolha uma das seguintes: {3}.",connections:"não existem ligações disponíveis para {0}.",data:"não existem dados disponíveis",dataYear:"não existem dados disponíveis para {0}.",lib:"a visualização {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualização {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos seguintes métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geo_map:"Mapa",line:"Gráfico de Linha",network:"Grafo",rings:"Anéis",scatter:"Gráfico de Dispersão",stacked:"Gráfico de Área",tree_map:"Tree Map",bar:"Gráfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"caminhos",pie:"Gráfico de Setores",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"ligações principais",share:"proporção",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"a analisar os dados",draw:"a desenhar a visualização",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informação",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],79:[function(a,b,c){b.exports={format:{decimal:",",thousands:" ",grouping:[3],currency:[""," руб."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]},error:{accepted:"{0} не является обслуживаемым {1} для {2} визуализаций, пожалуйста, используйте одно из следующих действий: {3}.",connections:"нет соединений, доступных для {0}.",data:"данные недоступны",dataYear:"нет данных для {0}.",lib:"{0} визуализаций требуют загрузки {1} библиотеки.",libs:"{0} визуализаций требует загрузки следующие библиотеки: {1}.",method:"{0} визуализаций требуют установки {1} метод.",methods:"{0} визуализаций требуют установки следующих методов: {1}."},lowercase:["и","как","в","но","для","из","если в","в","недалеко","ни","на","на","или","в","что","к","с","с помощью","против","против"],method:{active:"активные сегменты",color:"цвет",depth:"глубина",dev:"подробный",focus:"фокус",icon:"значок",id:"Я бы",height:"высота",labels:"надписи",legend:"легенда",margin:"поле",messages:"сообщения о состоянии",order:"заказ",search:"поиск",shape:"форма",size:"размер",style:"стиль",temp:"временные сегменты",text:"текст",time:"время",timeline:"график",total:"всего сегментов",type:"тип",width:"ширина",x:"ось х",y:"ось Y",zoom:"масштаб",mode:"Режим",mute:"скрывать",solo:"изолировать"},time:["дата","день недели","месяц","время","год"],visualization:{bubbles:"Пузыри",chart:"Диаграмма",geo_map:"Карта Geo",line:"линия Участок",network:"сеть",rings:"Кольца",scatter:"Scatter Plot",stacked:"Stacked Площадь",tree_map:"Дерево Карта",bar:"гистограмма",box:"Box Участок",paths:"пути",pie:"Круговая диаграмма",table:"Таблица"},ui:{and:"а также",back:"назад",collapse:"нажмите, чтобы свернуть",error:"ошибка",expand:"нажмите, чтобы развернуть",loading:"загрузка ...",more:"{0} более",moreInfo:"нажмите для получения дополнительной информации",noResults:"нет результатов, соответствующих {0}.",primary:"первичные соединения",share:"доля",total:"Всего",values:"значения",including:"в том числе",or:"или",iqr:"межквартильный диапазон для {0}",max:"максимальная",min:"минимальный",percentile:"{0} процентиль",tukey_bottom:"нижний Тьюки",tukey_top:"сверху Тьюки",quartile_first:"первый квартиль",quartile_third:"третий квартиль",median:"медиана"},message:{data:"данные анализа",draw:"рисование визуализация",initializing:"инициализацией {0}",loading:"Загрузка данных",tooltipReset:"сброс всплывающих подсказок",ui:"обновление пользовательского интерфейса"},uppercase:["ID"]}},{}],80:[function(a,b,c){b.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},error:{accepted:"{0}对于{2}的可视化效果并不是一个可接受的{1}, 请使用如下的一个：{3}.",connections:"没有对{0}可用的连接。",data:"无可用数据",dataYear:"没有数据对{0}可用。",lib:"{0}的可视化要求装载{1}库。",libs:"{0}的可视化需要加载以下库：{1}。",method:"{0}的可视化要求设置{1}方法。",methods:"{0}的可视化要求设置以下方法：{1}。"},lowercase:["一个","和","在","但是","在...里","的","或者","这","向","与...一起"],method:{active:"活跃段",color:"颜色",depth:"深度",dev:"详细",focus:"焦点",icon:"图标",id:"身份认证",height:"高度",labels:"标签",legend:"图例注释",margin:"外边距",messages:"状态消息",order:"规则",search:"搜索",shape:"形状",size:"大小",style:"样式",temp:"暂时性区段",text:"文本",time:"时间",timeline:"时间轴",total:"总段",type:"类型",width:"宽度",x:"X轴",y:"Y轴",zoom:"缩放",mode:"模式",mute:"隐藏",solo:"隔离"},time:["日","星期","月","时间","年"],visualization:{bubbles:"气泡",chart:"图表",geo_map:"地理地图",line:"线图",network:"网络",rings:"特性",scatter:"散点图",stacked:"堆积面积图",tree_map:"树图",bar:"条图",box:"箱形图",paths:"路径",pie:"饼形图",table:"表"},ui:{and:"和",back:"后面",collapse:"点击合并",error:"错误",expand:"单击以展开",loading:"载入中...",more:"{0}更多",moreInfo:"点击了解更多信息",noResults:"没有结果匹配{0}。",primary:"主要连接",share:"共享",total:"总",values:"值",including:"包括",or:"要么",iqr:"间距范围为{0}",max:"最大值",min:"最低限度",percentile:"{0}百分",tukey_bottom:"底部杜克",tukey_top:"顶部杜克",quartile_first:"第一个四分位数",quartile_third:"第三个四分位数",median:"中位数"},message:{data:"分析数据",draw:"绘制可视化",initializing:"初始化{0}",loading:"加载数据",tooltipReset:"重置工具提示",ui:"更新UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","电视","用户界面","研发"]}},{}],81:[function(a,b,c){b.exports={de_DE:a("./languages/de_DE.js"),en_US:a("./languages/en_US.coffee"),es_ES:a("./languages/es_ES.js"),fr_FR:a("./languages/fr_FR.js"),ko_KR:a("./languages/ko_KR.js"),mk_MK:a("./languages/mk_MK.js"),pt_BR:a("./languages/pt_BR.js"),pt_PT:a("./languages/pt_PT.js"),ru_RU:a("./languages/ru_RU.js"),zh_CN:a("./languages/zh_CN.js")}},{"./languages/de_DE.js":71,"./languages/en_US.coffee":72,"./languages/es_ES.js":73,"./languages/fr_FR.js":74,"./languages/ko_KR.js":75,"./languages/mk_MK.js":76,"./languages/pt_BR.js":77,"./languages/pt_PT.js":78,"./languages/ru_RU.js":79,"./languages/zh_CN.js":80}],82:[function(a,b,c){var d,e,f,g,h,i,j,k,l;e=a("../../util/copy.coffee"),h=a("../console/print.coffee"),i=a("./process/detect.coffee"),j=a("./set.coffee"),k=a("../../string/format.js"),l=a("../../object/validate.coffee"),b.exports=function(a,b){var c,d,h;h=[];for(c in b)d=b[c],a[c]=e(d),a[c].initialized=g(a,a[c],c),h.push(a.self[c]=f(a,c));return h},g=function(a,b,c,d){var e,f,j,m,n;b.previous=!1,b.changed=!1,b.initialized=!1,b.callback=!1,"init"in b&&!("value"in b)&&(b.value=b.init(a),delete b.init),"process"in b&&(b.value=i(a,b,b.value));for(n in b)if("deprecates"===n)for(f=b[n]instanceof Array?b[n]:[b[n]],j=0,m=f.length;m>j;j++)e=f[j],a.self[e]=function(b,c){return function(e){var f,g,i;return i=a.format.locale.value.dev.deprecated,b="."+b+"()",g=d?'"'+c+'" in .'+d+"()":"."+c+"()",f=d||c,h.error(k(i,b,g),f),a.self}}(e,c);else"global"===n?c in a||(a[c]=[]):"value"!==n&&l(b[n])&&g(a,b[n],n,c);return!0},f=function(a,b){return function(c,e){var f,g,i,j,m,n,o,p;if(f="accepted"in a[b]?a[b].accepted:null,"function"==typeof f&&(f=f(a)),f instanceof Array||(f=[f]),c===Object)return a[b];if(!arguments.length&&f.indexOf(void 0)<0)return"value"in a[b]?a[b].value:a[b];if("style"===b&&"object"==typeof c){p=a.format.locale.value.dev.oldStyle;for(n in c)h.warning(k(p,'"'+n+'"',n),n),a.self[n](c[n])}if("font"===b){"string"==typeof c&&(c={family:c}),o=!0,i=function(a,b,c,d){l(a[c])&&b in a[c]&&(l(a[c][b])?a[c][b].process?a[c][b].value=a[c][b].process(d):a[c][b].value=d:a[c][b]=d)},g=function(a,b,c){var d;if(l(a)){if(o)for(d in a)i(a,b,d,c);else"font"in a&&i(a,b,"font",c);o=!1;for(d in a)g(a[d],b,c)}};for(j in c)m=c[j],"secondary"!==j&&(l(m)&&(m=m.value),m&&g(a,j,m))}return d(a,b,a,b,c),"function"==typeof e&&(a[b].callback=e),a[b].chainable===!1?a[b].value:a.self}},d=function(a,b,c,e,f){var g,h,i,k;if(["accepted","changed","initialized","previous","process"].indexOf(e)<0)if(k=l(f),i=l(c[e])&&"objectAccess"in c[e]&&c[e].objectAccess===!1,g=k&&(i||!("value"in f)&&(!l(c[e])||!(d3.keys(f)[0]in c[e]))),null===f||!k||g)j(a,b,c,e,f);else if(k)for(h in f)d(a,b,c[e],h,f[h])}},{"../../object/validate.coffee":175,"../../string/format.js":176,"../../util/copy.coffee":210,"../console/print.coffee":54,"./process/detect.coffee":90,"./set.coffee":96}],83:[function(a,b,c){b.exports=function(a){return a||(a=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:a,process:Array,value:[]}}},{}],84:[function(a,b,c){var d;d=a("../../../client/rtl.coffee"),b.exports=function(a){var b;return b=["left","center","right"],a===!1&&b.unshift(!1),b.indexOf(a)<0&&(a="left"),{accepted:b,process:function(a){return d?"left"===a?"right":"right"===a?"left":a:a},value:a}}},{"../../../client/rtl.coffee":42}],85:[function(a,b,c){b.exports=function(a){var b;return b=["line-through","none","overline","underline"],a===!1&&b.unshift(!1),b.indexOf(a)<0&&(a="none"),{accepted:b,value:a}}},{}],86:[function(a,b,c){var d,e;e=a("../../../font/validate.coffee"),d=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],b.exports=function(a){return void 0===a&&(a=d),{process:e,value:a}}},{"../../../font/validate.coffee":105}],87:[function(a,b,c){b.exports=function(a){var b;return b=["top","middle","bottom"],a===!1&&b.unshift(!1),b.indexOf(a)<0&&(a="bottom"),{accepted:b,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(a){return this.text=a,this.mapping[a]},value:a}}},{}],88:[function(a,b,c){b.exports=function(a){var b;return b=["capitalize","lowercase","none","uppercase"],a===!1&&b.unshift(!1),b.indexOf(a)<0&&(a="none"),{accepted:b,value:a}}},{}],89:[function(a,b,c){b.exports=function(a,b,c){var d;return b.history&&b.history.reset(),a.constructor===String?a.indexOf("/")>=0?(c.url=a,[]):(d=d3.selectAll(a),d.size()?d:(a.indexOf(".")>=0&&(c.url=a),[])):a}},{}],90:[function(a,b,c){var d,e;d=a("../../../util/copy.coffee"),e=a("../../../array/update.coffee"),b.exports=function(a,b,c){return b.process===Array?e(d(b.value),c):"object"==typeof b.process&&"string"==typeof c?b.process[c]:"function"==typeof b.process?b.process(c,a,b):c}},{"../../../array/update.coffee":37,"../../../util/copy.coffee":210}],91:[function(a,b,c){var d;d=a("../../../client/css.coffee"),b.exports=function(a,b,c){return a===!1||a.indexOf("fa-")<0||0===a.indexOf("fa-")&&d("font-awesome")?a:c.fallback}},{"../../../client/css.coffee":38}],92:[function(a,b,c){b.exports=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if("string"==typeof a){for(a=a.split(" "),c=d=0,g=a.length;g>d;c=++d)o=a[c],a[c]=parseFloat(o,10);a=1===a.length?a[0]:2===a.length?{top:a[0],right:a[1],bottom:a[0],left:a[1]}:3===a.length?{top:a[0],right:a[1],bottom:a[2],left:a[1]}:4===a.length?{top:a[0],right:a[1],bottom:a[2],left:a[3]}:0}if(n=["top","right","bottom","left"],"number"==typeof a)for(e=0,h=n.length;h>e;e++)m=n[e],b[m]=a;else for(f=0,i=n.length;i>f;f++)m=n[f],b[m]=a[m];for(b.css="",l=[],c=k=0,j=n.length;j>k;c=++k)m=n[c],c&&(b.css+=" "),l.push(b.css+=b[m]+"px");
return l}},{}],93:[function(a,b,c){var d,e,f,g;d=a("../../array/contains.coffee"),e=a("../../string/format.js"),f=a("../../string/list.coffee"),g=a("../console/print.coffee"),b.exports=function(a,b,c,h,i){var j,k,l,m,n,o,p,q;if("function"==typeof b&&(b=b(a)),b instanceof Array||(b=[b]),k=d(b,c),k===!1&&void 0!==c){for(o=[],q=JSON.stringify(c),"string"!=typeof c&&(q='"'+q+'"'),m=0,n=b.length;n>m;m++)j=b[m],"string"==typeof j?o.push('"'+j+'"'):"function"==typeof j?o.push(j.toString().split("()")[0].substring(9)):void 0===j?o.push("undefined"):o.push(JSON.stringify(j));o=f(o,a.format.locale.value.ui.or),a.type&&["mode","shape"].indexOf(h)>=0?(p=a.format.locale.value.error.accepted,l=a.format.locale.value.visualization[a.type.value]||a.type.value,g.warning(e(p,q,h,l,o),h)):(p=a.format.locale.value.dev.accepted,g.warning(e(p,q,i,o),h))}return!k}},{"../../array/contains.coffee":35,"../../string/format.js":176,"../../string/list.coffee":177,"../console/print.coffee":54}],94:[function(a,b,c){b.exports=function(a){var b;return b=["auto","optimizeSpeed","crispEdges","geometricPrecision"],b.indexOf(a)>=0||(a="crispEdges"),{accepted:b,value:a}}},{}],95:[function(a,b,c){var d,e;e=a("../../object/validate.coffee"),d=function(a,b){var c;a.changed&&(a.changed=!1),"draw"===b&&(a.frozen=!1,a.update=!0,a.first=!1);for(c in a)c.indexOf("d3plus")<0&&e(a[c])&&d(a[c],c)},b.exports=d},{"../../object/validate.coffee":175}],96:[function(a,b,c){var d,e,f,g,h,i,j,k,l;d=a("../../util/copy.coffee"),e=a("../../util/d3selection.coffee"),l=a("../../object/validate.coffee"),f=a("../../object/merge.coffee"),g=a("../console/print.coffee"),h=a("./process/detect.coffee"),i=a("./rejected.coffee"),j=a("../../string/format.js"),k=a("../../array/update.coffee"),b.exports=function(a,b,c,m,n){var o,p,q,r,s,t,u,v,w,x,y,z,A,B;if(z="value"!==m&&m&&m!==b?'"'+m+'" '+a.format.locale.value.dev.of+" ."+b+"()":"."+b+"()",o="value"===m&&"accepted"in c?c.accepted:l(c[m])&&"accepted"in c[m]?c[m].accepted:[n],!i(a,o,n,b,z)){if(l(c[m])&&"value"in c[m]&&(x=m,c=c[m],m="value"),"value"===m&&"process"in c&&(n=h(a,c,n)),c[m]instanceof Array||c[m]!==n||void 0===n){if(c.changed=!0,c.loaded&&(c.loaded=!1),"history"in a&&"draw"!==b&&(p=d(c),p.method=b,a.history.chain.push(p)),c.previous=c[m],"id"in a&&"value"===m&&"nesting"in c)if("id"!==b){if("object"!=typeof c.nesting&&(c.nesting={}),l(n)){for(t in n)"string"==typeof n[t]&&(n[t]=[n[t]]);c.nesting=f(c.nesting,n),a.id.value in c.nesting||(c.nesting[a.id.value]=n[d3.keys(n)[0]])}else n instanceof Array?c.nesting[a.id.value]=n:c.nesting[a.id.value]=[n];c[m]=c.nesting[a.id.value][0]}else n instanceof Array?(c.nesting=n,"depth"in a&&a.depth.value<n.length?c[m]=n[a.depth.value]:(c[m]=n[0],"depth"in a&&(a.depth.value=0))):(c[m]=n,c.nesting=[n],"depth"in a&&(a.depth.value=0));else"depth"===b?(n>=a.id.nesting.length?a.depth.value=a.id.nesting.length-1:0>n?a.depth.value=0:a.depth.value=n,a.id.value=a.id.nesting[a.depth.value],"object"==typeof a.text.nesting&&(w=a.text.nesting[a.id.value],w&&(a.text.nesting[a.id.value]="string"==typeof w?[w]:w,a.text.value=w instanceof Array?w[0]:w))):l(c[m])&&l(n)?c[m]=f(c[m],n):c[m]=n;"value"===m&&c.global&&(s=c[m].length>0,u=x||m,u in a&&(s&&a.data[u].indexOf(b)<0||!s&&a.data[u].indexOf(b)>=0)&&(a.data[u]=k(a.data[u],b))),"value"===m&&c.dataFilter&&a.data&&a.data.filters.indexOf(b)<0&&a.data.filters.push(b),a.dev.value&&c.changed&&void 0!==c[m]&&(v=c[m]instanceof Array&&c[m].length>10,r=e(c[m]),A="function"==typeof c[m],B=v||r||A?null:"string"==typeof c[m]?c[m]:JSON.stringify(c[m]),null!==B&&B.length<260?(y=a.format.locale.value.dev.setLong,g.log(j(y,z,'"'+B+'"'))):(y=a.format.locale.value.dev.set,g.log(j(y,z))))}else y=a.format.locale.value.dev.noChange,a.dev.value&&g.comment(j(y,z));"value"===m&&c.callback&&!c.url&&(q="function"==typeof c.callback?c.callback:c.callback.value,q&&q(n,a.self))}}},{"../../array/update.coffee":37,"../../object/merge.coffee":174,"../../object/validate.coffee":175,"../../string/format.js":176,"../../util/copy.coffee":210,"../../util/d3selection.coffee":211,"../console/print.coffee":54,"./process/detect.coffee":90,"./rejected.coffee":93}],97:[function(a,b,c){var d=a("../console/print.coffee"),e=a("../../string/format.js");b.exports=function(a){if(a.dev.value){var b="analyzing edges list";d.time(b)}var c=a.types[a.type.value].requirements;c instanceof Array||(c=[c]);var f=c.indexOf("nodes")>=0&&!a.nodes.value;if(f){a.nodes.value=[];var g=[];a.nodes.changed=!0}a.edges.value.forEach(function(b){["source","target"].forEach(function(c){var d=typeof b[a.edges[c]];if("object"!==d)if("number"!==d||f||"number"===a.data.keys[a.id.value])if(f&&g.indexOf(b[a.edges[c]])>=0)b[a.edges[c]]=a.nodes.value.filter(function(d){return d[a.id.value]===b[a.edges[c]]})[0];else{var e={};e[a.id.value]=b[a.edges[c]],b[a.edges[c]]=e}else b[a.edges[c]]=a.nodes.value[b[a.edges[c]]];var h=b[a.edges[c]];f&&g.indexOf(h[a.id.value])<0&&(g.push(h[a.id.value]),a.nodes.value.push(h))}),"keys"in a.data||(a.data.keys={}),a.id.value in a.data.keys||(a.data.keys[a.id.value]=typeof b[a.edges.source][a.id.value])}),a.edges.value=a.edges.value.filter(function(b){var c=b[a.edges.source][a.id.value],f=b[a.edges.target][a.id.value];if(c===f){var g=a.format.locale.value.dev.sameEdge;return d.warning(e(g,'"'+c+'"'),"edges"),!1}return!0}),a.edges.linked=!0,a.dev.value&&d.timeEnd(b)}},{"../../string/format.js":176,"../console/print.coffee":54}],98:[function(a,b,c){var d=a("./hideElement.js");b.exports=function(a){function b(a,b){[].forEach.call(b.attributes,function(b){if(/^data-/.test(b.name)){var c=b.name.substr(5).replace(/-(.)/g,function(a,b){return b.toUpperCase()});a[c]=b.value}}),c.forEach(function(c){null!==b.getAttribute(c)&&(a[c]=b.getAttribute(c))})}var c=[a.color.value,a.icon.value,a.keywords.value,a.alt.value,"style"];a.text.value||a.self.text("text"),c=c.concat(a.id.nesting),a.self.data({element:a.data.value});var e=a.data.element.value.node().tagName.toLowerCase(),f=a.data.element.value.attr("type"),g=[];if("select"===e){var h=a.data.element.value.node().id;h&&a.self.container({id:h}),a.data.element.value.selectAll("option").each(function(c,d){var e={};if(e.text=d3.select(this).text(),b(e,this),g.push(e),this.selected)for(var d=a.id.nesting.length-1;d>=0;d--){var f=a.id.nesting[d];if(f in e){a.self.focus(e[f]);break}}})}else if("input"===e&&"radio"===f){var i=a.data.element.value.node().getAttribute("name");i&&a.self.container({id:i}),a.data.element.value.each(function(c,e){var f={};b(f,this);var h=f[a.id.value]||this.id||!1;if(h&&isNaN(parseFloat(h))){var i=d3.select("label[for="+h+"]");i.empty()||(f.text=i.html(),i.call(d))}g.push(f),this.checked&&a.self.focus(f[a.id.value])})}!a.focus.value.length&&g.length&&(a.data.element.value.node().selectedIndex=0,a.self.focus(g[0][a.id.value]));var j=d3.select("legend[for="+a.container.id+"]");j.empty()||(a.self.title(j.html()),j.call(d));var k=a.container.value?a.container.value.node().tagName.toLowerCase():!1;return(a.container.value===!1||"body"===k)&&(a.container.value=d3.select(a.data.element.value.node().parentNode)),a.data.element.value.call(d),g}},{"./hideElement.js":99}],99:[function(a,b,c){b.exports=function(a){a.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],100:[function(a,b,c){var d=a("../console/print.coffee");b.exports=function(a){if("network"===a.type.value){if(a.dev.value){var b="analyzing node positions";d.time(b)}var c=a.nodes.value.filter(function(a){return"number"==typeof a.x&&"number"==typeof a.y}).length;if(c===a.nodes.value.length)a.nodes.positions=!0;else{var e=d3.layout.force().size([a.width.viz,a.height.viz]).nodes(a.nodes.value).links(a.edges.value),f=a.edges.strength.value;f&&("string"==typeof f?e.linkStrength(function(a){return a[f]}):e.linkStrength(f));var g=50,h=.01;e.start();for(var i=g;i>0&&(e.tick(),!(e.alpha()<h));--i);e.stop(),a.nodes.positions=!0}a.dev.value&&d.timeEnd(b)}}},{"../console/print.coffee":54}],101:[function(a,b,c){var d;d=a("numeric"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;for(null==b&&(b={}),null==b.maxDegree&&(b.maxDegree=5),c=a.length,t=Number.MAX_VALUE,h=null,f=function(){var c,d,e;for(e=[],k=c=1,d=b.maxDegree+1;d>=1?d>c:c>d;k=d>=1?++c:--c)e.push(function(){var b,c,d;for(d=[],c=0,b=a.length;b>c;c++)s=a[c],d.push(Math.pow(s[0],k));return d}());return e}(),A=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)s=a[b],d.push(s[1]);return d}(),m=p=0,v=1<<b.maxDegree;v>=0?v>p:p>v;m=v>=0?++p:--p){for(g=[function(){var a,b,d;for(d=[],u=a=0,b=c;b>=0?b>a:a>b;u=b>=0?++a:--a)d.push(1);return d}()],l=[0],n=r=0,w=b.maxDegree;w>=0?w>r:r>w;n=w>=0?++r:--r)(m&1<<n)>0&&(g.push(f[n]),l.push(n+1));e=d.transpose(g),o=l.length,i=d.dot(d.dot(d.inv(d.dot(g,e)),g),A),B=d.dot(e,i),x=d.sub(A,B),z=d.dot(x,x),y=z/(c-o),q=-.5*c*Math.log(2*Math.PI)-.5*c*Math.log(y)-z/(2*y),j=-2*q+o*(Math.log(c)-Math.log(2*Math.PI)),t>j&&(t=j,h=[l,i,B])}return h}},{numeric:8}],102:[function(a,b,c){var d;d=a("static-kdtree"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o;return null==b&&(b=10),o=d(a),j=function(){var c,d,e;for(e=[],c=0,d=a.length;d>c;c++)k=a[c],e.push(o.knn(k,b+1).slice(1));return e}(),n=function(b,c){var d,e,f,g,h,i;for(d=a[b],e=a[c],g=0,b=h=0,i=d.length;i>=0?i>h:h>i;b=i>=0?++h:--h)f=d[b]-e[b],g+=f*f;return g},g=function(){var c,d,f;for(f=[],e=c=0,d=a.length;d>=0?d>c:c>d;e=d>=0?++c:--c)f.push(n(e,j[e][b-1]));return f}(),l=function(a,b){return Math.max(n(a,b),g[b])},h=function(a){var c,d,e,f,g;for(f=0,g=j[a],d=0,e=g.length;e>d;d++)c=g[d],f+=l(a,c);return b/f},i=function(){var b,c,d;for(d=[],e=b=0,c=a.length;c>=0?c>b:b>c;e=c>=0?++b:--b)d.push(h(e));return d}(),m=function(){var d,g,h,k,l,m;for(m=[],e=d=0,k=a.length;k>=0?k>d:d>k;e=k>=0?++d:--d){for(c=0,l=j[e],g=0,h=l.length;h>g;g++)f=l[g],c+=i[f];c/=b,m.push([e,c/i[e]])}return m}(),m.sort(function(a,b){return b[1]-a[1]})}},{"static-kdtree":10}],103:[function(a,b,c){b.exports=function(a){var b,c,d;return c=d3.median(a),b=d3.median(a.map(function(a){return Math.abs(a-c)})),d=a.map(function(a,d){return[d,Math.abs(a-c)/b]}),d.sort(function(a,b){return b[1]-a[1]})}},{}],104:[function(a,b,c){var d;d=a("../core/font/tester.coffee"),b.exports=function(a,b,c){var e,f,g,h,i,j,k;return c||(c={}),b=b||{},j=c.parent||d("svg").append("text"),h=[],a instanceof Array||(a=[a]),k=j.selectAll("tspan").data(a),e={left:"0px",position:"absolute",top:"0px",x:0,y:0},i=0,"letter-spacing"in b&&(i=parseFloat(b["letter-spacing"]),delete b["letter-spacing"]),g=function(a){var b;return b=0,i&&(b=(d3.select(a).text().length-1)*i),a.getComputedTextLength()+b},f=function(a){return a.parentNode.getBBox().height||a.getBoundingClientRect().height},k.enter().append("tspan").text(String).style(b).attr(e).each(function(a){return"function"==typeof c.mod?c.mod(this):void 0}).each(function(a){var b,c,d;return b=d3.select(this).selectAll("tspan"),b.size()?(d=[],b.each(function(){return d.push(g(this))}),d=d3.max(d)):d=g(this),c=f(this),h.push({height:c,text:a,width:d})}),k.remove(),c.parent||j.remove(),h}},{"../core/font/tester.coffee":70}],105:[function(a,b,c){var d,e;d=a("../core/font/tester.coffee"),e=function(a){var b,c,f,g,h,i,j,k,l,m,n,o,p,q;for(a instanceof Array||(a=a.split(",")),h=0,j=a.length;j>h;h++)f=a[h],f.trim();if(g=a.join(", "),b=e.complete,g in b)return b[g];for(n=function(a){return p.append("span").style("font-family",a).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},o=function(a,b){var c,d,e;return c=n(a),d=c.node().offsetWidth,e=b.node().offsetWidth,c.remove(),d!==e},p=d("div"),l=n("monospace"),m=n("sans-serif"),i=0,k=a.length;k>i;i++)if(c=a[i],q=o(c+",monospace",l),q||(q=o(c+",sans-serif",m)),q){q=c;break}return q||(q="sans-serif"),l.remove(),m.remove(),b[g]=q,q},e.complete={},b.exports=e},{"../core/font/tester.coffee":70}],106:[function(a,b,c){var d=a("../array/sort.coffee"),e=a("../core/methods/attach.coffee"),f=a("../core/data/format.js"),g=a("../core/data/keys.coffee"),h=a("../core/data/load.coffee"),i=a("../core/fetch/data.js"),j=a("../client/ie.js"),k=a("../core/methods/reset.coffee"),l=a("../core/console/print.coffee");b.exports=function(){var b={types:{auto:a("./types/auto.js"),button:a("./types/button/button.coffee"),drop:a("./types/drop/drop.coffee"),toggle:a("./types/toggle.js")}};return b.self=function(a){var c=b.data.value instanceof Array&&b.data.value.length>b.data.large;if(b.draw.timing=b.draw.first||c||j?0:b.timing.ui,b.data.value instanceof Array){if(b.dev.value&&l.group('drawing "'+b.type.value+'"'),b.data.changed&&(b.data.cache={},g(b,"data"),f(b)),b.data.viz=i(b),b.data.sort.value&&(b.data.changed||b.order.changed||b.order.sort.changed)&&d(b.data.viz,b.order.value||b.text.value,b.order.sort.value,b.color.value,b),b.focus.value===!1&&["auto","button"].indexOf(b.type.value)<0){var e=b.data.element.value;if(e&&"select"===e.node().tagName.toLowerCase()){var m=e.property("selectedIndex");m=0>m?0:m;var n=e.selectAll("option")[0][m],o=n.getAttribute("data-"+b.id.value)||n.getAttribute(b.id.value);o&&(b.focus.value=o)}b.focus.value===!1&&b.data.viz.length&&(b.focus.value=b.data.viz[0][b.id.value]),b.dev.value&&b.focus.value!==!1&&l.log('"value" set to "'+b.focus.value+'"')}var p=function(a,c){c="number"!=typeof c?1===b.id.nesting.length?0:b.id.nesting.length-1:c;var d=b.id.nesting[c];return c>0&&(!(d in a)||a[d]instanceof Array)?p(a,c-1):d};if(b.data.changed){"auto"===b.search.value?b.data.viz.length>10?(b.search.enabled=!0,b.dev.value&&l.log("Search enabled.")):(b.search.enabled=!1,b.dev.value&&l.log("Search disabled.")):b.search.enabled=b.search.value;var q=b.data.element.value?b.data.element.value.node().tagName.toLowerCase():"";if(b.data.element.value&&"select"===q){var r=[];for(var s in b.data.nested.all)r=r.concat(b.data.nested.all[s]);options=b.data.element.value.selectAll("option").data(r,function(a){var b=a?p(a):!1;return a&&b in a?a[b]:!1}),options.exit().remove(),options.enter().append("option"),options.each(function(a){var c=p(a),d=c===b.id.value?b.text.value||b.id.value:b.text.nesting!==!0&&c in b.text.nesting?b.text.nesting[c]:c;for(var e in a)"object"!=typeof a[e]&&(e===d&&d3.select(this).html(a[e]),["alt","value"].indexOf(e)>=0?d3.select(this).attr(e,a[e]):d3.select(this).attr("data-"+e,a[e]));a[c]===b.focus.value?this.selected=!0:this.selected=!1})}}else if(b.focus.changed&&b.data.element.value){var t=b.data.element.value.node().tagName.toLowerCase();if("select"===t)b.data.element.value.selectAll("option").each(function(a){a[p(a)]===b.focus.value?this.selected=!0:this.selected=!1});else{var t=b.data.element.value.attr("type").toLowerCase();"radio"===t&&b.data.element.value.each(function(a){this.value===b.focus.value?this.checked=!0:this.checked=!1})}}if("auto"!==b.type.value){if(!b.container.ui){b.container.ui=b.container.value.selectAll("div#d3plus_"+b.type.value+"_"+b.container.id).data(["container"]);var u=b.data.element.value?b.data.element.value[0][0]:null;if(u)if(u.id)u="#"+u.id;else{var v=u.getAttribute(b.id.value)?b.id.value:"data-"+b.id.value;u=u.getAttribute(v)?"["+v+"="+u.getAttribute(v)+"]":null}b.container.ui.enter().insert("div",u).attr("id","d3plus_"+b.type.value+"_"+b.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}b.container.ui.style("display",b.ui.display.value),b.container.ui.transition().duration(b.draw.timing).style("margin",b.ui.margin.css);var w=b.container.ui.selectAll("div.d3plus_title").data(b.title.value?[b.title.value]:[]);w.enter().insert("div","#d3plus_"+b.type.value+"_"+b.container.id).attr("class","d3plus_title").style("display","inline-block"),w.style("color",b.font.color).style("font-family",b.font.family.value).style("font-size",b.font.size+"px").style("font-weight",b.font.weight).style("padding",b.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",b.ui.border+"px").text(String).each(function(a){b.margin.left=this.offsetWidth})}if(b.data.value.length){var x=b.format.locale.value.visualization[b.type.value];b.dev.value&&l.time("drawing "+x),b.types[b.type.value](b),b.dev.value&&l.timeEnd("drawing "+x)}else!b.data.url||b.data.loaded&&!b.data.stream||h(b,"data",b.self.draw);b.dev.value&&l.timeEnd("total draw time"),k(b)}},e(b,{active:a("./methods/active.coffee"),alt:a("./methods/alt.coffee"),color:a("./methods/color.coffee"),config:a("./methods/config.coffee"),container:a("./methods/container.coffee"),data:a("./methods/data.js"),depth:a("./methods/depth.coffee"),dev:a("./methods/dev.coffee"),draw:a("./methods/draw.js"),focus:a("./methods/focus.coffee"),font:a("./methods/font.coffee"),format:a("./methods/format.coffee"),height:a("./methods/height.coffee"),history:a("./methods/history.coffee"),hover:a("./methods/hover.coffee"),icon:a("./methods/icon.coffee"),id:a("./methods/id.coffee"),keywords:a("./methods/keywords.coffee"),margin:a("./methods/margin.coffee"),open:a("./methods/open.coffee"),order:a("./methods/order.coffee"),remove:a("./methods/remove.coffee"),search:a("./methods/search.coffee"),select:a("./methods/select.coffee"),selectAll:a("./methods/selectAll.coffee"),text:a("./methods/text.coffee"),timing:a("./methods/timing.coffee"),title:a("./methods/title.coffee"),type:a("./methods/type.coffee"),ui:a("./methods/ui.coffee"),width:a("./methods/width.coffee")}),b.self}},{"../array/sort.coffee":36,"../client/ie.js":39,"../core/console/print.coffee":54,"../core/data/format.js":58,"../core/data/keys.coffee":60,"../core/data/load.coffee":61,"../core/fetch/data.js":66,"../core/methods/attach.coffee":82,"../core/methods/reset.coffee":95,"./methods/active.coffee":107,"./methods/alt.coffee":108,"./methods/color.coffee":109,"./methods/config.coffee":110,"./methods/container.coffee":111,"./methods/data.js":112,"./methods/depth.coffee":113,"./methods/dev.coffee":114,"./methods/draw.js":115,"./methods/focus.coffee":116,"./methods/font.coffee":117,"./methods/format.coffee":118,"./methods/height.coffee":119,"./methods/history.coffee":120,"./methods/hover.coffee":121,"./methods/icon.coffee":122,"./methods/id.coffee":123,"./methods/keywords.coffee":124,"./methods/margin.coffee":125,"./methods/open.coffee":126,"./methods/order.coffee":127,"./methods/remove.coffee":128,"./methods/search.coffee":129,"./methods/select.coffee":130,"./methods/selectAll.coffee":131,"./methods/text.coffee":132,"./methods/timing.coffee":133,"./methods/title.coffee":134,"./methods/type.coffee":135,"./methods/ui.coffee":136,"./methods/width.coffee":137,"./types/auto.js":138,"./types/button/button.coffee":139,"./types/drop/drop.coffee":144,"./types/toggle.js":161}],107:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":83}],108:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],mute:d(!0),solo:d(!0),value:"alt"}},{"../../core/methods/filter.coffee":83}],109:[function(a,b,c){b.exports={accepted:[String],value:"color"}},{}],110:[function(a,b,c){b.exports={accepted:[Object],objectAccess:!1,process:function(a,b){var c,d;for(c in a)d=a[c],c in b.self&&b.self[c](d);return a},value:{}}},{}],111:[function(a,b,c){var d;d=a("../../util/d3selection.coffee"),b.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(a){return a===!1?d3.select("body"):d(a)?a:a instanceof Array?d3.select(a[0][0]):(this.selector=a,d3.select(a))},value:d3.select("body")}},{"../../util/d3selection.coffee":211}],112:[function(a,b,c){var d=a("../../util/d3selection.coffee"),e=a("../../core/methods/process/data.coffee");b.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(a,b){var c=!1;return d(a)?c=a:"string"!=typeof a||d3.select(a).empty()||(c=d3.select(a)),c&&b.self.container(d3.select(c.node().parentNode)),c},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(a,b){return"default"===b.container.id&&a.length&&b.self.container({id:"default"+a.length}),e(a,b,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":89,"../../util/d3selection.coffee":211}],113:[function(a,b,c){b.exports={accepted:[Number],value:0}},{}],114:[function(a,b,c){b.exports={accepted:[Boolean],value:!1}},{}],115:[function(a,b,c){var d=a("../../util/d3selection.coffee"),e=a("../../core/parse/hideElement.js"),f=a("../../core/parse/element.js"),g=a("../../core/console/print.coffee"),h=a("../../string/format.js");b.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(a,b){if(this.initialized===!1)return this.initialized=!0,a;if(!b.data.value||b.data.value instanceof Array&&!d(b.data.value)?b.data.element.value&&b.data.element.value.call(e):b.data.value=f(b),void 0===a&&"function"==typeof this.value&&(a=this.value),b.container.value===!1){var c=b.format.locale.value.dev.setContainer;g.warning(c,"container")}else if(b.container.value.empty()){var c=b.format.locale.value.dev.noContainer,i=b.container.selector||"";g.warning(h(c,'"'+i+'"'),"container")}else b.dev.value&&g.time("total draw time"),b.container.value.call(b.self);if("function"==typeof a&&b.history.chain.length){var j={};b.history.chain.forEach(function(a){var b=a.method;delete a.method,j[b]=a}),a(j),b.history.chain=[]}return a},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../core/parse/element.js":98,"../../core/parse/hideElement.js":99,"../../string/format.js":176,"../../util/d3selection.coffee":211}],116:[function(a,b,c){b.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(a,b){var c,d,e,f,g,h,i,j,k,l;if(d=b.data.element.value,d&&["string","number"].indexOf(typeof a)>=0)if(e=d.node().tagName.toLowerCase(),f=d.attr("type"),"select"===e)for(l=d.selectAll("option"),g=h=0,j=l.length;j>h;g=++h)c=l[g],c&&c[b.id.value]===a&&(d.node().selectedIndex=g);else if("input"===e&&"radio"===f)for(i=0,k=d.length;k>i;i++)c=d[i],this.checked=c&&c[b.id.value]===a;return a},value:!1}},{}],117:[function(a,b,c){var d,e,f,g;f=a("../../core/methods/font/family.coffee"),d=a("../../core/methods/font/align.coffee"),e=a("../../core/methods/font/decoration.coffee"),g=a("../../core/methods/font/transform.coffee"),b.exports={align:d(),color:"#444444",decoration:e(),family:f(),secondary:{align:d(),color:"#444444",decoration:e(),family:f(),size:12,spacing:0,transform:g(),weight:200},size:12,spacing:0,transform:g(),weight:200}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],118:[function(a,b,c){var d,e,f,g;d=a("../../number/format.coffee"),e=a("../../core/locale/locale.coffee"),f=a("../../object/merge.coffee"),g=a("../../string/title.coffee"),b.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(e)},process:function(a){var b,c;return b="en_US",c=e[b],a!==b&&(c=f(c,e[a])),this.language=a,c},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(a,b){if("string"==typeof a)b.self.format({locale:a});else if("function"==typeof a)return a;return this.value},text:{accepted:[!1,Function],value:!1},value:function(a,b){var c,e,f;return b||(b={}),f=b.vars||{},f.time&&f.time.value&&b.key===f.time.value?(e=a.constructor===Date?a:new Date(a),f.data.time.format(e)):"number"==typeof a?(c=this.number.value||d)(a,b):"string"==typeof a?(c=this.text.value||g)(a,b):JSON.stringify(a)}}},{"../../core/locale/locale.coffee":81,"../../number/format.coffee":173,"../../object/merge.coffee":174,"../../string/title.coffee":179}],119:[function(a,b,c){b.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],120:[function(a,b,c){b.exports={back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var a;for(a=[];this.states.length;)a.push(this.states.pop()());return a},states:[]}},{}],121:[function(a,b,c){b.exports={accepted:[Boolean,Number,String],value:!1}},{}],122:[function(a,b,c){var d;d=a("../../core/methods/process/icon.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:d,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:d,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:d,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:d,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:d,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":91}],123:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[Array,String],dataFilter:!0,mute:d(!0),nesting:["value"],solo:d(!0),value:"value"}},{"../../core/methods/filter.coffee":83}],124:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],mute:d(!0),solo:d(!0),value:"keywords"}},{"../../core/methods/filter.coffee":83}],125:[function(a,b,c){var d;d=a("../../core/methods/process/margin.coffee"),b.exports={accepted:[Number,Object,String],process:function(a){var b;return void 0===a&&(a=this.value),b=a,d(a,this),b},value:0}},{"../../core/methods/process/margin.coffee":92}],126:[function(a,b,c){b.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],127:[function(a,b,c){b.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],128:[function(a,b,c){b.exports={accepted:[void 0,Function],process:function(a,b){this.initialized&&b.container.ui.remove(),delete b.container.ui},value:void 0}},{}],129:[function(a,b,c){b.exports={accepted:["auto",Boolean],process:function(a){return"Boolean"==typeof a&&(this.enabled=a),a},term:"",value:"auto"}},{}],130:[function(a,b,c){b.exports={accepted:[String],chainable:!1,process:function(a,b){var c;return c=b.container.value,c&&a?c.select(a):a},value:void 0}},{}],131:[function(a,b,c){b.exports={accepted:[String],chainable:!1,process:function(a,b){var c;return c=b.container.value,c&&a?c.selectAll(a):a},value:void 0}},{}],132:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,String],nesting:!0,mute:d(!0),solo:d(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],133:[function(a,b,c){b.exports={mouseevents:60,ui:200}},{}],134:[function(a,b,c){var d,e,f,g;d=a("../../core/methods/font/decoration.coffee"),e=a("../../core/methods/font/family.coffee"),g=a("../../core/methods/font/transform.coffee"),f=a("../../string/strip.js"),b.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:e(),size:16,transform:g(),weight:400},link:!1,process:function(a,b){var c;return 0===b.container.id.indexOf("default")&&a&&(c=f(a).toLowerCase(),b.self.container({id:c})),a},value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../string/strip.js":178}],135:[function(a,b,c){b.exports={accepted:function(a){return d3.keys(a.types)},value:"auto"}},{}],136:[function(a,b,c){var d,e,f,g,h;f=a("../../core/methods/font/family.coffee"),d=a("../../core/methods/font/align.coffee"),e=a("../../core/methods/font/decoration.coffee"),g=a("../../core/methods/process/margin.coffee"),h=a("../../core/methods/font/transform.coffee"),b.exports={align:d("center"),border:1,color:{primary:{process:function(a,b){var c;return c=this.value,b.ui.color.secondary.value||(b.ui.color.secondary.value=d3.rgb(c).darker(.75).toString()),a},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:d("center"),color:"#444",decoration:e(),family:f(),size:11,transform:h(),weight:200},margin:{process:function(a){var b;return void 0===a&&(a=this.value),b=a,g(a,this),b},value:5},padding:{process:function(a){var b;return void 0===a&&(a=this.value),b=a,g(a,this),b},value:5}}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../core/methods/process/margin.coffee":92}],137:[function(a,b,c){b.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],138:[function(a,b,c){b.exports=function(a){var b=a.data.value.length;1===b?a.self.type("button").draw():5>b?a.self.type("toggle").draw():a.self.type("drop").draw()}},{}],139:[function(a,b,c){b.exports=function(b){var c,d,e,f,g,h,i,j;return h=a("../../../core/console/print.coffee"),e=a("./functions/color.coffee"),f=a("./functions/icons.js"),g=a("./functions/mouseevents.coffee"),i=a("./functions/style.js"),c=b.container.ui.selectAll("div.d3plus_node").data(b.data.viz,function(a){return a[b.id.value]}),b.dev.value&&h.time("enter"),c.enter().append("div").attr("class","d3plus_node").call(e,b).call(i,b).call(f,b).call(g,b),b.dev.value&&h.timeEnd("enter"),b.draw.update||b.draw.timing?(b.dev.value&&h.time("ordering"),c.order(),b.dev.value&&h.timeEnd("ordering"),j=c):(d=[b.focus.previous,b.focus.value,b.hover.previous,b.hover.value].filter(function(a){return a}),j=c.filter(function(a){return d.indexOf(a[b.id.value])>=0})),b.dev.value&&h.time("update"),j.classed("d3plus_button_active",function(a){return b.focus.value===a[b.id.value]}),b.draw.timing?j.transition().duration(b.draw.timing).call(e,b).call(i,b):j.call(e,b).call(i,b),j.call(f,b).call(g,b),b.dev.value&&h.timeEnd("update"),c.exit().remove()}},{"../../../core/console/print.coffee":54,"./functions/color.coffee":140,"./functions/icons.js":141,"./functions/mouseevents.coffee":142,"./functions/style.js":143}],140:[function(a,b,c){b.exports=function(b,c){var d,e,f;return d=a("../../../../color/legible.coffee"),e=a("../../../../color/lighter.coffee"),f=a("../../../../color/text.coffee"),b.style("background-color",function(a){var b;return b=c.focus.value===a[c.id.value]?c.ui.color.secondary.value:c.ui.color.primary.value,c.hover.value===a[c.id.value]&&(b=d3.rgb(b).darker(.15).toString()),b}).style("color",function(a){var b,e,g,h;return h=c.focus.value===a[c.id.value]?.75:1,g=a[c.icon.value]&&c.data.viz.length<c.data.large,!g&&a[c.color.value]?e=d(a[c.color.value]):(b=c.focus.value===a[c.id.value]?c.ui.color.secondary.value:c.ui.color.primary.value,c.hover.value===a[c.id.value]&&(b=d3.rgb(b).darker(.15).toString()),e=f(b)),e=d3.rgb(e),"rgba("+e.r+","+e.g+","+e.b+","+h+")"}).style("border-color",c.ui.color.secondary.value)}},{"../../../../color/legible.coffee":46,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52}],141:[function(a,b,c){var d=a("../../../../client/prefix.coffee"),e=a("../../../../client/rtl.coffee");b.exports=function(a,b){var c="right"===b.font.align.value&&!e||e&&"right"===b.font.align.value;a.each(function(a,f){var g=["label"];a[b.icon.value]&&b.data.viz.length<=b.data.large&&g.push("icon");var h=b.icon.button.value;a[b.id.value]===b.focus.value&&b.icon.select.value?(h=b.icon.select.value,g.push("selected")):h&&a.d3plus.icon!==!1&&g.push("selected");var i=0,j=d3.select(this).selectAll("div.d3plus_button_element").data(g,function(a){return a});j.enter().append("div").style("display",function(a){return"label"===a?"block":"absolute";
}),j.order().attr("class",function(a){var b="";return"selected"===a&&0===h.indexOf("fa-")&&(b=" fa "+h),"d3plus_button_element d3plus_button_"+a+b}).html(function(c){if("label"===c){var d=b.text.value&&b.text.value in a&&!(a[b.text.value]instanceof Array)?b.text.value:b.id.value;return b.format.value(a[d])}return"selected"===c&&h.indexOf("fa-")<0?h:""}).style("background-image",function(c){return"icon"===c?"url('"+a[b.icon.value]+"')":"none"}).style("background-color",function(c){return"icon"===c&&"knockout"===a.style?a[b.color.value]||b.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(a){return"label"===a?b.font.align.value:"center"}).style("position",function(a){return"label"==a?"static":"absolute"}).style("width",function(a){return"label"===a?"auto":(i=b.height.value?b.height.value-(b.ui.padding.top+b.ui.padding.bottom)-2*b.ui.border:b.font.size+b.ui.border,i+"px")}).style("height",function(a){return"icon"===a?i+"px":"auto"}).style("margin-top",function(a){if("label"===a)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var c=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===a)var c=b.font.size;else var c=i;return-c/2+"px"}).style("top",function(a){return"label"===a?"auto":"50%"}).style("left",function(a){return"icon"===a&&!c||"selected"===a&&c?b.ui.padding.left+"px":"auto"}).style("right",function(a){return"icon"===a&&c||"selected"===a&&!c?b.ui.padding.right+"px":"auto"}).style(d()+"transition",function(a){return"selected"===a?b.draw.timing/1e3+"s":"none"}).style(d()+"transform",function(a){var c="selected"===a?b.icon.select.rotate:"none";return"string"==typeof c?c:"rotate("+c+"deg)"}).style("opacity",function(a){return"selected"===a?b.icon.select.opacity:1}),j.exit().remove();var k=d3.select(this).selectAll(".d3plus_button_label");if(i>0){var l=b.ui.padding;l=3===g.length?l.top+"px "+(2*l.right+i)+"px "+l.bottom+"px "+(2*l.left+i)+"px":g.indexOf("icon")>=0&&!e||g.indexOf("selected")>=0&&e?l.top+"px "+l.right+"px "+l.bottom+"px "+(2*l.left+i)+"px":l.top+"px "+(2*l.right+i)+"px "+l.bottom+"px "+l.left+"px",k.style("padding",l)}else k.style("padding",b.ui.padding.css);if("number"==typeof b.width.value){var m=b.width.value;m-=parseFloat(k.style("padding-left"),10),m-=parseFloat(k.style("padding-right"),10),m-=2*b.ui.border,m+="px"}else var m="auto";k.style("width",m)})}},{"../../../../client/prefix.coffee":41,"../../../../client/rtl.coffee":42}],142:[function(a,b,c){b.exports=function(b,c,d){var e,f;return d=a("./color.coffee"),e=a("../../../../client/pointer.coffee"),f=a("../../../../client/ie.js"),b.on(e.over,function(a,b){return c.self.hover(a[c.id.value]),f||!c.draw.timing?d3.select(this).style("cursor","pointer").call(d,c):d3.select(this).style("cursor","pointer").transition().duration(c.timing.mouseevents).call(d,c)}).on(e.out,function(a){return c.self.hover(!1),f||!c.draw.timing?d3.select(this).style("cursor","auto").call(d,c):d3.select(this).style("cursor","auto").transition().duration(c.timing.mouseevents).call(d,c)}).on(e.click,function(a){return c.focus.value!==!1?c.self.focus(a[c.id.value]).draw():c.focus.callback?c.focus.callback(a,c.self):void 0})}},{"../../../../client/ie.js":39,"../../../../client/pointer.coffee":40,"./color.coffee":140}],143:[function(a,b,c){b.exports=function(a,b){a.style("position","relative").style("margin",b.ui.margin.css).style("display",b.ui.display.value).style("border-style","solid").style("border-width",b.ui.border+"px").style("font-family",b.font.family.value).style("font-size",b.font.size+"px").style("font-weight",b.font.weight).style("letter-spacing",b.font.spacing+"px")}},{}],144:[function(a,b,c){b.exports=function(b){var c,d,e,f,g,h,i,j,k,l,m;return e=a("./functions/element.coffee"),f=a("./functions/keyboard.coffee"),m=a("./functions/window.js"),l=a("./functions/width.js"),c=a("./functions/button.js"),i=a("./functions/selector.js"),j=a("./functions/title.js"),h=a("./functions/search.js"),g=a("./functions/list.js"),d=a("./functions/data.js"),k=a("./functions/update.js"),b.margin.top=0,b.margin.title=0,e(b),f(b),m(b),l(b),c(b),i(b),j(b),h(b),g(b),d(b),k(b)}},{"./functions/button.js":147,"./functions/data.js":148,"./functions/element.coffee":149,"./functions/keyboard.coffee":152,"./functions/list.js":153,"./functions/search.js":155,"./functions/selector.js":156,"./functions/title.js":157,"./functions/update.js":158,"./functions/width.js":159,"./functions/window.js":160}],145:[function(a,b,c){b.exports=function(a,b,c){var d=[],c=c||a.active.value;if(c instanceof Array)for(var e=0;e<c.length;e++)d.push(this(a,b,c[e]));else{var f=typeof c;"number"===f?d.push(a.depth.value===c):"function"===f?d.push(c(b)):d.push(b===c)}return d.indexOf(!0)>=0}},{}],146:[function(a,b,c){var d=a("../../../../core/console/print.coffee");b.exports=function(a){a.dev.value&&d.time("rotating arrow");var b="&#x276f;"===a.icon.drop.value?90:0;if(a.open.value!=a.open.flipped.value)var c=180+b;else var c=b;a.container.button.icon({select:{opacity:a.open.value?.5:1,rotate:c}}).draw(),a.dev.value&&d.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":54}],147:[function(a,b,c){var d=a("../../../../util/copy.coffee"),e=a("../../../../client/pointer.coffee"),f=a("../../../form.js"),g=a("../../../../core/console/print.coffee");b.exports=function(a){if("button"in a.container||(a.dev.value&&g.time("creating main button"),a.container.button=f().container(a.container.ui).type("button").ui({margin:0}),a.dev.value&&g.timeEnd("creating main button")),a.focus.changed||a.data.changed||a.depth.changed){var b=a.depth.value,c=d(a.data.value.filter(function(c){for(var d=!1,e=0;e<a.id.nesting.length;e++){var f=a.id.nesting[e];if(d=f in c&&c[f]===a.focus.value){b=e;break}}return d})[0]);c||(c=a.container.button.data()[0]||a.data.viz[0]),a.container.button.data([c]).id(a.id.nesting).depth(b)}var h=a.hover.value===!0?a.focus.value:!1;a.container.button.draw({update:a.draw.update}).focus("").font(a.font).format(a.format).hover(h).icon({button:a.icon.drop.value,select:a.icon.drop.value,value:a.icon.value}).text(a.text.value).timing({ui:a.draw.timing}).ui({border:a.ui.border,color:a.ui.color,padding:a.ui.padding.css}).width(a.width.value).draw();var i=a.container.button.container(Object).ui;a.margin.top+=i.node().offsetHeight||i.node().getBoundingClientRect().height,i.on(e.click,function(){a.self.open(!a.open.value).draw()})}},{"../../../../client/pointer.coffee":40,"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":210,"../../../form.js":106}],148:[function(a,b,c){var d=a("../../../../string/format.js"),e=a("../../../../string/strip.js");b.exports=function(a){if(a.data.url&&!a.data.loaded){var b={};b[a.text.value||a.id.value]=a.format.value(a.format.locale.value.ui.loading),a.data.filtered=[b],a.data.changed="loading"!==a.data.lastFilter,a.data.lastFilter="loading"}else if(a.open.value)if(a.search.term){var c=e(a.search.term).split("_"),f=[a.id.value,a.text.value,a.alt.value,a.keywords.value];f=f.filter(function(a){return a}),c=c.filter(function(a){return""!==a});var g=[],h=[],i=[],j=[];if(a.id.nesting.forEach(function(b){j=j.concat(a.data.nested.all[b])}),j.forEach(function(b){var d=!1;f.forEach(function(f){if(!d&&f in b&&"string"==typeof b[f]){var j=b[f].toLowerCase();if([a.text.value,a.id.value].indexOf(f)>=0&&0===j.indexOf(a.search.term))g.push(b),d=!0;else if(j.indexOf(a.search.term)>=0)h.push(b),d=!0;else{var k=e(j).split("_");for(var l in k){if(d)break;for(var m in c)if(0===k[l].indexOf(c[m])){i.push(b),d=!0;break}}}}})}),a.data.filtered=d3.merge([g,h,i]),a.data.filtered.forEach(function(a,b){a.d3plus_order=b}),a.data.changed=!0,a.data.lastFilter="search",0===a.data.filtered.length){var k={},l=a.format.value(a.format.locale.value.ui.noResults);k[a.text.value||a.id.value]=d(l,'"'+a.search.term+'"'),a.data.filtered=[k]}}else a.data.filtered=a.data.viz,a.data.changed="viz"!==a.data.lastFilter,a.data.lastFilter="viz",a.id.nesting.length>1&&a.depth.value<a.id.nesting.length-1&&(a.data.filtered=a.data.filtered.filter(function(b){return"endPoint"in b.d3plus&&b.d3plus.endPoint===a.depth.value&&(b.d3plus.icon=!1),!0}),a.data.changed="depth"!==a.data.lastFilter,a.data.lastFilter="depth");else a.data.filtered=[]}},{"../../../../string/format.js":176,"../../../../string/strip.js":178}],149:[function(a,b,c){b.exports=function(a){return a.data.element.value?(a.data.element.value.on("focus."+a.container.id,function(){return a.self.hover(!0).draw()}),a.data.element.value.on("blur."+a.container.id,function(){var b;return b=a.search.enabled?d3.event.relatedTarget!==a.container.value.select("input").node():!0,b?a.self.open(!1).hover(!1).draw():void 0}),a.data.element.value.on("change."+a.container.id,function(){return a.self.focus(this.value).draw()}),a.data.element.value.on("keydown.cancel_"+a.container.id,function(){return 9!==d3.event.keyCode?d3.event.preventDefault():void 0})):void 0}},{}],150:[function(a,b,c){b.exports=function(a){var b=a.height.secondary,c=a.container.button.container().node().getBoundingClientRect(),d=window.innerHeight-c.bottom-2*a.ui.border-a.ui.margin.top-a.ui.margin.bottom-a.ui.padding.top-a.ui.padding.bottom;d<3*c.height&&(d=c.top-10,a.self.open({flipped:!0})),"number"!=typeof b&&(b=d),b>a.height.max&&(b=a.height.max),a.self.height({secondary:b})}},{}],151:[function(a,b,c){var d,e,f,g;d=a("./active.js"),e=a("../../../../util/copy.coffee"),f=a("../../../form.js"),g=a("../../../../core/console/print.coffee"),b.exports=function(a){var b,c,h;a.open.value&&(a.dev.value&&g.time("updating list items"),"items"in a.container||(a.container.items=f().container(a.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),c=a.draw.timing?a.data.large:1,h=e(a.order),h.value=a.search.term.length?"d3plus_order":a.order.value,b=a.depth.value===a.id.nesting.length-1,(a.focus.changed||a.container.items.focus()===!1)&&a.container.items.focus(a.focus.value,function(b){var c,e,f,g;e=a.data.filtered.filter(function(c){return c[a.id.value]===b})[0],a.depth.value<a.id.nesting.length-1&&a.id.nesting[a.depth.value+1]in e?(f=a.depth.value,g=a.id.solo.value,a.history.states.push(function(){return a.self.depth(f).id({solo:g}).draw()}),a.self.depth(a.depth.value+1).id({solo:[b]}).draw()):(a.depth.changed||a.self.open(!1),c=b!==a.focus.value,c&&a.active.value&&(c=d(a,b)),c&&a.self.focus(b).draw())}),a.container.items.active(a.active.value).data({large:c,sort:a.data.sort.value,value:a.data.filtered}).draw({update:a.draw.update}).font(a.font.secondary).format(a.format).hover(a.hover.value).id(a.id.value).icon({button:b?!1:a.icon.next,select:b?a.icon.select:!1,value:a.icon.value}).order(h).text(a.text.secondary.value||a.text.value).timing({ui:a.draw.timing}).ui({color:{primary:1===a.id.nesting.length?a.ui.color.primary.value:a.ui.color.secondary.value,secondary:a.ui.color.secondary.value},padding:a.ui.padding.css}).draw(),a.dev.value&&g.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":210,"../../../form.js":106,"./active.js":145}],152:[function(a,b,c){b.exports=function(a){return d3.select(window).on("keydown."+a.container.id,function(){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(j=d3.event.keyCode,a.open.value||a.hover.value===!0){for(l=a.hover.value===!0?"focus":"hover",h=!1,m=a.data.filtered,g=i=0,k=m.length;k>i;g=++i)if(b=m[g],b[a.id.value]===a[l].value){h=g;break}if(9===j&&a.open.value&&(!a.search.enabled||a.search.enabled&&!d3.event.shiftKey))return a.self.open(!1).hover(!1).draw();if([38,40].indexOf(j)>=0)return h===!1?h=0:38===j?a.open.value&&(0>=h?h=a.data.filtered.length-1:h-=1):40===j&&a.open.value&&(h>=a.data.filtered.length-1?h=0:h+=1),f="boolean"!=typeof a.hover.value?a.data.filtered[h][a.id.value]:a.focus.value,a.self.hover(f).open(!0).draw();if(13===j)return"boolean"!=typeof a.hover.value?(c=a.data.filtered.filter(function(b){return b[a.id.value]===a.hover.value})[0],d=a.depth.value,d<a.id.nesting.length-1&&a.id.nesting[d+1]in c?(n=a.id.solo.value,e=function(){return a.self.depth(d).id({solo:n}).draw()},a.history.states.push(e),a.self.depth(a.depth.value+1).id({solo:[a.hover.value]}).draw()):a.self.focus(a.hover.value).hover(!0).draw()):a.self.hover(a.focus.value).open(!0).draw();if(27===j){if(a.open.value)return a.self.open(!1).hover(!0).draw();if(a.hover.value===!0)return a.self.hover(!1).draw()}}})}},{}],153:[function(a,b,c){var d=a("../../../../core/console/print.coffee");b.exports=function(a){a.dev.value&&d.time("populating list"),a.container.list=a.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),a.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+a.container.id).style("overflow-y","auto").style("overflow-x","hidden"),a.dev.value&&d.timeEnd("populating list")}},{"../../../../core/console/print.coffee":54}],154:[function(a,b,c){var d=a("../../../../core/console/print.coffee");b.exports=function(a){if(a.open.value){a.dev.value&&d.time("calculating height");var b=!1;if("none"==a.container.selector.style("display"))var b=!0;b&&a.container.selector.style("display","block");var c=a.container.selector.style("height"),e=a.container.selector.property("scrollTop"),f=a.container.list.style("max-height"),g=a.container.list.property("scrollTop");a.container.selector.style("height","auto"),a.container.list.style("max-height","200000px"),a.container.listHeight=parseFloat(a.container.selector.style("height"),10),a.container.list.style("max-height",f).property("scrollTop",g),a.container.selector.style("height",c).property("scrollTop",e);var h=!1;if(a.container.listHeight>a.height.secondary&&(a.container.listHeight=a.height.secondary,h=!0),b&&a.container.selector.style("display","none"),a.dev.value&&d.timeEnd("calculating height"),h){a.dev.value&&d.time("calculating scroll position");var i=a.container.list.select("div").selectAll("div.d3plus_node"),j=i[0][0],k="boolean"!=typeof a.hover.value?a.hover.value:a.focus.value;i.each(function(b,c){b[a.id.value]===k&&(j=this)});var b=!1;"none"===a.container.selector.style("display")&&(b=!0,a.container.selector.style("display","block"));var l=j.offsetTop,m=j.offsetHeight||j.getBoundingClientRect().height,n=a.container.list.property("scrollTop");b&&a.container.selector.style("display","none"),b||a.data.changed||a.depth.changed?a.container.listScroll=l:(a.container.listScroll=n,n>l?a.container.listScroll=l:l+m>n+a.height.secondary-a.search.height&&(a.container.listScroll=l-(a.height.secondary-m-a.search.height))),a.dev.value&&d.timeEnd("calculating scroll position")}else a.container.listScroll=0}else a.container.listScroll=a.container.list.property("scrollTop"),a.container.listHeight=0}},{"../../../../core/console/print.coffee":54}],155:[function(a,b,c){var d=a("../../../../client/prefix.coffee"),e=a("../../../../core/console/print.coffee");b.exports=function(b){function c(a){a.style("padding",b.ui.padding.css).style("display","block").style("background-color",d3.rgb(b.ui.color.primary.value).darker(.15).toString())}function f(a){var c=b.width.secondary-2*b.ui.padding.left-2*b.ui.padding.right+2*b.ui.border;a.style("padding",b.ui.padding.left/2+b.ui.padding.right/2+"px").style("width",c+"px").style("border-width","0px").style("font-family",b.font.secondary.family.value).style("font-size",b.font.secondary.size+"px").style("font-weight",b.font.secondary.weight).style("text-align",b.font.secondary.align).style("outline","none").style(d()+"border-radius","0").attr("placeholder",b.format.value(b.format.locale.value.method.search))}b.dev.value&&e.time("creating search");var g=a("./data.js"),h=a("./items.coffee"),i=a("./update.js");b.container.search=b.container.selector.selectAll("div.d3plus_drop_search").data(b.search.enabled?["search"]:[]),b.draw.timing?(b.container.search.transition().duration(b.draw.timing).call(c),b.container.search.select("input").transition().duration(b.draw.timing).call(f)):(b.container.search.call(c),b.container.search.select("input").call(f)),b.container.search.enter().insert("div","#d3plus_drop_list_"+b.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+b.container.id).call(c).append("input").attr("id","d3plus_drop_input_"+b.container.id).style("-webkit-appearance","none").call(f),b.container.search.select("input").on("keyup."+b.container.id,function(a){var c=this.value;b.search.term!==c&&(b.search.term=c,g(b),h(b),i(b))}),b.container.search.exit().remove();var j=b.container.selector.style("display");b.container.selector.style("display","block"),b.search.height=b.search.enabled?b.container.search.node().offsetHeight||b.container.search.node().getBoundingClientRect().height:0,b.container.selector.style("display",j),b.search.enabled&&(b.margin.title+=b.search.height),b.dev.value&&e.timeEnd("creating search")}},{"../../../../client/prefix.coffee":41,"../../../../core/console/print.coffee":54,"./data.js":148,"./items.coffee":151,"./update.js":158}],156:[function(a,b,c){b.exports=function(a){a.container.selector=a.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),a.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),a.container.selector.style("padding",a.ui.border+"px")}},{}],157:[function(a,b,c){var d=a("../../../../client/pointer.coffee"),e=a("../../../../color/lighter.coffee"),f=a("../../../../core/console/print.coffee"),g=a("../../../../color/text.coffee");b.exports=function(a){function b(b){b.style("padding",a.ui.padding.css).style("display","block").style("background-color",a.ui.color.secondary.value).style("font-family",a.font.secondary.family.value).style("font-size",a.font.secondary.size+"px").style("font-weight",a.font.secondary.weight).style("text-align",a.font.secondary.align).style("color",g(a.ui.color.secondary.value))}function c(b){if(!b.empty()){var c=0===a.icon.back.value.indexOf("fa-")?" fa "+a.icon.back.value:"";c="d3plus_drop_back"+c;var d=0===a.icon.back.value.indexOf("fa-")?"":a.icon.back.value;b.style("position","absolute").attr("class",c).style("top",a.ui.padding.top+a.font.secondary.size/2/2.5+"px").html(d)}}function h(b){var c=j?a.focus.value:a.format.locale.value.ui.back;b.text(a.format.value(c)).style("padding","0px "+(a.ui.padding.left+a.ui.padding.right)+"px")}if(a.open.value){a.dev.value&&f.time("creating title and back button");var i=1===a.id.solo.value.length&&a.depth.value>0,j=i,k=a.container.button.data(Object).viz[0];j=!0;for(var l=0;l<a.id.nesting.length;l++){var m=a.id.nesting[l];if(m in k&&k[m]===a.focus.value){j=!1;break}}a.container.title=a.container.selector.selectAll("div.d3plus_drop_title").data(i?["title"]:[]),a.draw.timing?(a.container.title.transition().duration(a.draw.timing).call(b),a.container.title.select("div.d3plus_drop_title_text").transition().duration(a.draw.timing).call(h)):(a.container.title.call(b),a.container.title.select("div.d3plus_drop_title_text").call(h)),a.container.title.select("span.d3plus_drop_back").call(c);var n=a.container.title.enter().insert("div","#d3plus_drop_list_"+a.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+a.container.id).call(b);n.append("span").attr("id","d3plus_drop_back_"+a.container.id).attr("class","d3plus_drop_back").call(c),n.append("div").attr("id","d3plus_drop_title_text_"+a.container.id).attr("class","d3plus_drop_title_text").call(h),a.container.title.on(d.over,function(b,c){var d=e(a.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(a.timing.mouseevents).style("background-color",d).style("color",g(d))}).on(d.out,function(b){var c=a.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(a.timing.mouseevents).style("background-color",c).style("color",g(c))}).on(d.click,function(b){a.history.back()}),a.container.title.exit().remove(),i&&(a.margin.title+=a.container.title.node().offsetHeight||a.container.title.node().getBoundingClientRect().height),a.dev.value&&f.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":40,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52,"../../../../core/console/print.coffee":54}],158:[function(a,b,c){var d=a("./items.coffee"),e=a("./height.js"),f=a("../../../../core/console/print.coffee"),g=a("./scroll.js"),h=a("./arrow.js");b.exports=function(a){function b(b){var c=a.open.flipped.value;b.style("top",function(){return c?"auto":a.margin.top-a.ui.border+"px"}).style("bottom",function(){return c?a.margin.top+a.ui.border+"px":"auto"})}function c(c){c.style("left",function(){return"left"===a.font.align.value?a.margin.left+"px":"center"===a.font.align.value?a.margin.left-(a.width.secondary-a.width.value)/2+"px":"auto"}).style("right",function(){return"right"===a.font.align.value?"0px":"auto"}).style("height",a.container.listHeight+"px").style("padding",a.ui.border+"px").style("background-color",a.ui.color.secondary.value).style("z-index",function(){return a.open.value?"9999":"-1"}).style("width",a.width.secondary-2*a.ui.border+"px").style("opacity",a.open.value?1:0).call(b)}function i(c){c.style("display",a.open.value?null:"none").call(b),a.search.enabled&&a.open.value&&a.container.selector.select("div.d3plus_drop_search input").node().focus()}function j(a){return function(){var b=d3.interpolateNumber(this.scrollTop,a);return function(a){this.scrollTop=b(a)}}}a.draw.timing?a.container.ui.transition().duration(a.draw.timing).each("start",function(){a.open.value&&d3.select(this).style("z-index",9999)}).style("margin",a.ui.margin.css).each("end",function(){a.open.value||d3.select(this).style("z-index","auto")}):a.container.ui.style("margin",a.ui.margin.css).style("z-index",function(){return a.open.value?9999:"auto"}),d(a),e(a),g(a),h(a),a.dev.value&&f.time("drawing list");var k=a.open.value?a.height.secondary-a.margin.title:0;a.draw.timing?(a.container.selector.transition().duration(a.draw.timing).each("start",function(){d3.select(this).style("display",a.open.value?"block":null)}).call(c).each("end",function(){d3.select(this).transition().duration(a.draw.timing).call(i)}),a.container.list.transition().duration(a.draw.timing).style("width",a.width.secondary-2*a.ui.border+"px").style("max-height",k+"px").tween("scroll",j(a.container.listScroll))):(a.container.selector.call(c).call(i),a.container.list.style("width",a.width.secondary-2*a.ui.border+"px").style("max-height",k+"px").property("scrollTop",a.container.listScroll)),a.dev.value&&f.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":54,"./arrow.js":146,"./height.js":150,"./items.coffee":151,"./scroll.js":154}],159:[function(a,b,c){var d=a("../../../../util/copy.coffee"),e=a("../../../../core/font/tester.coffee"),f=a("../../../form.js"),g=a("../../../../core/console/print.coffee"),h=a("../../../../object/validate.coffee");b.exports=function(a){function b(b){var d="primary"===b?"value":b,h="value"===d?a.icon.drop.value:a.icon.select.value||a.icon.drop.value,i="value"===d?a.text.value:a.text.secondary.value||a.text.value,j="value"===d?a.font:a.font.secondary;a.dev.value&&g.time("calculating "+b+" width");var k=f().container(e()).data({large:9999,value:c}).draw({update:!1}).font(j).format(a.format).icon({button:h,value:a.icon.value}).id(a.id.value).timing({ui:0}).text(i||a.id.value).type("button").ui({border:"primary"===b?a.ui.border:0,display:"inline-block",margin:0,padding:a.ui.padding.css}).width(!1).draw(),l=[];k.selectAll("div.d3plus_node").each(function(a){l.push(this.offsetWidth+1)}).remove();var m={};m[d]=d3.max(l),a.self.width(m),a.dev.value&&g.timeEnd("calculating "+b+" width")}var c=[];for(var i in a.data.nested.all){var j=a.data.nested.all[i],k=h(a.text.nesting)&&i in a.text.nesting?a.text.nesting[i][0]:i;[a.id.value,a.text.value].indexOf(k)<0&&(j=d(j),j.forEach(function(b){b[a.text.value||a.id.value]=b[k]})),c=c.concat(j)}"number"!=typeof a.width.value&&b("primary"),"number"!=typeof a.width.secondary&&(a.text.secondary.value&&a.text.value!==a.text.secondary.value?b("secondary"):a.self.width({secondary:a.width.value}))}},{"../../../../core/console/print.coffee":54,"../../../../core/font/tester.coffee":70,"../../../../object/validate.coffee":175,"../../../../util/copy.coffee":210,"../../../form.js":106}],160:[function(a,b,c){var d=a("../../../../util/child.coffee"),e=function(a,b){if(void 0===b)var b=window;d3.select(b).on("click."+a.container.id,function(){var b=d3.event.target||d3.event.toElement,c=b.parentNode;c&&["d3plus_node","d3plus_drop_title"].indexOf(c.className)>=0&&(b=c.parentNode),b&&c&&!d(a.container.ui,b)&&(a.open.value||a.hover.value)&&a.self.open(!1).hover(!1).draw()});try{var c=window.parent.location.host===window.location.host}catch(f){var c=!1}c&&b.self!==window.top&&e(a,b.parent)};b.exports=e},{"../../../../util/child.coffee":208}],161:[function(a,b,c){var d=a("../form.js");b.exports=function(a){"buttons"in a.container||(a.container.buttons=d().container(a.container.ui).type("button"));var b=a.data.viz.length,c=a.width.value?a.width.value/b:!1,e=a.container.ui.selectAll("div.d3plus_toggle").data(a.data.viz,function(b){return b[a.id.value]});e.exit().remove(),e.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),e.order().each(function(b){"form"in b.d3plus||(b.d3plus.form=d().container(d3.select(this)));var e=a.id.nesting.length>a.depth.value?a.id.nesting[a.depth.value+1]:a.id.value;b[e]instanceof Array?b.d3plus.form.container({id:a.container.id+"_"+b[a.id.value]}).data(b[e]).id(a.id.nesting.slice(1)).type("drop"):b.d3plus.form.data([b]).id(a.id.value).type("button"),b.d3plus.form.color(a.color).focus(a.focus.value,function(b){b!==a.focus.value&&a.self.focus(b).draw()}).hover(a.hover.value).icon({select:!1,value:a.icon.value}).font(a.font).format(a.format).order(a.order).text(a.text.value).ui({border:a.ui.border,color:a.ui.color,display:"inline-block",margin:0,padding:a.ui.padding.css}).width(c).draw()}),a.data.element.value&&a.data.element.value.on("focus."+a.container.id,function(){a.self.focus(this.value).hover(this.value).draw()}).on("blur."+a.container.id,function(){a.self.hover(!1).draw()})}},{"../form.js":106}],162:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;m=a("simplify-js"),b.exports=function(a,b){var c,e,g,i,j,l,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua;if(a.length<3)return null;if(v=[],p=.5,j=5,null==b&&(b={}),null==b.maxAspectRatio&&(b.maxAspectRatio=15),null==b.minWidth&&(b.minWidth=0),null==b.minHeight&&(b.minHeight=0),null==b.tolerance&&(b.tolerance=.02),null==b.nTries&&(b.nTries=20),null!=b.angle&&(b.angle instanceof Array?l=b.angle:"number"==typeof b.angle?l=[b.angle]:"string"!=typeof b.angle||isNaN(b.angle)||(l=[Number(b.angle)])),null==l&&(l=d3.range(-90,90+j,j)),null!=b.aspectRatio&&(b.aspectRatio instanceof Array?q=b.aspectRatio:"number"==typeof b.aspectRatio?q=[b.aspectRatio]:"string"!=typeof b.aspectRatio||isNaN(b.aspectRatio)||(q=[Number(b.aspectRatio)])),null!=b.origin&&b.origin instanceof Array&&(X=b.origin[0]instanceof Array?b.origin:[b.origin]),o=Math.abs(d3.geom.polygon(a).area()),0===o)return null;if(ca=d3.extent(a,function(a){return a[0]}),S=ca[0],N=ca[1],da=d3.extent(a,function(a){return a[1]}),T=da[0],O=da[1],qa=Math.min(N-S,O-T)*b.tolerance,pa=function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)Y=a[b],d.push({x:Y[0],y:Y[1]});return d}(),qa>0&&(pa=m(pa,qa),a=function(){var a,b,c;for(c=[],a=0,b=pa.length;b>a;a++)Y=pa[a],c.push([Y.x,Y.y]);return c}()),b.vdebug&&v.push({type:"simplify",poly:a}),ea=d3.extent(a,function(a){return a[0]}),S=ea[0],N=ea[1],fa=d3.extent(a,function(a){return a[1]}),T=fa[0],O=fa[1],r=[[S,T],[N,T],[N,O],[S,O]],ga=[N-S,O-T],t=ga[0],s=ga[1],sa=Math.min(t,s)/50,null==X)for(X=[],u=d3.geom.polygon(a).centroid(),f(u,a)&&X.push(u);X.length<b.nTries;)na=Math.random()*t+S,oa=Math.random()*s+T,ma=[na,oa],f(ma,a)&&X.push(ma);for(b.vdebug&&v.push({type:"origins",points:X}),I=0,L=null,z=0,D=l.length;D>z;z++)for(g=l[z],i=-g*Math.PI/180,b.vdebug&&v.push({type:"angle",angle:g}),x=A=0,E=X.length;E>A;x=++A)for(V=X[x],ha=d(a,V,i),$=ha[0],aa=ha[1],ia=d(a,V,i+Math.PI/2),Z=ia[0],_=ia[1],U=[],null!=$&&null!=aa&&U.push([($[0]+aa[0])/2,($[1]+aa[1])/2]),null!=Z&&null!=_&&U.push([(Z[0]+_[0])/2,(Z[1]+_[1])/2]),b.vdebug&&v.push({type:"modifOrigin",idx:x,p1W:$,p2W:aa,p1H:Z,p2H:_,modifOrigins:U}),B=0,F=U.length;F>B;B++)if(W=U[B],b.vdebug&&v.push({type:"origin",cx:W[0],cy:W[1]}),ja=d(a,W,i),$=ja[0],aa=ja[1],null!==$&&null!==aa&&(R=Math.min(n(W,$),n(W,aa)),M=2*Math.sqrt(R),ka=d(a,W,i+Math.PI/2),Z=ka[0],_=ka[1],null!==Z&&null!==_&&(Q=Math.min(n(W,Z),n(W,_)),K=2*Math.sqrt(Q),!(I>M*K))))for(null!=q?e=q:(P=Math.max(1,b.minWidth/K,I/(K*K)),J=Math.min(b.maxAspectRatio,M/b.minHeight,M*M/I),e=d3.range(P,J+p,p)),H=0,G=e.length;G>H;H++)if(c=e[H],C=Math.max(b.minWidth,Math.sqrt(I*c)),la=Math.min(M,K*c),!(I>la*K))for(la-C>=sa&&b.vdebug&&v.push({type:"aRatio",aRatio:c});la-C>=sa;)ra=(C+la)/2,w=ra/c,ta=W[0],ua=W[1],ba=[[ta-ra/2,ua-w/2],[ta+ra/2,ua-w/2],[ta+ra/2,ua+w/2],[ta-ra/2,ua+w/2]],ba=k(ba,i,W),h(ba,a)?(y=!0,I=ra*w,L={cx:ta,cy:ua,width:ra,height:w,angle:g},C=ra):(y=!1,la=ra),b.vdebug&&v.push({type:"rectangle",cx:ta,cy:ua,width:ra,height:w,areaFraction:ra*w/o,angle:g,insidePoly:y});return[L,I,v]},n=function(a,b){var c,d;return c=b[0]-a[0],d=b[1]-a[1],c*c+d*d},i=function(a,b,c){var d,e,f,g,h;return h=b[1]<c[1]?[b,c]:[c,b],d=h[0],e=h[1],(a[1]===e[1]||a[1]===d[1])&&(a[1]+=Number.MIN_VALUE),a[1]>e[1]||a[1]<d[1]?!1:a[0]>d[0]&&a[0]>e[0]?!1:a[0]<d[0]&&a[0]<e[0]?!0:(f=(e[1]-d[1])/(e[0]-d[0]),g=(a[1]-d[1])/(a[0]-d[0]),g>f)},f=function(a,b){var c,d,e,f,g;for(f=-1,g=b.length,d=b[g-1],e=0;++f<g;)c=d,d=b[f],i(a,c,d)&&e++;return e%2!==0},g=function(a,b,c){var d,e,f;return d=1e-9,e=a[0],f=a[1],e<Math.min(b[0],c[0])-d||e>Math.max(b[0],c[0])+d||f<Math.min(b[1],c[1])-d||f>Math.max(b[1],c[1])+d?!1:!0},e=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;return l=1e-9,h=a[0]-b[0],j=a[1]-b[1],i=c[0]-d[0],k=c[1]-d[1],g=h*k-j*i,Math.abs(g)<l?null:(e=a[0]*b[1]-a[1]*b[0],f=c[0]*d[1]-c[1]*d[0],m=(e*i-f*h)/g,n=(e*k-f*j)/g,[m,n])},l=function(a,b,c,d){var f;return f=e(a,b,c,d),null==f?!1:g(f,a,b)&&g(f,c,d)},h=function(a,b){var c,d,e,g,h,i,j,k;for(h=-1,j=a.length,k=b.length,e=a[j-1];++h<j;)for(c=e,e=a[h],i=-1,g=b[k-1];++i<k;)if(d=g,g=b[i],l(c,e,d,g))return!1;return f(a[0],b)},j=function(a,b,c){var d,e,f,g;return null==c&&(c=[0,0]),f=a[0]-c[0],g=a[1]-c[1],d=Math.cos(b),e=Math.sin(b),[d*f-e*g+c[0],e*f+d*g+c[1]]},k=function(a,b,c){var d,e,f,g;for(g=[],d=0,e=a.length;e>d;d++)f=a[d],g.push(j(f,b,c));return g},d=function(a,b,c){var d,f,h,i,j,k,l,m,o,p,q,r,s,t,u;for(j=1e-9,b=[b[0]+j*Math.cos(c),b[1]+j*Math.sin(c)],t=b[0],u=b[1],r=[t+Math.cos(c),u+Math.sin(c)],l=0,Math.abs(r[0]-t)<j&&(l=1),k=-1,p=a.length,f=a[p-1],m=Number.MAX_VALUE,o=Number.MAX_VALUE,h=null,i=null;++k<p;)d=f,f=a[k],q=e(b,r,d,f),null!=q&&g(q,d,f)&&(s=n(b,q),q[l]<b[l]?m>s&&(m=s,h=q):q[l]>b[l]&&o>s&&(o=s,i=q));return[h,i]}},{"simplify-js":9}],163:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g;return e={x:0,y:0},0>a&&(a=2*Math.PI+a),"square"===c?(f=45*(Math.PI/180),a<=Math.PI?a<Math.PI/2?f>a?(e.x+=b,g=Math.tan(a)*b,e.y+=g):(e.y+=b,d=b/Math.tan(a),e.x+=d):a<Math.PI-f?(e.y+=b,d=b/Math.tan(Math.PI-a),e.x-=d):(e.x-=b,g=Math.tan(Math.PI-a)*b,e.y+=g):a<3*Math.PI/2?a<f+Math.PI?(e.x-=b,g=Math.tan(a-Math.PI)*b,e.y-=g):(e.y-=b,d=b/Math.tan(a-Math.PI),e.x-=d):a<2*Math.PI-f?(e.y-=b,d=b/Math.tan(2*Math.PI-a),e.x+=d):(e.x+=b,g=Math.tan(2*Math.PI-a)*b,e.y-=g)):(e.x+=b*Math.cos(a),e.y+=b*Math.sin(a)),e}},{}],164:[function(a,b,c){var d;d=a("../geom/offset.coffee"),b.exports=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(!a)return[];for(a=a.slice(1).slice(0,-1).split(/L|A/),l=[],e=0,g=a.length;g>e;e++)if(k=a[e],k=k.split(" "),1===k.length)l.push(k[0].split(",").map(function(a){
return parseFloat(a)}));else{for(m=l[l.length-1],f=k.pop().split(",").map(function(a){return parseFloat(a)}),n=parseFloat(k.shift().split(",")[0]),r=Math.sqrt(Math.pow(f[0]-m[0],2)+Math.pow(f[1]-m[1],2)),b=Math.acos((n*n+n*n-r*r)/(2*n*n)),j="1"===k[1].split(",")[0],j&&(b=2*Math.PI-b),h=b/(2*Math.PI)*(n*Math.PI*2),o=h/5,p=Math.atan2(-m[1],-m[0])-Math.PI,q=b/o,c=q;b>c;)i=d(p+c,n),l.push([i.x,i.y]),c+=q;l.push(f)}return l}},{"../geom/offset.coffee":163}],165:[function(a,b,c){var d,e,f;d={},d.version="1.9.8 - Cornflower",d.repo="https://github.com/alexandersimoes/d3plus/",d.array={comparator:a("./array/comparator.coffee"),contains:a("./array/contains.coffee"),sort:a("./array/sort.coffee"),update:a("./array/update.coffee")},d.client={css:a("./client/css.coffee"),ie:a("./client/ie.js"),pointer:a("./client/pointer.coffee"),prefix:a("./client/prefix.coffee"),rtl:a("./client/rtl.coffee"),scroll:a("./client/scroll.js"),scrollbar:a("./client/scrollbar.coffee"),touch:a("./client/touch.coffee")},d.color={legible:a("./color/legible.coffee"),lighter:a("./color/lighter.coffee"),mix:a("./color/mix.coffee"),random:a("./color/random.coffee"),scale:a("./color/scale.coffee"),sort:a("./color/sort.coffee"),text:a("./color/text.coffee"),validate:a("./color/validate.coffee")},d.data={bestRegress:a("./data/bestRegress.coffee"),lof:a("./data/lof.coffee"),mad:a("./data/mad.coffee")},d.font={sizes:a("./font/sizes.coffee"),validate:a("./font/validate.coffee")},d.form=a("./form/form.js"),d.geom={largestRect:a("./geom/largestRect.coffee"),offset:a("./geom/offset.coffee"),path2poly:a("./geom/path2poly.coffee")},d.network={cluster:a("./network/cluster.coffee"),distance:a("./network/distance.coffee"),normalize:a("./network/normalize.coffee"),shortestPath:a("./network/shortestPath.coffee"),smallestGap:a("./network/smallestGap.coffee"),subgraph:a("./network/subgraph.coffee")},d.number={format:a("./number/format.coffee")},d.object={merge:a("./object/merge.coffee"),validate:a("./object/validate.coffee")},d.string={format:a("./string/format.js"),list:a("./string/list.coffee"),strip:a("./string/strip.js"),title:a("./string/title.coffee")},d.textwrap=a("./textwrap/textwrap.coffee"),d.tooltip={create:a("./tooltip/create.js"),move:a("./tooltip/move.coffee"),remove:a("./tooltip/remove.coffee")},d.util={buckets:a("./util/buckets.coffee"),child:a("./util/child.coffee"),closest:a("./util/closest.coffee"),copy:a("./util/copy.coffee"),d3selection:a("./util/d3selection.coffee"),dataurl:a("./util/dataURL.coffee"),uniques:a("./util/uniques.coffee")},d.viz=a("./viz/viz.coffee"),f=a("./client/css.coffee"),e=a("./core/console/print.coffee"),f("d3plus.css")&&e.warning("d3plus.css has been deprecated, you do not need to load this file.",d.repo+"releases/tag/v1.4.0"),"undefined"!=typeof window&&(window.d3plus=d),b.exports=d},{"./array/comparator.coffee":34,"./array/contains.coffee":35,"./array/sort.coffee":36,"./array/update.coffee":37,"./client/css.coffee":38,"./client/ie.js":39,"./client/pointer.coffee":40,"./client/prefix.coffee":41,"./client/rtl.coffee":42,"./client/scroll.js":43,"./client/scrollbar.coffee":44,"./client/touch.coffee":45,"./color/legible.coffee":46,"./color/lighter.coffee":47,"./color/mix.coffee":48,"./color/random.coffee":49,"./color/scale.coffee":50,"./color/sort.coffee":51,"./color/text.coffee":52,"./color/validate.coffee":53,"./core/console/print.coffee":54,"./data/bestRegress.coffee":101,"./data/lof.coffee":102,"./data/mad.coffee":103,"./font/sizes.coffee":104,"./font/validate.coffee":105,"./form/form.js":106,"./geom/largestRect.coffee":162,"./geom/offset.coffee":163,"./geom/path2poly.coffee":164,"./network/cluster.coffee":167,"./network/distance.coffee":168,"./network/normalize.coffee":169,"./network/shortestPath.coffee":170,"./network/smallestGap.coffee":171,"./network/subgraph.coffee":172,"./number/format.coffee":173,"./object/merge.coffee":174,"./object/validate.coffee":175,"./string/format.js":176,"./string/list.coffee":177,"./string/strip.js":178,"./string/title.coffee":179,"./textwrap/textwrap.coffee":203,"./tooltip/create.js":204,"./tooltip/move.coffee":205,"./tooltip/remove.coffee":206,"./util/buckets.coffee":207,"./util/child.coffee":208,"./util/closest.coffee":209,"./util/copy.coffee":210,"./util/d3selection.coffee":211,"./util/dataURL.coffee":212,"./util/uniques.coffee":213,"./viz/viz.coffee":336}],166:[function(a,b,c){window.d3=a("d3"),window.topojson=a("topojson")},{d3:3,topojson:33}],167:[function(a,b,c){var d;d=a("./normalize.coffee"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(p=[],null==b&&(b={}),(null==b.nodes||"object"!=typeof b.nodes)&&(F=d(a,b),a=F[0],b=F[1],null===b))return null;m=b.distance,C=b.nodeid,I=b.startpoint,o=b.endpoint,D=b.nodes,E={};for(r in D)E[r]={node:D[r].node,degree:0};for(y=0,x={},q=0,v=a.length;v>q;q++)n=a[q],e=C(I(n)),f=C(o(n)),e in x||(x[e]={}),f in x||(x[f]={}),f in x[e]||(x[e][f]=0,x[f][e]=0,y++,E[e].degree+=1,E[f].degree+=1);j={},c=0;for(r in E)B=E[r],j[r]={score:B.degree/(2*y),nodes:[r]};for(e in x)for(f in x[e])x[e][f]=1/(2*y)-E[e].degree*E[f].degree/(4*y*y);for(s=0;1e3>s;){l=-1,z=void 0,A=void 0;for(e in x)for(f in x[e])x[e][f]>l&&(l=x[e][f],z=e,A=f);if(0>l)break;for(u in x[z])u!==A&&(u in x[A]?x[A][u]+=x[z][u]:x[A][u]=x[z][u]-2*j[A].score*j[u].score,x[u][A]=x[A][u]),delete x[u][z];for(u in x[A])u in x[z]||u===A||(x[A][u]-=2*j[z].score*j[u].score,x[u][A]=x[A][u]);for(G=j[z].nodes,t=0,w=G.length;w>t;t++)B=G[t],j[A].nodes.push(B);j[A].score+=j[z].score,b.vdebug&&p.push({type:"merge",father:A,child:z,nodes:j[A].nodes}),delete j[z],delete x[z],c+=l,s++}return i=function(){var a;a=[];for(g in j)k=j[g],a.push([g,k.nodes.length]);return a}(),i.sort(function(a,b){return b[1]-a[1]}),H=function(){var a,b,c;for(c=[],a=0,b=i.length;b>a;a++)h=i[a],c.push(j[h[0]].nodes);return c}(),[H,p]}},{"./normalize.coffee":169}],168:[function(a,b,c){b.exports=function(a,b){var c,d;return a instanceof Array||(a=[a.x,a.y]),b instanceof Array||(b=[b.x,b.y]),c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]),Math.sqrt(c*c+d*d)}},{}],169:[function(a,b,c){var d;d=a("../core/console/print.coffee"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(E=b.source,G=b.target,g=b.directed,h=b.distance,A=b.nodeid,F=b.startpoint,k=b.endpoint,c=b.K,H=b.vdebug,g||(g=!1),null==c&&(c=1),null==A?A=function(a){return a}:"string"==typeof A&&(A=function(a){return function(b){return b[a]}}(A)),null!=E&&"object"==typeof E&&(E=A(E)),null!=G&&"object"==typeof G&&(G=A(G)),null==F?F=function(a){return a.source}:"string"==typeof F&&(F=function(a){return function(b){return b[a]}}(F)),null==k?k=function(a){return a.target}:"string"==typeof k&&(k=function(a){return function(b){return b[a]}}(k)),null==h)h=function(a){return 1};else if("number"==typeof h)h=function(a){return function(b){return a}}(h);else if("string"==typeof h)h=function(a){return function(b){return b[a]}}(h);else if(h instanceof Array){for(j={},m=r=0,u=a.length;u>r;m=++r)i=a[m],e=A(F(i)),f=A(k(i)),j[e+"_"+f]=h[m];h=function(a){return e=A(F(a)),f=A(k(a)),j[e+"_"+f]}}for(B={},s=0,v=a.length;v>s;s++){for(i=a[s],y=F(i),z=k(i),p=A(y),q=A(z),C=[y,z],t=0,w=C.length;w>t;t++)x=C[t],n=A(x),n in B||(B[n]={node:x,outedges:[]});B[p].outedges.push(i),g||B[q].outedges.push(i)}return l=null,0===a.length?l="The length of edges is 0":0>c?l="K can not have negative value":null==h(a[0])?l="Check the distance function/attribute":null==F(a[0])?l="Check the startpoint function/attribute":null==k(a[0])?l="Check the endpoint function/attribute":(o=A(F(a[0])),null==o||"string"!=(D=typeof o)&&"number"!==D?l="Check the nodeid function/attribute":null==E||E in B?null==G||G in B||(l="The target is not in the graph"):l="The source is not in the graph"),null!=l?(d.error(l),null):[a,{source:E,target:G,directed:g,distance:h,nodeid:A,startpoint:F,endpoint:k,K:c,nodes:B,vdebug:H}]}},{"../core/console/print.coffee":54}],170:[function(a,b,c){var d,e;d=a("heap"),e=a("./normalize.coffee"),b.exports=function(a,b,c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(null==c&&(c={}),c.source=b,(null==c.nodes||"object"!=typeof c.nodes)&&(z=e(a,c),a=z[0],c=z[1],null===c))return null;b=c.source,F=c.target,j=c.directed,k=c.distance,w=c.nodeid,E=c.startpoint,m=c.endpoint,f=c.K,x=c.nodes;for(q in x)v=x[q],v.count=0;for(o=new d(function(a,b){return a.distance-b.distance}),H={},null==F&&(H[b]=!0),o.push({edge:null,target:b,distance:0}),u=0,D=[];!o.empty()&&(u=Math.max(u,o.size()),y=o.pop(),G=y.target,x[G].count++,null==F?D.push(y):G===F&&D.push(y),D.length!==f);)if(x[G].count<=f)for(A=x[G].outedges,p=0,s=A.length;s>p;p++){if(l=A[p],g=w(E(l)),i=w(m(l)),j||i!==G||(B=[i,g],g=B[0],i=B[1]),null==F){if(H[i])continue;H[i]=!0}h=y.distance+k(l),o.push({edge:l,previous:y,target:i,distance:h})}for(n=function(b){for(a=[];null!=b.edge;)a.push(b.edge),b=b.previous;return a.reverse()},r=0,t=D.length;t>r;r++)C=D[r],null!=F&&(delete C.target,C.edges=n(C)),delete C.edge,delete C.previous;return D}},{"./normalize.coffee":169,heap:4}],171:[function(a,b,c){var d;d=a("./distance.coffee"),b.exports=function(a,b){var c,e;return b||(b={}),c=[],e=d3.geom.quadtree().x(function(a){return b.accessor?b.accessor(a)[0]:a[0]}).y(function(a){return b.accessor?b.accessor(a)[1]:a[1]}),e(a).visit(function(a){var e,f,g,h,i,j,k,l;if(!a.leaf)for(k=a.nodes,e=0,g=k.length;g>e;e++)if(i=k[e],i&&i.point)if(b.origin)c.push(d(i,b));else for(l=a.nodes,f=0,h=l.length;h>f;f++)j=l[f],j&&j.point&&j.point!==i.point&&c.push(d(i,j));return!1}),b.all?c.sort(function(a,b){return a-b}):d3.min(c)}},{"./distance.coffee":168}],172:[function(a,b,c){var d;d=a("./normalize.coffee"),b.exports=function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p;return null==c&&(c={}),c.source=b,null!=c.nodes&&"object"==typeof c.nodes||(n=d(a,c),a=n[0],c=n[1],null!==c)?(b=c.source,g=c.directed,h=c.distance,l=c.nodeid,o=c.startpoint,j=c.endpoint,e=c.K,m=c.nodes,p={},p[b]=!0,f=function(a,b){var c,d,i,k,n,q,r,s,t;for(r=m[a].outedges,t=[],k=0,n=r.length;n>k;k++)i=r[k],c=l(o(i)),d=l(j(i)),g||d!==a||(s=[d,c],c=s[0],d=s[1]),d in p?t.push(void 0):(q=b+h(i),e>=q?(p[d]=!0,t.push(f(d,q))):t.push(void 0));return t},f(b,0),{nodes:function(){var a;a=[];for(k in p)a.push(m[k].node);return a}(),edges:function(){var b,c,d;for(d=[],b=0,c=a.length;c>b;b++)i=a[b],l(o(i))in p&&l(j(i))in p&&d.push(i);return d}()}):null}},{"./normalize.coffee":169}],173:[function(a,b,c){var d;d=a("../core/locale/languages/en_US.coffee"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o;return void 0===a||null===a||a===!1?"":(b||(b={}),i="locale"in b?b.locale:d,m=i.time.slice(),e=d3.locale(i.format),b||(b={}),n=b.vars||{},f=b.key,g="labels"in b?b.labels:!0,h=a.toString().split(".")[0].length,n.time&&n.time.value&&m.push(n.time.value),"string"==typeof f&&m.indexOf(f.toLowerCase())>=0?j=a:"share"===f?(j=0===a?0:a>=100?e.numberFormat(",f")(a):a>99?e.numberFormat(".3g")(a):e.numberFormat(".2g")(a),j+="%"):10>a&&a>-10?(h=a.toString().split("."),k=1,h.length>1&&(k=d3.min([parseFloat(h[1]).toString().length,2]),a>-1&&1>a||(o=h[1].length-parseFloat(h[1]).toString().length,k+=1+o)),j=e.numberFormat("."+k+"g")(a)):h>3?(l=d3.formatPrefix(a).symbol,l=l.replace("G","B"),a=d3.formatPrefix(a).scale(a),a=e.numberFormat(".3g")(a),a=a.replace(i.format.decimal,"."),a=parseFloat(a)+"",a=a.replace(".",i.format.decimal),j=a+l):j=3===h?e.numberFormat(",f")(a):0===a?0:a===parseInt(a,10)?e.numberFormat(".2")(a):e.numberFormat(".3g")(a),j.length>2&&""+j.indexOf(".0")===j.length-2&&(j=j.slice(0,j.length-2)),g&&f&&"format"in n&&f in n.format.affixes.value?(c=n.format.affixes.value[f],c[0]+j+c[1]):j)}},{"../core/locale/languages/en_US.coffee":72}],174:[function(a,b,c){var d,e;d=a("../util/d3selection.coffee"),e=a("./validate.coffee"),b.exports=function(a,b){var c,f;return c=function(a,b,f){var g,h,i;h=[];for(g in a)i=a[g],"undefined"!=typeof i?!f&&e(i)?("object"!=typeof b[g]&&(b[g]={}),h.push(c(i,b[g],0===g.indexOf("d3plus")))):!d(i)&&i instanceof Array?h.push(b[g]=i.slice(0)):h.push(b[g]=i):h.push(void 0);return h},f={},a&&c(a,f),b&&c(b,f),f}},{"../util/d3selection.coffee":211,"./validate.coffee":175}],175:[function(a,b,c){b.exports=function(a){return a&&a.constructor===Object}},{}],176:[function(a,b,c){b.exports=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return b.unkeyed_index=0,b.replace(/\{(\w*)\}/g,function(c,d){if(""===d&&(d=b.unkeyed_index,b.unkeyed_index++),d==+d)return"undefined"!==a[d]?a[d]:c;for(var e=0;e<a.length;e++)if("object"==typeof a[e]&&"undefined"!=typeof a[e][d])return a[e][d];return c}.bind(b))}},{}],177:[function(a,b,c){var d,e;d=a("./format.js"),e=a("../core/locale/languages/en_US.coffee").ui,b.exports=function(a,b,c,f){var g;return a instanceof Array?(a=a.slice(0),b||(b=e.and),f||(f=e.moreText),2===a.length?a.join(" "+b+" "):(c&&a.length>c&&(g=a.length-c+1,a=a.slice(0,c-1),a[c-1]=d(f,g)),a.length>1&&(a[a.length-1]=b+" "+a[a.length-1]),a.join(", "))):a}},{"../core/locale/languages/en_US.coffee":72,"./format.js":176}],178:[function(a,b,c){b.exports=function(a){var b=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],c=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return a+="",""+a.replace(/[^A-Za-z0-9\-_]/g,function(a){if(" "===a)return"_";if(b.indexOf(a)>=0)return"";for(var d=a,e=0;e<c.length;e++)if(new RegExp(c[e][0]).test(a)){d=c[e][1];break}return d})}},{}],179:[function(a,b,c){var d;d=a("../core/locale/languages/en_US.coffee"),b.exports=function(a,b){var c,e,f,g,h;return a?(b||(b={}),f=b.key,"."===a.charAt(a.length-1)?a.charAt(0).toUpperCase()+a.substr(1):(g="locale"in this?this.locale.value:d,h=g.lowercase.map(function(a){return a.toLowerCase()}),e=g.uppercase,e=e.concat(e.map(function(a){return a+"s"})),c=e.map(function(a){return a.toLowerCase()}),a.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(b,d){var f,g;return b?(f=c.indexOf(b.toLowerCase()),g=f>=0?e[f]:h.indexOf(b.toLowerCase())>=0&&0!==d&&d!==a.length-1?b.toLowerCase():b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()):""}))):""}},{"../core/locale/languages/en_US.coffee":72}],180:[function(a,b,c){var d,e;d=a("./foreign.coffee"),e=a("./tspan.coffee"),b.exports=function(a){a.text.html.value?d(a):e(a)}},{"./foreign.coffee":181,"./tspan.coffee":184}],181:[function(a,b,c){b.exports=function(a){var b,c,d,e,f;f=a.container.value,d=f.attr("font-family")||f.style("font-family"),b=a.align.value||f.attr("text-anchor")||f.style("text-anchor"),c=f.attr("fill")||f.style("fill"),e=f.attr("opacity")||f.style("opacity"),b="end"===b?"right":"middle"===b?"center":"left",d3.select(f.node().parentNode).append("foreignObject").attr("width",a.width.value+"px").attr("height",a.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",d).style("font-size",a.size.value[1]+"px").style("color",c).style("text-align",b).style("opacity",e).text(a.text.current)}},{}],182:[function(a,b,c){b.exports=function(a){var b,c,d,e,f,g,h,i,j,k;return c=a.container.value,e=c.node().previousElementSibling,g=e?e.tagName.toLowerCase():"",e&&(e=d3.select(e)),a.container.x=a.x.value||parseFloat(c.attr("x"),10),a.container.y=a.y.value||parseFloat(c.attr("y"),10),e&&(a.shape.accepted.indexOf(g)>=0&&a.self.shape(g),"rect"===g?(j=parseFloat(e.attr("x"),10)||0,k=parseFloat(e.attr("y"),10)||0,a.padding.value===!1&&(b=Math.abs(j-a.container.x),b&&a.self.padding(b)),a.container.x||(a.container.x=j+a.padding.value),a.container.y||(a.container.y=k+a.padding.value),a.width.value||(i=parseFloat(e.attr("width")),a.self.width(i)),a.height.value||(d=parseFloat(e.attr("height")),a.self.height(d))):"circle"===g?(f=parseFloat(e.attr("r"),10),j=parseFloat(e.attr("cx"),10)||0,j-=f,k=parseFloat(e.attr("cy"),10)||0,k-=f,a.padding.value===!1&&(b=Math.abs(j-a.container.x),b&&a.self.padding(b)),a.container.x||(a.container.x=j+a.padding.value),a.container.y||(a.container.y=k+a.padding.value),a.width.value||a.self.width(2*f,10),a.height.value||a.self.height(2*f,10)):(a.width.value||a.self.width(500),a.height.value||a.self.height(500))),a.container.x||(a.container.x=0),a.container.y||(a.container.y=0),a.width.inner=a.width.value-2*a.padding.value,a.height.inner=a.height.value-2*a.padding.value,h=c.attr("font-size")||c.style("font-size"),h=parseFloat(h,10),a.container.fontSize=h,a.container.dy=parseFloat(c.attr("dy"),10),a.size.value?void 0:a.resize.value?a.self.size([4,80]):a.self.size([h/2,h])}},{}],183:[function(a,b,c){b.exports=function(a){var b;return a.text.value||(b=a.container.value.text(),b&&(b.indexOf("tspan")>=0&&(b.replace(/\<\/tspan\>\<tspan\>/g," "),b.replace(/\<\/tspan\>/g,""),b.replace(/\<tspan\>/g,"")),b=b.replace(/(\r\n|\n|\r)/gm,""),b=b.replace(/^\s+|\s+$/g,""),a.self.text(b))),a.text.value instanceof Array?a.text.phrases=a.text.value.filter(function(a){return["string","number"].indexOf(typeof a)>=0}):a.text.phrases=[a.text.value+""],a.align.value?void 0:a.container.align=a.container.value.style("text-anchor")||a.container.value.attr("text-anchor")}},{}],184:[function(a,b,c){var d;d=a("../../client/rtl.coffee"),b.exports=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;return m=function(b){var d;return d=!p||b?a.container.value.append("tspan"):a.container.value.insert("tspan","tspan"),d.attr("x",D+"px").attr("dy",c+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},l=-90===a.rotate.value||90===a.rotate.value,A=l?a.height.inner:a.width.inner,h=l?a.width.inner:a.height.inner,b="circle"===a.shape.value?"middle":a.align.value||a.container.align||"start",E="end"===b||"start"===b&&d?A:"middle"===b?A/2:0,z=a.valign.value||"top",D=a.container.x+E,f=a.resize.value?a.size.value[1]:a.container.fontSize||a.size.value[0],c=a.container.dy||1.1*f,w=null,o=null,B=null,p=!1,G=0,"circle"===a.shape.value&&("middle"===z?G=h/c%1*c/2:"end"===z&&(G=h/c%1*c)),a.container.value.attr("text-anchor",b).attr("font-size",f+"px").style("font-size",f+"px").attr("x",a.container.x).attr("y",a.container.y),y=function(){return w.remove(),p?(i++,w=a.container.value.select("tspan")):(i--,w=d3.select(a.container.value.node().lastChild)),w.empty()?void 0:(B=w.text().match(/[^\s-]+-?/g),e())},j=function(){var b;return"circle"===a.shape.value?(b=(i-1)*c+G,b>h/2&&(b+=c),2*Math.sqrt(b*(2*(A/2)-b))):A},e=function(){var b,c;return B&&B.length?(c=B.pop(),b=c.charAt(c.length-1),1===c.length&&a.text.split.value.indexOf(c)>=0?e():(a.text.split.value.indexOf(b)>=0&&(c=c.substr(0,c.length-1)),w.text(B.join(" ")+" "+c+"..."),w.node().getComputedTextLength()>j()?e():void 0)):y()},n=function(b){var c,d,e,f;if(c=w.text(),f="",p){if(f=a.text.current.charAt(a.text.current.length-o.length-1)," "===f)for(e="",d=2;" "===f;)e+=" ",f=a.text.current.charAt(a.text.current.length-o.length-d),d++;else e="";o=b+e+o,w.text(b+e+c)}else{if(f=a.text.current.charAt(o.length)," "===f)for(e="",d=1;" "===f;)e+=" ",f=a.text.current.charAt(o.length+d),d++;else e="";o+=e+b,w.text(c+e+b)}return Math.floor(w.node().getComputedTextLength())>j()||"\n"===f?(w.text(c),c.length&&(w=m()),w.text(b),p?i--:i++):void 0},v=1,i=null,k=null,C=function(){var b,d,e,f,g,j;for(a.container.value.text("").html(""),B=a.text.words.slice(),p&&B.reverse(),o="",w=m(!0),i=v,d=0,e=B.length;e>d;d++){if(j=B[d],i*c>h){y();break}for(n(j),g=!0;g;){for(f=a.text.current.charAt(o.length),b=1;" "===f;)f=a.text.current.charAt(o.length+b),b++;g=a.text.split.value.indexOf(f)>=0,g&&n(f)}}return i*c>h&&y(),k=Math.abs(i-v)+1},C(),k=0,a.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?k++:void 0}),"circle"===a.shape.value&&(u=h-k*c,u>c&&("middle"===z?(v=(u/c/2>>0)+1,C()):"bottom"===z&&(p=!0,v=h/c>>0,C()))),k=0,a.container.value.selectAll("tspan").each(function(){return d3.select(this).text().length?k++:void 0}),"top"===z?F=0:(g=k*c,F="middle"===z?h/2-g/2:h-g),F-=.2*c,x="translate(0,"+F+")",180===a.rotate.value||-180===a.rotate.value?(s=a.container.x+A/2,t=a.container.y+h/2):(q=a.rotate.value<0?A:h,s=a.container.x+q/2,t=a.container.y+q/2),r="rotate("+a.rotate.value+", "+s+", "+t+")",a.container.value.attr("transform",r+x)}},{"../../client/rtl.coffee":42}],185:[function(a,b,c){var d,e,f,g;d=a("./flow.coffee"),e=a("../../font/sizes.coffee"),g=function(a){var b;a.text.phrases.length&&(a.text.current=a.text.phrases.shift()+"",a.text.words=a.text.current.match(a.text.split["break"]),b=a.text.current.charAt(0),b!==a.text.words[0].charAt(0)&&(a.text.words[0]=b+a.text.words[0]),a.container.value.html(""),a.resize.value?f(a):d(a))},b.exports=g,f=function(a){var b,c,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u;for(u=[],k=0;k<a.text.words.length;)b=k===a.text.words.length-1?"":" ",u.push(a.text.words[k]+b),k++;n=-90===a.rotate.value||90===a.rotate.value,s=n?a.height.inner:a.width.inner,i=n?a.width.inner:a.height.inner,o=Math.floor(a.size.value[1]),l="circle"===a.shape.value?.75*s:s,q=e(u,{"font-size":o+"px"},{parent:a.container.value}),m=d3.max(q,function(a){return a.width}),c=1.165+s/i*.11,r=d3.sum(q,function(b){var c;return c=a.container.dy||1.2*o,b.width*c})*c,h="circle"===a.shape.value?Math.PI*Math.pow(s/2,2):l*i,(m>l||r>h)&&(f=Math.sqrt(h/r),t=l/m,p=d3.min([f,t]),o=d3.max([a.size.value[0],Math.floor(o*p)])),j=Math.floor(.8*i),o>j&&(o=j),m*(o/a.size.value[1])<=l?(o!==a.size.value[1]&&a.self.size([a.size.value[0],o]),d(a)):g(a)}},{"../../font/sizes.coffee":104,"./flow.coffee":180}],186:[function(a,b,c){b.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(a){var b;return b=["left","center","right"].indexOf(a),b>=0&&(a=this.accepted[b+1]),a},value:!1}},{}],187:[function(a,b,c){arguments[4][110][0].apply(c,arguments)},{dup:110}],188:[function(a,b,c){var d;d=a("../../util/d3selection.coffee"),b.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(a){return a===!1?!1:d(a)?a:a instanceof Array?d3.select(a[0][0]):(this.selector=a,d3.select(a))},value:!1}},{"../../util/d3selection.coffee":211}],189:[function(a,b,c){arguments[4][114][0].apply(c,arguments)},{dup:114}],190:[function(a,b,c){var d,e;d=a("../../core/console/print.coffee"),e=a("../../string/format.js"),b.exports={accepted:[void 0],process:function(a,b){var c,f;return this.initialized===!1?a:(b.container.value===!1?(f=b.format.locale.value.dev.setContainer,d.warning(f,"container")):b.container.value.empty()?(f=b.format.locale.value.dev.noContainer,c=b.container.selector||"",d.warning(e(f,'"'+c+'"'),"container")):(b.dev.value&&d.time("total draw time"),b.container.value.call(b.self)),a)},value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":176}],191:[function(a,b,c){var d,e;d=a("../../core/locale/locale.coffee"),e=a("../../object/merge.coffee"),b.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(d)},process:function(a){var b,c;return b="en_US",c=d[b],a!==b&&(c=e(c,d[a])),this.language=a,c},value:"en_US"},process:function(a,b){if(this.initialized&&"string"==typeof a)b.self.format({locale:a});else if("function"==typeof a)return a;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":81,"../../object/merge.coffee":174}],192:[function(a,b,c){b.exports={accepted:[!1,Number],value:!1}},{}],193:[function(a,b,c){arguments[4][192][0].apply(c,arguments)},{dup:192}],194:[function(a,b,c){arguments[4][114][0].apply(c,arguments)},{dup:114}],195:[function(a,b,c){b.exports={accepted:[-180,-90,0,90,180],value:0}},{}],196:[function(a,b,c){b.exports={accepted:["circle","square"],value:!1}},{}],197:[function(a,b,c){b.exports={accepted:[Array,!1],value:!1}},{}],198:[function(a,b,c){b.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(a){var b;return b=this.split.value,this.split["break"]=new RegExp("[^\\s\\"+b.join("\\")+"]+\\"+b.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(a){return this["break"]=new RegExp("[^\\s\\"+a.join("\\")+"]+\\"+a.join("?\\")+"?","g"),a},value:["-","/",";",":","&"]}}},{}],199:[function(a,b,c){b.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],200:[function(a,b,c){arguments[4][192][0].apply(c,arguments)},{dup:192}],201:[function(a,b,c){arguments[4][192][0].apply(c,arguments)},{dup:192}],202:[function(a,b,c){arguments[4][192][0].apply(c,arguments)},{dup:192}],203:[function(a,b,c){var d,e,f,g,h;d=a("../core/methods/attach.coffee"),f=a("./helpers/parseSize.coffee"),e=a("../core/console/print.coffee"),g=a("./helpers/parseText.coffee"),h=a("./helpers/wrap.coffee"),b.exports=function(){var b;return b={self:function(a){return a.each(function(){f(b),b.size.value[0]<=b.height.inner?(g(b),h(b)):b.container.value.html(""),b.dev.value&&e.timeEnd("total draw time")}),b.self}},d(b,{align:a("./methods/align.coffee"),config:a("./methods/config.coffee"),container:a("./methods/container.coffee"),dev:a("./methods/dev.coffee"),draw:a("./methods/draw.coffee"),format:a("./methods/format.coffee"),height:a("./methods/height.coffee"),padding:a("./methods/padding.coffee"),resize:a("./methods/resize.coffee"),rotate:a("./methods/rotate.coffee"),text:a("./methods/text.coffee"),shape:a("./methods/shape.coffee"),size:a("./methods/size.coffee"),valign:a("./methods/valign.coffee"),width:a("./methods/width.coffee"),x:a("./methods/x.coffee"),y:a("./methods/y.coffee")}),b.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":82,"./helpers/parseSize.coffee":182,"./helpers/parseText.coffee":183,"./helpers/wrap.coffee":185,"./methods/align.coffee":186,"./methods/config.coffee":187,"./methods/container.coffee":188,"./methods/dev.coffee":189,"./methods/draw.coffee":190,"./methods/format.coffee":191,"./methods/height.coffee":192,"./methods/padding.coffee":193,"./methods/resize.coffee":194,"./methods/rotate.coffee":195,"./methods/shape.coffee":196,"./methods/size.coffee":197,"./methods/text.coffee":198,"./methods/valign.coffee":199,"./methods/width.coffee":200,"./methods/x.coffee":201,"./methods/y.coffee":202}],204:[function(a,b,c){function d(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var e=a("../core/locale/languages/en_US.coffee"),f=a("../client/pointer.coffee"),g=a("../color/legible.coffee"),h=a("./move.coffee"),i=a("../client/prefix.coffee"),j=a("../client/rtl.coffee"),k=a("./remove.coffee"),l=a("../client/scroll.js"),m=a("../client/scrollbar.coffee"),n=a("../string/list.coffee"),o=a("../color/text.coffee");b.exports=function(a){var b=a.fullscreen?250:200,c=i();a.width=a.width||b,a.max_width=a.max_width||386,a.id=a.id||"default",a.size=a.fullscreen||a.html?"large":"small",a.offset=a.offset||0,a.arrow_offset=a.arrow?8:0,a.x=a.x||0,a.y=a.y||0,a.parent=a.parent||d3.select("body"),a.curtain=a.curtain||"#fff",a.curtainopacity=a.curtainopacity||.8,a.background=a.background||"#fff",a.fontcolor=a.fontcolor||"#444",a.fontfamily=a.fontfamily||"sans-serif",a.fontweight=a.fontweight||"normal",a.fontsize=a.fontsize||"12px",a.style=a.style||"default",a.zindex="small"==a.size?2e3:500,a.locale=a.locale||e,a.stacked=a.stacked||!1;var p=a.parent?a.parent.node().offsetHeight||a.parent.node().getBoundingClientRect().height:0;if(a.iconsize||(a.iconsize="small"==a.size?22:50),a.parent.node()===document.body){a.limit=[window.innerWidth+l.x(),window.innerHeight+l.y()];var q=m();document.body.scrollHeight>window.innerHeight&&(a.limit[0]-=q)}else a.limit=[parseFloat(a.parent.style("width"),10),parseFloat(a.parent.style("height"),10)];if(a.title instanceof Array){var r=a.locale.ui.and,s=a.locale.ui.more;a.title=n(a.title,r,3,s)}if(k(a.id),a.anchor={},a.fullscreen)a.anchor.x="center",a.anchor.y="center",a.x=a.parent?a.parent.node().offsetWidth/2:window.innerWidth/2,a.y=a.parent?p/2:window.innerHeight/2;else if(a.align){var t=a.align.split(" ");a.anchor.y=t[0],t[1]?a.anchor.x=t[1]:a.anchor.x="center"}else a.anchor.x="center",a.anchor.y="top";var u=a.width-30;if(a.fullscreen){a.parent.append("div").attr("id","d3plus_tooltip_curtain_"+a.id).attr("class","d3plus_tooltip_curtain").style("background-color",a.curtain).style("opacity",a.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(f.click,function(){k(a.id)})}var v=a.parent.append("div").datum(a).attr("id","d3plus_tooltip_id_"+a.id).attr("class","d3plus_tooltip d3plus_tooltip_"+a.size).style("color",a.fontcolor).style("font-family",a.fontfamily).style("font-weight",a.fontweight).style("font-size",a.fontsize+"px").style(c+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(f.out,d);a.max_height&&v.style("max-height",a.max_height+"px"),a.fixed?(v.style("z-index",500),a.mouseevents=!0):v.style("z-index",2e3);var w=v.append("div").datum(a).attr("class","d3plus_tooltip_container").style("background-color",a.background).style("padding","6px");if(a.fullscreen&&a.html&&!a.stacked){y=a.parent?.75*a.parent.node().offsetWidth:.75*window.innerWidth,L=a.parent?.75*p:.75*window.innerHeight,w.style("width",y+"px").style("height",L+"px");var x=w.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",a.width+"px")}else{if("auto"==a.width){var y="auto";w.style("max-width",a.max_width+"px")}else var y=a.width-14+"px";var x=w.style("width",y)}if(a.title||a.icon)var z=x.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(a.fullscreen){v.append("div").attr("class","d3plus_tooltip_close").style("background-color",a.color).style("color",o(a.color)).style("position","absolute").style(c+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(f.over,function(){d3.select(this).style("cursor","pointer").style(c+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(f.out,function(){d3.select(this).style("cursor","auto").style(c+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(f.click,function(){k(a.id)});d3.select("body").on("keydown.esc_"+a.id,function(){27===d3.event.keyCode&&(k(a.id),d3.select("body").on("keydown.esc_"+a.id,null))})}if(a.mouseevents){if(a.mouseevents!==!0){var A=d3.select(a.mouseevents).on(f.out),B=function(){var b=d3.event.toElement||d3.event.relatedTarget;if(b)var c="string"==typeof b.className?b.className:b.className.baseVal,e=0==c.indexOf("d3plus_tooltip");else var e=!1;
b&&(C(v.node(),b)||C(a.mouseevents,b)||e)||(A(d3.select(a.mouseevents).datum()),d(),d3.select(a.mouseevents).on(f.out,A))},C=function(a,b){for(var c=b.parentNode;null!==c;){if(c==a)return!0;c=c.parentNode}return!1};d3.select(a.mouseevents).on(f.out,B),v.on(f.out,B);var D=d3.select(a.mouseevents).on(f.move);D&&v.on(f.move,D)}}else v.style("pointer-events","none");if(a.arrow){v.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",a.background).style(c+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(c+"transform","rotate(45deg)").style("z-index",-1)}if(a.icon){var E=z.append("div").attr("class","d3plus_tooltip_icon").style("width",a.iconsize+"px").style("height",a.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+a.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==a.style&&E.style("background-color",a.color),u-=E.node().offsetWidth}if(a.title){var F=a.max_width-6;a.icon&&(F-=a.iconsize+6),F+="px";z.append("div").attr("class","d3plus_tooltip_title").style("max-width",F).style("color",a.icon?a.fontcolor:g(a.color)).style("vertical-align","top").style("width",u+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===a.size?"18px":"16px").style("line-height","large"===a.size?"20px":"17px").style("padding","large"===a.size?"3px 6px":"3px").text(a.title)}if(a.description){x.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(a.description)}if(a.data||a.html&&!a.fullscreen)var G=x.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(a.data){var H=0,I={},J=null;a.data.forEach(function(b,e){b.group&&J!=b.group&&(J=b.group,G.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(b.group));var h=G.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(b);b.highlight===!0?h.style("color",g(a.color)):(b.allColors||b.highlight!==a.color)&&h.style("color",g(b.highlight));var k=h.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(b.name).on(f.out,function(){d3.event.stopPropagation()});if(b.link&&k.style("cursor","pointer").on(f.click,b.link),b.value instanceof Array){var l=a.locale.ui.and,m=a.locale.ui.more;b.value=list(b.value,l,3,m)}var n=h.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(b.value).on(f.out,function(){d3.event.stopPropagation()});if(j?n.style("left","6px"):n.style("right","6px"),a.mouseevents&&b.desc){var o=h.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(c+"transition","height 0.5s").style("width","85%").text(b.desc).on(f.out,function(){d3.event.stopPropagation()}),p=o.node().offsetHeight||o.node().getBoundingClientRect().height;o.style("height","0px");var q=k.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(c+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(i+"transition","background-color 0.5s").text("?").on(f.over,function(){var a=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",a),o.style("height",p+"px")}).on(f.out,function(){d3.event.stopPropagation()});k.style("cursor","pointer").on(f.over,function(){d();var a=d3.select(this.parentNode).style("color");q.style("background-color",a),o.style("height",p+"px")}),h.on(f.out,function(){d3.event.stopPropagation(),d()})}var r=parseFloat(n.style("width"),10);r>a.width/2&&(r=a.width/2),r>H&&(H=r),e!=a.data.length-1&&(b.group&&b.group==a.data[e+1].group||!b.group&&!a.data[e+1].group)&&G.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),G.selectAll(".d3plus_tooltip_data_name").style("width",function(){var a=parseFloat(d3.select(this.parentNode).style("width"),10);return a-H-30+"px"}),G.selectAll(".d3plus_tooltip_data_value").style("width",H+"px").each(function(a){var b=parseFloat(d3.select(this).style("height"),10);I[a.name]=b}),G.selectAll(".d3plus_tooltip_data_name").style("min-height",function(a){return I[a.name]+"px"})}!a.html||a.fullscreen&&!a.stacked||(G.append("div").html(a.html),a.js&&a.js(w));var K=x.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(a.footer&&K.html(a.footer),a.height=v.node().offsetHeight||v.node().getBoundingClientRect().height,a.html&&a.fullscreen&&!a.stacked){var L=a.height-12,y=v.node().offsetWidth-a.width-44;w.append("div").attr("class","d3plus_tooltip_html").style("width",y+"px").style("height",L+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(a.html),a.js&&a.js(w)}if(a.width=v.node().offsetWidth,"center"!=a.anchor.y?a.height+=a.arrow_offset:a.width+=a.arrow_offset,a.data||(!a.fullscreen||a.stacked)&&a.html){if(!a.fullscreen||a.stacked)var M=a.fixed?p-a.y-10:p-10,L=a.height<M?a.height:M;else var L=a.height;L-=parseFloat(w.style("padding-top"),10),L-=parseFloat(w.style("padding-bottom"),10),z&&(L-=z.node().offsetHeight||z.node().getBoundingClientRect().height,L-=parseFloat(z.style("padding-top"),10),L-=parseFloat(z.style("padding-bottom"),10)),K&&(L-=K.node().offsetHeight||K.node().getBoundingClientRect().height,L-=parseFloat(K.style("padding-top"),10),L-=parseFloat(K.style("padding-bottom"),10)),G.style("max-height",L+"px")}a.height=v.node().offsetHeight||v.node().getBoundingClientRect().height,h(a.x,a.y,a.id)}},{"../client/pointer.coffee":40,"../client/prefix.coffee":41,"../client/rtl.coffee":42,"../client/scroll.js":43,"../client/scrollbar.coffee":44,"../color/legible.coffee":46,"../color/text.coffee":52,"../core/locale/languages/en_US.coffee":72,"../string/list.coffee":177,"./move.coffee":205,"./remove.coffee":206}],205:[function(a,b,c){var d,e;e=a("../client/scroll.js"),b.exports=function(a,b,c){var f,g,h;return c||(c="default"),h=d3.select("div#d3plus_tooltip_id_"+c),h.node()&&(f=h.datum(),f.cx=a,f.cy=b,f.fixed||(g="body"===f.parent.node().tagName.toLowerCase()?[e.x(),e.y()]:[0,0],"center"!==f.anchor.y?("right"===f.anchor.x?f.x=f.cx-f.arrow_offset-4:"center"===f.anchor.x?f.x=f.cx-f.width/2:"left"===f.anchor.x&&(f.x=f.cx-f.width+f.arrow_offset+2),"bottom"===f.anchor.y?f.flip=f.cy+f.height+f.offset<=f.limit[1]:"top"===f.anchor.y&&(f.flip=f.cy-f.height-f.offset<g[1]),f.flip?f.y=f.cy+f.offset+f.arrow_offset:f.y=f.cy-f.height-f.offset-f.arrow_offset):(f.y=f.cy-f.height/2,"right"===f.anchor.x?f.flip=f.cx+f.width+f.offset<=f.limit[0]:"left"===f.anchor.x&&(f.flip=f.cx-f.width-f.offset<g[0]),"center"===f.anchor.x?(f.flip=!1,f.x=f.cx-f.width/2):f.flip?f.x=f.cx+f.offset+f.arrow_offset:f.x=f.cx-f.width-f.offset),f.x<g[0]?f.x=g[0]:f.x+f.width>f.limit[0]&&(f.x=f.limit[0]-f.width),f.y<g[1]?f.y=g[1]:f.y+f.height>f.limit[1]&&(f.y=f.limit[1]-f.height)),h.style("top",f.y+"px").style("left",f.x+"px"),f.arrow&&h.selectAll(".d3plus_tooltip_arrow").call(d)),h},d=function(a){return a.style("bottom",function(a){return"center"===a.anchor.y||a.flip?"auto":"-5px"}).style("right",function(a){return"center"!==a.anchor.y||a.flip?"auto":"-5px"}).style("top",function(a){return"center"!==a.anchor.y&&a.flip?"-5px":"center"===a.anchor.y?"50%":"auto"}).style("left",function(a){return"center"===a.anchor.y&&a.flip?"-5px":"center"!==a.anchor.y?"50%":"auto"}).style("margin-left",function(a){var b;return"center"===a.anchor.y?"auto":(b="right"===a.anchor.x?-a.width/2+a.arrow_offset/2:"left"===a.anchor.x?a.width/2-2*a.arrow_offset-5:-5,a.cx-a.width/2-5<b?(b=a.cx-a.width/2-5,b<2-a.width/2&&(b=2-a.width/2)):-(a.limit[0]-a.cx-a.width/2+5)>b&&(b=-(a.limit[0]-a.cx-a.width/2+5),b>a.width/2-11&&(b=a.width/2-11)),b+"px")}).style("margin-top",function(a){var b;return"center"!==a.anchor.y?"auto":(b="bottom"===a.anchor.y?-a.height/2+a.arrow_offset/2-1:"top"===a.anchor.y?a.height/2-2*a.arrow_offset-2:-9,a.cy-a.height/2-a.arrow_offset<b?(b=a.cy-a.height/2-a.arrow_offset,b<4-a.height/2&&(b=4-a.height/2)):-(a.limit[1]-a.cy-a.height/2+a.arrow_offset)>b&&(b=-(a.limit[1]-a.cy-a.height/2+a.arrow_offset),b>a.height/2-22&&(b=a.height/2-22)),b+"px")})}},{"../client/scroll.js":43}],206:[function(a,b,c){b.exports=function(a){return a?(d3.selectAll("div#d3plus_tooltip_curtain_"+a).remove(),d3.selectAll("div#d3plus_tooltip_id_"+a).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],207:[function(a,b,c){b.exports=function(a,b){var c,d;return c=[],d=1/(b-1)*(a[1]-a[0]),d3.range(a[0],a[1]+d,d)}},{}],208:[function(a,b,c){var d;d=a("./d3selection.coffee"),b.exports=function(a,b){var c;if(!a||!b)return!1;for(d(a)&&(a=a.node()),d(a)&&(b=b.node()),c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1}},{"./d3selection.coffee":211}],209:[function(a,b,c){b.exports=function(a,b){var c,d;return b.constructor===String?(d=a.indexOf(b),d>-1?a[d]:a[0]):(c=a[0],a.forEach(function(a){return Math.abs(b-a)<Math.abs(b-c)?c=a:void 0}),c)}},{}],210:[function(a,b,c){var d,e,f;e=a("../object/merge.coffee"),f=a("../object/validate.coffee"),d=function(a){var b;return f(a)?e(a):a instanceof Array?(b=[],a.forEach(function(a){return b.push(d(a))}),b):a},b.exports=d},{"../object/merge.coffee":174,"../object/validate.coffee":175}],211:[function(a,b,c){var d;d=a("../client/ie.js"),b.exports=function(a){return d?"object"==typeof a&&a instanceof Array&&"size"in a&&"select"in a:a instanceof d3.selection}},{"../client/ie.js":39}],212:[function(a,b,c){b.exports=function(a,b){var c;c=new Image,c.src=a,c.crossOrigin="Anonymous",c.onload=function(){var a,c;a=document.createElement("canvas"),a.width=this.width,a.height=this.height,c=a.getContext("2d"),c.drawImage(this,0,0),b.call(this,a.toDataURL("image/png")),a=null}}},{}],213:[function(a,b,c){var d,e;d=a("../object/validate.coffee"),e=function(a,b,c,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v;if(void 0===a)return[];if(f&&void 0===g&&(g=f.id.value),h=!0===h&&void 0===h,a instanceof Array||(a=[a]),r=[],void 0===b)return a.reduce(function(a,b){var c;return c=JSON.stringify(b),r.indexOf(c)<0&&(a.indexOf(b)<0&&a.push(b),r.push(c)),a},[]);if(v=[],i=function(a){var b;return void 0!==a&&null!==a&&(b=JSON.stringify(a),r.indexOf(b)<0)?(v.push(a),r.push(b)):void 0},"function"==typeof c&&f)for(k=0,n=a.length;n>k;k++)for(j=a[k],u=e(c(f,j,b,g)),l=0,o=u.length;o>l;l++)t=u[l],i(t);else if("function"==typeof b)for(m=0,p=a.length;p>m;m++)j=a[m],u=b(j),i(u);else for(s=0,q=a.length;q>s;s++)j=a[s],d(j)&&(u=j[b],i(u));return h?v.sort(function(a,b){return a-b}):v},b.exports=e},{"../object/validate.coffee":175}],214:[function(a,b,c){b.exports=function(a){var b,c,d,e,f;for(a.container.value.style("position",function(){var a,b;return a=d3.select(this).style("position"),b=["absolute","fixed"].indexOf(a)>=0,b?a:"relative"}),a.container.changed&&a.container.value.html(""),e=["width","height"],c=0,d=e.length;d>c;c++)f=e[c],a[f].value||(b=function(c){var d,e;return void 0===c.tagName||["BODY","HTML"].indexOf(c.tagName)>=0?(e=window["inner"+f.charAt(0).toUpperCase()+f.slice(1)],d=document!==c?d3.select(c):!1,d&&("width"===f?(e-=parseFloat(d.style("margin-left"),10),e-=parseFloat(d.style("margin-right"),10),e-=parseFloat(d.style("padding-left"),10),e-=parseFloat(d.style("padding-right"),10)):(e-=parseFloat(d.style("margin-top"),10),e-=parseFloat(d.style("margin-bottom"),10),e-=parseFloat(d.style("padding-top"),10),e-=parseFloat(d.style("padding-bottom"),10))),a[f].value=20>=e?a[f].small:e):(e=parseFloat(d3.select(c).style(f),10),"number"==typeof e&&e>0?a[f].value=e:"BODY"!==c.tagName?b(c.parentNode):void 0)},b(a.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));a.container.value.style("width",a.width.value+"px").style("height",a.height.value+"px")}},{}],215:[function(a,b,c){var d=a("../../core/data/format.js"),e=a("../../core/data/color.js"),f=a("../../core/data/keys.coffee"),g=a("../../core/data/load.coffee"),h=a("./ui/drawer.js"),i=a("./ui/legend.js"),j=a("./ui/timeline.coffee"),k=a("./errorCheck.js"),l=a("../../core/fetch/data.js"),m=a("./finish.js"),n=a("./focus/tooltip.coffee"),o=a("./ui/history.coffee"),p=a("../../core/parse/edges.js"),q=a("../../core/parse/nodes.js"),r=a("../../core/console/print.coffee"),s=a("../../tooltip/remove.coffee"),t=a("./types/run.coffee"),u=a("./shapes/draw.js"),v=a("../../string/format.js"),w=a("./svg/enter.js"),x=a("./svg/update.js"),y=a("./ui/titles.js"),z=a("../../object/validate.coffee");b.exports=function(a){var b=[],c=a.type.value,A=a.format.locale.value,B=A.message.ui,C=A.message.draw,D=["data","attrs","coords","nodes","edges"];if(D.forEach(function(c){a.error.value||a[c].loaded||!a[c].url||b.push({"function":function(a,b){g(a,c,b)},message:A.message.loading,wait:!0})}),a.draw.update){var E=A.visualization[c]||c,F=a.types[c].setup||!1,G=a.types[c].requirements||[],H=v(A.message.initializing,E),I=A.message.data;G instanceof Array||(G=[G]),E=E.toLowerCase(),a.error.value||"function"!=typeof F||b.push({"function":function(a){if(a.dev.value){var b="running "+E+" setup";r.time(b)}F(a),a.dev.value&&r.timeEnd(b)},message:H}),a.container.changed&&b.push({"function":w,message:H}),c in a.g.apps||b.push({"function":function(a){if(a.dev.value){var b="creating "+E+" group";r.time(b)}a.g.apps[c]=a.g.app.append("g").attr("id",c).attr("opacity",0),a.dev.value&&r.timeEnd(b)},message:H}),a.data.changed&&b.push({"function":function(a){a.data.cache={},delete a.nodes.restricted,delete a.edges.restricted,f(a,"data")},message:I}),a.attrs.changed&&b.push({"function":function(a){f(a,"attrs")},message:I}),b.push({"function":function(a){if(!a.color.type||a.color.changed||a.data.changed||a.attrs.changed||a.id.changed||a.depth.changed||a.id.solo.changed||!a.time.fixed.value&&(a.time.solo.changed||a.time.mute.changed)){if(a.color.valueScale=!1,a.dev.value){var b="checking color type";r.time(b)}if(a.color.type=!1,a.color.value){var c=a.color.value;z(c)&&(c=c[a.id.value]?c[a.id.value]:c[d3.keys(c)[0]]),a.data.keys&&c in a.data.keys?a.color.type=a.data.keys[c]:a.attrs.keys&&c in a.attrs.keys&&(a.color.type=a.attrs.keys[c])}else a.data.keys&&(a.color.type=a.data.keys[a.id.value]);a.dev.value&&r.timeEnd(b)}},message:I}),G.indexOf("edges")>=0&&a.edges.value&&(!a.edges.linked||a.edges.changed)&&b.push({"function":p,message:I}),G.indexOf("nodes")>=0&&a.edges.value&&(!a.nodes.positions||a.nodes.changed||a.type.changed)&&b.push({"function":q,message:I}),(a.data.changed||a.time.changed||a.time.format.changed||a.type.changed||a.id.changed||a.x.scale.changed&&[a.x.scale.value,a.x.scale.previous].indexOf("discrete")>=0||a.y.scale.changed&&[a.y.scale.value,a.y.scale.previous].indexOf("discrete")>=0)&&b.push({"function":d,message:I}),a.error.value||b.push({"function":function(a){var b=a.time.fixed.value?["all"]:null;if(a.dev.value){var c=b?"fetching pool data":"fetching data";r.time(c)}a.data.pool=l(a,b),a.dev.value&&r.timeEnd(c),b?(a.dev.value&&r.time("fetching data for current year"),a.data.viz=l(a),a.dev.value&&r.timeEnd("fetching data for current year")):a.data.viz=a.data.pool,a.draw.timing=a.data.viz.length<a.data.large?a.timing.transitions:0},message:I}),a.error.value||b.push({check:function(a){return a.color.value&&"number"===a.color.type&&a.color.valueScale===!1},"function":e,message:I})}return b.push({"function":function(a){if(a.dev.value){var b=a.format.locale.value.message.tooltipReset;r.time(b)}a.type.previous&&c!==a.type.previous&&s(a.type.previous),s(c),a.dev.value&&r.timeEnd(b)},message:B}),a.error.value||b.push({"function":k,message:B}),b.push({"function":function(a){if(a.margin.process(),y(a),!a.error.value)if(a.draw.update)h(a),j(a),i(a);else{a.dev.value&&r.time("calculating margins");var b=a.container.value.select("div#d3plus_drawer").node().offsetHeight||a.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,c=a.g.timeline.node().getBBox();c=a.timeline.value?c.height+a.ui.padding:0;var d=a.g.legend.node().getBBox();d=a.legend.value?d.height+a.ui.padding:0,a.margin.bottom+=b+c+d,a.dev.value&&r.timeEnd("calculating margins")}o(a),a.height.viz-=a.margin.top+a.margin.bottom,a.width.viz-=a.margin.left+a.margin.right},message:B}),a.error.value||b.push({"function":n,message:B}),b.push({"function":x,message:C}),!a.error.value&&a.draw.update&&b.push({"function":[t,u],message:C}),b.push({"function":m,message:C}),b}},{"../../core/console/print.coffee":54,"../../core/data/color.js":56,"../../core/data/format.js":58,"../../core/data/keys.coffee":60,"../../core/data/load.coffee":61,"../../core/fetch/data.js":66,"../../core/parse/edges.js":97,"../../core/parse/nodes.js":100,"../../object/validate.coffee":175,"../../string/format.js":176,"../../tooltip/remove.coffee":206,"./errorCheck.js":216,"./finish.js":217,"./focus/tooltip.coffee":218,"./shapes/draw.js":228,"./svg/enter.js":241,"./svg/update.js":242,"./types/run.coffee":245,"./ui/drawer.js":246,"./ui/history.coffee":247,"./ui/legend.js":248,"./ui/timeline.coffee":250,"./ui/titles.js":251}],216:[function(a,b,c){var d=a("../../core/fetch/text.js"),e=a("../../core/console/print.coffee"),f=a("../../core/methods/rejected.coffee"),g=a("../../string/format.js"),h=a("../../string/list.coffee");b.exports=function(a){a.dev.value&&e.time("checking for errors");var b=["id"],c=a.types[a.type.value].requirements;c&&(c instanceof Array?b=b.concat(a.types[a.type.value].requirements):b.push(c));var i=[];if(b.forEach(function(b){if("string"==typeof b)a[b].value||i.push('"'+b+'"');else if("function"==typeof b){var c=b(a);!c.status&&c.text&&i.push('"'+c.text+'"')}}),i.length>1){var j=a.format.locale.value.error.methods,k=a.format.locale.value.visualization[a.type.value]||a.type.value,l=a.format.locale.value.ui.and;i=h(i,l),a.error.internal=g(j,k,i)}else if(1===i.length){var j=a.format.locale.value.error.method,k=a.format.locale.value.visualization[a.type.value]||a.type.value;a.error.internal=g(j,k,i[0])}if(!a.error.internal&&b.indexOf("edges")>=0&&b.indexOf("focus")>=0){var m=a.edges.connections(a.focus.value[0],a.id.value);if(0==m.length){var n=d(a,a.focus.value[0],a.depth.value),j=a.format.locale.value.error.connections;a.error.internal=g(j,'"'+n+'"')}}var b=["d3"];a.types[a.type.value].libs&&(b=b.concat(a.types[a.type.value].libs));var i=[];if(b.forEach(function(a){window[a]||i.push('"'+a+'"')}),i.length>1){var j=a.format.locale.value.error.libs,k=a.format.locale.value.visualization[a.type.value],l=a.format.locale.value.ui.and;i=h(i,l),a.error.internal=g(j,k,i)}else if(1===i.length){var j=a.format.locale.value.error.lib,k=a.format.locale.value.visualization[a.type.value];a.error.internal=g(j,k,i[0])}var o=a.shape.accepted(a);o instanceof Array||(o=[o]);var p=a.shape.value;if((!p||f(a,o,p,"shape"))&&a.self.shape(o[0]),"modes"in a.types[a.type.value]){var q=a.types[a.type.value].modes;q instanceof Array||(q=[q]);var r=a.type.mode.value;(!r||f(a,q,r,"mode"))&&a.self.type({mode:q[0]})}a.dev.value&&e.timeEnd("checking for errors")}},{"../../core/console/print.coffee":54,"../../core/fetch/text.js":68,"../../core/methods/rejected.coffee":93,"../../string/format.js":176,"../../string/list.coffee":177}],217:[function(a,b,c){var d=a("./shapes/edges.js"),e=a("./shapes/paths.js"),f=a("./ui/message.js"),g=a("./focus/viz.js"),h=a("../../core/methods/reset.coffee"),i=a("../../core/console/print.coffee"),j=a("./shapes/labels.js"),k=a("../../string/title.coffee"),l=a("./zoom/bounds.coffee"),m=a("./zoom/labels.coffee"),n=a("./zoom/mouse.coffee");b.exports=function(a){if(a.draw.first?setTimeout(function(){g(a)},a.draw.timing):g(a),!a.error.value){var b=a.zoom.viewport||a.zoom.bounds;a.types[a.type.value].zoom&&a.zoom.value&&b?(a.dev.value&&i.time("calculating zoom"),a.draw.first||a.zoom.reset?l(a,b,0):(a.type.changed||a.focus.changed||a.height.changed||a.width.changed||a.nodes.changed||a.legend.changed||a.timeline.changed||a.ui.changed)&&l(a,b),a.dev.value&&i.timeEnd("calculating zoom")):(a.zoom.bounds=[[0,0],[a.width.viz,a.height.viz]],a.zoom.scale=1,l(a))}var c=a.zoom.size?a.zoom.size.width:a.width.viz,o=a.zoom.size?a.zoom.size.height:a.height.viz,p=a.zoom.bounds?a.zoom.bounds[0][0]:0,q=a.zoom.bounds?a.zoom.bounds[0][1]:0;if(a.g.overlay.attr("width",c).attr("height",o).attr("x",p).attr("y",q),a.error.value||(a.draw.update?(a.edges.path?e(a):d(a),j(a,"data"),a.edges.label&&!a.edges.path&&setTimeout(function(){j(a,"edges")},a.draw.timing+200)):(a.labels.value||a.labels.changed)&&a.types[a.type.value].zoom&&a.zoom.value&&a.draw.timing&&setTimeout(function(){m(a)},a.draw.timing)),!a.error.value){var r=a.types[a.type.value].requirements||[];r instanceof Array||(r=[r]);var s=r.indexOf("data")>=0;a.error.internal||a.data.viz&&a.returned.nodes.length||!s||(a.error.internal=a.format.locale.value.error.data)}var t=a.type.previous;if(t&&a.type.value!=t&&a.g.apps[t]&&(a.dev.value&&i.time('hiding "'+t+'"'),a.draw.timing?a.g.apps[t].transition().duration(a.draw.timing).attr("opacity",0):a.g.apps[t].attr("opacity",0),a.dev.value&&i.timeEnd()),!a.error.value){var u=s&&0===a.data.viz.length||a.error.internal||a.error.value?0:a.focus.value.length&&a.types[a.type.value].zoom&&a.zoom.value?1-a.tooltip.curtain.opacity:1,v=a.draw.timing;a.group.transition().duration(v).attr("opacity",u),a.g.data.transition().duration(v).attr("opacity",u),a.g.edges.transition().duration(v).attr("opacity",u)}a.error.value?f(a,a.error.value):a.error.internal?(a.error.internal=k(a.error.internal),i.warning(a.error.internal),f(a,a.error.internal),a.error.internal=null):f(a),setTimeout(function(){h(a),a.types[a.type.value].zoom&&a.zoom.value?(a.g.zoom.datum(a).call(a.zoom.behavior.on("zoom",n)),a.zoom.scroll.value||a.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),a.zoom.click.value||a.g.zoom.on("dblclick.zoom",null),a.zoom.pan.value||a.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):a.g.zoom.call(a.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},a.draw.timing)}},{"../../core/console/print.coffee":54,"../../core/methods/reset.coffee":95,"../../string/title.coffee":179,"./focus/viz.js":219,"./shapes/edges.js":229,"./shapes/labels.js":231,"./shapes/paths.js":233,"./ui/message.js":249,"./zoom/bounds.coffee":252,"./zoom/labels.coffee":254,"./zoom/mouse.coffee":255}],218:[function(a,b,c){var d,e,f,g;d=a("../tooltip/create.js"),e=a("../../../core/fetch/value.coffee"),f=a("../../../core/console/print.coffee"),g=a("../../../tooltip/remove.coffee"),b.exports=function(a){var b,c,h;c=a.focus,!a.error.internal&&1===c.value.length&&c.value.length&&!a.small&&c.tooltip.value?(a.dev.value&&f.time("drawing focus tooltip"),b=a.data.pool.filter(function(b){return e(a,b,a.id.value)===c.value[0]}),b.length>=1?b=b[0]:(b={},b[a.id.value]=c.value[0]),h=a.labels.padding,d({anchor:"top left",arrow:!1,data:b,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:a.height.viz-2*h,mouseevents:!0,offset:0,vars:a,width:a.tooltip.large,x:a.width.value-a.margin.right-h,y:a.margin.top+h}),a.width.viz-=a.tooltip.large+2*h,a.dev.value&&f.timeEnd("drawing focus tooltip")):g("visualization_focus")}},{"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../tooltip/remove.coffee":206,"../tooltip/create.js":243}],219:[function(a,b,c){var d=a("../../../client/pointer.coffee"),f=a("../../../client/ie.js"),g=a("../../../core/fetch/value.coffee"),h=a("../../../core/console/print.coffee"),i=a("../../../util/uniques.coffee");b.exports=function(a){if(a.g.edge_focus.selectAll("g").remove(),a.g.data_focus.selectAll("g").remove(),a.focus.value.length&&a.types[a.type.value].zoom&&a.zoom.value){a.dev.value&&h.time("drawing focus elements");var b=a.g.edges.selectAll("g");if(b.size()>0){b.each(function(b){var c=b[a.edges.source][a.id.value],d=b[a.edges.target][a.id.value];if(c==a.focus.value[0]||d==a.focus.value[0]){var e=a.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(e).datum(b).attr("opacity",1).selectAll("line, path").datum(b)}});var c=a.edges.arrows.value;a.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",a.color.focus).style("stroke-width",function(){return f&&a.types[a.type.value].zoom?0:a.edges.size.value?d3.select(this).style("stroke-width"):2*a.data.stroke.width}).attr("marker-start",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"source"==d&&c?"url(#d3plus_edge_marker_focus"+e+")":"none"}).attr("marker-end",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"target"==d&&c?"url(#d3plus_edge_marker_focus"+e+")":"none"}),a.g.edge_focus.selectAll("text").style("fill",a.color.focus)}var j=i(a.edges.connections(a.focus.value[0],a.id.value,!0),a.id.value,g,a);j.push(a.focus.value[0]);var k=[],l=[],m=[0],n=[0];a.g.data.selectAll("g").each(function(b){if(j.indexOf(b[a.id.value])>=0){var c=a.g.data_focus.node().appendChild(this.cloneNode(!0)),c=d3.select(c).datum(b).attr("opacity",1);"coordinates"==a.shape.value?a.zoom.viewport=a.path.bounds(a.zoom.coords[b.d3plus.id]):"d3plus"in b&&("x"in b.d3plus&&k.push(b.d3plus.x),"y"in b.d3plus&&l.push(b.d3plus.y),"r"in b.d3plus?(m.push(b.d3plus.r),n.push(b.d3plus.r)):("width"in b.d3plus&&m.push(b.d3plus.width/2),"height"in b.d3plus&&n.push(b.d3plus.height/2)));for(e in d){var f=d3.select(this).on(d[e]);f&&c.on(d[e],f)}}});if(k.length&&l.length){var o=d3.extent(k),p=d3.extent(l),q=d3.max(m),r=d3.max(n);a.zoom.viewport=[[o[0]-q,p[0]-r],[o[1]+q,p[1]+r]]}a.g.data_focus.selectAll("path").style("stroke-width",f&&a.types[a.type.value].zoom?0:2*a.data.stroke.width),a.dev.value&&h.timeEnd("drawing focus elements")}else a.zoom.viewport=!1}},{"../../../client/ie.js":39,"../../../client/pointer.coffee":40,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../util/uniques.coffee":213}],220:[function(a,b,c){var d,e,f,g;g=a("./style.coffee"),e=a("../../../geom/largestRect.coffee"),f=a("../../../geom/path2poly.coffee"),d={start:{},end:{}},b.exports=function(a,b,c,h){var i,j,k,l;i=d3.svg.arc().innerRadius(0).outerRadius(function(a){return a.d3plus.r}).startAngle(function(a){return a.d3plus.startAngle}).endAngle(function(a){return a.d3plus.endAngle}),k=function(b){var c,d;return a.labels.value&&(b.d3plus.label?b.d3plus_label=b.d3plus.label:(c=f(i(b)),d=e(c,{angle:0}),d[0]?b.d3plus_label={w:d[0].width,h:d[0].height,x:d[0].cx,y:d[0].cy}:delete b.d3plus_label)),[b]},a.draw.timing?(l=d3.svg.arc().innerRadius(0).outerRadius(function(a){return a.d3plus.r}).startAngle(function(a){return void 0===d.start[a.d3plus.id]&&(d.start[a.d3plus.id]=0),isNaN(d.start[a.d3plus.id])&&(d.start[a.d3plus.id]=a.d3plus.startAngle),d.start[a.d3plus.id]}).endAngle(function(a){return void 0===d.end[a.d3plus.id]&&(d.end[a.d3plus.id]=0),isNaN(d.end[a.d3plus.id])&&(d.end[a.d3plus.id]=a.d3plus.endAngle),d.end[a.d3plus.id]}),j=function(a,b){return a.attrTween("d",function(a){var c,e,f,g;return void 0===b?(g=a.d3plus.startAngle,c=a.d3plus.endAngle):0===b&&(g=0,c=0),f=d3.interpolate(d.start[a.d3plus.id],g),e=d3.interpolate(d.end[a.d3plus.id],c),function(b){return d.start[a.d3plus.id]=f(b),d.end[a.d3plus.id]=e(b),l(a)}})},c.append("path").attr("class","d3plus_data").call(g,a).attr("d",l),b.selectAll("path.d3plus_data").data(k).transition().duration(a.draw.timing).call(g,a).call(j),h.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(j,0)):(c.append("path").attr("class","d3plus_data"),b.selectAll("path.d3plus_data").data(k).call(g,a).attr("d",i))}},{"../../../geom/largestRect.coffee":162,"../../../geom/path2poly.coffee":164,"./style.coffee":237}],221:[function(a,b,c){var d=a("../../../core/fetch/text.js"),e=a("../../../font/sizes.coffee"),f=a("../../../geom/largestRect.coffee"),g=a("./style.coffee");b.exports=function(a,b,c,h){var i=d3.svg.area().x(function(a){return a.d3plus.x}).y0(function(a){return a.d3plus.y0}).y1(function(a){return a.d3plus.y}).interpolate(a.shape.interpolate.value),j=d3.svg.area().x(function(a){return a.d3plus.x}).y0(function(a){return a.d3plus.y0}).y1(function(a){return a.d3plus.y0}).interpolate(a.shape.interpolate.value);c.append("path").attr("class","d3plus_data").attr("d",function(a){return j(a.values)}).call(g,a);var k={"font-weight":a.labels.font.weight,"font-family":a.labels.font.family.value};b.selectAll("path.d3plus_data").data(function(b){if(a.labels.value&&b.values.length>1){var c=d3.max(b.values,function(a){return a.d3plus.y0-a.d3plus.y}),g=!1;if(c>a.labels.font.size){var h=[],i=[],j=d(a,b);b.values.forEach(function(a){h.push([a.d3plus.x,a.d3plus.y]),i.push([a.d3plus.x,a.d3plus.y0])}),h=h.concat(i.reverse());var l=null;if(j.length){var m=e(j[0],k);l=m[0].width/m[0].height}g=f(h,{angle:d3.range(-70,71,1),aspectRatio:l,tolerance:0})}if(g&&g[0]){var n={w:~~g[0].width,h:~~g[0].height,x:~~g[0].cx,y:~~g[0].cy,angle:-1*g[0].angle,padding:2,names:j};0!==g[0].angle?n.translate={x:n.x,y:n.y}:n.translate=!1,n.w>=10&&n.h>=10&&(b.d3plus_label=n)}}return[b]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).attr("d",function(a){return i(a.values)}).call(g,a):b.selectAll("path.d3plus_data").attr("d",function(a){return i(a.values)}).call(g,a)}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":104,"../../../geom/largestRect.coffee":162,"./style.coffee":237}],222:[function(a,b,c){var d=(a("../../../core/fetch/text.js"),a("../../../geom/largestRect.coffee"),a("./style.coffee"));b.exports=function(a,b,c,e){function f(a){a.attr("transform","scale(1)")}function g(a){a.attr("transform",function(a){var b=Math.min(a.d3plus.width,a.d3plus.height),c=Math.floor(b/16);return"scale("+c+")"})}c.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(f).call(d,a),b.selectAll("path.d3plus_data").data(function(a){return[a]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(g).call(d,a):b.selectAll("path.d3plus_data").call(g).call(d,a)}},{"../../../core/fetch/text.js":68,"../../../geom/largestRect.coffee":162,"./style.coffee":237}],223:[function(a,b,c){var d,e,f,g;e=a("../../../core/fetch/value.coffee"),d=a("../../../core/fetch/color.coffee"),f=a("../../../color/lighter.coffee"),g=a("./segments.coffee"),b.exports=function(a,b,c){var e,h,i,j;return h=a.d3plus.shape||b.shape.value,"line"===b.shape.value&&"circle"!==h?"none":"area"===b.shape.value||"active"===h||"line"===b.shape.value?d(b,a):"temp"===h?c?d(b,a):"url(#d3plus_hatch_"+a.d3plus.id+")":a.d3plus["static"]?f(d(b,a),.75):(e=g(b,a,"active"),i=g(b,a,"temp"),j=g(b,a,"total"),!b.active.value&&!b.temp.value||e===!0||e&&j&&e>=j&&!i||e&&!j?d(b,a):b.active.spotlight.value?b.color.missing:f(d(b,a),.75));
}},{"../../../color/lighter.coffee":47,"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"./segments.coffee":236}],224:[function(a,b,c){var d,e,f,g,h,i,j,k;d=a("../../../util/copy.coffee"),e=a("../../../network/distance.coffee"),f=a("../../../core/fetch/text.js"),g=a("../../../font/sizes.coffee"),i=a("../../../geom/largestRect.coffee"),j=a("../../../geom/path2poly.coffee"),k=a("./style.coffee"),h={},b.exports=function(a,b,c,l){var m,n;return m=d3.geo[a.coords.projection.value](),m.center&&m.center(a.coords.center),a.zoom.scale||(a.zoom.scale=1),a.zoom.area=1/a.zoom.scale/a.zoom.scale,a.path=d3.geo.path().projection(m),a.draw.timing?b.selectAll("path.d3plus_data").attr("d",a.path).transition().duration(a.draw.timing).call(k,a):b.selectAll("path.d3plus_data").attr("d",a.path).call(k,a),c.append("path").attr("id",function(a){return a.id}).attr("class","d3plus_data").attr("d",a.path).call(k,a),n=a.old_height!==a.height.viz||a.height.changed||a.old_width!==a.width.viz||a.width.changed,a.old_height=a.height.viz,a.old_width=a.width.viz,a.coords.changed||n||a.coords.mute.changed||a.coords.solo.changed||a.type.changed||a.text.changed||a.coords.projection.changed||a.labels.changed?(a.zoom.bounds=null,a.zoom.reset=!0,a.zoom.coords={},b.each(function(b){var c,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;if(a.coords.simplify.value&&b.geometry.coordinates.length>1){for(r=[],k=[],c=0,u=d(b),A=d(b),b.geometry.coordinates=b.geometry.coordinates.filter(function(b,d){var e;return A.geometry.coordinates=[b],e=a.path.area(A),e>0?(k.push(e),e>c&&(u.geometry.coordinates=[b],c=e),!0):!1}),n=a.path.centroid(u),B=b.geometry.coordinates,s=t=0,v=B.length;v>t;s=++t)m=B[s],A.geometry.coordinates=[m],r.push(e(a.path.centroid(A),n));q=r.reduce(function(a,b,c){return b&&a.push(k[c]/b),a},[]),p=d3.quantile(q,a.coords.threshold.value),A.geometry.coordinates=b.geometry.coordinates.filter(function(a,b){var c,d;return d=r[b],c=k[b],0===d||c/d>=p}),o=u.geometry.coordinates[0],o&&"MultiPolygon"===u.geometry.type&&(o=o[0],u.geometry.coordinates[0]=o,u.geometry.type="Polygon")}else A=b,u=b,o=b.geometry.coordinates[0];return a.zoom.coords[b.d3plus.id]=A,delete b.d3plus_label,a.labels.value&&(w=f(a,b),o&&w.length&&(x=j(a.path(u)),D={"font-weight":a.labels.font.weight,"font-family":a.labels.font.family.value},y=null,1===w[0].split(" ").length&&(C=g(w[0],D)[0],y=C.width/C.height),z=i(x,{angle:0,aspectRatio:y}),z&&(z=z[0],b.d3plus_label={anchor:"middle",valign:"center",h:z.height,w:z.width,x:z.cx,y:z.cy,names:w}))),h[b.id]=b.d3plus_label,l=a.path.bounds(A),a.zoom.bounds?(a.zoom.bounds[0][0]>l[0][0]&&(a.zoom.bounds[0][0]=l[0][0]),a.zoom.bounds[0][1]>l[0][1]&&(a.zoom.bounds[0][1]=l[0][1]),a.zoom.bounds[1][0]<l[1][0]&&(a.zoom.bounds[1][0]=l[1][0]),a.zoom.bounds[1][1]<l[1][1]?a.zoom.bounds[1][1]=l[1][1]:void 0):a.zoom.bounds=l})):a.focus.value.length?void 0:(a.zoom.viewport=!1,b.each(function(a){return a.d3plus_label=h[a.id]}))}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":104,"../../../geom/largestRect.coffee":162,"../../../geom/path2poly.coffee":164,"../../../network/distance.coffee":168,"../../../util/copy.coffee":210,"./style.coffee":237}],225:[function(a,b,c){var d=a("./style.coffee");b.exports=function(a,b,c,e){function f(a){a.attr("d",d3.svg.symbol().type("cross").size(10))}function g(a){a.attr("d",d3.svg.symbol().type("cross").size(function(a){var b=Math.min(a.d3plus.width,a.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}c.append("path").attr("class","d3plus_data").call(f).call(d,a),b.selectAll("path.d3plus_data").data(function(a){return[a]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(g).call(d,a):b.selectAll("path.d3plus_data").call(g).call(d,a)}},{"./style.coffee":237}],226:[function(a,b,c){var d=a("./style.coffee");b.exports=function(a,b,c,e){function f(a){a.attr("d",d3.svg.symbol().type("diamond").size(10))}function g(a){a.attr("d",d3.svg.symbol().type("diamond").size(function(a){var b=Math.min(a.d3plus.width,a.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}c.append("path").attr("class","d3plus_data").call(f).call(d,a),b.selectAll("path.d3plus_data").data(function(a){return[a]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(g).call(d,a):b.selectAll("path.d3plus_data").call(g).call(d,a)}},{"./style.coffee":237}],227:[function(a,b,c){var d=a("./style.coffee");b.exports=function(a,b,c,e){function f(b,c,d,e){if(!c)var c=0;if("number"!=typeof d)var d=void 0;if("number"!=typeof e)var e=void 0;b.attrTween("d",function(b){if(void 0==d)var f=b.d3plus.r?b.d3plus.r:d3.max([b.d3plus.width,b.d3plus.height]);else var f=d;if(void 0==e)var g=b.d3plus.segments[b.d3plus.shape];else var g=e;a.arcs[b.d3plus.shape][b.d3plus.id]||(a.arcs[b.d3plus.shape][b.d3plus.id]={r:0},a.arcs[b.d3plus.shape][b.d3plus.id].a=2*Math.PI);var i=d3.interpolate(a.arcs[b.d3plus.shape][b.d3plus.id].r,f+c),j=d3.interpolate(a.arcs[b.d3plus.shape][b.d3plus.id].a,g);return function(c){return a.arcs[b.d3plus.shape][b.d3plus.id].r=i(c),a.arcs[b.d3plus.shape][b.d3plus.id].a=j(c),h(b)}})}function g(a){return a.d3plus.label?a.d3plus_label=a.d3plus.label:delete a.d3plus_label,[a]}a.arcs||(a.arcs={donut:{},active:{},temp:{}});var h=d3.svg.arc().startAngle(0).endAngle(function(b){var c=a.arcs[b.d3plus.shape][b.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(b){if(b.d3plus["static"])return 0;var c=a.arcs[b.d3plus.shape][b.d3plus.id].r;return c*a.data.donut.size}).outerRadius(function(b){return a.arcs[b.d3plus.shape][b.d3plus.id].r});a.draw.timing?(e.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(f,0,0).each("end",function(b){delete a.arcs[b.d3plus.shape][b.d3plus.id]}),b.selectAll("path.d3plus_data").data(g).transition().duration(a.draw.timing).call(f).call(d,a),c.append("path").attr("class","d3plus_data").transition().duration(0).call(f,0,0).call(d,a).transition().duration(a.draw.timing).call(f).call(d,a)):(e.selectAll("path.d3plus_data").each(function(b){delete a.arcs[b.d3plus.shape][b.d3plus.id]}),c.append("path").attr("class","d3plus_data"),b.selectAll("path.d3plus_data").data(g).call(f).call(d,a))}},{"./style.coffee":237}],228:[function(a,b,c){var d=a("../../../util/child.coffee"),e=a("../../../util/closest.coffee"),f=a("../tooltip/create.js"),g=a("../../../client/pointer.coffee"),h=a("../../../core/fetch/value.coffee"),i=a("../../../core/fetch/color.coffee"),j=a("../../../core/fetch/text.js"),k=a("../../../color/legible.coffee"),l=a("../../../core/console/print.coffee"),m=a("../../../tooltip/remove.coffee"),n=a("./segments.coffee"),o=a("./fill.js"),p=a("../../../string/strip.js"),q=a("../../../client/touch.coffee"),r=a("../zoom/propagation.coffee"),s=a("../../../util/uniques.coffee"),t=a("../../../object/validate.coffee"),u=a("../zoom/direction.coffee"),v={arc:a("./arc.coffee"),area:a("./area.js"),check:a("./check.js"),coordinates:a("./coordinates.coffee"),cross:a("./cross.js"),diamond:a("./diamond.js"),donut:a("./donut.js"),line:a("./line.js"),radial:a("./radial.coffee"),rect:a("./rect.coffee"),triangle_down:a("./triangle_down.js"),triangle_up:a("./triangle_up.js"),whisker:a("./whisker.coffee")};b.exports=function(a){function b(b){if(!b.d3plus.id){b.d3plus.id="";for(var c=0;c<=a.depth.value;c++)b.d3plus.id+=h(a,b,a.id.nesting[c])+"_";b.d3plus.id+=E,["x","y","x2","y2"].forEach(function(c){if("discrete"==a[c].scale.value){var d=h(a,b,a[c].value);d.constructor===Date&&(d=d.getTime()),b.d3plus.id+="_"+d}}),b.d3plus.suffix&&(b.d3plus.id+="_"+b.d3plus.suffix),b.d3plus.id=p(b.d3plus.id)}return b}function c(b,c){var d=a.types[a.type.value].scale,e=1;d&&(t[d]&&a.shape.value in d?e=d[a.shape.value]:"function"==typeof d?e=d(a,a.shape.value):"number"==typeof d&&(e=d)),e=c?e:1,b.attr("transform",function(a){if(["line","area","coordinates"].indexOf(E)<0){var b=a.d3plus.x||0,c=a.d3plus.y||0;return"translate("+b+","+c+")scale("+e+")"}return"scale("+e+")"})}function w(b){b.attr("id",function(a){return"d3plus_group_"+a.d3plus.id}).attr("class",function(b){var c=a["class"].value?" "+h(a,b,a["class"].value):"";return"d3plus_"+E+c})}function x(b){if(b&&a.g.edges.selectAll("g").size()>0){a.g.edge_hover.selectAll("*").remove(),a.g.edges.selectAll("g").each(function(c){var d=b[a.id.value],e=c[a.edges.source][a.id.value],f=c[a.edges.target][a.id.value];if(e==d||e=="left_"+d||e=="right_"+d||f==d||f=="left_"+d||f=="right_"+d){var g=a.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(g).datum(c).attr("opacity",1).selectAll("line, path").datum(c)}});var c=a.edges.arrows.value;a.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",a.color.primary).style("stroke-width",function(b){return a.edges.path&&b.dy?Math.max(1,b.dy):a.edges.size.value?d3.select(this).style("stroke-width"):2*a.data.stroke.width}).attr("marker-start",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"source"==d&&c?"url(#d3plus_edge_marker_highlight"+e+")":"none"}).attr("marker-end",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"target"==d&&c?"url(#d3plus_edge_marker_highlight"+e+")":"none"}),a.g.edge_hover.selectAll("text").style("fill",a.color.primary),a.draw.timing?(a.g.edge_hover.transition().duration(a.timing.mouseevents).attr("opacity",1),a.g.edges.transition().duration(a.timing.mouseevents).attr("opacity",.5)):a.g.edge_hover.attr("opacity",1)}else a.draw.timing?(a.g.edge_hover.transition().duration(a.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),a.g.edges.transition().duration(a.timing.mouseevents).attr("opacity",1)):a.g.edge_hover.selectAll("*").remove()}var y=a.returned.nodes||[],z=a.returned.edges||[];a.draw.timing=y.length<a.data.large&&z.length<a.edges.large?a.timing.transitions:0;var A={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},B={};y.forEach(function(b){var c=b.d3plus&&b.d3plus.shape?b.d3plus.shape:a.shape.value;c in A&&(b.d3plus&&(b.d3plus.shape=c),c=A[c],B[c]||(B[c]=[]),B[c].push(b))});for(var C in A)if(!(A[C]in B)||0===d3.keys(B).length){var D=a.g.data.selectAll("g.d3plus_"+A[C]);a.draw.timing?D.transition().duration(a.draw.timing).attr("opacity",0).remove():D.remove()}for(var E in B){var F=a.g.data.selectAll("g.d3plus_"+E).data(B[E],function(c){if(c.d3plus||(c.d3plus={}),"coordinates"===E)return c.d3plus.id=c.id,c.id;if(!c.d3plus.id)if(c.values)c.values.forEach(function(a){a=b(a),a.d3plus.shape="circle"}),c.d3plus.id=c.key;else if(c=b(c),!c.d3plus.segments){c.d3plus.segments={donut:2*Math.PI};var d=n(a,c,"active"),e=n(a,c,"temp"),f=n(a,c,"total");f&&(d?c.d3plus.segments.active=d/f*(2*Math.PI):c.d3plus.segments.active=0,e?c.d3plus.segments.temp=e/f*(2*Math.PI)+c.d3plus.segments.active:c.d3plus.segments.temp=0)}return c.d3plus?c.d3plus.id:!1});if(a.draw.timing)var G=F.exit().transition().duration(a.draw.timing).attr("opacity",0).remove();else var G=F.exit().remove();a.draw.timing?F.transition().duration(a.draw.timing).call(c).call(w):F.call(c).call(w);var H=a.draw.timing?0:1,I=F.enter().append("g").attr("opacity",H).call(c).call(w);a.draw.timing&&I.transition().duration(a.draw.timing).attr("opacity",1),F.order(),a.dev.value&&l.time('drawing "'+E+'" shapes'),v[E](a,F,I,G,c),a.dev.value&&l.timeEnd('drawing "'+E+'" shapes'),["rect","donut"].indexOf(E)>=0&&a.types[a.type.value].fill&&(a.dev.value&&l.time('filling "'+E+'" shapes'),o(a,F,I,G,c),a.dev.value&&l.timeEnd('filling "'+E+'" shapes'))}if(x(),a.tooltip.value)a.g.data.selectAll("g").on(g.over,function(b){if(q&&r(a,d3.event),d3.event.buttons||!a.mouse.value||!a.mouse.over.value||a.draw.frozen||b.d3plus&&b.d3plus["static"])m(a.type.value);else{var d="function"!=typeof a.mouse.over.value;if("function"==typeof a.mouse.over.value&&(d=a.mouse.over.value(b,a.self)),d){var h=u(b.d3plus_data||b,a),i="function"==typeof a.mouse.viz||"function"==typeof a.mouse.viz[g.click]||a.zoom.value&&(a.types[a.type.value].zoom||b.d3plus.threshold&&b.d3plus.merged||1===h||-1===h&&a.history.states.length&&!a.tooltip.value["long"]);if(d3.select(this).style("cursor",i?"pointer":"auto").transition().duration(a.timing.mouseevents).call(c,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(a.timing.mouseevents).attr("opacity",1),a.covered=!1,b.values&&a.axes.discrete){var j="x"===a.axes.discrete?0:1,k=d3.mouse(a.container.value.node())[j],l=s(b.values,function(b){return b.d3plus[a.axes.discrete]}),n=e(l,k);b.d3plus_data=b.values[l.indexOf(n)],b.d3plus=b.values[l.indexOf(n)].d3plus}var o=b.d3plus_data?b.d3plus_data:b;f({vars:a,data:o}),"function"==typeof a.mouse.viz?a.mouse.viz(b.d3plus_data||b,a):a.mouse.viz[g.over]&&a.mouse.viz[g.over](b.d3plus_data||b,a),x(b)}}}).on(g.move,function(b){if(q&&r(a,d3.event),d3.event.buttons||!a.mouse.value||!a.mouse.move.value||a.draw.frozen||b.d3plus&&b.d3plus["static"])m(a.type.value);else{var c="function"!=typeof a.mouse.move.value;if("function"==typeof a.mouse.move.value&&(c=a.mouse.move.value(b,a.self)),c){var d=u(b.d3plus_data||b,a),h="function"==typeof a.mouse.viz||"function"==typeof a.mouse.viz[g.click]||a.zoom.value&&(a.types[a.type.value].zoom||b.d3plus.threshold&&b.d3plus.merged||1===d||-1===d&&a.history.states.length&&!a.tooltip.value["long"]);d3.select(this).style("cursor",h?"pointer":"auto");a.types[a.type.value].tooltip||"follow";if(b.values&&a.axes.discrete){var i="x"===a.axes.discrete?0:1,j=d3.mouse(a.container.value.node())[i],k=s(b.values,function(b){return b.d3plus[a.axes.discrete]}),l=e(k,j);b.d3plus_data=b.values[k.indexOf(l)],b.d3plus=b.values[k.indexOf(l)].d3plus}var n=b.d3plus_data?b.d3plus_data:b;f({vars:a,data:n}),"function"==typeof a.mouse.viz?a.mouse.viz(b.d3plus_data||b,a):a.mouse.viz[g.move]&&a.mouse.viz[g.move](b.d3plus_data||b,a)}}}).on(g.out,function(b){if(q&&r(a,d3.event),!d3.event.buttons&&a.mouse.value&&a.mouse.out.value){var e="function"!=typeof a.mouse.out.value;if("function"==typeof a.mouse.out.value&&(e=a.mouse.out.value(b,a.self)),e){var f=d(this,d3.event.toElement);f||a.draw.frozen||b.d3plus&&b.d3plus["static"]||(d3.select(this).transition().duration(a.timing.mouseevents).call(c),d3.select(this).selectAll(".d3plus_data").transition().duration(a.timing.mouseevents).attr("opacity",a.data.opacity),a.covered||m(a.type.value),"function"==typeof a.mouse.viz?a.mouse.viz(b.d3plus_data||b,a):a.mouse.viz[g.out]&&a.mouse.viz[g.out](b.d3plus_data||b,a),x())}}else m(a.type.value)});else{var J=function(){r(a,d3.event)};a.g.data.selectAll("g").on(g.over,J).on(g.move,J).on(g.out,J)}d3.select(window).on("scroll.d3plus",function(){m(a.type.value)}),a.g.data.selectAll("g").on(g.click,function(b){if((!a.mouse.viz||a.mouse.viz.click!==!1)&&a.mouse.value&&a.mouse.click.value&&!d3.event.defaultPrevented&&!a.draw.frozen&&(!b.d3plus||!b.d3plus["static"])){var d="function"!=typeof a.mouse.click.value;if("function"==typeof a.mouse.click.value&&(d=a.mouse.click.value(b,a.self)),d){if(b.values&&a.axes.discrete){var l="x"===a.axes.discrete?0:1,n=d3.mouse(a.container.value.node())[l],o=s(b.values,function(b){return b.d3plus[a.axes.discrete]}),p=e(o,n);b.d3plus_data=b.values[o.indexOf(p)],b.d3plus=b.values[o.indexOf(p)].d3plus}"function"==typeof a.mouse.viz?a.mouse.viz(b.d3plus_data||b,a):a.mouse.viz[g.out]?a.mouse.viz[g.out](b.d3plus_data||b,a):a.mouse.viz[g.click]&&a.mouse.viz[g.click](b.d3plus_data||b,a);var q=u(b.d3plus_data||b,a),r=a.id.solo.value,t=j(a,b)[0],v=k(i(a,b)),w=a.title.sub.value||!1,y=a.title.sub.font.color,z=a.title.total.font.color;if(b.d3plus.threshold&&b.d3plus.merged&&a.zoom.value)a.history.states.push(function(){a.self.id({solo:r}).title({sub:{font:{color:y},value:w},total:{font:{color:z}}}).draw()}),a.self.id({solo:r.concat(s(b.d3plus.merged,a.id.value,h,a))}).title({sub:{font:{color:v},value:t},total:{font:{color:v}}}).draw();else if(1===q&&a.zoom.value){var A=h(a,b.d3plus_data||b,a.id.value);a.history.states.push(function(){a.self.depth(a.depth.value-1).id({solo:r}).title({sub:{font:{color:y},value:w},total:{font:{color:z}}}).draw()}),a.self.depth(a.depth.value+1).id({solo:r.concat(A)}).title({sub:{font:{color:v},value:t},total:{font:{color:v}}}).draw()}else if(-1===q&&a.zoom.value&&a.history.states.length&&!a.tooltip.value["long"])a.history.back();else if(a.types[a.type.value].zoom&&a.zoom.value)x(),d3.select(this).transition().duration(a.timing.mouseevents).call(c),d3.select(this).selectAll(".d3plus_data").transition().duration(a.timing.mouseevents).attr("opacity",a.data.opacity),m(a.type.value),a.draw.update=!1,b&&b[a.id.value]!=a.focus.value[0]?a.self.focus(b[a.id.value]).draw():a.self.focus(!1).draw();else if(a.types[a.type.value].requirements.indexOf("focus")<0){x();var B=b.d3plus_data?b.d3plus_data:b;f({vars:a,data:B})}}}})}},{"../../../client/pointer.coffee":40,"../../../client/touch.coffee":45,"../../../color/legible.coffee":46,"../../../core/console/print.coffee":54,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":175,"../../../string/strip.js":178,"../../../tooltip/remove.coffee":206,"../../../util/child.coffee":208,"../../../util/closest.coffee":209,"../../../util/uniques.coffee":213,"../tooltip/create.js":243,"../zoom/direction.coffee":253,"../zoom/propagation.coffee":256,"./arc.coffee":220,"./area.js":221,"./check.js":222,"./coordinates.coffee":224,"./cross.js":225,"./diamond.js":226,"./donut.js":227,"./fill.js":230,"./line.js":232,"./radial.coffee":234,"./rect.coffee":235,"./segments.coffee":236,"./triangle_down.js":238,"./triangle_up.js":239,"./whisker.coffee":240}],229:[function(a,b,c){var d=a("../../../util/buckets.coffee"),e=a("../../../geom/offset.coffee");b.exports=function(a){function b(b){b.attr("opacity",0).style("stroke-width",0).style("stroke",a.background.value).style("fill","none")}function c(b){var c=a.edges.arrows.value;b.attr("opacity",function(b){return"number"===o?n:"function"===o?n(b,a):a.edges.opacity.scale.value(b[n])}).style("stroke-width",function(b){return a.edges.scale(b[a.edges.size.value])}).style("stroke",a.edges.color).attr("marker-start",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"source"==d&&c?"url(#d3plus_edge_marker_default"+e+")":"none"}).attr("marker-end",function(b){var d=a.edges.arrows.direction.value;if("bucket"in b.d3plus)var e="_"+b.d3plus.bucket;else var e="";return"target"==d&&c?"url(#d3plus_edge_marker_default"+e+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function f(b){b.attr("x1",function(b){return b[a.edges.source].d3plus.edges[b[a.edges.target][a.id.value]].x}).attr("y1",function(b){return b[a.edges.source].d3plus.edges[b[a.edges.target][a.id.value]].y}).attr("x2",function(b){return b[a.edges.target].d3plus.edges[b[a.edges.source][a.id.value]].x}).attr("y2",function(b){return b[a.edges.target].d3plus.edges[b[a.edges.source][a.id.value]].y})}function g(a){a.attr("d",function(a){return p(a.d3plus.spline)})}function h(b){if(delete b.d3plus_label,a.g.edges.selectAll("line, path").size()<a.edges.large&&a.edges.label&&b[a.edges.label]){if("spline"in b.d3plus)var c=this.getTotalLength(),d=this.getPointAtLength(c/2),e=this.getPointAtLength(c/2-.1*c),f=this.getPointAtLength(c/2+.1*c),g=Math.atan2(f.y-e.y,f.x-e.x),h=g*(180/Math.PI),i=(this.parentNode.getBBox(),.8*c),j=d.x,k=d.y;else var l=(this.getBBox(),b[a.edges.source]),m=b[a.edges.target],n={x:l.d3plus.edges[m[a.id.value]].x,y:l.d3plus.edges[m[a.id.value]].y},o={x:m.d3plus.edges[l[a.id.value]].x,y:m.d3plus.edges[l[a.id.value]].y},p=o.x-n.x,q=o.y-n.y,d={x:o.x-p/2,y:o.y-q/2},g=Math.atan2(q,p),h=g*(180/Math.PI),c=Math.sqrt(p*p+q*q),i=c,j=d.x,k=d.y;i+=2*a.labels.padding;var r=0;a.edges.arrows.value&&(r="number"==typeof a.edges.arrows.value?a.edges.arrows.value:8,r/=a.zoom.behavior.scaleExtent()[1],i-=2*r),(-90>h||h>90)&&(h-=180),i*a.zoom.behavior.scaleExtent()[0]>20&&(b.d3plus_label={x:j,y:k,translate:{x:j,y:k},w:i,h:15+2*a.labels.padding,angle:h,anchor:"middle",valign:"center",color:a.edges.color,resize:!1,names:[a.format.value(b[a.edges.label])],background:1})}}var i=a.returned.edges||[],j=a.zoom.behavior.scaleExtent()[0];if("string"==typeof a.edges.size.value){var k=d3.extent(i,function(b){return b[a.edges.size.value]}),l=d3.min(a.returned.nodes||[],function(a){return a.d3plus.r})*(2*a.edges.size.scale);a.edges.scale=d3.scale.sqrt().domain(k).range([a.edges.size.min,l*j])}else{var m="number"==typeof a.edges.size.value?a.edges.size.value:a.edges.size.min;a.edges.scale=function(){return m}}var n=a.edges.opacity.value,o=typeof n;a.edges.opacity.changed&&"string"===o&&a.edges.opacity.scale.value.domain(d3.extent(i,function(a){return a[n]})).range([a.edges.opacity.min.value,1]);var p=d3.svg.line().interpolate(a.edges.interpolate.value),q=a.edges.arrows.value?"string"==typeof a.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof a.edges.size.value)for(var r=d(a.edges.scale.range(),4),s=[],t=0;3>t;t++)s.push(r[t+1]+(r[1]-r[0])*(t+2)*2);else var u="number"==typeof a.edges.arrows.value?a.edges.arrows.value:8,s="number"==typeof a.edges.size.value?a.edges.size.value/u:u;var v=a.defs.selectAll(".d3plus_edge_marker").data(q,String),w=function(b){b.attr("d",function(b){var c=b.split("_");if(2==c.length&&a.edges.scale){c=parseInt(c[1]);var d=s[c]}else var d=s;return"target"==a.edges.arrows.direction.value?"M 0,-"+d/2+" L "+.85*d+",0 L 0,"+d/2+" L 0,-"+d/2:"M 0,-"+d/2+" L -"+.85*d+",0 L 0,"+d/2+" L 0,-"+d/2}).attr("fill",function(b){var c=b.split("_")[0];return"default"==c?a.edges.color:"focus"==c?a.color.focus:a.color.primary}).attr("transform","scale("+1/j+")")};a.draw.timing?(v.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),v.select("path").transition().duration(a.draw.timing).attr("opacity",1).call(w)):(v.exit().remove(),v.select("path").attr("opacity",1).call(w));var x=a.draw.timing?0:1,y=v.enter().append("marker").attr("id",function(a){return"d3plus_edge_marker_"+a}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",x).attr("vector-effect","non-scaling-stroke").call(w);a.draw.timing&&y.transition().duration(a.draw.timing).attr("opacity",1);var z="string"==typeof a.edges.size.value?d(a.edges.scale.domain(),4):null,A=a.edges.arrows.direction.value,B=i.filter(function(b){if(b.d3plus||(b.d3plus={}),b.d3plus.id="edge_"+b[a.edges.source][a.id.value]+"_"+b[a.edges.target][a.id.value],b.d3plus.spline!==!0){if(z){var c=b[a.edges.size.value];b.d3plus.bucket=c<z[1]?0:c<z[2]?1:2;var d=.85*s[b.d3plus.bucket]/j}else{delete b.d3plus.bucket;var d=.85*s/j}var f=b[a.edges.source],g=b[a.edges.target];if(!f.d3plus||!g.d3plus)return!1;var h=Math.atan2(f.d3plus.y-g.d3plus.y,f.d3plus.x-g.d3plus.x),i=Math.atan2(g.d3plus.y-f.d3plus.y,g.d3plus.x-f.d3plus.x),k="source"==A&&a.edges.arrows.value?f.d3plus.r+d:f.d3plus.r,l="target"==A&&a.edges.arrows.value?g.d3plus.r+d:g.d3plus.r,m=e(h,k,a.shape.value),n=e(i,l,a.shape.value);return"edges"in f.d3plus||(f.d3plus.edges={}),f.d3plus.edges[g[a.id.value]]={x:f.d3plus.x-m.x,y:f.d3plus.y-m.y},"edges"in g.d3plus||(g.d3plus.edges={}),g.d3plus.edges[f[a.id.value]]={x:g.d3plus.x-n.x,y:g.d3plus.y-n.y},!0}return!1}),C=a.g.edges.selectAll("g.d3plus_edge_line").data(B,function(a){return a.d3plus.id}),D=i.filter(function(b){if(b.d3plus.spline){if(z){var c=b[a.edges.size.value];b.d3plus.bucket=c<z[1]?0:c<z[2]?1:2;var d=.85*s[b.d3plus.bucket]/j}else{delete b.d3plus.bucket;var d=.85*s/j}var f=b[a.edges.source],g=b[a.edges.target],h=f.d3plus.edges?f.d3plus.edges[g[a.id.value]]||{}:{},i=g.d3plus.edges?g.d3plus.edges[f[a.id.value]]||{}:{},k=a.edges.arrows.value&&"source"==A?d:0,l=a.edges.arrows.value&&"target"==A?d:0,m=.1,n=f.d3plus.x>g.d3plus.x?1-m:1+m,o=f.d3plus.x>g.d3plus.x?1+m:1-m,p="number"==typeof h.angle?h.angle:Math.atan2(f.d3plus.y-g.d3plus.y,f.d3plus.x-g.d3plus.x)*n,q=e(p,f.d3plus.r+k,a.shape.value),r="number"==typeof i.angle?i.angle:Math.atan2(g.d3plus.y-f.d3plus.y,g.d3plus.x-f.d3plus.x)*o,t=e(r,g.d3plus.r+l,a.shape.value),u=[f.d3plus.x-q.x,f.d3plus.y-q.y],v=h.offset?e(p,h.offset):!1,w=v?[u[0]-v.x,u[1]-v.y]:u,x=[g.d3plus.x-t.x,g.d3plus.y-t.y],y=i.offset?e(r,i.offset):!1,B=y?[x[0]-y.x,x[1]-y.y]:x,C=B[0]-w[0],D=B[1]-w[1],E="number"==typeof h.radius?h.radius:Math.sqrt(C*C+D*D)/4,F="number"==typeof i.radius?i.radius:Math.sqrt(C*C+D*D)/4,G=e(p,E-f.d3plus.r-2*k),H=e(r,F-g.d3plus.r-2*l);b.d3plus.spline=[u,x];var I=Math.abs(Math.atan2(f.d3plus.y-g.d3plus.y,f.d3plus.x-g.d3plus.x)).toFixed(5),J=Math.abs(p).toFixed(5),K=Math.abs(r-Math.PI).toFixed(5);return(J!==K||[J,K].indexOf(I)<0)&&(b.d3plus.spline.splice(1,0,[w[0]-G.x,w[1]-G.y],[B[0]-H.x,B[1]-H.y]),v&&b.d3plus.spline.splice(1,0,w),y&&b.d3plus.spline.splice(b.d3plus.spline.length-1,0,B)),!0}return!1}),E=a.g.edges.selectAll("g.d3plus_edge_path").data(D,function(a){return a.d3plus.id});a.draw.timing?(C.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),E.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(a.draw.timing/2).attr("opacity",0).remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(a.draw.timing/2).attr("opacity",0).remove(),C.selectAll("line").data(function(a){return[a]}).transition().duration(a.draw.timing).call(f).call(c).each("end",h),E.selectAll("path").data(function(a){return[a]}).transition().duration(a.draw.timing).call(g).call(c).each("end",h),C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(f).call(b).transition().duration(a.draw.timing).call(c).each("end",h),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(g).call(b).transition().duration(a.draw.timing).call(c).each("end",h)):(C.exit().remove(),E.exit().remove(),C.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),E.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),C.selectAll("line").data(function(a){return[a]}).call(f).call(c).call(h),E.selectAll("path").data(function(a){return[a]}).call(g).call(c).call(h),C.enter().append("g").attr("class","d3plus_edge_line").append("line").call(f).call(b).call(c).call(h),E.enter().append("g").attr("class","d3plus_edge_path").append("path").call(g).call(b).call(c).call(h))}},{"../../../geom/offset.coffee":163,"../../../util/buckets.coffee":207}],230:[function(a,b,c){var d=a("../../../util/copy.coffee"),e=a("../../../core/fetch/color.coffee"),f=(a("../../../core/fetch/value.coffee"),a("./segments.coffee")),g=a("./style.coffee");b.exports=function(a,b,c,h){function i(a){a.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function j(b,c){c||(c=0),b.attr("x",function(a){var b=a.d3plus.r?2*a.d3plus.r:a.d3plus.width;return-b/2-c/2}).attr("y",function(a){var b=a.d3plus.r?2*a.d3plus.r:a.d3plus.height;return-b/2-c/2}).attr("width",function(a){var b=a.d3plus.r?2*a.d3plus.r:a.d3plus.width;return b+c}).attr("height",function(a){var b=a.d3plus.r?2*a.d3plus.r:a.d3plus.height;return b+c}).attr("rx",function(b){var d=b.d3plus.r?2*b.d3plus.r:b.d3plus.width,e=["circle","donut"].indexOf(a.shape.value)>=0;return e?(d+c)/2:0}).attr("ry",function(b){var d=b.d3plus.r?2*b.d3plus.r:b.d3plus.height,e=["circle","donut"].indexOf(a.shape.value)>=0;return e?(d+c)/2:0}).attr("shape-rendering",function(b){return["square"].indexOf(a.shape.value)>=0?a.shape.rendering.value:"auto"})}function k(b,c,d,e){c||(c=0),"number"!=typeof d&&(d=void 0),"number"!=typeof e&&(e=void 0),b.attrTween("d",function(b){if(void 0===d)var f=b.d3plus.r?b.d3plus.r:d3.max([b.d3plus.width,b.d3plus.height]);else var f=d;if(void 0===e)var g=b.d3plus.segments[b.d3plus.shape];else var g=e;a.arcs[b.d3plus.shape][b.d3plus.id]||(a.arcs[b.d3plus.shape][b.d3plus.id]={r:0},a.arcs[b.d3plus.shape][b.d3plus.id].a="donut"===b.d3plus.shape?2*Math.PI:0);var h=d3.interpolate(a.arcs[b.d3plus.shape][b.d3plus.id].r,f+c),i=d3.interpolate(a.arcs[b.d3plus.shape][b.d3plus.id].a,g);return function(c){return a.arcs[b.d3plus.shape][b.d3plus.id].r=h(c),a.arcs[b.d3plus.shape][b.d3plus.id].a=i(c),l(b)}})}a.arcs||(a.arcs={donut:{},active:{},temp:{}});var l=d3.svg.arc().startAngle(0).endAngle(function(b){var c=a.arcs[b.d3plus.shape][b.d3plus.id].a;return c>2*Math.PI?2*Math.PI:c}).innerRadius(function(b){if(b.d3plus["static"]||"donut"!==a.shape.value)return 0;var c=a.arcs[b.d3plus.shape][b.d3plus.id].r;return c*a.data.donut.size}).outerRadius(function(b){var c=a.arcs[b.d3plus.shape][b.d3plus.id].r;return"donut"===a.shape.value?c:2*c});b.each(function(b){function c(b){b.attr("stroke",o).attr("stroke-width",1).attr("shape-rendering",a.shape.rendering.value)}var h=f(a,b,"active"),l=f(a,b,"temp"),m=f(a,b,"total"),n=d3.select(this),o=e(a,b),p=[],q=[];if(m&&a.types[a.type.value].fill){if(l){var r=d(b);r.d3plus.shape="temp",p.push(r),q=["temp"]}if(h&&(m>h||l)){var r=d(b);r.d3plus.shape="active",p.push(r)}}var s=a.defs.selectAll("pattern#d3plus_hatch_"+b.d3plus.id).data(q);a.draw.timing?(s.selectAll("rect").transition().duration(a.draw.timing).style("fill",o),s.selectAll("line").transition().duration(a.draw.timing).style("stroke",o)):(s.selectAll("rect").style("fill",o),s.selectAll("line").style("stroke",o));var t=s.enter().append("pattern").attr("id","d3plus_hatch_"+b.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");t.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",o).attr("fill-opacity",.25),t.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(c),t.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(c),t.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(c);var u=p.length?[b]:[],v=n.selectAll("#d3plus_clip_"+b.d3plus.id).data(u);v.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+b.d3plus.id).append("rect").attr("class","d3plus_clipping").call(i),a.draw.timing?(v.selectAll("rect").transition().duration(a.draw.timing).call(j),v.exit().transition().delay(a.draw.timing).remove()):(v.selectAll("rect").call(j),v.exit().remove());var w=n.selectAll("path.d3plus_fill").data(p);w.transition().duration(a.draw.timing).call(g,a).call(k),w.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+b.d3plus.id+")").transition().duration(0).call(g,a).call(k,0,void 0,0).transition().duration(a.draw.timing).call(k).call(g,a),w.exit().transition().duration(a.draw.timing).call(k,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"../../../util/copy.coffee":210,"./segments.coffee":236,"./style.coffee":237}],231:[function(a,b,c){var d=(a("../../../util/copy.coffee"),a("../../../core/fetch/text.js")),e=a("../../../core/fetch/value.coffee"),f=a("../../../color/mix.coffee"),g=a("../../../core/console/print.coffee"),h=(a("../../../client/rtl.coffee"),a("./segments.coffee")),i=a("./color.coffee"),j=a("../../../string/list.coffee"),k=a("../../../color/text.coffee"),l=a("../../../textwrap/textwrap.coffee");b.exports=function(a,b){var c=a.types[a.type.value].zoom?a.zoom.behavior.scaleExtent():[1,1],m=a.g[b].selectAll("g"),n=function(b){b.attr("opacity",function(b){var d=parseFloat(d3.select(this).attr("font-size"),10);return b.visible=d*(a.zoom.scale/c[1])>=2,b.visible?1:0})},o=function(b){a.draw.timing?b.transition().duration(a.draw.timing).attr("opacity",0).remove():b.remove();
},p=function(b){var d="bottom"===a.labels.valign.value?"top":"bottom";b.attr("font-weight",a.labels.font.weight).attr("font-family",a.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(a){return a.mouse?"auto":"none"}).attr("fill",function(b){if(b.color)return b.color;var c=i(b.parent,a),d=k(c),e=b.text?.15:1;return f(c,d,.2,e)}).each(function(b){if(b.resize instanceof Array){b.resize[0],b.resize[1]}var e=b.resize,f=!0;if(b.text){e instanceof Array||(e=[9,50],f=b.resize);var g=b.y-b.h*c[1]/2+b.padding/2;"bottom"===d&&(g+=b.h*c[1]/2),l().align("center").container(d3.select(this)).height(b.h*c[1]/2).padding(b.padding/2).resize(f).size(e).text(a.format.value(100*b.text,{key:"share",vars:a})).width(b.w*c[1]).valign(d).x(b.x-b.w*c[1]/2+b.padding/2).y(g).draw()}else{b.resize instanceof Array||(e=[7,40*(c[1]/c[0])],f=b.resize);var h="bottom"===a.labels.valign.value?b.share:0;l().align(b.anchor||a.labels.align.value).container(d3.select(this)).height(b.h*c[1]-b.share).padding(b.padding/2).resize(f).size(e).shape(b.shape||"square").text(b.names).valign(a.labels.valign.value).width(b.w*c[1]).x(b.x-b.w*c[1]/2+b.padding/2).y(b.y-b.h*c[1]/2+b.padding/2+h).draw()}}).attr("transform",function(a){var b=d3.select(this).attr("transform")||"",d=a.angle||0,e=a.translate&&a.translate.x?a.translate.x:0,f=a.translate&&a.translate.y?a.translate.y:0;return b.length&&(b=b.split(")").slice(-3).join(")")),"rotate("+d+","+e+","+f+")scale("+1/c[1]+")translate("+(a.x*c[1]-a.x)+","+(a.y*c[1]-a.y)+")"+b})};if("edges"===b||a.labels.value){if(a.dev.value){var q="drawing "+b+" labels";g.time(q)}m.each(function(b){function f(b){var c="string"==typeof i.background?i.background:"none"===a.background.value?"#ffffff":a.background.value,d="string"==typeof i.background?i.background:c,e=w.attr("transform").split(")");e.pop(),e.pop(),e.push(""),e=e.join(")"),b.attr("fill",d).attr(D).attr("transform",e)}var g=b.d3plus&&"label"in b.d3plus&&!b.d3plus.label,i=b.d3plus_label||null,k=b.d3plus_share,l=b.d3plus.text?b.d3plus.text:i&&i.names?i.names:a.labels.text.value?e(a,b,a.labels.text.value):d(a,b),m=i&&"group"in i?i.group:d3.select(this),q=0,r=a.types[a.type.value].fill;if(l instanceof Array||(l=[l]),i)if(["line","area"].indexOf(a.shape.value)>=0)var s=!0;else if(b&&"d3plus"in b)var t=h(a,b,"active"),u=h(a,b,"temp"),v=h(a,b,"total"),s=!u&&!t||t>=v||!t&&u>=v;if(g||!(i&&i.force||s)&&r)delete b.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o),a.g.labels.selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o);else{if(k&&b.d3plus.share&&k.w-2*a.labels.padding>=10&&k.h-2*a.labels.padding>=10&&"middle"!=a.labels.valign.value){k.resize=a.labels.resize.value===!1?!1:k&&"resize"in k?k.resize:!0,k.padding=a.labels.padding,k.text=b.d3plus.share,k.parent=b;var w=m.selectAll("text#d3plus_share_"+b.d3plus.id).data([k],function(a){return a.w+""+a.h+a.text});a.draw.timing&&1===a.zoom.scale?(w.transition().duration(a.draw.timing/2).call(p),w.enter().append("text").attr("id","d3plus_share_"+b.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(p).transition().duration(a.draw.timing/2).delay(a.draw.timing/2).attr("opacity",1)):(w.attr("opacity",1).call(p),w.enter().append("text").attr("id","d3plus_share_"+b.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(p)),q=w.node().getBBox().height+a.labels.padding,w.exit().call(o)}else m.selectAll("text.d3plus_share").call(o);if(i&&(i.resize=a.labels.resize.value===!1?!1:i&&"resize"in i?i.resize:!0,i.padding="number"==typeof i.padding?i.padding:a.labels.padding),i&&i.w*c[1]-i.padding>=20&&i.h*c[1]-i.padding>=10&&l.length){for(var x=a.format.locale.value.ui.and,y=a.format.locale.value.ui.more,z=0;z<l.length;z++)l[z]instanceof Array&&(l[z]=j(l[z],x,3,y));i.names=l,i.share=q,i.parent=b;var w=m.selectAll("text#d3plus_label_"+b.d3plus.id).data([i],function(a){return a?a.w+"_"+a.h+"_"+a.x+"_"+a.y+"_"+a.names.join("_"):!1}),A=i.resize?void 0:a.labels.font.size*c[0]+"px";if(a.draw.timing&&1===a.zoom.scale?(w.transition().duration(a.draw.timing/2).call(p).call(n),w.enter().append("text").attr("font-size",A).attr("id","d3plus_label_"+b.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(p).transition().duration(a.draw.timing/2).delay(a.draw.timing/2).call(n)):(w.attr("opacity",1).call(p).call(n),w.enter().append("text").attr("font-size",A).attr("id","d3plus_label_"+b.d3plus.id).attr("class","d3plus_label").call(p).call(n)),w.exit().call(o),0===w.size()||0===w.selectAll("tspan").size())delete b.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o),a.g.labels.selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o);else{if(i.background){var B=["background"],C=w.node().getBBox(),D={height:C.height,width:C.width,x:C.x,y:C.y>0?C.y:-C.height/2};D.width+=a.labels.padding*c[0],D.height+=a.labels.padding*c[0],D.x-=a.labels.padding*c[0]/2,D.y-=a.labels.padding*c[0]/2;var E=w.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];E=E.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),E=E.split(","),E.length>1&&(E=E[E.length-1],E=E.substring(0,E.length-1),D.y+=parseFloat(E))}else var B=[],D={};var F=m.selectAll("rect#d3plus_label_bg_"+b.d3plus.id).data(B),G="number"==typeof i.background?i.background:"string"==typeof i.background?1:.6;a.draw.timing?(F.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),F.transition().duration(a.draw.timing).attr("opacity",G).call(f),F.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+b.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(f).transition().duration(a.draw.timing).attr("opacity",G)):(F.exit().remove(),F.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+b.d3plus.id).attr("class","d3plus_label_bg"),F.attr("opacity",G).call(f))}}else delete b.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o),a.g.labels.selectAll("text#d3plus_label_"+b.d3plus.id+", rect#d3plus_label_bg_"+b.d3plus.id).call(o)}}),a.dev.value&&g.timeEnd(q)}else{if(a.dev.value){var q="removing "+b+" labels";g.time(q)}m.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(o),a.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(o),a.dev.value&&g.timeEnd(q)}}},{"../../../client/rtl.coffee":42,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../string/list.coffee":177,"../../../textwrap/textwrap.coffee":203,"../../../util/copy.coffee":210,"./color.coffee":223,"./segments.coffee":236}],232:[function(a,b,c){function d(a){a.attr("x",function(a){return a.d3plus.x}).attr("y",function(a){return a.d3plus.y}).attr("width",0).attr("height",0)}function e(a,b){void 0===b&&(b=0),a.attr("x",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.width;return a.d3plus.x-(c/2+b/2)}).attr("y",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.height;return a.d3plus.y-(c/2+b/2)}).attr("width",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.width;return c+b}).attr("height",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.height;return c+b}).attr("rx",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.width;return(c+b)/2}).attr("ry",function(a){var c=a.d3plus.r?2*a.d3plus.r:a.d3plus.height;return(c+b)/2})}function f(a,b,c,d){var f=a.draw.timing?a.timing.mouseevents:0;void 0===d&&(d=0),f?(d3.select(b.parentNode).selectAll("path.d3plus_line").transition().duration(f).style("stroke-width",function(b){var e=c;if(e.constructor!==Number){var f=k(a,b,c);e=f&&f.length?d3.max(f):a.data.stroke.width}return e+d}),d3.select(b.parentNode).selectAll("rect").transition().duration(f).style("stroke-width",function(b){var d=c;if(d.constructor!==Number){var e=k(a,b,c);d=e&&e.length?d3.max(e):a.data.stroke.width}return d}).call(e,d)):(d3.select(b.parentNode).selectAll("path.d3plus_line").style("stroke-width",function(b){var e=c;if(e.constructor!==Number){var f=k(a,b,c);e=f&&f.length?d3.max(f):a.data.stroke.width}return e+d}),d3.select(b.parentNode).selectAll("rect").style("stroke-width",function(b){var d=c;if(d.constructor!==Number){var e=k(a,b,c);d=e&&e.length?d3.max(e):a.data.stroke.width}return d}).call(e,d))}var g=a("../../../util/copy.coffee"),h=a("../../../util/closest.coffee"),i=a("../../../client/pointer.coffee"),j=a("./style.coffee"),k=a("../../../core/fetch/value.coffee");b.exports=function(a,b,c,l){var m=d3.svg.line().x(function(a){return a.d3plus.x}).y(function(a){return a.d3plus.y}).interpolate(a.shape.interpolate.value),n=a.size.value||a.data.stroke.width,o=a[a.axes.discrete],p=function(b){var c=n;if(c.constructor!==Number){var d=k(a,b,n);c=d&&d.length?d3.max(d):a.data.stroke.width}return 15>c?15:c},q=o.ticks.values.map(function(a){return a.constructor===Date?a.getTime():a});b.each(function(b){var c=!1,l=[],r=[],s=g(b),t=d3.select(this);s.values=[],s.segment_key=s.key,b.values.forEach(function(d,e,f){var i=k(a,d,o.value);i.constructor===Date&&(i=i.getTime());var j=q.indexOf(h(q,i));c===!1||c===j-1?(s.values.push(d),s.segment_key+="_"+j):(s.values.length>1?l.push(s):r.push(s.values[0]),s=g(b),s.values=[d]),e===f.length-1&&(s.values.length>1?l.push(s):r.push(s.values[0])),c=j});var u=t.selectAll("path.d3plus_line").data(l,function(a){return a.d3plus||(a.d3plus={}),a.d3plus.shape="line",a.segment_key}),v=t.selectAll("rect.d3plus_anchor").data(r,function(a){return a.d3plus||(a.d3plus={}),a.d3plus.r=n,a.d3plus.id});a.draw.timing?(u.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),u.transition().duration(a.draw.timing).attr("d",function(a){return m(a.values)}).call(j,a),u.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(a){return m(a.values)}).call(j,a).attr("opacity",0).transition().duration(a.draw.timing).attr("opacity",1),v.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(a){return a.d3plus.id}).call(d).call(j,a),v.transition().duration(a.draw.timing).call(e).call(j,a),v.exit().transition().duration(a.draw.timing).call(d).remove()):(u.exit().remove(),u.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),u.attr("d",function(a){return m(a.values)}).call(j,a),v.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(a){return a.d3plus.id}),v.exit().remove(),v.call(e).call(j,a));var w=t.selectAll("path.d3plus_mouse").data(l,function(a){return a.segment_key});w.enter().append("path").attr("class","d3plus_mouse").attr("d",function(a){return m(a.values)}).style("stroke","black").style("stroke-width",p).style("fill","none").style("stroke-linecap","round").attr("opacity",0),w.on(i.over,function(b){!a.draw.frozen&&a.mouse.value&&a.mouse.over.value&&f(a,this,n,2)}).on(i.out,function(b){!a.draw.frozen&&a.mouse.value&&a.mouse.out.value&&f(a,this,n,0)}),a.draw.timing?w.transition().duration(a.draw.timing).attr("d",function(a){return m(a.values)}).style("stroke-width",p):w.attr("d",function(a){return m(a.values)}).style("stroke-width",p),w.exit().remove()})}},{"../../../client/pointer.coffee":40,"../../../core/fetch/value.coffee":69,"../../../util/closest.coffee":209,"../../../util/copy.coffee":210,"./style.coffee":237}],233:[function(a,b,c){b.exports=function(a){function b(b){b.attr("d",a.edges.path).style("stroke-width",function(a){return Math.max(1,a.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(a){return"translate("+a.d3plus.x+","+a.d3plus.y+")"})}var c=a.returned.edges||[],d=a.g.edges.selectAll("g.d3plus_edge_path").data(c,function(b){return b.d3plus.id="path_"+b[a.edges.source][a.id.value]+"_"+b[a.edges.target][a.id.value],b.d3plus.id});a.draw.timing?(d.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(a.draw.timing/2).attr("opacity",0).remove(),d.selectAll("path").data(function(a){return[a]}).transition().duration(a.draw.timing).call(b),d.enter().append("g").attr("class","d3plus_edge_path").append("path").style("stroke-width",0).transition().duration(a.draw.timing).call(b)):(d.exit().remove(),d.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),d.selectAll("path").data(function(a){return[a]}).call(b),d.enter().append("g").attr("class","d3plus_edge_path").append("path").call(b))}},{}],234:[function(a,b,c){var d,e,f,g;g=a("./style.coffee"),f={},d={},e={r:{},a:{}},b.exports=function(a,b,c,h){var i,j,k,l,m;k=a.id.nesting[a.depth.value+1],l=d3.svg.line.radial().interpolate("linear-closed").radius(function(a){return a.d3plus.r}).angle(function(a){return a.d3plus.a}),i=function(b){return a.labels.value&&(b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label),[b]},a.draw.timing?(b.each(function(b){var c,d,e,f,g;for(f=b[k],g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.d3plus.id=c[a.id.value]+"_"+c[k]);return g}),j=d3.svg.line.radial().interpolate("linear-closed").radius(function(a,b){return void 0===f[a.d3plus.id]&&(f[a.d3plus.id]=0),isNaN(f[a.d3plus.id])&&(f[a.d3plus.id]=a.d3plus.r),f[a.d3plus.id]}).angle(function(a,b){return void 0===d[a.d3plus.id]&&(d[a.d3plus.id]=a.d3plus.a),isNaN(d[a.d3plus.id])&&(d[a.d3plus.id]=a.d3plus.a),d[a.d3plus.id]}),m=function(a,b){return a.attrTween("d",function(a){var c,g,h,i,l,m,n;for(n=a[k],h=i=0,l=n.length;l>i;h=++i)g=n[h],c=g.d3plus.a,void 0===b?m=g.d3plus.r:0===b&&(m=0),e.a[g.d3plus.id]=d3.interpolate(d[g.d3plus.id],c),e.r[g.d3plus.id]=d3.interpolate(f[g.d3plus.id],m);return function(b){var c,i,l;for(l=a[k],h=c=0,i=l.length;i>c;h=++c)g=l[h],d[g.d3plus.id]=e.a[g.d3plus.id](b),f[g.d3plus.id]=e.r[g.d3plus.id](b);return j(a[k])}})},c.append("path").attr("class","d3plus_data").call(g,a).attr("d",function(a){return j(a[k])}),b.selectAll("path.d3plus_data").data(i).transition().duration(a.draw.timing).call(g,a).call(m),h.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(m,0)):(c.append("path").attr("class","d3plus_data"),b.selectAll("path.d3plus_data").data(i).call(g,a).attr("d",function(a){return l(a[k])}))}},{"./style.coffee":237}],235:[function(a,b,c){var d;d=a("./style.coffee"),b.exports=function(a,b,c,e){var f,g,h;return f=function(b){var c,d;return a.labels.value&&!b.d3plus.label?(d=b.d3plus.r?2*b.d3plus.r:b.d3plus.width,c=b.d3plus.r?2*b.d3plus.r:b.d3plus.height,b.d3plus_label={w:d,h:c,x:0,y:0},b.d3plus_share={w:d,h:c,x:0,y:0},b.d3plus_label.shape="circle"===b.d3plus.shape?"circle":"square"):b.d3plus.label?b.d3plus_label=b.d3plus.label:delete b.d3plus_label,[b]},g=function(a){return a.attr("x",function(a){return a.d3plus.init&&"x"in a.d3plus.init?a.d3plus.init.x:a.d3plus.init&&"width"in a.d3plus.init?-a.d3plus.width/2:0}).attr("y",function(a){return a.d3plus.init&&"y"in a.d3plus.init?a.d3plus.init.y:a.d3plus.init&&"height"in a.d3plus.init?-a.d3plus.height/2:0}).attr("width",function(a){return a.d3plus.init&&"width"in a.d3plus.init?a.d3plus.init.width:0}).attr("height",function(a){return a.d3plus.init&&"height"in a.d3plus.init?a.d3plus.init.height:0})},h=function(b){return b.attr("x",function(a){var b;return b=a.d3plus.r?2*a.d3plus.r:a.d3plus.width,-b/2}).attr("y",function(a){var b;return b=a.d3plus.r?2*a.d3plus.r:a.d3plus.height,-b/2}).attr("width",function(a){return a.d3plus.r?2*a.d3plus.r:a.d3plus.width}).attr("height",function(a){return a.d3plus.r?2*a.d3plus.r:a.d3plus.height}).attr("rx",function(a){var b,c;return b="circle"===a.d3plus.shape,c=a.d3plus.r?2*a.d3plus.r:a.d3plus.width,b?(c+2)/2:0}).attr("ry",function(a){var b,c;return c="circle"===a.d3plus.shape,b=a.d3plus.r?2*a.d3plus.r:a.d3plus.height,c?(b+2)/2:0}).attr("transform",function(a){return"rotate"in a.d3plus?"rotate("+a.d3plus.rotate+")":""}).attr("shape-rendering",function(b){return"square"!==b.d3plus.shape||"rotate"in b.d3plus?"auto":a.shape.rendering.value})},a.draw.timing?(c.append("rect").attr("class","d3plus_data").call(g).call(d,a),b.selectAll("rect.d3plus_data").data(f).transition().duration(a.draw.timing).call(h).call(d,a),e.selectAll("rect.d3plus_data").transition().duration(a.draw.timing).call(g)):(c.append("rect").attr("class","d3plus_data"),b.selectAll("rect.d3plus_data").data(f).call(h).call(d,a))}},{"./style.coffee":237}],236:[function(a,b,c){var d;d=a("../../../core/fetch/value.coffee"),b.exports=function(a,b,c){var e;return e=a[c].value,e?c in b.d3plus?b.d3plus[c]:d(a,b,e):b.d3plus[c]}},{"../../../core/fetch/value.coffee":69}],237:[function(a,b,c){var d,e,f;d=a("./color.coffee"),e=a("../../../client/ie.js"),f=a("../../../core/fetch/value.coffee"),b.exports=function(a,b){return a.attr("fill",function(a){return a.d3plus&&a.d3plus.spline?"none":d(a,b)}).style("stroke",function(a){var c;return a.d3plus&&a.d3plus.stroke?a.d3plus.stroke:(c=a.values?d(a.values[0],b):d(a,b,!0),d3.rgb(c).darker(.6))}).style("stroke-width",function(a){var c;if(e&&b.types[b.type.value].zoom)return 0;if("line"===a.d3plus.shape&&b.size.value){if(b.size.value.constructor===Number)return b.size.value;if(c=f(b,a,b.size.value),c&&c.length)return d3.max(c)}return b.data.stroke.width}).attr("opacity",b.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"../../../client/ie.js":39,"../../../core/fetch/value.coffee":69,"./color.coffee":223}],238:[function(a,b,c){var d=a("./style.coffee");b.exports=function(a,b,c,e){function f(a){a.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function g(a){a.attr("d",d3.svg.symbol().type("triangle-down").size(function(a){var b=Math.min(a.d3plus.width,a.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}c.append("path").attr("class","d3plus_data").call(f).call(d,a),b.selectAll("path.d3plus_data").data(function(a){return[a]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(g).call(d,a):b.selectAll("path.d3plus_data").call(g).call(d,a)}},{"./style.coffee":237}],239:[function(a,b,c){var d=a("./style.coffee");b.exports=function(a,b,c,e){function f(a){a.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function g(a){a.attr("d",d3.svg.symbol().type("triangle-up").size(function(a){var b=Math.min(a.d3plus.width,a.d3plus.height);return d3.scale.pow().exponent(2)(b/2)}))}c.append("path").attr("class","d3plus_data").call(f).call(d,a),b.selectAll("path.d3plus_data").data(function(a){return[a]}),a.draw.timing?b.selectAll("path.d3plus_data").transition().duration(a.draw.timing).call(g).call(d,a):b.selectAll("path.d3plus_data").call(g).call(d,a)}},{"./style.coffee":237}],240:[function(a,b,c){b.exports=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;f=function(a){return a.d3plus.text?a.d3plus_label={w:l,h:l,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(a.d3plus.position)>=0?90:0}:a.d3plus.label?a.d3plus_label=a.d3plus.label:delete a.d3plus_label,[a]},m=function(b){return b.style("stroke-width",a.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",a.shape.rendering.value)},g=function(a){return a.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},k=function(a){return a.attr("x1",function(a){var b,c,d;return["top","bottom"].indexOf(a.d3plus.position)>=0?0:(b=a.d3plus.offset||0,c=a.d3plus.width||0,d=0>b?-c:c,d+b)}).attr("x2",function(a){return["top","bottom"].indexOf(a.d3plus.position)>=0?0:a.d3plus.offset||0}).attr("y1",function(a){var b,c,d;return["left","right"].indexOf(a.d3plus.position)>=0?0:(c=a.d3plus.offset||0,b=a.d3plus.height||0,d=0>c?-b:b,d+c)}).attr("y2",function(a){return["left","right"].indexOf(a.d3plus.position)>=0?0:a.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},h=a.defs.selectAll("#d3plus_whisker_marker").data([0]),h.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),e=b.datum(),e?(j=e.d3plus.position,i=["top","bottom"].indexOf(j)>=0?"horizontal":"vertical",l="horizontal"===i?e.d3plus.width:e.d3plus.height):(i="horizontal",l=0),h.select("line").attr("x1","horizontal"===i?-l/2:0).attr("x2","horizontal"===i?l/2:0).attr("y1","vertical"===i?-l/2:0).attr("y2","vertical"===i?l/2:0).call(m).style("stroke-width",2*a.data.stroke.width),a.draw.timing?(c.append("line").attr("class","d3plus_data").call(m).call(g),b.selectAll("line.d3plus_data").data(f).transition().duration(a.draw.timing).call(m).call(k),d.selectAll("line.d3plus_data").transition().duration(a.draw.timing).call(g)):(c.append("line").attr("class","d3plus_data"),b.selectAll("line.d3plus_data").data(f).call(m).call(k))}},{}],241:[function(a,b,c){var d=a("../../../client/pointer.coffee"),e=a("../../../client/prefix.coffee"),f=a("../../../core/console/print.coffee"),g=a("../../../client/touch.coffee"),h=a("../zoom/propagation.coffee");b.exports=function(a){a.dev.value&&f.time("creating SVG elements"),a.svg=a.container.value.selectAll("svg#d3plus").data([0]),a.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",a.width.value).attr("height",a.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),a.g.bg=a.svg.selectAll("rect#bg").data(["bg"]),a.g.bg.enter().append("rect").attr("id","bg").attr("fill",a.background.value).attr("stroke","none").attr("width",a.width.value).attr("height",a.height.value),a.g.timeline=a.svg.selectAll("g#timeline").data(["timeline"]),a.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+a.height.value+")"),a.g.legend=a.svg.selectAll("g#key").data(["key"]),a.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+a.height.value+")"),a.g.footer=a.svg.selectAll("g#footer").data(["footer"]),a.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+a.height.value+")");var b="clipping_"+a.container.id;a.g.clipping=a.svg.selectAll("#clipping").data(["clipping"]),a.g.clipping.enter().append("clipPath").attr("id",b).append("rect").attr("width",a.width.viz).attr("height",a.height.viz),a.g.container=a.svg.selectAll("g#container").data(["container"]),a.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+b+")").attr("transform","translate("+a.margin.left+","+a.margin.top+")"),a.g.zoom=a.g.container.selectAll("g#zoom").data(["zoom"]),a.g.zoom.enter().append("g").attr("id","zoom"),a.g.viz=a.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),a.g.viz.enter().append("g").attr("id","d3plus_viz"),a.g.overlay=a.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),a.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",a.width.value).attr("height",a.height.value).attr("opacity",0),a.g.overlay.on(d.move,function(b){g&&h(a,d3.event),a.types[a.type.value].zoom&&a.zoom.pan.value&&a.zoom.behavior.scaleExtent()[0]<a.zoom.scale?d3.select(this).style("cursor",e()+"grab"):d3.select(this).style("cursor","auto")}).on(d.up,function(b){g&&h(a,d3.event),a.types[a.type.value].zoom&&a.zoom.pan.value&&a.zoom.behavior.scaleExtent()[0]<a.zoom.scale?d3.select(this).style("cursor",e()+"grab"):d3.select(this).style("cursor","auto")}).on(d.down,function(b){g&&h(a,d3.event),a.types[a.type.value].zoom&&a.zoom.pan.value&&a.zoom.behavior.scaleExtent()[0]<a.zoom.scale?d3.select(this).style("cursor",e()+"grabbing"):d3.select(this).style("cursor","auto")}),a.g.app=a.g.viz.selectAll("g#app").data(["app"]),a.g.app.enter().append("g").attr("id","app"),a.g.edges=a.g.viz.selectAll("g#edges").data(["edges"]),a.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),a.g.edge_focus=a.g.viz.selectAll("g#focus").data(["focus"]),a.g.edge_focus.enter().append("g").attr("id","focus"),a.g.edge_hover=a.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),a.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),a.g.data=a.g.viz.selectAll("g#data").data(["data"]),a.g.data.enter().append("g").attr("id","data").attr("opacity",0),a.g.data_focus=a.g.viz.selectAll("g#data_focus").data(["data_focus"]),a.g.data_focus.enter().append("g").attr("id","data_focus"),a.g.labels=a.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),a.g.labels.enter().append("g").attr("id","d3plus_labels"),a.defs=a.svg.selectAll("defs").data(["defs"]),a.defs.enter().append("defs"),a.dev.value&&f.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../client/touch.coffee":45,"../../../core/console/print.coffee":54,"../zoom/propagation.coffee":256}],242:[function(a,b,c){var d=a("../../../core/console/print.coffee");b.exports=function(a){a.dev.value&&d.time("updating SVG elements"),a.draw.timing?(a.container.value.transition().duration(a.draw.timing).style("width",a.width.value+"px").style("height",a.height.value+"px"),a.svg.transition().duration(a.draw.timing).attr("width",a.width.value).attr("height",a.height.value),a.g.bg.transition().duration(a.draw.timing).attr("width",a.width.value).attr("height",a.height.value).attr("fill",a.background.value),a.g.clipping.select("rect").transition().duration(a.draw.timing).attr("width",a.width.viz).attr("height",a.height.viz),a.g.container.transition().duration(a.draw.timing).attr("transform","translate("+a.margin.left+","+a.margin.top+")")):(a.container.value.style("width",a.width.value+"px").style("height",a.height.value+"px"),a.svg.attr("width",a.width.value).attr("height",a.height.value),a.g.bg.attr("width",a.width.value).attr("height",a.height.value).attr("fill",a.background.value),a.g.clipping.select("rect").attr("width",a.width.viz).attr("height",a.height.viz),a.g.container.attr("transform","translate("+a.margin.left+","+a.margin.top+")")),a.dev.value&&d.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":54}],243:[function(a,b,c){var d=a("../../../array/sort.coffee"),e=a("../../../tooltip/create.js"),f=a("../../../core/data/nest.js"),g=a("./data.js"),h=a("../../../core/fetch/color.coffee"),i=a("../../../core/fetch/text.js"),j=a("../../../core/fetch/value.coffee"),k=a("../../../object/merge.coffee"),l=a("../../../tooltip/remove.coffee"),m=a("../shapes/segments.coffee"),n=a("../../../client/scroll.js"),o=a("../../../util/uniques.coffee"),p=a("../../../object/validate.coffee"),q=a("../zoom/direction.coffee");b.exports=function(a){function b(b){function n(a){return"string"==typeof c[a].value?c[a].value:c.format.locale.value.method[a]}var q,v="depth"in a?a.depth:s,A={},B=c.id.nesting[v+1]in r?v+1:v,C=c.id.nesting[B],H="merged"in r.d3plus?r.d3plus.merged:r[C];H instanceof Array||(H=[H]);var I=j(c,r,c.size.value);if(c.tooltip.children.value){if(H=H.slice(0),H.length>1&&p(H[0])&&(H=f(c,H,[C])),c.size.value&&p(H[0])){var J=[],K=H.filter(function(a){var b=j(c,a,c.size.value);return null===b||"d3plus"in a&&a.d3plus.merged?void J.push(a):!0});d(K,c.size.value,"desc",[],c),H=K.concat(J)}var L=c.tooltip.children.value===!0?3:c.tooltip.children.value,M="short"===z?L:c.data.large,N=H.length,O=d3.min([N,M]);q={values:[]};for(var P=0;O>P&&H.length;P++){var Q=H.shift(),R=i(c,Q,B)[0],S=p(Q)?j(c,Q,C,B):Q;if(S!==r[c.id.nesting[v]]&&R&&!q[R]){var T=p(Q)?j(c,Q,c.size.value,C):null,U=h(c,Q,C);q[R]=!T||T instanceof Array?"":c.format.value(T,{key:c.size.value,vars:c,data:Q});var V={};V[R]=q[R],q.values.push(V),U&&(q.d3plus_colors||(q.d3plus_colors={}),q.d3plus_colors[R]=U)}else P--}N>O&&(q.d3plusMore=N-O)}r.d3plus.tooltip&&(A=k(A,r.d3plus.tooltip)),c.tooltip.size.value&&(I&&"number"!=typeof c.size.value&&(A[n("size")]=I),c.axes.opposite&&c[c.axes.opposite].value!==c.size.value&&(A[n(c.axes.opposite)]=j(c,r,c[c.axes.opposite].value)),c.axes.opposite&&c[c.axes.opposite+"2"].value!==c.size.value&&(A[n(c.axes.opposite+"2")]=j(c,r,c[c.axes.opposite+"2"].value)),c.color.valueScale&&(A[n("color")]=j(c,r,c.color.value)));var W=m(c,r,"active"),X=m(c,r,"temp"),Y=m(c,r,"total");"number"==typeof W&&W>0&&Y&&(A[n("active")]=W+"/"+Y+" ("+c.format.value(W/Y*100,{key:"share",vars:c,data:r})+")"),"number"==typeof X&&X>0&&Y&&(A[n("temp")]=X+"/"+Y+" ("+c.format.value(X/Y*100,{key:"share",vars:c,data:r})+")"),c.tooltip.share.value&&r.d3plus.share&&(A.share=c.format.value(100*r.d3plus.share,{key:"share",vars:c,data:r}));var B="depth"in a?a.depth:s,Z=a.title||i(c,r,B)[0],$=o(r,c.icon.value,j,c,c.id.nesting[B]),_=a.titleOnly?[]:g(c,r,z,A,q,B);if($=1===$.length&&"string"==typeof $[0]?$[0]:!1,_.length>0||D||!r.d3plus_label&&"short"==z&&Z||r.d3plus_label&&(!("visible"in r.d3plus_label)||"visible"in r.d3plus_label&&r.d3plus_label.visible===!1)){Z||(Z=c.format.value(S,{key:c.id.value,vars:c}));var B="d3plus"in r&&"merged"in r.d3plus?s-1:"depth"in a?a.depth:s;if(0>B&&(B=0),B=c.id.nesting[B],"string"==typeof c.icon.style.value)var aa=c.icon.style.value;else if("object"==typeof c.icon.style.value&&c.icon.style.value[B])var aa=c.icon.style.value[B];else var aa="default";var ba=c.tooltip.small;a.width?ba=a.width:x&&(ba=c.tooltip.large);var ca=!x&&"long"!==a.length||x&&c.tooltip.fullscreen.value?d3.select("body"):c.container.value;!a.description&&r&&c.tooltip.sub.value&&(a.description=j(c,r,c.tooltip.sub.value)),e({align:y,arrow:u,locale:c.format.locale.value,background:c.tooltip.background,curtain:c.tooltip.curtain.color,curtainopacity:c.tooltip.curtain.opacity,fontcolor:c.tooltip.font.color,fontfamily:c.tooltip.font.family.value,fontsize:c.tooltip.font.size,fontweight:c.tooltip.font.weight,data:_,color:h(c,r),allColors:!0,footer:a.footer===!1?a.footer:D,fullscreen:x,html:b,js:a.js,icon:$,id:w,max_height:a.maxheight,max_width:ba,mouseevents:t,offset:G,parent:ca,stacked:c.tooltip.stacked.value,style:aa,title:Z,description:a.description,width:a.width||x||0!=_.length?ba:"auto",x:E,y:F})}else l(w)}"d3plus"in a.data||(a.data.d3plus={});var c=a.vars,r=a.data,s="d3plus"in r&&"depth"in r.d3plus?r.d3plus.depth:c.depth.value,t=(a.ex,a.mouseevents?a.mouseevents:!1),u="arrow"in a?a.arrow:!0,v=j(c,r,c.id.value),w=a.id||c.type.value;if(!d3.event||"click"!=d3.event.type||!c.tooltip.html.value&&!c.tooltip.value["long"]||"fullscreen"in a){var x=!1,y=a.anchor||c.tooltip.anchor,z=a.length||"short",A=q(r,c);if(-1===A){var B=c.id.nesting[s-1];j(c,v,B)}var C="";if(c.mouse.click.value&&(!c.mouse.viz||c.mouse.viz.click!==!1))if(1===A&&c.zoom.value)var C=c.format.value(c.format.locale.value.ui.expand);else if(-1===A&&c.zoom.value&&c.history.states.length&&!c.tooltip.value["long"])var C=c.format.value(c.format.locale.value.ui.collapse);else if(c.small||"short"!=z||!c.tooltip.html.value&&!c.tooltip.value["long"]||1===c.focus.value.length&&c.focus.value[0]==v){if("long"==z)var C=c.footer.value||""}else var C=c.format.locale.value.ui.moreInfo;var D=C.length?c.format.value(C,{key:"footer",vars:c}):!1}else{var x=!0,u=!1,t=!0,z="long",D=c.footer.value;c.covered=!0}if("x"in a)var E=a.x;else if("static"===c.types[c.type.value].tooltip){var E=r.d3plus.x;c.zoom.translate&&c.zoom.scale&&(E=c.zoom.translate[0]+E*c.zoom.scale),E+=c.margin.left,"long"!==a.length&&(F+=n.x(),E+=c.container.value.node().getBoundingClientRect().left,E+=parseFloat(c.container.value.style("padding-left"),10))}else var E=d3.mouse(d3.select("html").node())[0];if("y"in a)var F=a.y;else if("static"==c.types[c.type.value].tooltip){var F=r.d3plus.y;c.zoom.translate&&c.zoom.scale&&(F=c.zoom.translate[1]+F*c.zoom.scale),F+=c.margin.top,"long"!==a.length&&(F+=n.y(),F+=c.container.value.node().getBoundingClientRect().top,F+=parseFloat(c.container.value.style("padding-top"),10))}else var F=d3.mouse(d3.select("html").node())[1];if("offset"in a)var G=a.offset;else if("static"==c.types[c.type.value].tooltip){var G=r.d3plus.r?r.d3plus.r:r.d3plus.height/2;c.zoom.scale&&(G*=c.zoom.scale)}else var G=3;if(x||"long"===a.length)if("string"==typeof c.tooltip.html.value)b(c.tooltip.html.value);else if("function"==typeof c.tooltip.html.value)b(c.tooltip.html.value(v));else if(c.tooltip.html.value&&"object"==typeof c.tooltip.html.value&&c.tooltip.html.value.url){var H=c.tooltip.html.value.url;
"function"==typeof H&&(H=H(v)),d3.json(H,function(a){var d=c.tooltip.html.value.callback?c.tooltip.html.value.callback(a):a;b(d)})}else b(a.html);else b(a.html)}},{"../../../array/sort.coffee":36,"../../../client/scroll.js":43,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":174,"../../../object/validate.coffee":175,"../../../tooltip/create.js":204,"../../../tooltip/remove.coffee":206,"../../../util/uniques.coffee":213,"../shapes/segments.coffee":236,"../zoom/direction.coffee":253,"./data.js":244}],244:[function(a,b,c){var d=a("../../../util/copy.coffee"),e=a("../../../core/fetch/value.coffee"),f=a("../../../core/fetch/color.coffee"),g=a("../../../core/fetch/text.js"),h=a("../../../color/legible.coffee"),i=a("../../../object/merge.coffee"),j=a("../../../client/prefix.coffee"),k=a("../../../string/format.js"),l=a("../../../object/validate.coffee");b.exports=function(a,b,c,m,n,o){function p(c,d){if(a.attrs.value[d])var f=d;else var f=null;d&&(d=a.format.value(d));var g=r[c]||e(a,b,c,f);if(l(g))v.push({name:a.format.value(c),value:a.format.value(g.value,{key:g.key,vars:a}),group:d});else if(null!=g&&"undefined"!=g&&!(g instanceof Array)&&("string"==typeof g&&g.indexOf("d3plus_other")<0||"string"!=typeof g)){var h=a.format.locale.value.ui[c]?a.format.value(a.format.locale.value.ui[c]):a.format.value(c),i=t.indexOf(c)>=0;g instanceof Array?g.forEach(function(d){d=a.format.value(d,{key:c,vars:a,data:b})}):g=a.format.value(g,{key:c,vars:a,data:b});var j={name:h,value:g,highlight:i,group:d};if(a.descs.value)if("function"==typeof a.descs.value){var k=a.descs.value(c);"string"==typeof k&&(j.desc=k)}else c in a.descs.value&&(j.desc=a.descs.value[c]);v.push(j)}}if(a.small)return[];if(!c)var c="long";if("long"==c)var q="short";else var q="long";var r={};if(m&&"string"==typeof m)m=[m];else if(m&&"object"==typeof m){r=i(r,m);var m=[];for(var s in r)m.push(s)}else if(!m)var m=[];var t=[];if(a.tooltip.value instanceof Array)var u=a.tooltip.value;else if("string"==typeof a.tooltip.value)var u=[a.tooltip.value];else{if(a.tooltip.value[a.id.nesting[o]])var u=a.tooltip.value[a.id.nesting[o]];else var u=a.tooltip.value;u instanceof Array||(u=u[c]?u[c]:u[q]?[]:i({"":[]},u)),"string"==typeof u?u=[u]:u instanceof Array||(u=i({"":[]},u))}var v=[];if(u.constructor===Array&&(u={"":u}),a.id.nesting.length&&o<a.id.nesting.length-1){var u=d(u);a.id.nesting.forEach(function(a,b){b>o&&u[a]&&delete u[a]})}for(var w in u){u[w].constructor!==Array&&(u[w]=[u[w]]);for(var x=m.length;x>0;x--)u[w].indexOf(m[x-1])>=0&&m.splice(x-1,1)}if(a.tooltip.value["long"]&&"object"==typeof a.tooltip.value["long"]){for(var w in a.tooltip.value["long"])for(var x=m.length;x>0;x--){var y=m[x-1];a.tooltip.value["long"][w].indexOf(y)>=0&&(u[w]||(u[w]=[]),u[w].push(y),m.splice(x-1,1))}}m.length&&(u[""]||(u[""]=[]),u[""]=u[""].concat(m));for(var w in u)u[w].forEach(function(a){p(a,w)});if(n){var z=a.format.locale.value.ui.including,A=n.d3plus_colors;n.values.forEach(function(b){var c=d3.keys(b)[0];v.push({group:a.format.value(z),highlight:A&&A[c]?A[c]:!1,name:c,value:b[c]})}),n.d3plusMore&&v.push({group:a.format.value(z),highlight:!0,name:k(a.format.locale.value.ui.more,n.d3plusMore),value:""})}if(a.tooltip.connections.value&&"long"===c){var B=a.edges.connections(b[a.id.value],a.id.value,!0);B.length&&B.forEach(function(b){var c=a.data.viz.filter(function(c){return c[a.id.value]===b[a.id.value]}),c=c.length?c[0]:b,d=g(a,c)[0],e=f(a,c),i=a.tooltip.font.size,k="square"==a.shape.value?0:i;styles=["background-color: "+e,"border-color: "+h(e),"border-style: solid","border-width: "+a.data.stroke.width+"px","display: inline-block","height: "+i+"px","left: 0px","position: absolute","width: "+i+"px","top: 0px",j()+"border-radius: "+k+"px"],node="<div style='"+styles.join("; ")+";'></div>";var l=function(){a.self.focus([c[a.id.value]]).draw()};v.push({group:a.format.value(a.format.locale.value.ui.primary),highlight:!1,link:l,name:"<div id='d3plustooltipfocuslink_"+c[a.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*i+"px;'>"+node+d+"</div>"})})}return v}},{"../../../client/prefix.coffee":41,"../../../color/legible.coffee":46,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":174,"../../../object/validate.coffee":175,"../../../string/format.js":176,"../../../util/copy.coffee":210}],245:[function(a,b,c){var d;d=a("../../../core/console/print.coffee"),b.exports=function(a){var b,c,e,f,g,h,i,j,k,l;if(a.group=a.g.apps[a.type.value],a.mouse.viz=!1,a.edges.path=!1,l=a.types[a.type.value],j=l.requirements||[],e=j.indexOf("data")>=0,f=!e||e&&a.data.viz.length,!a.error.internal&&f){for(b=a.format.locale.value.visualization[a.type.value],a.dev.value&&d.time("running "+b),i=a.data.viz,g=0,h=i.length;h>g;g++)c=i[g],c.d3plus&&(delete c.d3plus.shape,delete c.d3plus.label,delete c.d3plus.rotate,delete c.d3plus.share);k=l(a),a.dev.value&&d.timeEnd("running "+b)}else k=null;a.returned={nodes:[],edges:null},k instanceof Array?a.returned.nodes=k:k&&(k.nodes&&(a.returned.nodes=k.nodes),k.edges&&(a.returned.edges=k.edges))}},{"../../../core/console/print.coffee":54}],246:[function(a,b,c){var d=a("../../../util/copy.coffee"),e=a("../../../form/form.js"),f=a("../../../core/console/print.coffee"),g=a("../../../object/validate.coffee");b.exports=function(a){var b=a.ui.value&&a.ui.value.length,c=a.ui.position.value;a.dev.value&&b&&f.time("drawing custom UI elements");var h=a.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);h.enter().append("div").attr("id","d3plus_drawer");var i={};a.ui.position.accepted.forEach(function(b){i[b]=b==c?a.margin.bottom+"px":"auto"}),h.style("text-align",a.ui.align.value).style("position","absolute").style("width",a.width.value-2*a.ui.padding+"px").style("height","auto").style(i);var j=h.selectAll("div.d3plus_drawer_ui").data(b?a.ui.value:[],function(a){return a.method||!1});j.exit().remove(),j.enter().append("div").attr("class","d3plus_drawer_ui").style("display","inline-block"),j.style("padding",a.ui.padding+"px").each(function(b){b.form||(b.form=e().container(d3.select(this)).data({sort:!1}).id("id").text("text"));var c,f;"string"==typeof b.method&&b.method in a?(c=a[b.method].value,f=function(c){c!==a[b.method].value&&a.self[b.method](c).draw()}):(c=b.focus||b.value[0],g(c)&&(c=c[d3.keys(c)[0]]),"function"==typeof b.method&&(f=function(d){d!==c&&(c=d,b.focus=d,b.method(d,a.self))}));var h,i=[];b.label?h=b.label:"string"==typeof b.method&&b.method in a&&(h=a.format.locale.value.method[b.method]||b.method),b.value.forEach(function(b){var c={};g(b)?(c.id=b[d3.keys(b)[0]],c.text=a.format.value(d3.keys(b)[0])):(c.id=b,c.text=a.format.value(b)),i.push(c)});var j=d(a.ui.font);j.align=d(a.font.align),j.secondary=d(j),b.form.data(i).font(j).focus(b.value.length>1?c:!1).focus({callback:f}).format(a.format.locale.language).format({number:a.format.number.value,text:a.format.text.value}).title(a.format.value(h)).type(b.type||"auto").ui({align:a.ui.align.value,border:a.ui.border,color:{primary:a.ui.color.primary.value,secondary:a.ui.color.secondary.value},padding:a.ui.padding,margin:0}).width(b.width||!1).draw()});var k=h.node().offsetHeight||h.node().getBoundingClientRect().height;k&&(a.margin[c]+=k),a.dev.value&&b&&f.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":54,"../../../form/form.js":106,"../../../object/validate.coffee":175,"../../../util/copy.coffee":210}],247:[function(a,b,c){var d,e,f,g;d=a("../../../client/pointer.coffee"),e=a("../../../color/lighter.coffee"),f=a("../../../core/console/print.coffee"),g=a("../../../client/css.coffee"),b.exports=function(a){var b,c,h,i,j,k,l,m,n,o,p,q,r,s,t;return!a.small&&a.history.states.length>0?(a.dev.value&&f.time("drawing back button"),b=a.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),n=a.title.sub.font.size,c=a.title.sub.font.color,j=a.title.sub.font.family.value,t=a.title.sub.font.weight,m=a.title.sub.padding,q=!1,a.title.sub.value&&["start","left"].indexOf(a.title.sub.font.align)<0?q="sub":a.title.total.value&&["start","left"].indexOf(a.title.total.font.align)<0?q="total":a.title.value&&["start","left"].indexOf(a.title.font.align)<0&&(q="title"),q?(o=function(a){var b;return b=a.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0],b=b.replace(/([^a-z])\s([^a-z])/gi,"$1,$2"),b=b.split(","),b=b[b.length-1],parseFloat(b.substring(0,b.length-1))},r=a.svg.select(".d3plus_title."+q),s=o(r)+o(r.select("text"))):(s=a.margin.top-a.title.padding,l=n+2*m,a.margin.top+=l),h=parseFloat(a.container.value.style("padding-top"),10),s+=h,h=parseFloat(a.container.value.style("padding-left"),10),k=a.margin.left+n/2+h,p=function(a){return a.style("position","absolute").style("left",k+"px").style("top",s+"px").style("color",c).style("font-family",j).style("font-weight",t).style("font-size",n+"px")},i=b.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(p).html(function(){var b;return g("font-awesome")&&0===a.icon.back.value.indexOf("fa-")?(b="<i class='fa "+a.icon.back.value,b+="' style='margin-top:2px;margin-right:4px;'></i>"):b=a.icon.back.value+" ",b+a.format.value(a.format.locale.value.ui.back)}),b.on(d.over,function(){return!a.small&&a.history.states.length>0?d3.select(this).style("cursor","pointer").transition().duration(a.timing.mouseevents).style("color",e(c,.25)):void 0}).on(d.out,function(){return!a.small&&a.history.states.length>0?d3.select(this).style("cursor","auto").transition().duration(a.timing.mouseevents).style("color",c):void 0}).on(d.click,function(){return a.history.back()}).transition().duration(a.draw.timing).style("opacity",1).call(p),a.dev.value?f.timeEnd("drawing back button"):void 0):a.container.value.selectAll("div#d3plus_back_button").transition().duration(a.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../color/lighter.coffee":47,"../../../core/console/print.coffee":54}],248:[function(a,b,c){var d=a("../../../array/sort.coffee"),e=a("../../../util/buckets.coffee"),f=a("../../../util/copy.coffee"),g=a("../tooltip/create.js"),h=a("../../../core/data/nest.js"),i=a("../../../util/dataURL.coffee"),j=a("../../../client/pointer.coffee"),k=a("../../../core/fetch/value.coffee"),l=a("../../../core/fetch/color.coffee"),m=a("../../../core/fetch/text.js"),n=a("../../../core/console/print.coffee"),o=a("../../../tooltip/remove.coffee"),p=a("../../../color/text.coffee"),q=a("../../../util/uniques.coffee"),r=a("../../../client/scroll.js"),s=a("../../../string/strip.js"),t=a("../../../textwrap/textwrap.coffee"),u=(a("../../../client/touch.coffee"),a("../../../object/validate.coffee"));b.exports=function(a){function b(b){b.attr("transform",function(b,c){var d=H+c*(a.ui.padding+w);return"translate("+d+","+a.ui.padding+")"})}function c(b){b.attr("width",w).attr("height",w).attr("fill",function(b){d3.select(this.parentNode).select("text").remove();var c=q(b,a.icon.value,k,a,O),d=l(a,b,O);if(a.legend.icons.value&&1===c.length&&"string"==typeof c[0]){c=c[0];var e,f=s(c+"_"+d),g=a.icon.style.value,h=a.defs.selectAll("pattern#"+f).data([f]);e="string"==typeof g?a.icon.style.value:u(g)&&g[O]?g[O]:"default",d="knockout"==e?d:"none",h.select("rect").transition().duration(a.draw.timing).attr("fill",d).attr("width",w).attr("height",w),h.select("image").transition().duration(a.draw.timing).attr("width",w).attr("height",w);var j=h.enter().append("pattern").attr("id",f).attr("width",w).attr("height",w);return j.append("rect").attr("fill",d).attr("stroke","none").attr("width",w).attr("height",w),j.append("image").attr("xlink:href",c).attr("width",w).attr("height",w).each(function(a){0===c.indexOf("/")||c.indexOf(window.location.hostname)>=0?i(c,function(a){h.select("image").attr("xlink:href",a)}):h.select("image").attr("xlink:href",c)}),"url(#"+f+")"}if(a.legend.labels.value){var n;if(n=a.legend.text.value?[k(a,b,a.legend.text.value,N)]:m(a,b,N),1===n.length&&!(n[0]instanceof Array)&&n[0].length){var o=d3.select(this.parentNode).append("text"),r=a.legend.font.size;r instanceof Array||(r=[r]),o.attr("font-size",r[r.length-1]+"px").attr("font-weight",a.legend.font.weight).attr("font-family",a.legend.font.family.value).attr("stroke","none").attr("fill",p(d)).attr("x",0).attr("y",0).each(function(b){t().align("middle").container(d3.select(this)).height(w).padding(a.ui.padding).resize(r.length>1).size(r).text(n[0]).width(w).valign("middle").draw()}),o.select("tspan").empty()&&o.remove()}}return d})}var v=!0,w=0;if(!a.error.internal&&a.color.value&&!a.small&&a.legend.value)if(a.color.valueScale)if(a.color.valueScale){a.dev.value&&n.time("drawing color scale"),a.g.legend.selectAll("g.d3plus_color").transition().duration(a.draw.timing).attr("opacity",0).remove();var x=a.color.valueScale.domain(),y=a.color.valueScale.range();x.length<=2&&(x=e(x,6));var z=a.g.legend.selectAll("g.d3plus_scale").data(["scale"]);z.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var A=a.container.id+"_legend_heatmap",B=z.selectAll("#"+A).data(["heatmap"]);B.enter().append("linearGradient").attr("id",A).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var C=B.selectAll("stop").data(d3.range(0,y.length));C.enter().append("stop").attr("stop-opacity",1),C.attr("offset",function(a){return Math.round(a/(y.length-1)*100)+"%"}).attr("stop-color",function(a){return y[a]}),C.exit().remove();var D=z.selectAll("rect#gradient").data(["gradient"]);D.enter().append("rect").attr("id","gradient").attr("x",function(b){return"middle"==a.legend.align?a.width.value/2:"end"==a.legend.align?a.width.value:0}).attr("y",a.ui.padding).attr("width",0).attr("height",a.legend.gradient.height).attr("stroke",a.legend.font.color).attr("stroke-width",1).style("fill","url(#"+A+")");var E=z.selectAll("text.d3plus_tick").data(d3.range(0,x.length));E.enter().append("text").attr("class","d3plus_tick").attr("stroke","none").attr("x",function(b){return"middle"==a.legend.align?a.width.value/2:"end"==a.legend.align?a.width.value:0}).attr("y",function(b){return this.getBBox().height+a.legend.gradient.height+2*a.ui.padding});var F=0;E.order().attr("font-weight",a.legend.font.weight).attr("font-family",a.legend.font.family.value).attr("font-size",a.legend.font.size+"px").style("text-anchor",a.legend.font.align).attr("fill",a.legend.font.color).text(function(b){return a.format.value(x[b],{key:a.color.value,vars:a})}).attr("y",function(b){return this.getBBox().height+a.legend.gradient.height+2*a.ui.padding}).each(function(a){var b=Math.ceil(this.getBBox().width);b>F&&(F=b)}),F+=2*a.labels.padding;var G=F*(x.length-1);if(G+F<a.width.value){G+F<a.width.value/2&&(G=a.width.value/2,F=G/x.length,G-=F);var H;H="start"==a.legend.align?a.ui.padding:"end"==a.legend.align?a.width.value-a.ui.padding-G:a.width.value/2-G/2,E.transition().duration(a.draw.timing).attr("x",function(a){return H+F*a}),E.exit().transition().duration(a.draw.timing).attr("opacity",0).remove();var I=z.selectAll("rect.d3plus_tick").data(d3.range(0,x.length));I.enter().append("rect").attr("class","d3plus_tick").attr("x",function(b){return"middle"==a.legend.align?a.width.value/2:"end"==a.legend.align?a.width.value:0}).attr("y",a.ui.padding).attr("width",0).attr("height",a.ui.padding+a.legend.gradient.height).attr("fill",a.legend.font.color),I.transition().duration(a.draw.timing).attr("x",function(a){var b=0===a?1:0;return H+F*a-b}).attr("y",a.ui.padding).attr("width",1).attr("height",a.ui.padding+a.legend.gradient.height).attr("fill",a.legend.font.color),I.exit().transition().duration(a.draw.timing).attr("width",0).remove(),D.transition().duration(a.draw.timing).attr("x",function(b){return"middle"==a.legend.align?a.width.value/2-G/2:"end"==a.legend.align?a.width.value-G-a.ui.padding:a.ui.padding}).attr("y",a.ui.padding).attr("width",G).attr("height",a.legend.gradient.height),z.transition().duration(a.draw.timing).attr("opacity",1),a.dev.value&&n.timeEnd("drawing color scale")}else v=!1}else v=!1;else{a.dev.value&&n.time("grouping data by colors");var J;if(a.nodes.value&&a.types[a.type.value].requirements.indexOf("nodes")>=0){if(J=f(a.nodes.restriced||a.nodes.value),a.data.viz.length)for(var K=0;K<J.length;K++){var L=a.data.viz.filter(function(b){return b[a.id.value]===J[K][a.id.value]});L.length&&(J[K]=L[0])}}else J=a.data.viz;J.length&&"key"in J[0]&&"values"in J[0]&&(J=d3.merge(J.map(function(a){return a.values})));var M=function(b){return l(a,b,N)},N=0,O=a.id.value,P=a.id.nesting.indexOf(a.color.value);if(P>=0)N=P,O=a.id.nesting[P];else for(var Q=0;Q<=a.depth.value;Q++){N=Q,O=a.id.nesting[Q];var R=q(J,function(b){return k(a,b,O)}),S=q(J,M);if(R.length>=S.length&&S.length>1)break}var T=[a.color.value],y=h(a,J,T,!1);a.dev.value&&n.timeEnd("grouping data by color");var U=a.width.value;w=a.legend.size;var G=w*y.length+a.ui.padding*(y.length+1);if(w instanceof Array){a.dev.value&&n.time("calculating legend size");for(var K=w[1];K>=w[0];K--)if(G=K*y.length+a.ui.padding*(y.length+1),U>=G){w=K;break}a.dev.value&&n.timeEnd("calculating legend size")}else"number"!=typeof w&&w!==!1&&(w=30);if(G>U||1==y.length)v=!1;else{if(G-=2*a.ui.padding,a.dev.value&&n.time("sorting legend"),"function"==typeof a.legend.order.value)y=a.legend.order.value(y);else{var V=a[a.legend.order.value].value,W=a.color.value;V?"color"!==a.legend.order.value&&(W=[]):V=a[a.color.value].value,d(y,V,a.legend.order.sort.value,W,a,N)}a.dev.value&&n.timeEnd("sorting legend"),a.dev.value&&n.time("drawing legend");var H;H="start"==a.legend.align?a.ui.padding:"end"==a.legend.align?U-a.ui.padding-G:U/2-G/2,a.g.legend.selectAll("g.d3plus_scale").transition().duration(a.draw.timing).attr("opacity",0).remove();var X={},Y=a.g.legend.selectAll("g.d3plus_color").data(y,function(b){var c=l(a,b,O);return c in X||(X[c]=-1),X[c]++,X[c]+"_"+c});Y.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(b).append("rect").attr("class","d3plus_color").attr("stroke","none").call(c),Y.order().transition().duration(a.draw.timing).call(b).attr("opacity",1).selectAll("rect.d3plus_color").call(c),Y.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),a.legend.tooltip.value&&Y.on(j.over,function(b,c){d3.select(this).style("cursor","pointer");var d,e=this.getBoundingClientRect(),f=e.left+w/2+r.x(),h=e.top+w/2+r.y()+5,i=k(a,b,O),l=a.id.nesting.indexOf(O);d=a.legend.title.value?k(a,b,a.legend.title.value,N):l>=0?m(a,b,l)[0]:a.format.value(k(a,b,a.color.value,O),{key:a.color.value,vars:a,data:b});var n,o;if(a.legend.filters.value&&!(i instanceof Array)){n="<div style='text-align:center;'>";var p=a.format.locale.value;n+="<div class='mute'>"+a.format.value(p.method.mute)+"</div>",n+="<div class='solo'>"+a.format.value(p.method.solo)+"</div>",n+="</div>",o=function(b){var c={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};b.select(".mute").style(c).on(j.over,function(){d3.select(this).style("cursor","pointer")}).on(j.click,function(){var b=a.id.mute.value;a.history.states.push(function(){a.self.id({mute:b}).draw()}),a.self.id({mute:i}).draw()}),b.select(".solo").style(c).on(j.over,function(){d3.select(this).style("cursor","pointer")}).on(j.click,function(){var b=a.id.solo.value;a.history.states.push(function(){a.self.id({solo:b}).draw()}),a.self.id({solo:i}).draw()})}}g({data:b,html:n,js:o,depth:N,footer:!1,vars:a,x:f,y:h,mouseevents:this,title:d,titleOnly:!a.legend.data.value,offset:.4*w})}).on(j.out,function(b){o(a.type.value)}),a.dev.value&&n.timeEnd("drawing legend")}}else v=!1;if(a.legend.value&&key&&v){if(a.dev.value&&n.time("positioning legend"),w)var Z=w+a.ui.padding;else var $=a.g.legend.node().getBBox(),Z=$.height+$.y;0===a.margin.bottom&&(a.margin.bottom+=a.ui.padding),a.margin.bottom+=Z,a.g.legend.transition().duration(a.draw.timing).attr("transform","translate(0,"+(a.height.value-a.margin.bottom)+")"),a.dev.value&&n.timeEnd("positioning legend")}else a.dev.value&&n.time("hiding legend"),a.g.legend.transition().duration(a.draw.timing).attr("transform","translate(0,"+a.height.value+")"),a.dev.value&&n.timeEnd("hiding legend")}},{"../../../array/sort.coffee":36,"../../../client/pointer.coffee":40,"../../../client/scroll.js":43,"../../../client/touch.coffee":45,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":175,"../../../string/strip.js":178,"../../../textwrap/textwrap.coffee":203,"../../../tooltip/remove.coffee":206,"../../../util/buckets.coffee":207,"../../../util/copy.coffee":210,"../../../util/dataURL.coffee":212,"../../../util/uniques.coffee":213,"../tooltip/create.js":243}],249:[function(a,b,c){var d=a("../../../client/pointer.coffee"),e=a("../../../color/text.coffee");b.exports=function(a,b){function c(b){b.style(g).style("position","absolute").style("background-color",i).style("text-align","center").style("left",function(){return"center"==h?"50%":"0px"}).style("width",function(){return"center"==h?"auto":a.width.value+"px"}).style("margin-left",function(){return"center"==h?-(this.offsetWidth/2)+"px":"0px"}).style("top",function(){return"center"==h?"50%":"top"==h?"0px":"auto"}).style("bottom",function(){return"bottom"==h?"0px":"auto"}).style("margin-top",function(){if("large"==f){var a=this.offsetHeight||this.getBoundingClientRect().height;return-a/2+"px"}return"0px"})}b=a.messages.value?b:null;var f=a.messages.style.value||(b===a.error.internal?"large":a.messages.style.backup);if("large"===f)var g=a.messages,h="center";else{if(a.footer.value)var g=a.footer;else if(a.title.value)var g=a.title;else if(a.title.sub.value)var g=a.title.sub;else if(a.title.total.value)var g=a.title.total;else var g=a.title.sub;var h=g.position}var g={color:g.font.color,"font-family":g.font.family.value,"font-weight":g.font.weight,"font-size":g.font.size+"px",padding:g.padding+"px"},i=a.messages.background.value;i||(i=a.background.value,("none"===i||"transparent"===i)&&(i=e(g.color))),a.g.message=a.container.value.selectAll("div#d3plus_message").data(["message"]);var j=a.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);j.append("div").attr("class","d3plus_message_text").style("display","block"),a.g.message.select(".d3plus_message_text").text(b?b:a.g.message.text());var k=navigator.onLine,l=75,m=a.g.message.selectAll(".d3plus_message_branding").data(a.messages.branding.value&&"center"===h?[0]:[]);m.enter().append("div").attr("class","d3plus_message_branding").style("margin-top","15px").style("padding-top","0px").style("display","block").style("font-size","11px").style("background-size",l+"px").style("background-position","center 10px").style("background-repeat","no-repeat").style("cursor","pointer").on(d.click,function(){window.open("http://www.d3plus.org/","_blank")});var n=d3.hsl(i).l<.5?a.messages.branding.image.dark:a.messages.branding.image.light;m.text(k?"Powered by:":"Powered by D3plus").style("background-color",k?i:"transparent").style("background-image",k?"url('"+n+"')":"none").style("min-width",k?l+"px":"auto").style("height",k?l+"px":"auto"),m.exit().remove(),a.g.message.style("display",b?"inline-block":"none").call(c).style("opacity",b?1:0)}},{"../../../client/pointer.coffee":40,"../../../color/text.coffee":52}],250:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m;d=a("../../../util/closest.coffee"),e=a("../../../client/css.coffee"),g=a("../../../font/sizes.coffee"),f=a("../../../client/pointer.coffee"),h=a("../../../color/mix.coffee"),j=a("../../../client/prefix.coffee"),k=a("../../../core/console/print.coffee"),l=a("../../../color/text.coffee"),m=a("../../../core/data/time.coffee"),i=!1,b.exports=function(a){var b,c,g,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga;if(!a.timeline.value||a.error.internal&&a.data.missing||a.small||!a.data.time||!(a.data.time.values.length>1))return a.g.timeline.transition().duration(a.draw.timing).attr("transform","translate(0,"+a.height.value+")");if(a.dev.value&&k.time("drawing timeline"),T={"font-weight":a.ui.font.weight,"font-family":a.ui.font.family.value,"font-size":a.ui.font.size+"px","text-anchor":"middle"},ga=a.data.time.ticks.map(function(a){return new Date(a)}),Y=m(a,{values:ga,style:T}),ba=Y.values.map(Number),X=Y.format,a.time.solo.value.length)for(v=d3.extent(a.time.solo.value),u=w=0,z=v.length;z>w;u=++w)r=v[u],r.constructor!==Date&&(r+="",4===r.length&&parseInt(r)+""===r&&(r+="/01/01"),r=new Date(r),v[u]=r);else v=d3.extent(ga);if(fa=ga.slice(),da=d3.max(Y.sizes.map(function(a){return a.height})),x=~~d3.max(Y.sizes.map(function(a){return a.width}))+1,x+=2*a.ui.padding,$=a.timeline.height.value||da+2*a.ui.padding,aa=x*ga.length,K=$,Q=$-2*a.ui.padding>=da,b=a.width.value-2*a.ui.padding,Q&&a.timeline.play.value&&(b-=K+a.ui.padding),!Q||ba.length<ga.length||b<x*ba.length){for(D=x,x=(b-x)/ga.length,aa=x*ga.length,_=1,V=~~(D/(aa/ba.length))+1;V<ba.length-1&&(ba.length-1)%V!==0;)V++;ba=ba.filter(function(a,b){return b%V===0})}else _=0,B=new Date(ga[0]),O=a.data.time.stepType,B["set"+O](B["get"+O]()+ga.length),fa.push(B);return M=new Date(v[0]),M=d(fa,M),s=new Date(v[1]),_||s["set"+a.data.time.stepType](s["get"+a.data.time.stepType]()+1),s=d(fa,s),ea=fa.map(Number),C=ea.indexOf(+M),A=ea.indexOf(+s),n=[M,s],N="start"===a.timeline.align?a.ui.padding:"end"===a.timeline.align?a.width.value-a.ui.padding-aa:a.width.value/2-aa/2,Q&&a.timeline.play.value&&(N+=(K+a.ui.padding)/2),P=function(){return clearInterval(i),i=!1,F.call(G,"icon")},p=function(){var a,b,c;if(null!==d3.event.sourceEvent){if(i&&P(),n=g.extent(),c=d(fa,n[0]),b=d(fa,n[1]),c===b&&(C=ea.indexOf(+c),c<n[0]||0===C?b=fa[C+1]:c=fa[C-1]),C=ea.indexOf(+c),A=ea.indexOf(+b),A-C>=1)a=[c,b];else if(C+1<=ga.length)a=[c,fa[C+1]];else{for(a=[c],u=1;1>=u;)C+u<=ga.length?a.push(fa[C+u]):a.unshift(fa[C-(C+u-ga.length)]),u++;a=[a[0],a[a.length-1]]}return n=a,R.attr("fill",S),d3.select(this).call(g.extent(a))}},L=function(){var b;return A-C===ga.length-_?b=[]:(b=ea.filter(function(a,b){return b>=C&&A+_>b}),b=b.map(function(a){return new Date(a)})),J(),a.self.time({solo:b}).draw()},q=function(){var b,c,e,f;return null!==d3.event.sourceEvent&&(a.time.solo.value.length?(f=d3.extent(a.time.solo.value),e=ea.indexOf(+d(fa,f[0])),c=ea.indexOf(+d(fa,f[1])),b=e!==C||c!==A):b=A-C!==ga.length-_,b)?L():void 0},E=a.g.timeline.selectAll("rect.d3plus_timeline_play").data(Q&&a.timeline.play.value?[0]:[]),I=function(b){return b.attr("width",K+1).attr("height",$+1).attr("fill",a.ui.color.primary.value).attr("stroke",a.ui.color.primary.value).attr("stroke-width",1).attr("x",N-K-1-a.ui.padding).attr("y",a.ui.padding)},E.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(I),E.transition().duration(a.draw.timing).call(I),E.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),F=a.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(Q&&a.timeline.play.value?[0]:[]),G=function(b,c){var d;return c=a.timeline.play[c],e("font-awesome")?(c=c.awesome,d="FontAwesome"):(c=c.fallback,d="inherit"),b.style("font-family",d).text(c)},H=function(b){var c;return c=$/2+a.ui.padding+1,b.attr("fill",l(a.ui.color.primary.value)).attr("stroke","none").attr(T).attr("x",N-(K-1)/2-a.ui.padding).attr("y",c).attr("dy","0.5ex").call(G,i?"pause":"icon")},F.enter().append("text").attr("class","d3plus_timeline_playIcon").call(H).style("pointer-events","none").attr("opacity",0),F.call(H).transition().duration(a.draw.timing).attr("opacity",1),F.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),J=function(){return A-C===ga.length-_?(E.on(f.hover,null).on(f.click,null).transition().duration(a.draw.timing).attr("opacity",.3),F.transition().duration(a.draw.timing).attr("opacity",.3)):(E.on(f.over,function(){return d3.select(this).style("cursor","pointer")}).on(f.out,function(){return d3.select(this).style("cursor","auto")}).on(f.click,function(){return i?P():(F.call(G,"pause"),A===ga.length?(A-=C,C=0):(C++,A++),L(),i=setInterval(function(){return A===ga.length-_?P():(C++,A++,L())},a.timeline.play.timing.value))}).transition().duration(a.draw.timing).attr("opacity",1),F.transition().duration(a.draw.timing).attr("opacity",1))},J(),S=function(b){var c,d,e;return d=_?b<=n[1]:b<n[1],b>=n[0]&&d?(e=1,c=l(a.ui.color.secondary.value)):(e=.5,c=l(a.ui.color.primary.value)),_&&a.background.value&&"none"!==a.background.value&&(c=d3.rgb(l(a.background.value))),c=d3.rgb(c),"rgba("+c.r+","+c.g+","+c.b+","+e+")"},c=a.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),c.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",aa+2).attr("height",$+2).attr("fill",a.ui.color.primary.value).attr("x",N-1).attr("y",a.ui.padding),c.transition().duration(a.draw.timing).attr("width",aa+2).attr("height",$+2).attr("fill",a.ui.color.primary.value).attr("x",N-1).attr("y",a.ui.padding),W=a.g.timeline.selectAll("g#ticks").data(["ticks"]),W.enter().append("g").attr("id","ticks").attr("transform","translate("+a.width.value/2+","+a.ui.padding+")"),o=a.g.timeline.selectAll("g#brush").data(["brush"]),o.enter().append("g").attr("id","brush"),y=a.g.timeline.selectAll("g#labels").data(["labels"]),y.enter().append("g").attr("id","labels"),R=y.selectAll("text").data(ga,function(a,b){return b}),R.enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),ca=d3.time.scale().domain(d3.extent(fa)).rangeRound([0,aa]),R.order().attr(T).text(function(a,b){return ba.indexOf(+a)>=0?X(a):""}).attr("opacity",function(b,c){return a.data.time.dataSteps.indexOf(c)>=0?1:.4}).attr("fill",S).attr("transform",function(b,c){var d,e;return d=N+ca(b),_||(d+=x/2),e=$/2+a.ui.padding+1,_&&(e+=$/2+da),"translate("+Math.round(d)+","+Math.round(e)+")"}),R.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),g=d3.svg.brush().x(ca).extent(n).on("brush",p).on("brushend",q),U=a.axes.discrete&&a[a.axes.discrete].value===a.time.value?a[a.axes.discrete].ticks.color:a.x.ticks.color,W.attr("transform","translate("+N+","+(a.ui.padding+1)+")").transition().duration(a.draw.timing).call(d3.svg.axis().scale(ca).orient("top").ticks(function(){return fa}).tickFormat("").tickSize(-$).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(b){return ba.indexOf(+b)>=0?U:h(U,a.background.value,.4,1)}),W.selectAll("path").attr("fill","none"),o.attr("transform","translate("+N+","+(a.ui.padding+1)+")").attr("opacity",1).call(g),R.attr("pointer-events","none"),o.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",$).attr("shape-rendering","crispEdges").on(f.move,function(){var b;return b=a.timeline.hover.value,["grab","grabbing"].indexOf(b)>=0&&(b=j()+b),d3.select(this).style("cursor",b)}),o.selectAll("rect.extent").attr("opacity",.75).attr("height",$).attr("fill",a.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(f.move,function(){var b;return b=a.timeline.hover.value,["grab","grabbing"].indexOf(b)>=0&&(b=j()+b),d3.select(this).style("cursor",b)}),a.timeline.handles.value?(t=o.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),t.enter().insert("rect","rect").attr("class","d3plus_handle"),t.attr("fill",a.timeline.handles.color).attr("transform",function(b){var c;return c="resize e"===this.parentNode.className.baseVal?-a.timeline.handles.size:0,"translate("+c+",0)"}).attr("width",a.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",a.timeline.handles.opacity),
o.selectAll("g.resize").selectAll("rect").attr("height",$)):o.selectAll("g.resize").remove(),Z=a.g.timeline.node().getBBox(),0===a.margin.bottom&&(a.margin.bottom+=a.ui.padding),a.margin.bottom+=Z.height+Z.y,a.g.timeline.transition().duration(a.draw.timing).attr("transform","translate(0,"+Math.round(a.height.value-a.margin.bottom-a.ui.padding/2)+")"),a.margin.bottom+=a.ui.padding,a.dev.value?k.time("drawing timeline"):void 0}},{"../../../client/css.coffee":38,"../../../client/pointer.coffee":40,"../../../client/prefix.coffee":41,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/time.coffee":64,"../../../font/sizes.coffee":104,"../../../util/closest.coffee":209}],251:[function(a,b,c){var d=a("../../../client/pointer.coffee"),e=a("../../../core/fetch/value.coffee"),f=a("../../../core/console/print.coffee"),g=a("../../../client/rtl.coffee"),h=a("../../../textwrap/textwrap.coffee");b.exports=function(a){function b(b){b.attr("font-size",function(a){return a.style.font.size}).attr("fill",function(b){return b.link?a.links.font.color:b.style.font.color}).attr("font-family",function(b){return b.link?a.links.font.family.value:b.style.font.family.value}).attr("font-weight",function(b){return b.link?a.links.font.weight:b.style.font.weight}).style("text-decoration",function(b){return b.link?a.links.font.decoration.value:b.style.font.decoration.value}).style("text-transform",function(b){return b.link?a.links.font.transform.value:b.style.font.transform.value})}function c(a){var b=a.style.font.align;return"center"==b?"middle":"left"==b&&!g||"right"==b&&g?"start":"left"==b&&g||"right"==b&&!g?"end":b}var i=a.size.value?a.size.value:"number"===a.color.type?a.color.value:!1;if(a.data.viz&&a.title.total.value&&!a.small)if(i){a.dev.value&&f.time("calculating total value");var j=a.data.pool;a.focus.value.length&&(j=a.data.viz.filter(function(b){return b[a.id.value]==a.focus.value[0]}));var k,l=a.aggs.value[i]||"sum";if(l.constructor===Function?k=l(j):(j=j.reduce(function(b,c){var d=e(a,c,i);return d instanceof Array?b=b.concat(d):b.push(d),b},[]),k=d3[l](j)),(0===k||null===k||void 0===k)&&(k=!1),"number"==typeof k){var m="";if(a.data.mute.length||a.data.solo.length||a.focus.value.length){var n=d3.sum(a.data.value,function(b){if(a.time.solo.value.length>0)var c=a.time.solo.value.indexOf(e(a,b,a.time.value))>=0;else if(a.time.mute.value.length>0)var c=a.time.solo.value.indexOf(e(a,b,a.time.value))<0;else var c=!0;return c?e(a,b,i):void 0});if(n>k){var m=k/n*100,o=a.format.value(n,{key:a.size.value,vars:a});m=" ("+a.format.value(m,{key:"share",vars:a})+" of "+o+")"}}k=a.format.value(k,{key:a.size.value,vars:a});var p=a.title.total.value,q=p.prefix||a.format.value(a.format.locale.value.ui.total)+": ";k=q+k,p.suffix?k+=p.suffix:null,k+=m}a.dev.value&&f.timeEnd("calculating total value")}else var k=!1;else var k=!1;var r=[];if(a.footer.value&&r.push({link:a.footer.link,style:a.footer,type:"footer",value:a.footer.value}),!a.small){if(a.title.value){var s=a.title.value;"function"==typeof s&&(s=s(a.self)),r.push({link:a.title.link,style:a.title,type:"title",value:s})}if(a.title.sub.value){var s=a.title.sub.value;"function"==typeof s&&(s=s(a.self)),r.push({link:a.title.sub.link,style:a.title.sub,type:"sub",value:s})}a.title.total.value&&k&&r.push({link:a.title.total.link,style:a.title.total,type:"total",value:k})}a.dev.value&&f.time("drawing titles");var t=a.svg.selectAll("g.d3plus_title").data(r,function(a){return a.type}),u=a.title.width||a.width.value-a.margin.left-a.margin.right;t.enter().append("g").attr("class",function(a){return"d3plus_title "+a.type}).attr("opacity",0).append("text").attr("stroke","none").call(b),t.each(function(d){var e=d3.select(this).select("text").call(b),f=c(d);h().align(f).container(e).height(a.height.value/2).size(!1).text(d.value).width(u).draw(),d.y=a.margin[d.style.position],a.margin[d.style.position]+=this.getBBox().height+2*d.style.padding}).on(d.over,function(b){b.link&&d3.select(this).transition().duration(a.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",a.links.hover.color).attr("font-family",a.links.hover.family.value).attr("font-weight",a.links.hover.weight).style("text-decoration",a.links.hover.decoration.value).style("text-transform",a.links.hover.transform.value)}).on(d.out,function(c){c.link&&d3.select(this).transition().duration(a.timing.mouseevents).style("cursor","auto").select("text").call(b)}).on(d.click,function(a){if(a.link){var b="/"!=a.link.charAt(0)?"_blank":"_self";window.open(a.link,b)}}).attr("opacity",1).attr("transform",function(b){var d=b.style.position,e="top"==d?0+b.y:a.height.value-b.y;"bottom"==d?e-=this.getBBox().height+b.style.padding:e+=b.style.padding;var f=c(b);if("start"===f)var g=a.margin.left+a.title.padding;else{d3.select(this).select("text").node().getBBox().width;g="middle"===f?a.width.value/2-u/2:a.width.value-u-a.margin.right-a.title.padding}return"translate("+g+","+e+")"}),t.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),a.margin.top>0&&(a.margin.top+=a.title.padding),a.margin.bottom>0&&(a.margin.bottom+=a.title.padding);var v=a.title.height;v&&a.margin[a.title.position]<v&&(a.margin[a.title.position]=v),a.dev.value&&f.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":40,"../../../client/rtl.coffee":42,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../textwrap/textwrap.coffee":203}],252:[function(a,b,c){var d,e;d=a("./labels.coffee"),e=a("./transform.coffee"),b.exports=function(a,b,c){var f,g,h,i,j,k,l,m,n;return b||(b=a.zoom.bounds),"number"!=typeof c&&(c=a.timing.transitions),a.zoom.size={height:b[1][1]-b[0][1],width:b[1][0]-b[0][0]},n=a.types[a.type.value],h=a.coords.fit.value,f="auto"===h||n.requirements.indexOf("coords")<0?d3.max([a.zoom.size.width/a.width.viz,a.zoom.size.height/a.height.viz]):a.zoom.size[h]/a["app_"+h],j=d3.min([a.width.viz,a.height.viz]),k=n.zoom?2*a.coords.padding:0,l=(j-k)/j/f,g=a.zoom.behavior.scaleExtent(),(g[0]===g[1]||b===a.zoom.bounds)&&a.zoom.behavior.scaleExtent([l,16*l]),i=a.zoom.behavior.scaleExtent()[1],l>i&&(l=i),a.zoom.scale=l,m=[a.width.viz/2-a.zoom.size.width*l/2-b[0][0]*l,a.height.viz/2-a.zoom.size.height*l/2-b[0][1]*l],a.zoom.translate=m,a.zoom.behavior.translate(m).scale(l),a.zoom.size={height:a.zoom.bounds[1][1]-a.zoom.bounds[0][1],width:a.zoom.bounds[1][0]-a.zoom.bounds[0][0]},a.zoom.reset=!1,(a.labels.value||a.labels.changed)&&d(a),e(a,c)}},{"./labels.coffee":254,"./transform.coffee":257}],253:[function(a,b,c){b.exports=function(a,b){var c,d,e;return d=b.id.nesting.length-1,c=b.depth.value,e=b.id.nesting[c+1],b.types[b.type.value].nesting===!1?0:(a.d3plus.merged||e in a&&d>c)&&(!a||e in a)?1:!(c===d&&c>0||a&&e&&!(e in a))||!b.small&&b.tooltip.html.value?0:-1}},{}],254:[function(a,b,c){var d;d=a("../../../core/console/print.coffee"),b.exports=function(a){var b,c;return a.dev.value&&d.time("determining label visibility"),c=a.zoom.behavior.scaleExtent(),b=function(b){return b.attr("opacity",function(b){var d;return b||(b={}),d=parseFloat(d3.select(this).attr("font-size"),10),b.visible=d*(a.zoom.scale/c[1])>=2,b.visible?1:0})},a.draw.timing?a.g.viz.selectAll("text.d3plus_label").transition().duration(a.draw.timing).call(b):a.g.viz.selectAll("text.d3plus_label").call(b),a.dev.value?d.timeEnd("determining label visibility"):void 0}},{"../../../core/console/print.coffee":54}],255:[function(a,b,c){var d,e,f;d=a("./labels.coffee"),e=a("../../../tooltip/remove.coffee"),f=a("./transform.coffee"),b.exports=function(a){var b,c,g,h,i,j,k,l,m,n,o;return c=d3.event.sourceEvent?d3.event.sourceEvent.type:null,i=d3.event.translate,h=d3.event.scale,g=a.zoom.bounds,l=(a.width.viz-a.zoom.size.width*h)/2,k=l>0?l:0,j=l>0?a.width.viz-l:a.width.viz,o=(a.height.viz-a.zoom.size.height*h)/2,n=o>0?o:0,m=o>0?a.height.viz-o:a.height.viz,i[0]+g[0][0]*h>k?i[0]=-g[0][0]*h+k:i[0]+g[1][0]*h<j&&(i[0]=j-g[1][0]*h),i[1]+g[0][1]*h>n?i[1]=-g[0][1]*h+n:i[1]+g[1][1]*h<m&&(i[1]=m-g[1][1]*h),a.zoom.behavior.translate(i).scale(h),a.zoom.translate=i,a.zoom.scale=h,"wheel"===c&&e(a.type.value),(a.labels.value||a.labels.changed)&&("wheel"===c?(b=a.draw.timing?100:250,clearTimeout(a.zoom.wheel),a.zoom.wheel=setTimeout(function(){return d(a)},b)):d(a)),"dblclick"===c?f(a,a.timing.transitions):f(a,0)}},{"../../../tooltip/remove.coffee":206,"./labels.coffee":254,"./transform.coffee":257}],256:[function(a,b,c){b.exports=function(a,b){var c,d,e,f;d=a.zoom,b||(b=d3.event),f=d.scale>d.behavior.scaleExtent()[0],c=a.types[a.type.value].zoom&&d.value&&d.scroll.value,e=b.touches&&b.touches.length>1&&c,e||f||b.stopPropagation()}},{}],257:[function(a,b,c){b.exports=function(a,b){var c;return"number"!=typeof b&&(b=a.timing.transitions),c="translate("+a.zoom.translate+")",c+="scale("+a.zoom.scale+")",b?a.g.viz.transition().duration(b).attr("transform",c):a.g.viz.attr("transform",c)}},{}],258:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:d(!0),solo:d(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],259:[function(a,b,c){b.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],260:[function(a,b,c){var d;d=a("../../core/methods/process/data.coffee"),b.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:d,value:!1}},{"../../core/methods/process/data.coffee":89}],261:[function(a,b,c){var d,e;d=a("../../core/methods/process/margin.coffee"),e=a("../../core/methods/rendering.coffee"),b.exports={background:{color:"#fafafa",rendering:e(),stroke:{color:"#ccc",width:1}},margin:{accepted:[Number,Object,String],process:function(a){var b;return void 0===a&&(a=this.value),b=a,d(a,this),b},value:10},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1},ticks:{accepted:[Boolean],value:!0}}},{"../../core/methods/process/margin.coffee":92,"../../core/methods/rendering.coffee":94}],262:[function(a,b,c){b.exports={accepted:[String],value:"#ffffff"}},{}],263:[function(a,b,c){b.exports={accepted:[Function,String],value:!1}},{}],264:[function(a,b,c){var d,e;d=a("../../core/methods/filter.coffee"),e=a("../../color/scale.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",domain:{accepted:[!1,Array],value:!1},focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:d(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(a){return a instanceof Array?d3.scale.ordinal().range(a):"d3plus"===a?e:"string"==typeof a?d3.scale[a]():a},value:"d3plus"},solo:d(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":50,"../../core/methods/filter.coffee":83}],265:[function(a,b,c){b.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(a,b){return"string"==typeof a&&(a=[a]),a},value:!1}},{}],266:[function(a,b,c){arguments[4][110][0].apply(c,arguments)},{dup:110}],267:[function(a,b,c){var d;d=a("../../util/d3selection.coffee"),b.exports={accepted:[!1,Array,Object,String],id:"default",process:function(a,b){return a===!1?!1:("default"===b.container.id&&b.self.container({id:"d3plus_"+ +new Date}),d(a)?a.append("div"):a instanceof Array?d3.select(a[0][0]).append("div"):(this.selector=a,d3.select(a).append("div")))},value:!1}},{"../../util/d3selection.coffee":211}],268:[function(a,b,c){var d,e;d=a("../../core/methods/filter.coffee"),e=a("../../core/methods/process/data.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:d(!1),padding:20,process:e,projection:{accepted:["albers","albersUsa","azimuthalEqualArea","azimuthalEquidistant","conicConformal","conicEqualArea","conicEquidistant","equirectangular","gnomonic","mercator","orthographic","stereographic","transverseMercator",Function],value:"mercator"},simplify:{accepted:[Boolean],value:!0},solo:d(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":83,"../../core/methods/process/data.coffee":89}],269:[function(a,b,c){var d,e,f;d=a("../../core/fetch/value.coffee"),e=a("../../client/ie.js"),f=a("../../string/strip.js"),b.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(a,b){var c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;if(void 0===b.returned)return[];if(a=a||b.cols.value,a instanceof Array?i=a:"string"==typeof a&&(i=[a]),k=[],N=[],b.title.value?(M=b.title.value,"function"==typeof M&&(M=M(b.self)),M=f(M),C=250,M=M.substr(0,C)):M="D3plus Visualization Data",a===!0)for(i=d3.keys(b.data.keys),k.push(i),I=b.data.value,p=0,s=I.length;s>p;p++){for(l=I[p],L=[],q=0,t=i.length;t>q;q++)g=i[q],O=l[g],"string"===b.data.keys[g]&&(O='"'+O+'"'),L.push(O);k.push(L)}else{for(i||(i=[b.id.value],b.time.value&&i.push(b.time.value),b.size.value&&i.push(b.size.value),b.text.value&&i.push(b.text.value)),r=0,u=i.length;u>r;r++)g=i[r],N.push(b.format.value(g));for(k.push(N),J=b.returned.nodes,B=0,v=J.length;v>B;B++)if(E=J[B],null!=E.values&&E.values instanceof Array)for(K=E.values,D=0,w=K.length;w>D;D++){for(O=K[D],L=[],F=0,x=i.length;x>F;F++)h=i[F],O=d(b,O,h),"string"==typeof O&&(O='"'+O+'"'),L.push(O);k.push(L)}else{for(L=[],G=0,y=i.length;y>G;G++)h=i[G],L.push(d(b,E,h));k.push(L)}}for(j="data:text/csv;charset=utf-8,",o=H=0,z=k.length;z>H;o=++H)g=k[o],m=g.join(","),j+=o<k.length?m+"\n":m;return e?(c=new Blob([j],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(c,M+".csv")):(n=encodeURI(j),A=document.createElement("a"),A.setAttribute("href",n),A.setAttribute("download",M+".csv"),A.click()),this.data=k,i},value:void 0}},{"../../client/ie.js":39,"../../core/fetch/value.coffee":69,"../../string/strip.js":178}],270:[function(a,b,c){var d;d=a("../../core/methods/process/data.coffee"),b.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(a,b){return d(a,b,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":89}],271:[function(a,b,c){b.exports={accepted:[Function,Number],value:0}},{}],272:[function(a,b,c){b.exports={accepted:[!1,Function,Object],value:!1}},{}],273:[function(a,b,c){arguments[4][114][0].apply(c,arguments)},{dup:114}],274:[function(a,b,c){var d=a("../../core/console/print.coffee"),e=a("../../string/format.js");b.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(a,b){if(this.initialized===!1)return this.initialized=!0,a;if(void 0===a&&"function"==typeof this.value&&(a=this.value),b.container.value===!1){var c=b.format.locale.value.dev.setContainer;d.warning(c,"container")}else if(b.container.value.empty()){var c=b.format.locale.value.dev.noContainer,f=b.container.selector||"";d.warning(e(c,'"'+f+'"'),"container")}else b.dev.value&&d.time("total draw time"),b.container.value.call(b.self);if("function"==typeof a&&b.history.chain.length){var g={};b.history.chain.forEach(function(a){var b=a.method;delete a.method,g[b]=a}),a(g),b.history.chain=[]}return a},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":176}],275:[function(a,b,c){var d=a("../../core/methods/process/data.coffee");b.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(a,b,c){var d=this;if(!d.value)return[];if(!b)var b="id";var e=d.restricted||d.value,f=[];if(!a)return e;var g=e.filter(function(e){var g=!1;return e[d.source][b]==a?(g=!0,c&&f.push(e[d.target])):e[d.target][b]==a&&(g=!0,c&&f.push(e[d.source])),g});return c?f:g},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:d,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":89}],276:[function(a,b,c){b.exports={accepted:[Boolean,String],value:!1}},{}],277:[function(a,b,c){b.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(a){return a===!1?[]:a instanceof Array?a:[a]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],278:[function(a,b,c){var d,e,f,g;d=a("../../core/methods/font/align.coffee"),e=a("../../core/methods/font/decoration.coffee"),f=a("../../core/methods/font/family.coffee"),g=a("../../core/methods/font/transform.coffee"),b.exports={align:d(),color:"#444444",decoration:e(),family:f(),secondary:{align:d(),color:"#444444",decoration:e(),family:f(),size:12,spacing:0,transform:g(),weight:200},size:12,spacing:0,transform:g(),weight:200}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],279:[function(a,b,c){var d,e,f;e=a("../../core/methods/font/family.coffee"),d=a("../../core/methods/font/decoration.coffee"),f=a("../../core/methods/font/transform.coffee"),b.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:d(),family:e(),size:11,transform:f(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],280:[function(a,b,c){var d,e,f,g;d=a("../../number/format.coffee"),e=a("../../core/locale/locale.coffee"),f=a("../../object/merge.coffee"),g=a("../../string/title.coffee"),b.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(e)},process:function(a){var b,c;return b="en_US",c=e[b],a!==b&&(c=f(c,e[a])),this.language=a,c},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(a,b){if("string"==typeof a)b.self.format({locale:a});else if("function"==typeof a)return a;return this.value},text:{accepted:[!1,Function],value:!1},value:function(a,b){var c,e,f;return b||(b={}),b.locale||(b.locale=this.locale.value),f=b.vars||{},f.time&&f.time.value&&b.key===f.time.value?(e=a.constructor===Date?a:new Date(a),f.data.time.format(e)):"number"==typeof a?(c=this.number.value||d)(a,b):"string"==typeof a?(c=this.text.value||g)(a,b):JSON.stringify(a)}}},{"../../core/locale/locale.coffee":81,"../../number/format.coffee":173,"../../object/merge.coffee":174,"../../string/title.coffee":179}],281:[function(a,b,c){b.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],282:[function(a,b,c){var d,e,f,g,h,i,j,k;d=a("../../../core/methods/font/align.coffee"),e=a("../../../core/methods/font/decoration.coffee"),f=a("../../../core/methods/font/family.coffee"),g=a("../../../core/methods/filter.coffee"),i=a("../../../core/methods/font/position.coffee"),j=a("../../../core/methods/rendering.coffee"),k=a("../../../core/methods/font/transform.coffee"),h={x:"bottom",x2:"top",y:"left",y2:"right"},b.exports=function(a){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:e(!1),family:f(""),size:!1,spacing:0,transform:k(!1),weight:!1},rendering:j(),value:!0},dataFilter:!0,deprecates:[a+"axis",a+"axis_val",a+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:j(),value:!0},label:{accepted:[Boolean,String],fetch:function(b){return this.value===!0?b.format.value(b[a].value,{key:a,vars:b}):this.value},font:{color:"#444",decoration:e(),family:f(),size:12,spacing:0,transform:k(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(a){return a instanceof Array&&(a=a.filter(function(a){return!isNaN(a)}),a=a.length?a.join(", "):"none"),a},value:"10, 10"},color:"#888",font:{align:d("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:e(),family:f(),padding:{accepted:[Number],value:10},position:i("middle"),size:12,transform:k(),weight:200},process:Array,rendering:j(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(a){return a instanceof Array&&(a=a.filter(function(a){return!isNaN(a)}),a=a.length?a.join(", "):"none"),a},value:"none"},rendering:j(),width:2,value:!0},mute:g(!0),orient:{accepted:["top","right","bottom","left"],value:h[a]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",a+"axis_scale"],process:function(b,c){var d,e,f,g;for(f=["log","discrete","share"],d=0,e=f.length;e>d;d++)g=f[d],g===b?c.axes[g]=a:c.axes[g]===a&&(c.axes[g]=!1);return"discrete"===b&&(c.axes.opposite=0===a.indexOf("x")?"y":"x"),b},value:"linear"},solo:g(!0),stacked:{accepted:[Boolean],process:function(b,c){return b||c.axes.stacked!==a?b&&(c.axes.stacked=a):c.axes.stacked=!1,b},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:e(),family:f(),size:10,spacing:0,transform:k(),weight:200},labels:{accepted:[Boolean,Array],value:!0},rendering:j(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":83,"../../../core/methods/font/align.coffee":84,"../../../core/methods/font/decoration.coffee":85,"../../../core/methods/font/family.coffee":86,"../../../core/methods/font/position.coffee":87,"../../../core/methods/font/transform.coffee":88,"../../../core/methods/rendering.coffee":94}],283:[function(a,b,c){b.exports={accepted:[Boolean],back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var a;for(a=[];this.states.length;)a.push(this.states.pop()());return a},states:[],value:!0}},{}],284:[function(a,b,c){var d;d=a("../../core/methods/process/icon.coffee"),b.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:d,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":91}],285:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:d(!0),nesting:["id"],solo:d(!0),value:"id"}},{"../../core/methods/filter.coffee":83}],286:[function(a,b,c){var d,e,f;d=a("../../core/methods/font/decoration.coffee"),e=a("../../core/methods/font/family.coffee"),f=a("../../core/methods/font/transform.coffee"),b.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(a){var b;return b=["left","center","right"].indexOf(a),b>=0&&(a=this.accepted[b]),a},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:d(),family:e(),size:11,transform:f(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],287:[function(a,b,c){var d;d=a("../../core/methods/font/family.coffee"),b.exports={accepted:[Boolean],align:"middle",data:{accepted:[Boolean],value:!0},filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:d(),size:[8,14],weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text",Function],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},title:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":86}],288:[function(a,b,c){var d,e,f;d=a("../../core/methods/font/decoration.coffee"),e=a("../../core/methods/font/family.coffee"),f=a("../../core/methods/font/transform.coffee"),b.exports={font:{color:"#444444",decoration:d(),family:e(),transform:f(),weight:200},hover:{color:"#444444",decoration:d(),family:e(),transform:f(),weight:200}}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],289:[function(a,b,c){arguments[4][125][0].apply(c,arguments)},{"../../core/methods/process/margin.coffee":92,dup:125}],290:[function(a,b,c){var d,e,f;d=a("../../core/methods/font/decoration.coffee"),e=a("../../core/methods/font/family.coffee"),f=a("../../core/methods/font/transform.coffee"),b.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},branding:{accepted:[Boolean],image:{dark:"http://d3plus.org/assets/img/icon-transparent-invert.png",light:"http://d3plus.org/assets/img/icon-transparent.png"},value:!1},font:{color:"#444",decoration:d(),family:e(),size:16,transform:f(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],291:[function(a,b,c){b.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}},{}],292:[function(a,b,c){var d;d=a("../../core/methods/process/data.coffee"),b.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:d,value:!1}},{"../../core/methods/process/data.coffee":89}],293:[function(a,b,c){b.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],294:[function(a,b,c){b.exports={accepted:[Boolean],value:!1,timeout:400,process:function(a,b){var c,d;return a?(c=null,d=function(){var a,c,d;return c=b.container.value.node().parentNode.getBoundingClientRect(),d=c.width,a=c.height,b.self.width(d),b.self.height(a),b.width.changed||b.height.changed?b.self.draw():void 0},d3.select(window).on("resize."+b.container.id,function(a){return function(b){return clearTimeout(c),c=setTimeout(d,a.timeout)}}(this)),a):!1}}},{}],295:[function(a,b,c){var d;d=a("../../core/methods/rendering.coffee"),b.exports={accepted:function(a){var b;return b=a.types[a.type.value].shapes,!b||b instanceof Array||(b=[b]),b.length?b:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:d(),value:!1}},{"../../core/methods/rendering.coffee":94}],296:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:d(!0),scale:{accepted:[Function],deprecates:"size_scale",domain:{min:{accepted:[!1,Number],value:!1},max:{accepted:[!1,Number],value:!1}},range:{max:{accepted:[Function,Number],value:function(a){return Math.floor(d3.max([d3.min([a.width.viz,a.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3}},value:d3.scale.sqrt()},solo:d(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}},{"../../core/methods/filter.coffee":83}],297:[function(a,b,c){b.exports={value:!1}},{}],298:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:d(!0),solo:d(!0),value:!1}},{"../../core/methods/filter.coffee":83}],299:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:d(!0),solo:d(!0),value:!1}},{"../../core/methods/filter.coffee":83}],300:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:d(!1),solo:d(!1),value:!1}},{"../../core/methods/filter.coffee":83}],301:[function(a,b,c){b.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:"►"},pause:{accepted:[!1,String],awesome:"",fallback:"❚❚"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],302:[function(a,b,c){b.exports={mouseevents:60,transitions:600,ui:200}},{}],303:[function(a,b,c){var d,e,f,g;d=a("../../core/methods/font/decoration.coffee"),e=a("../../core/methods/font/family.coffee"),g=a("../../core/methods/font/transform.coffee"),f=a("../../string/strip.js"),b.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:d(),family:e(),size:16,transform:g(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(a,b){var c;return 0===b.container.id.indexOf("default")&&a&&(c=f(a).toLowerCase(),b.self.container({id:c})),a},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:d(),family:e(),size:12,transform:g(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:d(),family:e(),size:12,transform:g(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88,"../../string/strip.js":178}],304:[function(a,b,c){var d,e;d=a("../../core/methods/font/family.coffee"),e=a("../../core/methods/font/transform.coffee"),b.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean,Number],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:d(),size:12,transform:e(),weight:200},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":86,
"../../core/methods/font/transform.coffee":88}],305:[function(a,b,c){var d;d=a("../../core/methods/filter.coffee"),b.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:d(!0),solo:d(!0),value:!1}},{"../../core/methods/filter.coffee":83}],306:[function(a,b,c){b.exports={accepted:function(a){return d3.keys(a.types)},mode:{accepted:function(a){return a.types[a.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],307:[function(a,b,c){var d,e,f,g;f=a("../../core/methods/font/family.coffee"),d=a("../../core/methods/font/align.coffee"),e=a("../../core/methods/font/decoration.coffee"),g=a("../../core/methods/font/transform.coffee"),b.exports={accepted:[Array,Boolean],align:d("center"),border:1,color:{primary:{process:function(a,b){var c;return c=this.value,b.ui.color.secondary.value||(b.ui.color.secondary.value=d3.rgb(c).darker(.75).toString()),a},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:e(),family:f(),size:11,transform:g(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":84,"../../core/methods/font/decoration.coffee":85,"../../core/methods/font/family.coffee":86,"../../core/methods/font/transform.coffee":88}],308:[function(a,b,c){b.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],309:[function(a,b,c){b.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],310:[function(a,b,c){var d,e,f,g,h,i,j,k;e=a("../../util/closest.coffee"),f=a("../../core/fetch/value.coffee"),g=a("./helpers/graph/draw.coffee"),h=a("./helpers/graph/nest.coffee"),i=a("../../array/sort.coffee"),j=a("./helpers/graph/stack.coffee"),k=a("../../core/data/threshold.js"),d=function(a){var b,c,d,e,h,k,l,m,n,o,p;if(g(a,{buffer:a.axes.opposite,zero:!0}),e=a.x.domain.viz.concat(a.y.domain.viz),e.indexOf(void 0)>=0)return[];for(c=i(a.data.viz,null,null,null,a),d=a[a.axes.discrete],n=a[a.axes.opposite],h=0,l=c.length;l>h;h++)for(o=c[h],o.d3plus||(o.d3plus={}),p=o.values,k=0,m=p.length;m>k;k++)b=p[k],b.d3plus||(b.d3plus={}),b.d3plus.x=d.scale.viz(f(a,b,d.value)),b.d3plus.x+=a.axes.margin.viz.left,b.d3plus.y=n.scale.viz(f(a,b,n.value)),b.d3plus.y+=a.axes.margin.viz.top,b.d3plus.merged instanceof Array&&(o.d3plus.merged||(o.d3plus.merged=[]),o.d3plus.merged=o.d3plus.merged.concat(b.d3plus.merged)),b.d3plus.text&&!o.d3plus.text&&(o.d3plus.text=b.d3plus.text);return j(a,c)},d.filter=function(a,b){return h(a,k(a,b,a[a.axes.discrete].value))},d.requirements=["data","x","y"],d.setup=function(a){var b,c,d;return a.axes.discrete||(b=a.time.value===a.y.value?"y":"x",a.self[b]({scale:"discrete"})),a[a.axes.discrete].zerofill.value||a.self[a.axes.discrete]({zerofill:!0}),a[a.axes.opposite].stacked.value||"stacked"!==a.type.value||a.self[a.axes.opposite]({stacked:!0}),d=a[a.axes.opposite],c=a.size,!d.value&&c.value||c.changed&&c.previous===d.value?a.self[a.axes.opposite](c.value):!c.value&&d.value||d.changed&&d.previous===c.value?a.self.size(d.value):void 0},d.shapes=["area"],d.threshold=function(a){return 20/a.height.viz},d.tooltip="static",b.exports=d},{"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/value.coffee":69,"../../util/closest.coffee":209,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],311:[function(a,b,c){var d,e,f,g,h,i,j,k=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e=a("../../util/buckets.coffee"),f=a("../../core/fetch/value.coffee"),g=a("./helpers/graph/draw.coffee"),h=a("./helpers/graph/nest.coffee"),i=a("./helpers/graph/stack.coffee"),j=a("../../util/uniques.coffee"),d=function(a){var b,c,d,h,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;if(m=a.axes.discrete,q="x"===m?"height":"width",S="x"===m?"width":"height",K=a.axes.opposite,d="x"===m?"left":"top",F="x"===m?"top":"left",g(a,{buffer:!0,zero:K}),p=a.x.domain.viz.concat(a.y.domain.viz),p.indexOf(void 0)>=0)return[];if(D=a.data.viz,a.axes.stacked)for(t=0,w=D.length;w>t;t++)N=D[t],i(a,N.values);for(Q=a.axes[S]/a[a.axes.discrete].ticks.values.length,M=a[a.axes.discrete].padding.value,1>M&&(M*=Q),2*M>Q&&(M=.1*Q),B=Q-2*M,a.axes.stacked||(a[m].persist.position.value?(O=a[m].value,o=k.call(a.id.nesting,O)>=0?d3.max(D,function(a){return a.values.length}):j(D,a.id.value,f,a).length,B/=o,G=Q/2-B/2-M,T=d3.scale.ordinal(),1===o?T.domain([0]).range([0]):T.domain([0,o-1]).range([-G,G])):T=d3.scale.linear()),l=[],I=a[K],H=I.scale.viz.domain().slice(),0===K.indexOf("y")&&(H=H.reverse()),H[0]<=0&&H[1]>=0?U=0:H[0]<0?U(d3.max(H)):U=d3.min(H),a[m].persist.position.value&&!a.axes.stacked&&(s=j(d3.merge(D.map(function(a){return a.values})),a.id.value,f,a,a.id.value,!1),T.domain(s),1===s.length?T.range([0]):T.range(e(T.range(),s.length))),A=d3.max(D,function(a){return a.values.length}),u=0,x=D.length;x>u;u++)for(L=D[u],a.axes.stacked?(b=1,E=B):a[m].persist.position.value?(b=o,E=B):(b=L.values.length,a[m].persist.size.value?(E=B/A,G=Q/2-(A-b)*(E/2)-E/2-M):(E=B/b,G=Q/2-E/2-M),T.domain([0,b-1]),T.range([-G,G])),P=L.values,r=v=0,y=P.length;y>v;r=++v){if(h=P[r],C=a.axes.stacked?0:T(a[m].persist.position.value?f(a,h,a.id.value):r%b),a.axes.stacked)R=h.d3plus[K],c=h.d3plus[K+"0"];else{if(J=f(a,h,I.value),null===J&&(I=a[K+"2"],J=f(a,h,I.value)),0===J)continue;"log"===I.scale.value&&(U=0>J?-1:1),R=I.scale.viz(J),c=I.scale.viz(U)}n=f(a,h,a[m].value),h.d3plus[m]=a[m].scale.viz(n),h.d3plus[m]+=a.axes.margin.viz[d]+C,z=c-R,h.d3plus[K]=c-z/2,a.axes.stacked||(h.d3plus[K]+=a.axes.margin.viz[F]),delete h.d3plus.r,h.d3plus[S]=E,h.d3plus[q]=Math.abs(z),h.d3plus.init={},h.d3plus.init[K]=I.scale.viz(U),h.d3plus.init[K]-=h.d3plus[K],h.d3plus.init[K]+=a.axes.margin.viz[F],h.d3plus.init[S]=h.d3plus[S],a.text.value?delete h.d3plus.label:h.d3plus.label=!1,l.push(h)}return l},d.filter=function(a,b){return h(a,b,a[a.axes.discrete].value)},d.requirements=["data","x","y"],d.setup=function(a){var b,c,d;return a.axes.discrete||(b=a.time.value===a.y.value?"y":"x",a.self[b]({scale:"discrete"})),d=a[a.axes.opposite],c=a.size,!d.value&&c.value||c.changed&&c.previous===d.value?a.self[a.axes.opposite](c.value):!c.value&&d.value||d.changed&&d.previous===c.value?a.self.size(d.value):void 0},d.shapes=["square"],b.exports=d},{"../../core/fetch/value.coffee":69,"../../util/buckets.coffee":207,"../../util/uniques.coffee":213,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],312:[function(a,b,c){var d,e,f,g,h,i;e=a("../../core/fetch/value.coffee"),f=a("./helpers/graph/draw.coffee"),g=a("../../string/format.js"),h=a("../../string/strip.js"),i=a("../../util/uniques.coffee"),d=function(a){var b,c,d,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return f(a,{buffer:!0}),j=a.x.domain.viz.concat(a.y.domain.viz),j.indexOf(void 0)>=0?[]:(d=a.axes.discrete,u=a.axes.opposite,c="x"===d?a.axes.margin.viz.left:a.axes.margin.viz.top,t="x"===u?a.axes.margin.viz.left:a.axes.margin.viz.top,k="x"===d?"height":"width",C="x"===d?"width":"height",A=a.axes[C]/a[d].ticks.values.length,z=a.size.value,z="number"==typeof z?z:100,A=d3.min([A-2*a.labels.padding,z]),r=a.type.mode.value,r instanceof Array||(r=[r,r]),p=function(b){var c,d,f;d={};for(c in a.data.keys)f=i(b,c,e,a),d[c]=1===f.length?f[0]:f;return d},s=!1,n=[],l=a.format.value(a.format.locale.value.ui.iqr),m=a.format.value(a.format.locale.value.ui.max),q=a.format.value(a.format.locale.value.ui.min),v=a.format.value(a.format.locale.value.ui.percentile),b=a.format.value(a.format.locale.value.ui.tukey_bottom),B=a.format.value(a.format.locale.value.ui.tukey_top),w=a.format.value(a.format.locale.value.ui.quartile_first),x=a.format.value(a.format.locale.value.ui.quartile_third),o=a.format.value(a.format.locale.value.ui.median),y=[],d3.nest().key(function(b){return e(a,b,a[d].value)}).rollup(function(f){var j,z,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea;for(W=a[u].scale.viz,ca=f.map(function(b){return e(a,b,a[u].value)}),ca.sort(function(a,b){return a-b}),aa=i(ca),I=d3.quantile(ca,.25),Q=d3.quantile(ca,.5),X=d3.quantile(ca,.75),Y={},"tukey"===r[1]?(K=I-X,Z=X-1.5*K,$=B):"extent"===r[1]?(Z=d3.max(ca),$=m):"number"==typeof r[1]&&(Z=d3.quantile(ca,(100-r[1])/100),$=g(v,r[1])),Z=d3.min([d3.max(ca),Z]),a.tooltip.extent.value&&(Y[$]={key:a[u].value,value:Z}),a.tooltip.iqr.value&&(Y[x]={key:a[u].value,value:X},Y[o]={key:a[u].value,value:Q},Y[w]={key:a[u].value,value:I}),"tukey"===r[0]?(K=I-X,j=I+1.5*K,z=b):"extent"===r[0]?(j=d3.min(ca),z=q):"number"==typeof r[0]&&(j=d3.quantile(ca,r[0]/100),$=g(v,r[0])),j=d3.max([d3.min(ca),j]),a.tooltip.extent.value&&(Y[z]={key:a[u].value,value:j}),E=[],D=[],_=[],V=[],J=0,O=f.length;O>J;J++)F=f[J],ba=e(a,F,a[u].value),ba>=I&&X>=ba?E.push(F):ba>=j&&I>ba?D.push(F):Z>=ba&&ba>X?_.push(F):V.push(F);for(M=e(a,f[0],a[d].value),da=a[d].scale.viz(M),da+=c,N=a.format.value(M,{key:a[d].value,vars:a}),M.constructor===Date&&(M=M.getTime()),M=h(M),E=p(E),E.d3plus={color:"white",id:"box_"+M,init:{},label:!1,shape:"square",stroke:"#444",text:g(l,N)},E.d3plus[C]=A,E.d3plus.init[C]=A,E.d3plus[k]=Math.abs(W(I)-W(X)),E.d3plus[d]=da,ea=d3.min([W(I),W(X)])+E.d3plus[k]/2,ea+=t,E.d3plus[u]=ea,E.d3plus.tooltip=Y,y.push(E),S={d3plus:{id:"median_line_"+M,position:"height"===k?"top":"right",shape:"whisker","static":!0}},U=a.format.value(Q,{key:a[u].value,vars:a}),N={background:"#fff",names:[U],padding:0,resize:!1,x:0,y:0},G=Math.abs(W(Q)-W(I)),H=Math.abs(W(Q)-W(X)),T=2*d3.min([G,H]),R=2*a.data.stroke.width+2*a.labels.padding,N["width"===C?"w":"h"]=A-R,N["width"===k?"w":"h"]=T-R,S.d3plus.label=N,S.d3plus[C]=A,S.d3plus[d]=da,S.d3plus[u]=W(Q)+t,y.push(S),D=p(D),D.d3plus={id:"bottom_whisker_line_"+M,offset:E.d3plus[k]/2,position:"height"===k?"bottom":"left",shape:"whisker","static":!0},"x"===u&&(D.d3plus.offset*=-1),D.d3plus[k]=Math.abs(W(j)-W(I)),D.d3plus[C]=A,D.d3plus[d]=da,D.d3plus[u]=ea,y.push(D),_=p(_),_.d3plus={id:"top_whisker_line_"+M,offset:E.d3plus[k]/2,position:"height"===k?"top":"right",shape:"whisker","static":!0},"y"===u&&(_.d3plus.offset*=-1),_.d3plus[k]=Math.abs(W(Z)-W(X)),_.d3plus[C]=A,_.d3plus[d]=da,_.d3plus[u]=ea,y.push(_),L=0,P=V.length;P>L;L++)F=V[L],F.d3plus[d]=da,F.d3plus[u]=W(e(a,F,a.y.value)),F.d3plus[u]+=t,F.d3plus.r=4,F.d3plus.shape=a.shape.value;return s=!V.length&&Z-j===0,n.push(Q),y=y.concat(V),f}).entries(a.data.viz),s&&1===i(n).length?[]:y)},d.modes=["tukey","extent",Array,Number],d.requirements=["data","x","y"],d.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],d.setup=function(a){var b;return a.axes.discrete?void 0:(b=a.time.value===a.y.value?"y":"x",a.self[b]({scale:"discrete"}))},b.exports=d},{"../../core/fetch/value.coffee":69,"../../string/format.js":176,"../../string/strip.js":178,"../../util/uniques.coffee":213,"./helpers/graph/draw.coffee":317}],313:[function(a,b,c){var d,e,f,g,h,i,j;d=a("../../array/sort.coffee"),h=a("../../core/fetch/value.coffee"),f=a("../../core/fetch/color.coffee"),g=a("../../core/fetch/text.js"),j=a("../../color/legible.coffee"),i=a("../../core/data/group.coffee"),e=function(a){var b,c,e,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R;if(r=i(a,a.data.viz),r=d(r,null,null,null,a),m=r.length,4>m?(e=m,E=1):(F=a.width.viz/a.height.viz,e=Math.ceil(Math.sqrt(m*F)),E=Math.ceil(Math.sqrt(m/F))),m>0)for(;(E-1)*e>=m;)E--;for(c=a.width.viz/e,b=a.height.viz/E,a.size.value?(M=a.size.scale.domain.min.value,L=a.size.scale.domain.max.value,p="number"==typeof M?M:d3.min(a.data.viz,function(b){return h(a,b,a.size.value,a.id.value,"min")}),o="number"==typeof L?L:d3.max(a.data.viz,function(b){return h(a,b,a.size.value,a.id.value)}),n=[p,o]):n=[0,0],C=5,H=d3.min([c,b])/2-2*C,w=a.labels.value&&!a.small&&H>=40?d3.max([20,d3.min([.25*H,50])]):0,H-=w,I=d3.min([H,a.size.scale.range.min.value]),G=a.size.scale.value.domain(n).rangeRound([I,H]),B=d3.layout.pack().children(function(a){return a.values}).padding(C).radius(function(a){return G(a)}).size([c-2*C,b-2*C-w]).value(function(a){return a.value}),l=[],D=0,s=t=0,x=r.length;x>t;s=++t){for(k=r[s],K=B.nodes(k),O=c*s%a.width.viz,R=b*D,u=0,y=K.length;y>u;u++)J=K[u],J.children?(A={d3plus:{}},A[a.id.value]=J.key):A=J.d3plus,A.d3plus.depth=a.id.grouping.value?J.depth:a.depth.value,A.d3plus.x=J.x,A.d3plus.xOffset=O,A.d3plus.y=J.y,A.d3plus.yOffset=R+w,A.d3plus.r=J.r,l.push(A);(s+1)%e===0&&D++}for(q=H/d3.max(l,function(a){return a.d3plus.r}),N=B.size()[0]/2,Q=B.size()[1]/2,v=0,z=l.length;z>v;v++)k=l[v],k.d3plus.x=(k.d3plus.x-N)*q+N+k.d3plus.xOffset,k.d3plus.y=(k.d3plus.y-Q)*q+Q+k.d3plus.yOffset,k.d3plus.r=k.d3plus.r*q,delete k.d3plus.xOffset,delete k.d3plus.yOffset,k.d3plus["static"]=k.d3plus.depth<a.depth.value&&a.id.grouping.value,!w||0!==k.d3plus.depth&&a.id.grouping.value!==!1?delete k.d3plus.label:(k.d3plus.text=g(a,k[a.id.value],k.d3plus.depth),P=w>3*a.labels.padding?a.labels.padding:0,k.d3plus.label={x:0,y:-(H+P+w/2),w:2*H,h:w-P,padding:0,resize:!0,color:j(f(a,k,k.d3plus.depth)),force:!0});return l.sort(function(a,b){return a.d3plus.depth-b.d3plus.depth})},e.fill=!0,e.requirements=["data"],e.scale=1.05,e.shapes=["circle","donut"],b.exports=e},{"../../array/sort.coffee":36,"../../color/legible.coffee":46,"../../core/data/group.coffee":59,"../../core/fetch/color.coffee":65,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69}],314:[function(a,b,c){var d,e;e=a("../../../core/console/print.coffee"),d=function(a){var b,c;c={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},b=c[a.shape.value],e.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+b+'" visualization type.'),a.self.type(b).draw()},d.shapes=["circle","donut","line","square","area"],b.exports=d},{"../../../core/console/print.coffee":54}],315:[function(a,b,c){var d;d=function(a){var b,c,d,e,f,g;return b=a.coords.value,d=a.coords.key||d3.keys(b.objects)[0],g=topojson.feature(b,b.objects[d]),c=g.features,f=a.coords.solo.value,e=a.coords.mute.value,c=c.filter(function(b){return b[a.id.value]=b.id,f.length?f.indexOf(b.id)>=0:e.length?e.indexOf(b.id)<0:!0})},d.libs=["topojson"],d.nesting=!1,d.requirements=["coords"],d.scale=1,d.shapes=["coordinates"],d.zoom=!0,b.exports=d},{}],316:[function(a,b,c){var d,e,f;d=a("../../../../core/fetch/color.coffee"),e=a("../../../../color/legible.coffee"),f=a("../../../../core/console/print.coffee"),b.exports=function(a){var b,c,g,h,i,j,k,l,m,n,o,p;for(b=a.axes,k=a.axes.margin.viz,h=b.stacked||!b.ticks.value?[]:a.data.viz,p=2*h.length>a.data.large?0:a.draw.timing,m=function(c,f){return 0===f.indexOf("y")?c.attr("x1",-2).attr("x2",-8).attr("y1",function(a){return a.d3plus.y-k.top}).attr("y2",function(a){return a.d3plus.y-k.top}):c.attr("x1",function(a){return a.d3plus.x-k.left}).attr("x2",function(a){return a.d3plus.x-k.left}).attr("y1",b.height+2).attr("y2",b.height+8),c.style("stroke",function(b){return e(d(a,b))}).style("stroke-width",a.data.stroke.width).attr("shape-rendering",a.shape.rendering.value)},a.dev.value&&f.time("creating axis tick groups"),o=a.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(h,function(c){var d;return d=b.discrete?"_"+c.d3plus[b.discrete]:"","tick_"+c[a.id.value]+"_"+c.d3plus.depth+d}),o.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),a.dev.value&&f.timeEnd("creating axis tick groups"),l=["x","y"],i=0,j=l.length;j>i;i++)c=l[i],a.dev.value&&p&&f.time("creating "+c+" ticks"),g=p&&c!==b.discrete?h:[],n=o.selectAll("line.d3plus_data_"+c).data(g,function(b){return"tick_"+b[a.id.value]+"_"+b.d3plus.depth}),a.dev.value&&p&&f.timeEnd("creating "+c+" ticks"),a.dev.value&&p&&f.time("styling "+c+" ticks"),p>0?n.transition().duration(p).call(m,c):n.call(m,c),n.enter().append("line").attr("class","d3plus_data_"+c).call(m,c),a.dev.value&&p&&f.timeEnd("styling "+c+" ticks");p>0?(o.transition().duration(p).attr("opacity",1),o.exit().transition().duration(p).attr("opacity",0).remove()):(o.attr("opacity",1),o.exit().remove())}},{"../../../../color/legible.coffee":46,"../../../../core/console/print.coffee":54,"../../../../core/fetch/color.coffee":65}],317:[function(a,b,c){var d,e,f,g;d=a("./includes/axes.coffee"),e=a("./includes/svg.coffee"),f=a("./includes/mouse.coffee"),g=a("./includes/plot.coffee"),b.exports=function(a,b){void 0===b&&(b={}),d(a,b),g(a,b),e(a,b),a.mouse.viz=b.mouse===!0?f:!1}},{"./includes/axes.coffee":318,"./includes/mouse.coffee":320,"./includes/plot.coffee":321,"./includes/svg.coffee":322}],318:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o;d=a("../../../../../array/sort.coffee"),g=a("./buffer.coffee"),f=a("../../../../../util/buckets.coffee"),i=a("../../../../../core/fetch/data.js"),j=a("../../../../../core/fetch/value.coffee"),m=a("../../../../../core/console/print.coffee"),o=a("../../../../../util/uniques.coffee"),b.exports=function(a,b){var c,d,f,i,p,q,r,s,t,u,v,w;for(f=h(a),(f||!a.axes.dataset)&&(a.axes.dataset=k(a)),a.axes.scale=b.buffer&&b.buffer!==!0?n(a,b.buffer):!1,c=a.width.viz>a.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],p=0,r=c.length;r>p;p++)d=c[p],t=0===d.indexOf("x")?"y":"x",v=a.order.changed||a.order.sort.changed||a.order.value===!0&&a[t].changed,a[d].value&&(!a[d].ticks.values||f||v||a[d].value===a.time.value&&a.time.fixed.value)&&(a.dev.value&&m.time("calculating "+d+" axis"),a[d].reset=!0,a[d].ticks.values=!1,d===a.axes.discrete&&a[d].value!==a.time.value&&(a[d].ticks.values=o(a.axes.dataset,a[d].value,j,a)),w=b.zero===!0||0===d.indexOf(b.zero)?!0:!1,u=e(a,d,w),0===d.indexOf("y")&&(u=u.reverse()),a[d].scale.viz=l(a,d,u),a[d].domain.viz=u,a.dev.value&&m.timeEnd("calculating "+d+" axis"));if(a.axes.mirror.value&&(i=d3.extent(a.y.domain.viz.concat(a.x.domain.viz)),a.x.domain.viz=i,a.x.scale.viz.domain(i),i=i.slice().reverse(),a.y.domain.viz=i,a.y.scale.viz.domain(i)),b.buffer)for(q=0,s=c.length;s>q;q++)d=c[q],d!==a.axes.discrete&&g(a,d,b.buffer)},h=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(c=!a.time.fixed.value&&(a.time.solo.changed||a.time.mute.changed),c||(c=a.id.solo.changed||a.id.mute.changed),c)return c;for(d=["data","time","id","depth","type","width","height","x","y","x2","y2"],e=0,i=d.length;i>e;e++)if(g=d[e],a[g].changed){c=!0;break}if(c)return c;for(n=["mute","range","scale","solo","stacked","zerofill"],l=["x","y","x2","y2"],f=0,j=l.length;j>f;f++)for(b=l[f],h=0,k=n.length;k>h;h++)if(m=n[h],a[b][m].changed){c=!0;break}return c},k=function(a){var b,c;return a.time.fixed.value?(c=d3.range(0,a.id.nesting.length),d3.merge(d3.merge([function(){var d,e,f;for(f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(i(a,"all",b));return f}()]))):a.data.viz},e=function(a,b,c,e){var f,g,h,i,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;if(z=0===b.indexOf("x")?"y":"x",a[b].range.value&&2===a[b].range.value.length)return a[b].range.value.slice();if("share"===a[b].scale.value)return a[b].ticks.values=d3.range(0,1.1,.1),[0,1];if(a[b].stacked.value){for(G=[],A=a.axes.dataset,p=0,t=A.length;t>p;p++)m=A[p],m.values?G=G.concat(m.values):G.push(m);return k=d3.nest().key(function(b){return j(a,b,a[z].value)}).rollup(function(c){var d,e;return e=d3.sum(c,function(c){var d;return d=j(a,c,a[b].value),d>0?d:0}),d=d3.sum(c,function(c){var d;return d=j(a,c,a[b].value),0>d?d:0}),[d,e]}).entries(G),J=d3.merge(k.map(function(a){return a.values})),d3.extent(J)}if(a[b].value===a.time.value)return a.time.solo.value.length?d3.extent(a.time.solo.value).map(function(a){return a.constructor!==Date?(a+="",4===a.length&&parseInt(a)+""===a&&(a+="/01/01"),new Date(a)):a}):d3.extent(a.data.time.ticks);for(J=[],B=a.axes.dataset,q=0,u=B.length;u>q;q++)m=B[q],I=j(a,m,a[b].value),I instanceof Array?J=J.concat(I):J.push(I);if(J=J.filter(function(a){return null!==a}),b===a.axes.discrete){if(F=a.order.value===!0?a[z].value:a.order.value){for(E=a.order.sort.value,f=a.order.agg.value||a.aggs.value[F]||"max",g=typeof f,l=J.reduce(function(a,b){return a[b]=[],a},{}),C=a.axes.dataset,s=0,v=C.length;v>s;s++)if(m=C[s],m.values)for(D=m.values,x=0,w=D.length;w>x;x++)H=D[x],n=j(a,H,a[b].value),l[n].push(j(a,H,F));else n=j(a,m,a[b].value),l[n].push(j(a,m,F));for(r in l)H=l[r],"string"===g?l[r]=d3[f](H):"function"===g&&(l[r]=f(H,F));return l=d(d3.entries(l),"value",E),l=l.reduce(function(a,b){return a.push(b.key),a},[])}return J[0].constructor===String?o(J).sort(function(a,b){return""+a.localeCompare(""+b)}):o(J).sort(function(a,b){return a-b})}return J.sort(function(a,b){return a-b}),"log"===a[b].scale.value&&(0===J[0]&&(J[0]=1),0===J[J.length-1]&&(J[J.length-1]=-1)),c&&(i=J.every(function(a){return a>0}),h=J.every(function(a){return 0>a}),(i||h)&&(y=i?1:-1,J.push("log"===a[b].scale.value?y:0))),d3.extent(J)},l=function(a,b,c){var d,e,g,h,i;return e=0===b.indexOf("x")?a.width.viz:a.height.viz,h=a[b].scale.value,["discrete","share"].indexOf(h)>=0&&(h="linear"),i=10,"string"==typeof c[0]?(h="ordinal",d=f([0,e],c.length)):(d=[0,e],"linear"===a[b].scale.value&&(i=Math.floor(e/(4*a[b].ticks.font.size)))),a[b].scale.ticks=i,g=d3.scale[h]().domain(c).range(d),"clamp"in g&&g.clamp(!0),g},n=function(a,b){var c,d,e;return b===!0&&(b="size"),b in a&&(b=a[b].value),e=a.size.scale.range.min.value,"function"==typeof e&&(e=e(a)),d=a.size.scale.range.max.value,"function"==typeof d&&(d=d(a)),b===!1?a.size.scale.value.domain([0,1]).rangeRound([d,d]):"number"==typeof b?a.size.scale.value.domain([0,1]).rangeRound([b,b]):b?(a.dev.value&&m.time("calculating buffer scale"),c=d3.extent(a.axes.dataset,function(c){var d;return d=j(a,c,b),d?d:0}),c[0]===c[1]&&(e=d),a.dev.value&&m.timeEnd("calculating buffer scale"),a.size.scale.value.domain(c).rangeRound([e,d])):void 0}},{"../../../../../array/sort.coffee":36,"../../../../../core/console/print.coffee":54,"../../../../../core/fetch/data.js":66,"../../../../../core/fetch/value.coffee":69,"../../../../../util/buckets.coffee":207,"../../../../../util/uniques.coffee":213,"./buffer.coffee":319}],319:[function(a,b,c){var d,e;d=a("../../../../../util/buckets.coffee"),e=a("../../../../../util/closest.coffee"),b.exports=function(a,b,c){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;if("share"!==a[b].scale.value&&!a[b].range.value&&a[b].reset){if(E=a[b].scale.viz.copy(),"clamp"in E&&E.clamp(!1),b===a.axes.discrete){if(o=E.domain(),"string"==typeof o[0]){for(s=o.length;s>=0;)o.splice(s,0,"d3plus_buffer_"+s),s--;return A=E.range(),A=d(d3.extent(A),o.length),a[b].scale.viz.domain(o).range(A)}if(0===b.indexOf("y")&&(o=o.slice().reverse()),1===a[b].ticks.values.length)o=[o[0],o[0]],a[b].value===a.time.value&&1!==a.data.time.ticks.length?(j=e(a.data.time.ticks,o[0]),F=a.data.time.ticks.indexOf(j),F>0?o[0]=a.data.time.ticks[F-1]:(m=a.data.time.ticks[F+1]-j,o[0]=new Date(j.getTime()-m)),F<a.data.time.ticks.length-1?o[1]=a.data.time.ticks[F+1]:(m=j-a.data.time.ticks[F-1],o[1]=new Date(j.getTime()+m))):(o[0]-=1,o[1]+=1);else if(a.axes.scale)n=Math.abs(o[1]-o[0]),g=n/(a[b].ticks.values.length-1),g/=2,B=E.range()[1],x=1.5*a.axes.scale.range()[1],r=E.invert(-x),q=E.invert(B+x),o[0]-g<r?(o[0]=o[0]-g,o[o.length-1]=o[o.length-1]+g):(o=[r,q],0===b.indexOf("y")&&(o=o.reverse()),p=E.domain(),p=p[1]-p[0],p||(o[0]-=1,o[1]+=1));else if(a[b].value===a.time.value)n=Math.abs(o[1]-o[0]),g=n/(a[b].ticks.values.length-1),g/=2,o[0]=o[0]-g,o[1]=o[1]+g;else{for(n=Math.abs(o[1]-o[0]),f=n/2,s=o.length,z=o.slice();s>=0;)l=s?z[s-1]+f:z[s]-f,o.splice(s,0,l),s--;A=E.range(),A=d(d3.extent(A),o.length),a[b].scale.viz.domain(o).range(A)}return 0===b.indexOf("y")&&(o=o.reverse()),a[b].scale.viz.domain(o)}if("x"===c&&0===b.indexOf("x")||"y"===c&&0===b.indexOf("y")||c===!0)return o=E.domain(),i=o[0]>=0&&o[1]>=0,h=o[0]<=0&&o[1]<=0,"log"===a[b].scale.value?(K=i?1:-1,i&&0===b.indexOf("y")&&(o=o.slice().reverse()),v=Math.pow(10,parseInt(Math.abs(o[0])).toString().length-1)*K,u=o[0]%v,t=u,u&&.1>=t/v&&(t+=v*K),w=0===u?v:t,o[0]-=w,0===o[0]&&(o[0]=K),I=Math.pow(10,parseInt(Math.abs(o[1])).toString().length-1)*K,H=o[1]%I,G=Math.abs(I-H),H&&.1>=G/I&&(G+=I*K),J=0===H?I:G,o[1]+=J,0===o[1]&&(o[1]=K),i&&0===b.indexOf("y")&&(o=o.reverse())):(K=0,0===b.indexOf("y")&&(o=o.slice().reverse()),D=o.filter(function(a){return a.constructor===String}),g=.05*Math.abs(o[1]-o[0])||1,D.length||(o[0]=o[0]-g,o[1]=o[1]+g,(i&&o[0]<K||h&&o[0]>K)&&(o[0]=K),(i&&o[1]<K||h&&o[1]>K)&&(o[1]=K)),0===b.indexOf("y")&&(o=o.reverse())),a[b].scale.viz.domain(o);if(a.axes.scale)return k=!1,a.axes.mirror.value&&(y=0===b.indexOf("y")?"x":"y",k=a[y].scale.viz,C=a.width.viz>a.height.viz?"x":"y"),b===C&&k?o=k.domain().slice().reverse():(B=E.range()[1],x=a.axes.scale.range()[1],r=E.invert(1.5*-x),q=E.invert(B+1.5*x),o=[r,q],0===b.indexOf("y")&&(o=o.reverse()),p=E.domain(),p=p[1]-p[0],p||(o[0]-=1,o[1]+=1),0===b.indexOf("y")&&(o=o.reverse())),a[b].scale.viz.domain(o)}}},{"../../../../../util/buckets.coffee":207,"../../../../../util/closest.coffee":209}],320:[function(a,b,c){var d,e,f,g,h,i;d=a("../../../../../util/copy.coffee"),e=a("../../../../../client/pointer.coffee"),f=a("../../../../../core/fetch/color.coffee"),g=a("../../../../../core/fetch/value.coffee"),h=a("../../../../../color/legible.coffee"),i=a("../../../../../color/text.coffee"),b.exports=function(a,b){var c,d,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return c=d3.event.type===e.click&&(b.tooltip.value["long"]||b.tooltip.html.value),j=[e.over,e.move].indexOf(d3.event.type)>=0,y=a.d3plus.x,z=a.d3plus.y,r=a.d3plus.r||0,u=b.types[b.type.value].scale||1,r*=u,k=b.axes,q=b.axes.margin.viz,x=b.draw.timing?b.timing.mouseevents:0,!c&&j?(d=h(f(b,a)),l=["x","y","x2","y2"].filter(function(c){var d;return d=g(b,a,b[c].value),d&&!(d instanceof Array)&&c!==b.axes.stacked&&b[c].mouse.value})):l=[],m=function(a){return a.attr("x1",function(a){return 0===a.indexOf("x")?y:y-r}).attr("y1",function(a){return 0===a.indexOf("y")?z:z+r}).attr("x2",function(a){return 0===a.indexOf("x")?y:y-r}).attr("y2",function(a){return 0===a.indexOf("y")?z:z+r}).attr("opacity",0)},n=function(a){return a.style("stroke",function(a){return"area"===b.shape.value?"white":d}).attr("stroke-dasharray",function(a){return b[a].mouse.dasharray.value}).attr("shape-rendering",function(a){return b[a].mouse.rendering.value}).style("stroke-width",function(a){return b[a].mouse.width})},o=function(c){return c.attr("x1",function(a){return 0===a.indexOf("x")?y:y-r}).attr("y1",function(a){return 0===a.indexOf("y")?z:z+r}).attr("x2",function(c){return 0===c.indexOf("x")?y:a.d3plus.x0?a.d3plus.x0:"y"===c?q.left-b[c].ticks.size:q.left+k.width+b[c].ticks.size}).attr("y2",function(c){return 0===c.indexOf("y")?z:a.d3plus.y0?a.d3plus.y0:"x"===c?k.height+q.top+b[c].ticks.size:q.top-b[c].ticks.size}).style("opacity",1)},p=b.g.labels.selectAll("line.d3plus_mouse_axis_label").data(l),x?(p.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(m).call(n),p.transition().duration(x).call(o).call(n),p.exit().transition().duration(x).call(m).remove()):(p.call(o).call(n),p.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(m).call(n),p.exit().remove()),v=function(c){return c.attr("font-size",function(a){return b[a].ticks.font.size+"px"}).attr("font-family",function(a){return b[a].ticks.font.family.value}).attr("font-weight",function(a){return b[a].ticks.font.weight}).attr("x",function(a){return 0===a.indexOf("x")?y:"y"===a?q.left-5-b[a].ticks.size:q.left+k.width+5+b[a].ticks.size}).attr("y",function(c){return 0===c.indexOf("y")?z:a.d3plus.y0?a.d3plus.y+(a.d3plus.y0-a.d3plus.y)/2+q.top-6:"x"===c?k.height+q.top+5+b[c].ticks.size:q.top-5-b[c].ticks.size-1.35*b[c].ticks.font.size}).attr("fill","area"===b.shape.value?"white":i(d))},w=b.g.labels.selectAll("text.d3plus_mouse_axis_label").data(l),w.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(a){return a+"_d3plusmouseaxislabel"}).attr("dy",function(a){return 0===a.indexOf("y")?.35*b[a].ticks.font.size:b[a].ticks.font.size}).style("text-anchor",function(a){return"y"===a?"end":"y2"===a?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(v),w.text(function(c){var d,e;return d=b.axes.stacked||c,e=g(b,a,b[d].value),b.format.value(e,{key:b[d].value,vars:b,labels:b[d].affixes.value})}),x?(w.transition().duration(x).delay(x).attr("opacity",1).call(v),w.exit().transition().duration(x).attr("opacity",0).remove()):(w.attr("opacity",1).call(v),w.exit().remove()),s=function(c){var e;return e=function(a){var b;return b=d3.select("text#"+a+"_d3plusmouseaxislabel"),b.size()?b.node().getBBox():{width:0,height:0}},c.attr("x",function(a){var c;return c=e(a).width,0===a.indexOf("x")?y-c/2-5:"y"===a?q.left-b[a].ticks.size-c-10:q.left+k.width+b[a].ticks.size}).attr("y",function(c){var d;return d=e(c).height,0===c.indexOf("y")?z-(d/2+5):a.d3plus.y0?a.d3plus.y+(a.d3plus.y0-a.d3plus.y)/2+q.top-(d/2+5):"x"===c?k.height+q.top+b[c].ticks.size:q.top-b[c].ticks.size-d-10}).attr("width",function(a){return e(a).width+10}).attr("height",function(a){return e(a).height+10}).style("stroke","area"===b.shape.value?"transparent":d).attr("fill",d).attr("shape-rendering",function(a){return b[a].mouse.rendering.value}).style("stroke-width",function(a){return b[a].mouse.width})},t=b.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(l),x?(t.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(s),t.transition().duration(x).delay(x).attr("opacity",1).call(s),t.exit().transition().duration(x).attr("opacity",0).remove()):(t.attr("opacity",1).call(s),t.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(s),t.exit().remove())}},{"../../../../../client/pointer.coffee":40,"../../../../../color/legible.coffee":46,"../../../../../color/text.coffee":52,"../../../../../core/fetch/color.coffee":65,"../../../../../core/fetch/value.coffee":69,"../../../../../util/copy.coffee":210}],321:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;d=a("../../../../../util/buckets.coffee"),e=a("./buffer.coffee"),g=a("../../../../../core/fetch/value.coffee"),h=a("../../../../../font/sizes.coffee"),l=a("../../../../../textwrap/textwrap.coffee"),m=a("../../../../../core/data/time.coffee"),n=a("../../../../../util/uniques.coffee"),b.exports=function(a,b){var c,d,h,i,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(a.axes.margin.viz={top:a.axes.margin.top,right:a.axes.margin.right,bottom:a.axes.margin.bottom,left:a.axes.margin.left},a.axes.height=a.height.viz,a.axes.width=a.width.viz,c=a.width.viz>a.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"],k=0,o=c.length;o>k;k++)if(d=c[k],a[d].value){if(a[d].ticks.values===!1)if(a[d].value===a.time.value){for(y=a.time.solo.value,y=y.length?y.map(function(a){return a.constructor!==Date&&(a+="",4===a.length&&parseInt(a)+""===a&&(a+="/01/01"),a=new Date(a)),a}):a.data.time.values,i=d3.extent(y),v=a.data.time.stepType,y=[i[0]],x=i[0];x<i[1];)r=new Date(x),x=new Date(r["set"+v](r["get"+v]()+1)),y.push(x);a[d].ticks.values=y}else 1===d.indexOf("2")?(t=a[d.slice(0,1)].scale.viz,u=a[d].scale.viz,y=a[d.slice(0,1)].scale.ticks,a[d].ticks.values=t.ticks(y).map(function(a){return parseFloat(d3.format(".5f")(u.invert(t(a))))})):a[d].ticks.values=a[d].scale.viz.ticks(a[d].scale.ticks);a[d].ticks.values.length||(A=g(a,a.data.viz,a[d].value),A instanceof Array||(A=[A]),a[d].ticks.values=A),s=0===d.indexOf("x")?"y":"x",(1===a[d].ticks.values.length||b.buffer&&b.buffer!==s&&d===a.axes.discrete&&a[d].reset===!0)&&e(a,d,b.buffer),a[d].reset=!1,a[d].value===a.time.value?(h={"font-family":a[d].ticks.font.family.value,"font-weight":a[d].ticks.font.weight,"font-size":a[d].ticks.font.size+"px",
"text-transform":a[d].ticks.font.transform.value,"letter-spacing":a[d].ticks.font.spacing+"px"},z=m(a,{values:a[d].ticks.values,limit:a.width.viz,style:h}),a[d].ticks.value?a[d].ticks.visible=a[d].ticks.value.map(Number):a[d].ticks.labels.value.constructor===Array?a[d].ticks.visible=a[d].ticks.labels.value.map(Number):a[d].ticks.visible=z.values.map(Number),a[d].ticks.format=z.format):a[d].ticks.value?(a[d].ticks.values=a[d].ticks.value,a[d].ticks.labels.value.constructor===Array?a[d].ticks.visible=a[d].ticks.labels.value:a[d].ticks.visible=a[d].ticks.value):a[d].ticks.labels.value.constructor===Array?a[d].ticks.visible=a[d].ticks.labels.value:"log"===a[d].scale.value?(y=a[d].ticks.values,w=y.filter(function(a){return"1"===Math.abs(a).toString().charAt(0)}),w.length<3?a[d].ticks.visible=y:a[d].ticks.visible=w):a[d].ticks.visible=a[d].ticks.values,a[d].value===a.time.value&&(a[d].ticks.visible=a[d].ticks.visible.map(function(a){return a.constructor===Number&&(""+a).length>4?a:(a+="",4===a.length&&parseInt(a)+""===a&&(a+="/01/01"),new Date(a).getTime())}))}if(a.small)for(a.axes.width-=a.axes.margin.viz.left+a.axes.margin.viz.right,a.axes.height-=a.axes.margin.viz.top+a.axes.margin.viz.bottom,l=0,p=c.length;p>l;l++)d=c[l],a[d].label.height=0;else a.small||j(a);for(n=0,q=c.length;q>n;n++)d=c[n],a[d].axis.svg=f(a,d)},j=function(a){var b,c,e,f,g,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;for(u=a.x.scale.viz.domain(),E=a.y.scale.viz.domain(),a.x2.value&&(q=a.x2.scale.viz.domain()),a.y2.value&&(B=a.y2.scale.viz.domain()),m=["y","y2"],c=0,g=m.length;g>c;c++)b=m[c],a[b].value&&(k="y"===b?"left":"right",C={"font-size":a[b].ticks.font.size+"px","font-family":a[b].ticks.font.family.value,"font-weight":a[b].ticks.font.weight,"text-transform":a[b].ticks.font.transform.value,"letter-spacing":a[b].ticks.font.spacing+"px"},I=a[b].ticks.visible,"log"===a[b].scale.value?H=I.map(function(a){return i(a)}):"share"===a[b].scale.value?H=I.map(function(c){return a.format.value(100*c,{key:"share",vars:a,output:b})}):a[b].value===a.time.value?H=I.map(function(c,d){return a[b].ticks.format(new Date(c))}):("string"==typeof I[0]&&(I=a[b].scale.viz.domain().filter(function(a){return 0!==a.indexOf("d3plus_buffer_")})),H=I.map(function(c){return a.format.value(c,{key:a[b].value,vars:a,labels:a[b].affixes.value,output:b})})),a[b].ticks.labels.value?(a[b].ticks.hidden=!1,D=d3.max(h(H,C),function(a){return a.width}),D&&(D=Math.ceil(D+a.labels.padding),a.axes.margin.viz[k]+=D)):a[b].ticks.hidden=!0,F=a[b].label.fetch(a),F?(G={"font-family":a[b].label.font.family.value,"font-weight":a[b].label.font.weight,"font-size":a[b].label.font.size+"px","text-transform":a[b].label.font.transform.value,"letter-spacing":a[b].label.font.spacing+"px"},a[b].label.height=h([F],G)[0].height):a[b].label.height=0,a[b].label.value&&(a.axes.margin.viz[k]+=a[b].label.height,a.axes.margin.viz[k]+=2*a[b].label.padding));for(a.axes.width-=a.axes.margin.viz.left+a.axes.margin.viz.right,a.x.scale.viz.range(d([0,a.axes.width],u.length)),q&&a.x2.scale.viz.range(d([0,a.axes.width],q.length)),n=["x","x2"],e=0,j=n.length;j>e;e++)b=n[e],a[b].value&&(k="x"===b?"bottom":"top",a[b].ticks.labels.value?(a[b].ticks.hidden=!1,r={"font-size":a[b].ticks.font.size+"px","font-family":a[b].ticks.font.family.value,"font-weight":a[b].ticks.font.weight,"text-transform":a[b].ticks.font.transform.value,"letter-spacing":a[b].ticks.font.spacing+"px"},A=a[b].ticks.visible,"log"===a[b].scale.value?z=A.map(function(a){return i(a)}):"share"===a[b].scale.value?z=A.map(function(c){return a.format.value(100*c,{key:"share",vars:a,output:b})}):a[b].value===a.time.value?z=A.map(function(c,d){return a[b].ticks.format(new Date(c))}):("string"==typeof A[0]&&(A=a[b].scale.viz.domain().filter(function(a){return 0!==a.indexOf("d3plus_buffer_")})),z=A.map(function(c){return a.format.value(c,{key:a[b].value,vars:a,labels:a[b].affixes.value,output:b})})),y=h(z,r),t=d3.max(y,function(a){return a.width}),s=d3.max(y,function(a){return a.height}),1===A.length?x=a.axes.width:(x=a[b].scale.viz(A[1])-a[b].scale.viz(A[0]),x=Math.abs(x)),t>x&&z.join("").indexOf(" ")>0?(a[b].ticks.wrap=!0,y=h(z,r,{mod:function(b){return l().container(d3.select(b)).height(a.axes.height/2).width(x).draw()}}),t=d3.max(y,function(a){return a.width}),s=d3.max(y,function(a){return a.height})):a[b].ticks.wrap=!1,a[b].ticks.baseline="auto",x>=t?a[b].ticks.rotate=0:t<a.axes.height/2?(y=h(z,r,{mod:function(b){return l().container(d3.select(b)).width(a.axes.height/2).height(x).draw()}}),s=d3.max(y,function(a){return a.width}),t=d3.max(y,function(a){return a.height}),a[b].ticks.rotate=-90):(t=0,s=0),t&&s||(a[b].ticks.hidden=!0,a[b].ticks.rotate=0),t=Math.ceil(t),s=Math.ceil(s),a[b].ticks.maxHeight=s,a[b].ticks.maxWidth=t,s&&(a.axes.margin.viz[k]+=s+a.labels.padding),f=a[b].ticks.visible[a[b].ticks.visible.length-1],o=a[b].scale.viz(f),o+=t/2+a.axes.margin.viz.left,o>a.width.value&&(p=o-a.width.value+a.axes.margin.viz.right,a.axes.width-=p,a.axes.margin.viz.right+=p)):a[b].ticks.hidden=!0,v=a[b].label.fetch(a),v?(w={"font-family":a[b].label.font.family.value,"font-weight":a[b].label.font.weight,"font-size":a[b].label.font.size+"px","text-transform":a[b].label.font.transform.value,"letter-spacing":a[b].label.font.spacing+"px"},a[b].label.height=h([v],w)[0].height):a[b].label.height=0,a[b].label.value&&(a.axes.margin.viz[k]+=a[b].label.height,a.axes.margin.viz[k]+=2*a[b].label.padding));return a.axes.height-=a.axes.margin.viz.top+a.axes.margin.viz.bottom,a.x.scale.viz.range(d([0,a.axes.width],u.length)),q&&a.x2.scale.viz.range(d([0,a.axes.width],q.length)),a.y.scale.viz.range(d([0,a.axes.height],E.length)),B?a.y2.scale.viz.range(d([0,a.axes.height],B.length)):void 0},f=function(a,b){return d3.svg.axis().tickSize(a[b].ticks.size).tickPadding(5).orient(a[b].orient.value).scale(a[b].scale.viz).tickValues(a[b].ticks.values).tickFormat(function(c,d){var e,f;return a[b].ticks.hidden?null:(f=a[b].scale.value,e=c.constructor===Date?+c:c,a[b].ticks.visible.indexOf(e)>=0?"share"===f?a.format.value(100*c,{key:"share",vars:a,labels:a[b].affixes.value,output:b}):c.constructor===Date?a[b].ticks.format(c):"log"===f?i(c):a.format.value(c,{key:a[b].value,vars:a,labels:a[b].affixes.value,output:b}):null)})},k="⁰¹²³⁴⁵⁶⁷⁸⁹",i=function(a){var b,c,d;return c=Math.round(Math.log(Math.abs(a))/Math.LN10),d=Math.abs(a).toString().charAt(0),b="10 "+(c+"").split("").map(function(a){return k[a]}).join(""),"1"!==d&&(b=d+" x "+b),0>a?"-"+b:b}},{"../../../../../core/data/time.coffee":64,"../../../../../core/fetch/value.coffee":69,"../../../../../font/sizes.coffee":104,"../../../../../textwrap/textwrap.coffee":203,"../../../../../util/buckets.coffee":207,"../../../../../util/uniques.coffee":213,"./buffer.coffee":319}],322:[function(a,b,c){var d,e,f;d=a("../../../../../color/mix.coffee"),e=a("../../../../../textwrap/textwrap.coffee"),f=a("../../../../../object/validate.coffee"),b.exports=function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka;if(o=a.x.domain.viz.concat(a.y.domain.viz),o.indexOf(void 0)>=0)return null;for(l={width:a.axes.width,height:a.axes.height,fill:a.axes.background.color,stroke:a.axes.background.stroke.color,"stroke-width":a.axes.background.stroke.width,"shape-rendering":a.axes.background.rendering.value},c={left:"start",center:"middle",right:"end"},h=a.small?[]:[0],fa=function(b,c){return b.attr("x1",function(b){return 0===c.indexOf("x")?a.x.scale.viz(b):0}).attr("x2",function(b){return 0===c.indexOf("x")?a.x.scale.viz(b):a.axes.width}).attr("y1",function(b){return 0===c.indexOf("y")?a.y.scale.viz(b):0}).attr("y2",function(b){return 0===c.indexOf("y")?a.y.scale.viz(b):a.axes.height})},ga=function(b,c,e){var f,g,h;return f=e?a[c].grid.color:a[c].ticks.color,g="log"===a[c].scale.value,h=a[c].ticks.visible||[],b.attr("stroke",function(b){var i;return 0===b?a[c].axis.color:(b.constructor===Date&&(b=+b),i=h.indexOf(b)>=0,!i||g&&"1"!==Math.abs(b).toString().charAt(0)?e&&"transparent"!==a.axes.background.color?d(f,a.axes.background.color,.4,1):"transparent"!==a.background.value?d(f,a.background.value,.4,1):d(f,"white",.4,1):f)}).attr("stroke-width",a[c].ticks.width).attr("shape-rendering",a[c].ticks.rendering.value)},p=function(b,c,d){var e;return e=0===c?"axis":"ticks",c=a[b][e].font[d],c&&(c.length||"number"==typeof c)?c:a[b].ticks.font[d]},ea=function(b,c){var e;return e="log"===a[c].scale.value,b.attr("font-size",function(a){return p(c,a,"size")+"px"}).attr("stroke","none").attr("fill",function(b){var f;return f=p(c,b,"color"),e&&"1"!==Math.abs(b).toString().charAt(0)?d(f,a.background.value,.4,1):f}).attr("font-family",function(a){return p(c,a,"family").value}).attr("font-weight",function(a){return p(c,a,"weight")}).style("text-transform",function(a){return p(c,a,"transform").value}).style("letter-spacing",function(a){return p(c,a,"spacing")+"px"})},J=function(b,c){var d,e;return d=0===c.indexOf("x")?"height":"width",e=0===c.indexOf("x")?"y":"x",b.attr(e+"1",0).attr(e+"2",a.axes[d]).attr(c+"1",function(a){return a.coords.line}).attr(c+"2",function(a){return a.coords.line}).attr("stroke",function(b){return b.color||a[c].lines.color}).attr("stroke-width",a[c].lines.width).attr("shape-rendering",a[c].lines.rendering.value).attr("stroke-dasharray",a[c].lines.dasharray.value)},G=function(b,d){var e;return e=0===d.indexOf("x")?"y":"x",b.attr(e,function(a){return a.coords.text[e]+"px"}).attr(d,function(a){return a.coords.text[d]+"px"}).attr("dy",a[d].lines.font.position.value).attr("text-anchor",c[a[d].lines.font.align.value]).attr("transform",function(a){return a.transform}).attr("font-size",a[d].lines.font.size+"px").attr("fill",function(b){return b.color||a[d].lines.color}).attr("font-family",a[d].lines.font.family.value).attr("font-weight",a[d].lines.font.weight)},R="translate("+a.axes.margin.viz.left+","+a.axes.margin.viz.top+")",Q=a.group.selectAll("g#d3plus_graph_plane").data([0]),Q.transition().duration(a.draw.timing).attr("transform",R),Q.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",R),k=Q.selectAll("rect#d3plus_graph_background").data([0]),k.transition().duration(a.draw.timing).attr(l),k.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(l),N=Q.selectAll("path#d3plus_graph_mirror").data([0]),N.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),N.transition().duration(a.draw.timing).attr("opacity",function(){return a.axes.mirror.value?1:0}).attr("d",function(){var a,b;return b=l.width,a=l.height,"M "+b+" "+a+" L 0 "+a+" L "+b+" 0 Z"}),$=0!==a.x.ticks.rotate,ja=function(b,c){var d,f;return f="x"===c?a.axes.height:0,d=b.attr("transform","translate(0,"+f+")").call(a[c].axis.svg.scale(a[c].scale.viz)).selectAll("g.tick"),d.selectAll("line").attr("y2",function(b){var d;return b.constructor===Date&&(b=+b),d=d3.select(this).attr("y2"),a[c].ticks.visible.indexOf(b)>=0?d:d/2}),d.select("text").style("text-anchor",$&&"x"===c?"end":$?"start":"middle").call(ea,c).each(function(b){return d3.select(this).attr("dy","0px").attr("font-size",function(a){return p(c,a,"size")+"px"}),b.constructor===Date&&(b=+b),!a[c].ticks.hidden&&a[c].ticks.visible.indexOf(b)>=0?e().container(d3.select(this)).rotate(a[c].ticks.rotate).align($?"end":"center").valign($?"middle":"x"===c?"top":"bottom").width(a[c].ticks.maxWidth+2).height(a[c].ticks.maxHeight).padding(0).x(-a[c].ticks.maxWidth/2).y("x2"===c?-(a[c].ticks.maxHeight+2*a.labels.padding):0).draw():void 0})},ka=function(b,c){var d,e;return e="y2"===c?a.axes.width:0,d=b.attr("transform","translate("+e+", 0)").call(a[c].axis.svg.scale(a[c].scale.viz)).selectAll("g.tick"),d.selectAll("line").attr("y2",function(b){var c;return b.constructor===Date&&(b=+b),c=d3.select(this).attr("y2"),a.x.ticks.visible.indexOf(b)>=0?c:c/2}),d.select("text").call(ea,c)},W=["x","x2","y","y2"],t=0,z=W.length;z>t;t++)g=W[t],aa=0===g.indexOf("x")?ja:ka,T=h.length&&a[g].value?[0]:[],i=Q.selectAll("g#d3plus_graph_"+g+"ticks").data(T),i.transition().duration(a.draw.timing).call(aa,g),i.selectAll("line").transition().duration(a.draw.timing).call(ga,g),s=i.enter().append("g").attr("id","d3plus_graph_"+g+"ticks").call(aa,g),s.selectAll("path").attr("fill","none").attr("stroke","none"),s.selectAll("line").call(ga,g),i.exit().transition().duration(a.data.timing).attr("opacity",0).remove();for(y=function(b,c){return b.attr("x",0===c.indexOf("x")?a.width.viz/2:-(a.axes.height/2+a.axes.margin.viz.top)).attr("y","x"===c?a.height.viz-a[c].label.height/2-a[c].label.padding:"y2"===c?a.width.viz-a[c].label.height/2-a[c].label.padding:a[c].label.height/2+a[c].label.padding).attr("transform",0===c.indexOf("y")?"rotate(-90)":null).attr("font-family",a[c].label.font.family.value).attr("font-weight",a[c].label.font.weight).attr("font-size",a[c].label.font.size+"px").attr("fill",a[c].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",a[c].label.font.transform.value).style("letter-spacing",a[c].label.font.spacing+"px")},X=["x","y"],u=0,A=X.length;A>u;u++)g=X[u],a[g].grid.value?r=a[g].ticks.value?a[g].ticks.value:a[g].ticks.values:(r=[],P="x"===g?"y":"x",a[g].ticks.values.indexOf(0)>=0&&a[P].axis.value&&(r=[0])),a[g].value===a.time.value&&(r=r.map(function(a){return a+="",4===a.length&&parseInt(a)+""===a&&(a+="/01/01"),new Date(a).getTime()})),q=Q.selectAll("g#d3plus_graph_"+g+"grid").data([0]),q.enter().append("g").attr("id","d3plus_graph_"+g+"grid"),K=q.selectAll("line").data(r,function(a,b){return a.constructor===Date?a.getTime():a}),K.transition().duration(a.draw.timing).call(fa,g).call(ga,g,!0),K.enter().append("line").style("opacity",0).call(fa,g).call(ga,g,!0).transition().duration(a.draw.timing).delay(a.draw.timing/2).style("opacity",1),K.exit().transition().duration(a.draw.timing/2).style("opacity",0).remove();for(Y=["x","x2","y","y2"],v=0,B=Y.length;B>v;v++)g=Y[v],a[g].value?(j=a[g].label.fetch(a),x=h&&j&&!a.small?[0]:[],b=a.format.affixes.value[a[g].value],j&&!a[g].affixes.value&&b&&(_=a[g].affixes.separator.value,_===!0?_=["[","]"]:_===!1&&(_=["",""]),j+=" "+_[0]+b[0]+" "+b[1]+_[1])):(j="",x=[]),w=a.group.selectAll("text#d3plus_graph_"+g+"label").data(x),w.text(j).transition().duration(a.draw.timing).call(y,g),w.enter().append("text").attr("stroke","none").attr("id","d3plus_graph_"+g+"label").text(j).call(y,g),w.exit().transition().duration(a.data.timing).attr("opacity",0).remove();for(Z=["x","y","x2","y2"],M=0,C=Z.length;C>M;M++)if(g=Z[M],a[g].value){for(H=Q.selectAll("g#d3plus_graph_"+g+"_userlines").data([0]),H.enter().append("g").attr("id","d3plus_graph_"+g+"_userlines"),n=a[g].scale.viz.domain(),0===g.indexOf("y")&&(n=n.slice().reverse()),ba=[],F=[],ha=a[g].lines.value||[],O=0,D=ha.length;D>O;O++)E=ha[O],m=f(E)?E.position:E,ia=g===a.axes.discrete?n.indexOf(m)>=0:m>=n[0]&&m<=n[1],ia&&(m=f(E)?E:{position:m},m.coords={line:a[g].scale.viz(m.position)},F.push(m),m.text&&(m.axis=g,m.padding=.5*a[g].lines.font.padding.value,m.align=a[g].lines.font.align.value,S=a[g].lines.font.position.text,ca="middle"===S?0:2*m.padding,"top"===S&&(ca=-ca),0===g.indexOf("x")?(da="left"===m.align?a.axes.height:"center"===m.align?a.axes.height/2:0,"left"===m.align&&(da-=2*m.padding),"right"===m.align&&(da+=2*m.padding)):(da="left"===m.align?0:"center"===m.align?a.axes.width/2:a.axes.width,"right"===m.align&&(da-=2*m.padding),"left"===m.align&&(da+=2*m.padding)),m.coords.text={},m.coords.text[0===g.indexOf("x")?"y":"x"]=da,m.coords.text[g]=a[g].scale.viz(m.position)+ca,m.transform=0===g.indexOf("x")?"rotate(-90,"+m.coords.text.x+","+m.coords.text.y+")":null,ba.push(m)));K=H.selectAll("line.d3plus_graph_"+g+"line").data(F,function(a){return a.position}),K.enter().append("line").attr("class","d3plus_graph_"+g+"line").attr("opacity",0).call(J,g),K.transition().duration(a.draw.timing).attr("opacity",1).call(J,g),K.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),L=H.selectAll("text.d3plus_graph_"+g+"line_text").data(ba,function(a){return a.position}),L.enter().append("text").attr("class","d3plus_graph_"+g+"line_text").attr("id",function(a){var b;return b=a.position+"",b=b.replace("-","neg"),b=b.replace(".","p"),"d3plus_graph_"+g+"line_text_"+b}).attr("opacity",0).call(G,g),L.text(function(a){return a.text}).transition().duration(a.draw.timing).attr("opacity",1).call(G,g),L.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),V=function(b){var c;return c=function(a){var b;return b=a.position+"",b=b.replace("-","neg"),b=b.replace(".","p"),Q.select("text#d3plus_graph_"+a.axis+"line_text_"+b).node().getBBox()},b.attr("x",function(a){return c(a).x-a.padding}).attr("y",function(a){return c(a).y-a.padding}).attr("transform",function(a){return a.transform}).attr("width",function(a){return c(a).width+2*a.padding}).attr("height",function(a){return c(a).height+2*a.padding}).attr("fill","transparent"!==a.axes.background.color?a.axes.background.color:"white")},U=a[g].lines.font.background.value?ba:[],I=H.selectAll("rect.d3plus_graph_"+g+"line_rect").data(U,function(a){return a.position}),I.enter().insert("rect","text.d3plus_graph_"+g+"line_text").attr("class","d3plus_graph_"+g+"line_rect").attr("pointer-events","none").attr("opacity",0).call(V),I.transition().delay(a.draw.timing).each("end",function(b){return d3.select(this).transition().duration(a.draw.timing).attr("opacity",1).call(V)}),I.exit().transition().duration(a.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":48,"../../../../../object/validate.coffee":175,"../../../../../textwrap/textwrap.coffee":203}],323:[function(a,b,c){var d,e,f;d=a("../../../../core/fetch/value.coffee"),e=a("../../../../string/strip.js"),f=a("../../../../util/uniques.coffee"),b.exports=function(a,b,c){var g,h,i,j,k,l,m;return void 0===c?c=a.id.nesting.slice(0,a.depth.value+1):c.constructor!==Array&&(c=[c]),void 0===h&&(h=[]),b||(b=a.data.viz),g=a[a.axes.discrete],j=a[a.axes.opposite],m=g.value===a.time.value,m?(l=a.data.time.ticks,i=a.time.solo.value.length?"solo":"mute",a.time[i].value.length&&(k=a.time[i].value.slice().map(function(a){return a.constructor!==Date&&(a+="",4===a.length&&parseInt(a)+""===a&&(a+="/01/01"),a=new Date(a)),+a}),l=l.filter(function(a){return"solo"===i?k.indexOf(+a)>=0:k.indexOf(+a)<0}))):l=g.ticks.values?g.ticks.values:f(b,g.value,d,a),d3.nest().key(function(b){var f,g,h,i,j;for(i="nesting",g=0,h=c.length;h>g;g++)f=c[g],j=d(a,b,f),j instanceof Array&&(j=j.join("_")),i+="_"+e(j);return i}).rollup(function(b){var c,e,h,k,n,o,p,q,r,s,t,u;if(c=f(b,g.value,d,a),u=c.length&&c[0].constructor===Date,u&&(c=c.map(Number)),g.zerofill.value)for(e="log"===g.scale.value?j.scale.viz.domain().every(function(a){return 0>a})?-1:1:0,h=k=0,o=l.length;o>k;h=++k)if(t=l[h],s=m?+t:t,c.indexOf(s)<0){for(q={d3plus:{}},r=a.id.nesting,n=0,p=r.length;p>n;n++)i=r[n],i in b[0]&&(q[i]=b[0][i]);q[g.value]=t,q[j.value]=0,q[j.value]=e,b.splice(h,0,q)}return"string"==typeof b[0][g.value]?b:b.sort(function(b,c){var e,f,h,i,k;return e=d(a,b,g.value),h=d(a,c,g.value),(k=e-h)?k:(f=d(a,b,j.value),i=d(a,c,j.value),f-i)})}).entries(b)}},{"../../../../core/fetch/value.coffee":69,"../../../../string/strip.js":178,"../../../../util/uniques.coffee":213}],324:[function(a,b,c){var d;d=a("../../../../core/fetch/value.coffee"),b.exports=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(r=a.axes.stacked||a.axes.opposite,e=a[r].scale.viz(0),p=a[r].scale.value,n="x"===r?"y":"x",j="y"===r?a.axes.margin.viz.top:a.axes.margin.viz.left,m="share"===p?"expand":"zero",q=d3.layout.stack().values(function(a){return a.values||[a]}).offset(m).x(function(a){return a.d3plus[n]}).y(function(b){return e-a[r].scale.viz(d(a,b,a[r].value))}).out(function(b,c,f){var g,h;return h=d(a,b,a[r].value),g=0>h,"share"===p?(b.d3plus[r+"0"]=(1-c)*e,b.d3plus[r]=b.d3plus[r+"0"]-f*e):(b.d3plus[r+"0"]=e,a.axes.stacked&&(b.d3plus[r+"0"]-=c),b.d3plus[r]=b.d3plus[r+"0"]-f),b.d3plus[r]+=j,b.d3plus[r+"0"]+=j}),o=[],l=[],f=0,h=b.length;h>f;f++)if(c=b[f],t=d(a,c,a[r].value),t instanceof Array){for(k=!0,g=0,i=t.length;i>g;g++)if(s=t[g],s>=0){k=!1;break}k?l.push(c):o.push(c)}else t>=0&&o.push(c),0>t&&l.push(c);return 0===o.length||0===l.length?q(b):(o.length&&(o=q(o)),l.length&&(l=q(l)),o.concat(l))}},{"../../../../core/fetch/value.coffee":69}],325:[function(a,b,c){var d,e,f,g,h,i;d=a("../../core/fetch/value.coffee"),e=a("./helpers/graph/draw.coffee"),g=a("./helpers/graph/nest.coffee"),h=a("../../array/sort.coffee"),i=a("./helpers/graph/stack.coffee"),f=function(a){var b,c,f,g,j,k,l,m,n,o,p;if(e(a,{buffer:a.axes.opposite,mouse:!0}),f=a.x.domain.viz.concat(a.y.domain.viz),f.indexOf(void 0)>=0)return[];for(c=h(a.data.viz,null,null,null,a),g=0,k=c.length;k>g;g++)for(m=c[g],n=m.values,j=0,l=n.length;l>j;j++)b=n[j],o=d(a,b,a.x.value),null!==o?(b.d3plus.x2=!1,b.d3plus.x=a.x.scale.viz(o)):(b.d3plus.x2=!0,b.d3plus.x=a.x2.scale.viz(d(a,b,a.x2.value))),b.d3plus.x+=a.axes.margin.viz.left,p=d(a,b,a.y.value),null!==p?(b.d3plus.y2=!1,b.d3plus.y=a.y.scale.viz(p)):(b.d3plus.y2=!0,b.d3plus.y=a.y2.scale.viz(d(a,b,a.y2.value))),b.d3plus.y+=a.axes.margin.viz.top;return a.axes.stacked?i(a,c):c},f.filter=function(a,b){return g(a,b)},f.requirements=["data","x","y"],f.setup=function(a){var b;a.axes.discrete||(b=a.time.value===a.y.value?"y":"x",a.self[b]({scale:"discrete"}))},f.shapes=["line"],f.tooltip="static",b.exports=f},{"../../array/sort.coffee":36,"../../core/fetch/value.coffee":69,"./helpers/graph/draw.coffee":317,"./helpers/graph/nest.coffee":323,"./helpers/graph/stack.coffee":324}],326:[function(a,b,c){var d=a("../../network/smallestGap.coffee"),e=a("../../core/fetch/value.coffee"),f=function(a){var b=a.nodes.restricted||a.nodes.value,c=a.edges.restricted||a.edges.value,f=d3.extent(b,function(a){return a.x}),g=d3.extent(b,function(a){return a.y}),h=[1,1];if("number"==typeof a.size.value?h=[a.size.value,a.size.value]:a.size.value&&(h=d3.extent(b,function(b){var c=e(a,b,a.size.value);return 0===c?null:c})),"undefined"==typeof h[0]&&(h=[1,1]),"number"==typeof a.size.value)var i=a.size.value,j=a.size.value;else{var i=d(b,{accessor:function(a){return[a.x,a.y]}}),k=i/2,l=a.size.value?a.nodes.overlap:.4;if(i*=l,a.edges.arrows.value&&(i=.5*i),h[0]===h[1]){var j=k;i=k}else{var m=f[1]+1.1*i-(f[0]-1.1*i),n=g[1]+1.1*i-(g[0]-1.1*i),o=m/n,p=a.width.viz/a.height.viz;if(p>o)var q=a.height.viz/n;else var q=a.width.viz/m;var j=.25*i;2>j*q&&(j=2/q)}}var r=a.size.scale.value.domain(h).range([j,i]);a.zoom.bounds=[[f[0]-1.1*i,g[0]-1.1*i],[f[1]+1.1*i,g[1]+1.1*i]];var s=[],t={};return b.forEach(function(b){var c=a.data.viz.filter(function(c){return c[a.id.value]==b[a.id.value]})[0],d=c||{};d[a.id.value]=b[a.id.value],d.d3plus={},d.d3plus.x=b.x,d.d3plus.y=b.y;var f=e(a,d,a.size.value);d.d3plus.r=f?r(f):r.range()[0],t[d[a.id.value]]={x:d.d3plus.x,y:d.d3plus.y,r:d.d3plus.r},s.push(d)}),s.sort(function(a,b){return b.d3plus.r-a.d3plus.r}),c.forEach(function(b,c){b.d3plus&&delete b.d3plus.spline,b[a.edges.source].d3plus={};var d=t[b[a.edges.source][a.id.value]];void 0!==d?(b[a.edges.source].d3plus.r=d.r,b[a.edges.source].d3plus.x=d.x,b[a.edges.source].d3plus.y=d.y):delete b[a.edges.source].d3plus,b[a.edges.target].d3plus={};var e=t[b[a.edges.target][a.id.value]];void 0!==e?(b[a.edges.target].d3plus.r=e.r,b[a.edges.target].d3plus.x=e.x,b[a.edges.target].d3plus.y=e.y):delete b[a.edges.target].d3plus}),{nodes:s,edges:c}};f.nesting=!1,f.requirements=["nodes","edges"],f.scale=1.05,f.shapes=["circle","square","donut"],f.tooltip="static",f.zoom=!0,b.exports=f},{"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":171}],327:[function(a,b,c){var d,e,f,g,h=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e=a("../../network/shortestPath.coffee"),d=a("../../core/fetch/value.coffee"),f=a("../../util/uniques.coffee"),g=function(a){var b,c,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma;for(o=[],T={},T[a.focus.value[0]]=0,T[a.focus.value[1]]=0,U={all:[[a.focus.value[0]],[a.focus.value[1]]]},Y=g.paths,S=r=0,x=Y.length;x>r;S=++r)for(R=Y[S],o=o.concat(R.edges),w=a.focus.value[0],U[S]=[w],Z=R.edges,n=s=0,y=Z.length;y>s;n=++s)m=Z[n],m[a.edges.source]=a.data.viz.filter(function(b){return m[a.edges.source][a.id.value]===b[a.id.value]})[0],m[a.edges.target]=a.data.viz.filter(function(b){return m[a.edges.target][a.id.value]===b[a.id.value]})[0],L=m[a.edges.source][a.id.value]===w?"target":"source",M=m[a.edges[L]][a.id.value],void 0===T[M]&&(T[M]=S),U[S].push(M),w=M;fa=0;for(S in U)if(R=U[S],"all"!==S){for(J=0,p=t=0,z=R.length;z>t;p=++t)if(q=R[p],0!==p&&p!==R.length-1&&T[q]===parseFloat(S)){for(J=1,V=R[p-1],K=R[p+1],W=null,N=null,$=U.all,j=F=0,A=$.length;A>F;j=++F)i=$[j],h.call(i,V)>=0&&(W=j),h.call(i,K)>=0&&(N=j);null!==W&&null===N?W+1===U.all.length-1?U.all.splice(W+1,0,[q]):U.all[W+1].push(q):N-W===1?U.all.splice(N,0,[q]):N-W>1&&U.all[N-1].push(q)}fa+=J}for(ea=Math.floor(a.height.viz/fa),ma=[],p=0;fa>p;)p%2===0?ma.push(p):ma.unshift(p),p++;for(u=a.size.value&&!a.small?30:0,la=d3.scale.ordinal().domain(ma).range(d3.range(ea/2-u,a.height.viz+ea/2-u,(a.height.viz-ea)/(fa-1))),l=U.all.length,k=Math.floor(a.width.viz/l),ja=d3.scale.linear().domain([0,l-1]).rangeRound([k/2,a.width.viz-k/2]),H=5,G=.4*d3.min([k,ea-u]),ha=d3.extent(a.data.viz,function(b){var c;return c=d(a,b,a.size.value),c||0}),ga=a.size.scale.value.domain(ha).rangeRound([H,G]),_=a.data.viz,I=0,B=_.length;B>I;I++){for(O=_[I],null==O.d3plus&&(O.d3plus={}),aa=U.all,j=P=0,C=aa.length;C>P;j=++P)i=aa[j],ba=O[a.id.value],h.call(i,ba)>=0&&(O.d3plus.x=ja(j));O.d3plus.y=la(T[O[a.id.value]]),a.size.value?(ia=d(a,O,a.size.value),O.d3plus.r=ia?ga(ia):H):O.d3plus.r=G,O.d3plus.r<.1*k&&!a.small?O.d3plus.label={x:0,y:O.d3plus.r+2*a.labels.padding,w:.6*k,h:u+G-O.d3plus.r,resize:!1}:delete O.d3plus.label}for(ca=g.paths,S=Q=0,D=ca.length;D>Q;S=++Q)for(R=ca[S],w=a.focus.value[0],da=R.edges,n=X=0,E=da.length;E>X;n=++X)m=da[n],L=m[a.edges.source][a.id.value]===w?"target":"source",v="target"===L?"source":"target",M=m[a.edges[L]][a.id.value],T[w]!==T[M]?(m.d3plus={spline:!0},null==(b=m[a.edges.source]).d3plus&&(b.d3plus={}),null==(c=m[a.edges.source].d3plus).edges&&(c.edges={}),null==(e=m[a.edges.target]).d3plus&&(e.d3plus={}),null==(f=m[a.edges.target].d3plus).edges&&(f.edges={}),ka=m[L].d3plus.x-m[v].d3plus.x,m[v].d3plus.edges[m[L][a.id.value]]={angle:Math.PI,radius:k/2},m[L].d3plus.edges[m[v][a.id.value]]={angle:0,radius:k/2,offset:ka-k}):delete m.d3plus,w=M;return{nodes:a.data.viz,edges:o}},g.filter=function(a,b){var c,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(j=a.edges.filtered||a.edges.value,g.paths=e(j,a.focus.value[0],{target:a.focus.value[1],distance:a.edges.size.value||void 0,nodeid:a.id.value,startpoint:a.edges.source,endpoint:a.edges.target,K:a.edges.limit.value||5}),g.nodes=[],c=[],u=g.paths,m=0,p=u.length;p>m;m++)for(t=u[m],v=t.edges,n=0,q=v.length;q>n;n++)i=v[n],x=i[a.edges.source],y=i[a.edges.target],c.indexOf(x[a.id.value])<0&&(g.nodes.push(x),c.push(x[a.id.value])),c.indexOf(y[a.id.value])<0&&(g.nodes.push(y),c.push(y[a.id.value]));for(l=f(g.nodes,a.id.value,d,a),w=[],o=0,r=l.length;r>o;o++)k=l[o],h=b.filter(function(b){return b[a.id.value]===k}),h[0]?w.push(h[0]):(s={d3plus:{}},s[a.id.value]=k,w.push(s));return w},g.nesting=!1,g.requirements=[function(a){return{status:2===a.focus.value.length,text:a.format.locale.value.method.focus+" x 2"}},"edges"],g.scale=1,g.shapes=["circle","square","donut"],g.tooltip="static",b.exports=g},{"../../core/fetch/value.coffee":69,"../../network/shortestPath.coffee":170,"../../util/uniques.coffee":213}],328:[function(a,b,c){var d,e,f,g;d=a("../../array/comparator.coffee"),e=a("../../core/data/threshold.js"),f=a("../../core/data/group.coffee"),g=function(a){var b,c,e,g,h,i,j,k,l;for(j=d3.layout.pie().value(function(a){return a.value}).sort(function(b,c){return a.order.value?d(b.d3plus,c.d3plus,[a.order.value],a.order.sort.value,[],a):a.id.nesting.length>1?d(b.d3plus,c.d3plus,a.id.nesting.concat([a.size.value]),void 0,[],a):d(b.d3plus,c.d3plus,[a.size.value],"desc",[],a)}),c=f(a,a.data.viz,[]),i=j(c),l=[],k=d3.min([a.width.viz,a.height.viz])/2-2*a.labels.padding,e=0,h=i.length;h>e;e++)b=i[e],g=b.data.d3plus,g.d3plus.startAngle=b.startAngle,g.d3plus.endAngle=b.endAngle,g.d3plus.r=k,g.d3plus.x=a.width.viz/2,g.d3plus.y=a.height.viz/2,g.d3plus.share=(b.endAngle-b.startAngle)/(2*Math.PI),l.push(g);return l},g.filter=e,g.requirements=["data","size"],g.shapes=["arc"],g.threshold=function(a){return 1600/(a.width.viz*a.height.viz)},b.exports=g},{"../../array/comparator.coffee":34,"../../core/data/group.coffee":59,"../../core/data/threshold.js":63}],329:[function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;e=a("../../array/comparator.coffee"),l=a("../../array/sort.coffee"),f=a("../../core/data/threshold.js"),g=a("../../core/fetch/text.js"),h=a("../../core/fetch/value.coffee"),i=a("../../font/sizes.coffee"),j=a("../../geom/offset.coffee"),m=a("../../textwrap/textwrap.coffee"),d=a("../../util/buckets.coffee"),n=a("../../util/uniques.coffee"),k=function(a){var b,c,e,f,k,l,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha;for(r=a.data.viz,R=a.depth.value+1,S=a.id.nesting[R],p=function(){var a,b,c;for(c=[],a=0,b=r.length;b>a;a++)q=r[a],c.push(q[S]);return c}(),fa=function(){var b,c,d;for(d=[],b=0,c=r.length;c>b;b++)q=r[b],d.push(n(r,S,h,a,R));return d}(),fa=n(d3.merge(fa)).length,f=2*Math.PI/fa,P=d3.min([a.width.viz,a.height.viz])/2,E=0,H=0,I=function(){var b,c,d;for(d=[],b=0,c=p.length;c>b;b++)l=p[b],d.push(g(a,l,R)[0]);return d}(),I=n(d3.merge(I)),a.labels.value&&(s=j(Math.PI/2,P),aa=j(f+Math.PI/2,P),E=s.x-aa.x-2*a.labels.padding,da={fill:a.x.ticks.font.color,"font-family":a.x.ticks.font.family.value,"font-weight":a.x.ticks.font.weight,"font-size":a.x.ticks.font.size+"px"},ba=i(I,da,{mod:function(b){return m().container(d3.select(b)).width(a.height.viz/8).height(E).draw()}}),H=d3.max(ba,function(a){return a.width}),P-=H,P-=2*a.labels.padding),O=function(){var b,c,d;for(d=[],b=0,c=p.length;c>b;b++)l=p[b],d.push(function(){var b,c,d;for(d=[],b=0,c=l.length;c>b;b++)q=l[b],d.push(h(a,q,a.size.value));return d}());return d}(),O=d3.max(d3.merge(O)),V=d3.scale.linear().domain([0,O]).range([0,P]),x=function(){var b,c,d;for(d=[],b=0,c=p.length;c>b;b++)l=p[b],d.push(h(a,l,S));return d}(),x=n(d3.merge(x)),w=d3.scale.ordinal().domain(x).range(d3.range(0,x.length)),z=0,J=r.length;J>z;z++)for(q=r[z],q.d3plus.x=a.width.viz/2+a.margin.top,q.d3plus.y=a.height.viz/2+a.margin.left,W=q[S],v=A=0,K=W.length;K>A;v=++A)b=W[v],b.d3plus||(b.d3plus={}),b.d3plus.r=V(h(a,b,a.size.value)),b.d3plus.a=w(h(a,b,S))*f;for(y=1,X=[10,5,4,2],N=0,L=X.length;L>N;N++)if(v=X[N],P/v>=20){y=v;break}for(Z=d([P/y,P],y-1).reverse(),Z.length===y&&Z.shift(),_=a.group.selectAll(".d3plus_radar_rings").data(Z,function(a,b){return b}),$=function(b){return b.attr("fill",function(b,c){return 0===c?a.axes.background.color:"transparent"}).attr("cx",a.width.viz/2+a.margin.top).attr("cy",a.height.viz/2+a.margin.left).attr("stroke",a.x.grid.value?a.x.grid.color:"transparent")},_.enter().append("circle").attr("class","d3plus_radar_rings").call($).attr("r",0),_.transition().duration(a.draw.timing).call($).attr("r",function(a){return a}),_.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),F=d3.scale.ordinal().domain(I).range(d3.range(0,I.length)),C=[],Q=0,M=I.length;M>Q;Q++)B=I[Q],c=f*F(B)-Math.PI/2,b=c*(180/Math.PI),-90>b||b>90?(b-=180,k=-(P+2*a.labels.padding+H),e="end"):(k=P+2*a.labels.padding,e="start"),ea=0>c||c>Math.PI,Y=c<Math.PI/2,U=P,a.labels.value&&(U+=a.labels.padding),T=j(c,U),ga=T.x,ha=T.y,Y||(ga-=H),ea&&(ha-=E),o=[0,Math.PI].indexOf(f*F(B))>=0,
o&&(ga-=H/2),C.push({text:B,angle:b,x:k,anchor:e,offset:T});return D=a.group.selectAll("g.d3plus_radar_label_group").data([0]),D.enter().append("g").attr("class","d3plus_radar_label_group").attr("transform","translate("+a.width.viz/2+","+a.height.viz/2+")"),D.transition().duration(a.draw.timing).attr("transform","translate("+a.width.viz/2+","+a.height.viz/2+")"),ca=D.selectAll(".d3plus_radar_labels").data(a.labels.value?C:[],function(a,b){return b}),G=function(a){return a.attr(da).each(function(a,b){return m().container(d3.select(this)).height(E).width(H).align(a.anchor).text(a.text).padding(0).valign("middle").x(a.x).y(-E/2).draw()}).attr("transform",function(a){var b;return b=d3.select(this).attr("transform")||"",b.length&&(b=b.split(")").slice(-3).join(")")),"rotate("+a.angle+")"+b})},ca.call(G),ca.enter().append("text").attr("class","d3plus_radar_labels").attr("opacity",0).call(G).transition().duration(a.draw.timing).attr("opacity",1),ca.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),t=a.group.selectAll(".d3plus_radar_lines").data(C,function(a,b){return b}),u=function(b){return b.attr("stroke",a.x.grid.color).attr("x1",a.width.viz/2+a.margin.left).attr("y1",a.height.viz/2+a.margin.top)},t.enter().append("line").attr("class","d3plus_radar_lines").call(u).attr("x2",a.width.viz/2+a.margin.left).attr("y2",a.height.viz/2+a.margin.top),t.transition().duration(a.draw.timing).call(u).attr("x2",function(b){return a.width.viz/2+a.margin.left+b.offset.x}).attr("y2",function(b){return a.height.viz/2+a.margin.top+b.offset.y}),t.exit().transition().duration(a.draw.timing).attr("opacity",0).remove(),a.mouse.viz={click:!1},r},k.requirements=["data","size"],k.shapes=["radial"],b.exports=k},{"../../array/comparator.coffee":34,"../../array/sort.coffee":36,"../../core/data/threshold.js":63,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69,"../../font/sizes.coffee":104,"../../geom/offset.coffee":163,"../../textwrap/textwrap.coffee":203,"../../util/buckets.coffee":207,"../../util/uniques.coffee":213}],330:[function(b,c,d){var e=b("../../array/sort.coffee"),f=b("../../client/pointer.coffee"),g=b("../../core/fetch/value.coffee"),h=b("../../core/fetch/color.coffee"),i=b("../../color/legible.coffee"),j=b("../../tooltip/remove.coffee"),k=b("../../network/smallestGap.coffee"),l=b("../../color/text.coffee"),m=b("../../util/uniques.coffee"),n=function(b){var c=d3.min([b.height.viz,b.width.viz])/2,d=b.small||!b.labels.value?(c-2*b.labels.padding)/2:c/3,n=b.small||!b.labels.value?1.4*d:d,o=2*d,p=[],q=[],r=b.data.viz.filter(function(a){return a[b.id.value]===b.focus.value[0]})[0];r||(r={d3plus:{}},r[b.id.value]=b.focus.value[0]),r.d3plus.x=b.width.viz/2,r.d3plus.y=b.height.viz/2,r.d3plus.r=.65*n;var s=[],t=[b.focus.value[0]];b.edges.connections(b.focus.value[0],b.id.value).forEach(function(a){var c=a[b.edges.source][b.id.value]==b.focus.value[0]?a[b.edges.target]:a[b.edges.source],d=b.data.viz.filter(function(a){return a[b.id.value]===c[b.id.value]})[0];d||(d={d3plus:{}},d[b.id.value]=c[b.id.value]),d.d3plus.edges=b.edges.connections(d[b.id.value],b.id.value).filter(function(a){return a[b.edges.source][b.id.value]!=b.focus.value[0]&&a[b.edges.target][b.id.value]!=b.focus.value[0]}),d.d3plus.edge=a,t.push(d[b.id.value]),s.push(d)});var u=b.order.value||b.color.value||b.size.value||b.id.value;s.sort(function(a,c){var d=a.d3plus.edges.length-c.d3plus.edges.length;return d?d:e([a,c],u,b.order.sort.value,b.color.value||[],b)}),"number"==typeof b.edges.limit.value?s=s.slice(0,b.edges.limit.value):"function"==typeof b.edges.limit.value&&(s=b.edges.limit.value(s));var v=[],w=0;s.forEach(function(a){var c=a[b.id.value];a.d3plus.edges=a.d3plus.edges.filter(function(a){var d=a[b.edges.source][b.id.value],e=a[b.edges.target][b.id.value];return t.indexOf(d)<0&&e==c||t.indexOf(e)<0&&d==c}),w+=a.d3plus.edges.length||1,a.d3plus.edges.forEach(function(a){var d=a[b.edges.source],e=a[b.edges.target],f=e[b.id.value]==c?d:e;t.push(f[b.id.value])})}),e(s,u,b.order.sort.value,b.color.value||[],b);var x=0,y=2*Math.PI,z=0;s.forEach(function(c,d){var f=c.d3plus.edges.length||1,g=y/w*f;0==d&&(z=h,x-=g/2);var h=x+g/2;h-=y/4,c.d3plus.radians=h,c.d3plus.x=b.width.viz/2+n*Math.cos(h),c.d3plus.y=b.height.viz/2+n*Math.sin(h),x+=g,c.d3plus.edges.sort(function(a,d){var a=a[b.edges.source][b.id.value]==c[b.id.value]?a[b.edges.target]:a[b.edges.source],d=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source];return e([a,d],u,b.order.sort.value,b.color.value||[],b)}),c.d3plus.edges.forEach(function(d,e){var g=d[b.edges.source][b.id.value]==c[b.id.value]?d[b.edges.target]:d[b.edges.source],i=y/w,j=b.data.viz.filter(function(a){return a[b.id.value]===g[b.id.value]})[0];j||(j={d3plus:{}},j[b.id.value]=g[b.id.value]),a=h-i*f/2+i/2+i*e,j.d3plus.radians=a,j.d3plus.x=b.width.viz/2+o*Math.cos(a),j.d3plus.y=b.height.viz/2+o*Math.sin(a),v.push(j)})});var A=k(s,{accessor:function(a){return[a.d3plus.x,a.d3plus.y]}}),B=k(v,{accessor:function(a){return[a.d3plus.x,a.d3plus.y]}});if(A||(A=d/2),B||(B=d/4),8>A/2-4)var C=d3.min([A/2,8]);else var C=A/2-4;if(4>B/2-4)var D=d3.min([B/2,4]);else var D=B/2-4;D>d/10&&(D=d/10),D>C&&D>10&&(D=.75*C),C>1.5*D&&(C=1.5*D),C=Math.floor(C),D=Math.floor(D);var E=m(s,b.id.value,g,b);E=E.concat(m(v,b.id.value,g,b)),E.push(b.focus.value[0]);var F=b.data.viz.filter(function(a){return E.indexOf(a[b.id.value])>=0});if(b.size.value){var G=d3.extent(F,function(a){return g(b,a,b.size.value)});G[0]==G[1]&&(G[0]=0);var c=d3.scale.linear().domain(G).rangeRound([3,d3.min([C,D])]),H=g(b,r,b.size.value);r.d3plus.r=c(H)}else{var c=d3.scale.linear().domain([1,2]).rangeRound([C,D]);b.edges.label&&(r.d3plus.r=1.5*c(1))}v.forEach(function(a){a.d3plus.ring=2;var d=b.size.value?g(b,a,b.size.value):2;a.d3plus.r=c(d)}),s.forEach(function(a){a.d3plus.ring=1;var d=b.size.value?g(b,a,b.size.value):1;a.d3plus.r=c(d)}),q=[r].concat(s).concat(v),s.forEach(function(a,c){var e=[b.edges.source,b.edges.target],f=a.d3plus.edge;e.forEach(function(a){f[a]=q.filter(function(c){return c[b.id.value]==f[a][b.id.value]})[0]}),delete f.d3plus,p.push(f),b.edges.connections(a[b.id.value],b.id.value).forEach(function(c){var e=c[b.edges.source][b.id.value]==a[b.id.value]?c[b.edges.target]:c[b.edges.source];if(e[b.id.value]!=r[b.id.value]){var f=v.filter(function(a){return a[b.id.value]==e[b.id.value]})[0];if(f);else{f=s.filter(function(a){return a[b.id.value]==e[b.id.value]})[0]}if(f){c.d3plus={spline:!0,translate:{x:b.width.viz/2,y:b.height.viz/2}};var g=[b.edges.source,b.edges.target];g.forEach(function(e,g){c[e]=q.filter(function(a){return a[b.id.value]==c[e][b.id.value]})[0],void 0===c[e].d3plus.edges&&(c[e].d3plus.edges={});var h=0===g?c[b.edges.target][b.id.value]:c[b.edges.source][b.id.value];c[e][b.id.value]==a[b.id.value]?c[e].d3plus.edges[h]={angle:a.d3plus.radians+Math.PI,radius:d/2}:c[e].d3plus.edges[h]={angle:f.d3plus.radians,radius:d/2}}),p.push(c)}}})});var I=!1;return b.background.value&&["transparent","none"].indexOf(b.background.value)<0&&d3.hsl(b.background.value).l<.5&&(I=l(b.background.value)),q.forEach(function(a){if(!b.small&&b.labels.value)if(a[b.id.value]!=b.focus.value[0]){a.d3plus.rotate=a.d3plus.radians*(180/Math.PI);var c=a.d3plus.rotate,e=d-3*b.labels.padding-a.d3plus.r;if(-90>c||c>90){c-=180;var f=-(a.d3plus.r+e/2+b.labels.padding),g="end"}else var f=a.d3plus.r+e/2+b.labels.padding,g="start";var j=s.indexOf(a)>=0?!0:!1,k=1==a.d3plus.ring?A:B;a.d3plus.label={x:f,y:0,w:e,h:k,angle:c,anchor:g,valign:"center",color:I||i(h(b,a)),resize:[8,b.labels.font.size],background:j,mouse:!0}}else if(b.size.value||b.edges.label){var k=n-2*a.d3plus.r-2*b.labels.padding;a.d3plus.label={x:0,y:a.d3plus.r+k/2,w:n,h:k,color:I||i(h(b,a)),resize:[10,40],background:!0,mouse:!0}}else delete a.d3plus.rotate,delete a.d3plus.label;else delete a.d3plus.rotate,delete a.d3plus.label}),b.mouse.viz={},b.mouse.viz[f.click]=function(a){if(a[b.id.value]!=b.focus.value[0]){j(b.type.value);var c=b.focus.value[0];b.history.states.push(function(){b.self.focus(c).draw()}),b.self.focus(a[b.id.value]).draw()}},{edges:p,nodes:q,data:F}};n.filter=function(a,b){var c=a.edges.connections(a.focus.value[0],a.id.value,!0),d=[];c.forEach(function(b){d=d.concat(a.edges.connections(b[a.id.value],a.id.value,!0))});var e=c.concat(d),f=m(e,a.id.value,g,a),h=[];return f.forEach(function(c){var d=b.filter(function(b){return b[a.id.value]==c})[0];if(d)h.push(d);else{var e={d3plus:{}};e[a.id.value]=c,h.push(e)}}),h},n.nesting=!1,n.scale=1,n.shapes=["circle","square","donut"],n.requirements=["edges","focus"],n.tooltip="static",c.exports=n},{"../../array/sort.coffee":36,"../../client/pointer.coffee":40,"../../color/legible.coffee":46,"../../color/text.coffee":52,"../../core/fetch/color.coffee":65,"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":171,"../../tooltip/remove.coffee":206,"../../util/uniques.coffee":213}],331:[function(a,b,c){var d,e,f,g,h;d=a("./sankey.js"),e=a("../../client/pointer.coffee"),f=a("../../tooltip/remove.coffee"),h=a("../../util/uniques.coffee"),g=function(a){var b,c,g,h,i,j,k,l,m,n,o,p,q,r,s;for(h=a.focus.value[0],p=2*a.data.stroke.width,s=a.size.value.constructor===Number?a.size.value:20,g=a.edges.connections(h,a.id.value).filter(function(b){return b[a.edges.source][a.id.value]!==h||b[a.edges.target][a.id.value]!==h}),o=[],q=[],g=g.map(function(b){var c,d;return b[a.edges.target][a.id.value]===h?(c={id:"left_"+b[a.edges.source][a.id.value],dupe:"left",data:b[a.edges.source],value:b[a.edges.strength.value]},d=b[a.edges.target]):(c=b[a.edges.source],d={id:"right_"+b[a.edges.target][a.id.value],dupe:"right",data:b[a.edges.target],value:b[a.edges.strength.value]}),q.indexOf(c.id)<0&&o.push(c),q.indexOf(d.id)<0&&o.push(d),q.push(c.id),q.push(d.id),{source:c,target:d,value:b[a.edges.strength.value]||1}}),k=d().nodeWidth(s).nodePadding(a.data.padding.value).size([a.width.viz-2*p,a.height.viz-2*p]).nodes(o).links(g).layout(2),r=[],i=0,l=o.length;l>i;i++)n=o[i],b=n.data||n,b={id:b[a.id.value]},b.d3plus={x:n.x+n.dx/2+p,y:n.y+n.dy/2+p,width:n.dx,height:n.dy,suffix:n.dupe},b.id!==h&&(b[a.edges.strength.value]=n.value),r.push(b);for(a.edges.path=k.link(),j=0,m=g.length;m>j;j++)c=g[j],c.d3plus={x:p,y:p};return a.mouse.viz={},a.mouse.viz[e.click]=function(b){var c;return b[a.id.value]!==a.focus.value[0]?(f(a.type.value),c=a.focus.value[0],a.history.states.push(function(){return a.self.focus(c).draw()}),a.self.focus(b[a.id.value]).draw()):void 0},{nodes:r,edges:g}},g.requirements=["edges","focus","nodes"],g.shapes=["square"],b.exports=g},{"../../client/pointer.coffee":40,"../../tooltip/remove.coffee":206,"../../util/uniques.coffee":213,"./sankey.js":332}],332:[function(a,b,c){b.exports=function(){function a(){n.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),o.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=n[a.source]),"number"==typeof c&&(c=a.target=n[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function b(){n.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,i),d3.sum(a.targetLinks,i))})}function c(){for(var a,b=n,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=k,b.sourceLinks.forEach(function(b){a.indexOf(b.target)<0&&a.push(b.target)})}),b=a,++c;d(c),e((m[0]-k)/(c-1))}function d(a){n.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function e(a){n.forEach(function(b){b.x*=a})}function f(a){function b(){var a=d3.min(g,function(a){return(m[1]-(a.length-1)*l)/d3.sum(a,i)});g.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),o.forEach(function(b){b.dy=b.value*a})}function c(a){function b(a){return h(a.source)*a.value}g.forEach(function(c,d){c.forEach(function(c){if(c.targetLinks.length){var d=d3.sum(c.targetLinks,b)/d3.sum(c.targetLinks,i);c.y+=(d-h(c))*a}})})}function d(a){function b(a){return h(a.target)*a.value}g.slice().reverse().forEach(function(c){c.forEach(function(c){if(c.sourceLinks.length){var d=d3.sum(c.sourceLinks,b)/d3.sum(c.sourceLinks,i);c.y+=(d-h(c))*a}})})}function e(){g.forEach(function(a){var b,c,d,e=0,g=a.length;for(a.sort(f),d=0;g>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+l;if(c=e-l-m[1],c>0)for(e=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+l-e,c>0&&(b.y-=c),e=b.y})}function f(a,b){return a.y-b.y}var g=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(n).map(function(a){return a.values});b(),e();for(var j=1;a>0;--a)d(j*=.99),e(),c(j),e()}function g(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}n.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),n.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function h(a){return a.y+a.dy/2}function i(a){return a.value}var j={},k=24,l=8,m=[1,1],n=[],o=[];return j.nodeWidth=function(a){return arguments.length?(k=+a,j):k},j.nodePadding=function(a){return arguments.length?(l=+a,j):l},j.nodes=function(a){return arguments.length?(n=a,j):n},j.links=function(a){return arguments.length?(o=a,j):o},j.size=function(a){return arguments.length?(m=a,j):m},j.layout=function(d){return a(),b(),c(),f(d),g(),j},j.relayout=function(){return g(),j},j.link=function(){function a(a){var c=a.source.x+a.source.dx,d=a.target.x,e=d3.interpolateNumber(c,d),f=e(b),g=e(1-b),h=a.source.y+a.sy+a.dy/2,i=a.target.y+a.ty+a.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},j}},{}],333:[function(a,b,c){var d,e,f,g,h,i;d=a("../../core/fetch/value.coffee"),e=a("./helpers/graph/draw.coffee"),f=a("../../core/console/print.coffee"),h=a("../../array/sort.coffee"),i=a("./helpers/graph/dataTicks.coffee"),g=function(a){var b,c,f,g,j;if(e(a,{buffer:"size",mouse:!0}),c=a.x.domain.viz.concat(a.y.domain.viz),c.indexOf(void 0)>=0)return[];for(j=a.data.viz,f=0,g=j.length;g>f;f++)b=j[f],b.d3plus.x=a.x.scale.viz(d(a,b,a.x.value)),b.d3plus.x+=a.axes.margin.viz.left,b.d3plus.y=a.y.scale.viz(d(a,b,a.y.value)),b.d3plus.y+=a.axes.margin.viz.top,"number"!=typeof a.size.value&&a.size.value?b.d3plus.r=a.axes.scale(d(a,b,a.size.value)):b.d3plus.r=a.axes.scale(0);return i(a),h(a.data.viz,a.order.value||a.size.value||a.id.value,"desc"===a.order.sort.value?"asc":"desc",a.color.value||[],a)},g.fill=!0,g.requirements=["data","x","y"],g.scale=1.1,g.setup=function(a){return a.time.value&&!a.axes.discrete&&(a.time.value===a.x.value&&a.self.x({scale:"discrete"}),a.time.value===a.y.value)?a.self.y({scale:"discrete"}):void 0},g.shapes=["circle","square","donut"],g.tooltip="static",b.exports=g},{"../../array/sort.coffee":36,"../../core/console/print.coffee":54,"../../core/fetch/value.coffee":69,"./helpers/graph/dataTicks.coffee":316,"./helpers/graph/draw.coffee":317}],334:[function(a,b,c){var d=a("../../core/fetch/value.coffee"),e=a("../../util/uniques.coffee"),f=a("../../util/copy.coffee"),g=a("../../color/random.coffee"),h=function(a){var b=e(a.data.viz,a.id.value,d,a),c=e(a.cols.value);c.indexOf("label")<0&&a.cols.index.value&&c.unshift("label");var h=a.height.viz/(b.length+1),i=a.width.viz/c.length;a.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",a.height.viz).attr("width",a.width.viz).style("fill",a.color.missing);var j=a.group.selectAll("line.horiz").data(a.data.viz);j.enter().append("line").attr("class","horiz"),j.attr("x1",0).attr("y1",function(a,b){return h*b+h}).attr("x2",a.width.viz).attr("y2",function(a,b){return h*b+h}).style("fill","#fff").style("stroke","#fff"),j.exit().remove();var k=a.group.selectAll("line.vert").data(c);k.enter().append("line").attr("class","vert"),k.attr("x1",function(a,b){return i*b+i}).attr("y1",0).attr("x2",function(a,b){return i*b+i}).attr("y2",a.height.viz).style("fill","#fff").style("stroke","#fff"),k.exit().remove();var l=[],m={};return c.forEach(function(b,c){var d={d3plus:{x:i*c+i/2,y:h/2,width:i,height:h,id:"d3p_header_"+b.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:a.format.value(b)}};if(b==a.id.value&&(d.d3plus.color="#fff"),"label"==b&&(d.d3plus.label=!1,d.d3plus.color="#fff",d.d3plus.stroke="#fff"),l.push(d),"number"==a.data.keys[b]){var e=d3.extent(a.data.viz,function(a){return a[b]});e[0]==e[1]&&(e=[e[0]-1,e[1]]),m[b]=d3.scale.linear().domain(e).range([a.color.missing,g(b)])}else"boolean"==a.data.keys[b]&&(m[b]=function(c){return c?g(b):a.color.missing})}),a.data.viz.forEach(function(b,d){d+=1,c.forEach(function(c,e){var g=f(b);g.d3plus.id="d3p_"+g[a.id.value].toString().replace(/ /g,"_")+"_"+c,g.d3plus.x=i*e+i/2,g.d3plus.y=h*d+h/2,g.d3plus.width=i,g.d3plus.height=h,"label"==c&&(g.d3plus.shape="square",g.d3plus.color="#fff",l.push(g)),d3.keys(b).indexOf(c)>=0&&c in b&&(m[c]&&(g.d3plus.color=m[c](g[c])),g.d3plus.text=a.format.value(g[c]),"boolean"==a.data.keys[c]?g.d3plus.label=!1:"string"==a.data.keys[c]&&(g.d3plus.color=a.color.missing,g.d3plus.stroke="#fff",g.d3plus.shape="square"),l.push(g))})}),l};h.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],h.requirements=["data","cols"],b.exports=h},{"../../color/random.coffee":49,"../../core/fetch/value.coffee":69,"../../util/copy.coffee":210,"../../util/uniques.coffee":213}],335:[function(a,b,c){var d,e,f,g;d=a("../../core/data/threshold.js"),e=a("../../core/data/group.coffee"),f=a("../../object/merge.coffee"),g=function(a){var b,c,d,g,h,i,j;if(d=e(a,a.data.viz),c=d3.layout.treemap().mode(a.type.mode.value).round(!0).size([a.width.viz,a.height.viz]).children(function(a){return a.values}).padding(a.data.padding.value).sort(function(a,b){var c;return c=a.value-b.value,0===c?a.id<b.id:c}).nodes({name:"root",values:d}).filter(function(a){return!a.values&&a.area}),c.length){for(j=c[0];j.parent;)j=j.parent;for(i=[],g=0,h=c.length;h>g;g++)b=c[g],b.d3plus.d3plus=f(b.d3plus.d3plus,{x:b.x+b.dx/2,y:b.y+b.dy/2,width:b.dx,height:b.dy,share:b.value/j.value}),i.push(b.d3plus)}return i},g.filter=d,g.modes=["squarify","slice","dice","slice-dice"],g.requirements=["data","size"],g.shapes=["square"],g.threshold=function(a){return 1600/(a.width.viz*a.height.viz)},b.exports=g},{"../../core/data/group.coffee":59,"../../core/data/threshold.js":63,"../../object/merge.coffee":174}],336:[function(a,b,c){var d,e,f,g,h,i,j;d=a("../core/methods/attach.coffee"),e=a("./methods/helpers/axis.coffee"),g=a("./helpers/ui/message.js"),h=a("./helpers/drawSteps.js"),i=a("../core/console/print.coffee"),f=a("./helpers/container.coffee"),j=a("../object/validate.coffee"),b.exports=function(){var b;return b={g:{apps:{}},types:{area:a("./types/area.coffee"),bar:a("./types/bar.coffee"),bubbles:a("./types/bubbles.coffee"),box:a("./types/box.coffee"),chart:a("./types/deprecated/chart.coffee"),geo_map:a("./types/geo_map.coffee"),line:a("./types/line.coffee"),network:a("./types/network.js"),paths:a("./types/paths.coffee"),pie:a("./types/pie.coffee"),radar:a("./types/radar.coffee"),rings:a("./types/rings.js"),sankey:a("./types/sankey.coffee"),scatter:a("./types/scatter.coffee"),stacked:a("./types/area.coffee"),table:a("./types/table.js"),tree_map:a("./types/tree_map.coffee")}},b.self=function(a){return a.each(function(){var a,c,d,e,j,k,l;b.draw.frozen=!0,b.error.internal=null,"timing"in b.draw||(b.draw.timing=b.timing.transitions),b.error.value&&(b.draw.timing=0),f(b),k=b.width.value<=b.width.small,j=b.height.value<=b.height.small,b.small=k||j,b.width.viz=b.width.value,b.height.viz=b.height.value,a=!1,c=function(){l.length?e():b.dev.value&&(i.groupEnd(),i.timeEnd("total draw time"),i.log("\n"))},d=function(a,d){d=d||"function",a[d]instanceof Array?a[d].forEach(function(a){a(b,c)}):"function"==typeof a[d]&&a[d](b,c),a.wait||c()},e=function(){var e,f,h,j;j=l.shift(),h=b.g.message&&a===j.message,f="check"in j?j.check:!0,"function"==typeof f&&(f=f(b)),f?h?d(j):(b.dev.value&&(a!==!1&&i.groupEnd(),i.group(j.message)),"string"==typeof b.messages.value?(a=b.messages.value,e=b.messages.value):(a=j.message,e=b.format.value(j.message)),b.draw.update?(g(b,e),b.error.value?d(j):setTimeout(function(){return d(j)},10)):d(j)):"otherwise"in j?b.error.value?d(j,"otherwise"):setTimeout(function(){return d(j,"otherwise")},10):c()},b.messages.style.backup=b.group&&"1"===b.group.attr("opacity")?"small":"large",l=h(b),e()}),b.self},d(b,{active:a("./methods/active.coffee"),aggs:a("./methods/aggs.coffee"),attrs:a("./methods/attrs.coffee"),axes:a("./methods/axes.coffee"),background:a("./methods/background.coffee"),"class":a("./methods/class.coffee"),color:a("./methods/color.coffee"),cols:a("./methods/cols.js"),config:a("./methods/config.coffee"),container:a("./methods/container.coffee"),coords:a("./methods/coords.coffee"),csv:a("./methods/csv.coffee"),data:a("./methods/data.coffee"),depth:a("./methods/depth.coffee"),descs:a("./methods/descs.coffee"),dev:a("./methods/dev.coffee"),draw:a("./methods/draw.js"),edges:a("./methods/edges.js"),error:a("./methods/error.coffee"),focus:a("./methods/focus.coffee"),font:a("./methods/font.coffee"),footer:a("./methods/footer.coffee"),format:a("./methods/format.coffee"),height:a("./methods/height.coffee"),history:a("./methods/history.coffee"),icon:a("./methods/icon.coffee"),id:a("./methods/id.coffee"),labels:a("./methods/labels.coffee"),legend:a("./methods/legend.coffee"),links:a("./methods/links.coffee"),margin:a("./methods/margin.coffee"),messages:a("./methods/messages.coffee"),mouse:a("./methods/mouse.coffee"),nodes:a("./methods/nodes.coffee"),order:a("./methods/order.coffee"),resize:a("./methods/resize.coffee"),shape:a("./methods/shape.coffee"),size:a("./methods/size.coffee"),style:a("./methods/style.coffee"),temp:a("./methods/temp.coffee"),text:a("./methods/text.coffee"),time:a("./methods/time.coffee"),timeline:a("./methods/timeline.coffee"),timing:a("./methods/timing.coffee"),title:a("./methods/title.coffee"),tooltip:a("./methods/tooltip.coffee"),total:a("./methods/total.coffee"),type:a("./methods/type.coffee"),ui:a("./methods/ui.coffee"),width:a("./methods/width.coffee"),x:e("x"),x2:e("x2"),y:e("y"),y2:e("y2"),zoom:a("./methods/zoom.js")}),b.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":82,"../object/validate.coffee":175,"./helpers/container.coffee":214,"./helpers/drawSteps.js":215,"./helpers/ui/message.js":249,"./methods/active.coffee":258,"./methods/aggs.coffee":259,"./methods/attrs.coffee":260,"./methods/axes.coffee":261,"./methods/background.coffee":262,"./methods/class.coffee":263,"./methods/color.coffee":264,"./methods/cols.js":265,"./methods/config.coffee":266,"./methods/container.coffee":267,"./methods/coords.coffee":268,"./methods/csv.coffee":269,"./methods/data.coffee":270,"./methods/depth.coffee":271,"./methods/descs.coffee":272,"./methods/dev.coffee":273,"./methods/draw.js":274,"./methods/edges.js":275,"./methods/error.coffee":276,"./methods/focus.coffee":277,"./methods/font.coffee":278,"./methods/footer.coffee":279,"./methods/format.coffee":280,"./methods/height.coffee":281,"./methods/helpers/axis.coffee":282,"./methods/history.coffee":283,"./methods/icon.coffee":284,"./methods/id.coffee":285,"./methods/labels.coffee":286,"./methods/legend.coffee":287,"./methods/links.coffee":288,"./methods/margin.coffee":289,"./methods/messages.coffee":290,"./methods/mouse.coffee":291,"./methods/nodes.coffee":292,"./methods/order.coffee":293,"./methods/resize.coffee":294,"./methods/shape.coffee":295,"./methods/size.coffee":296,"./methods/style.coffee":297,"./methods/temp.coffee":298,"./methods/text.coffee":299,"./methods/time.coffee":300,"./methods/timeline.coffee":301,"./methods/timing.coffee":302,"./methods/title.coffee":303,"./methods/tooltip.coffee":304,"./methods/total.coffee":305,"./methods/type.coffee":306,"./methods/ui.coffee":307,"./methods/width.coffee":308,"./methods/zoom.js":309,"./types/area.coffee":310,"./types/bar.coffee":311,"./types/box.coffee":312,"./types/bubbles.coffee":313,"./types/deprecated/chart.coffee":314,"./types/geo_map.coffee":315,"./types/line.coffee":325,"./types/network.js":326,"./types/paths.coffee":327,"./types/pie.coffee":328,"./types/radar.coffee":329,"./types/rings.js":330,"./types/sankey.coffee":331,"./types/scatter.coffee":333,"./types/table.js":334,"./types/tree_map.coffee":335}]},{},[166,165]),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function f(a,b){for(var c=null==a?0:a.length;c--&&b(a[c],c,a)!==!1;);return a}function g(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){var c=null==a?0:a.length;return!!c&&t(a,b,0)>-1}function j(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a){return a.split("")}function q(a){return a.match(Mb)||[]}function r(a,b,c){var d;return c(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function s(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function t(a,b,c){return b===b?U(a,b,c):s(a,v,c)}function u(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function v(a){return a!==a}function w(a,b){var c=null==a?0:a.length;return c?B(a,b)/c:Ga}function x(a){return function(b){return null==b?_:b[a]}}function y(a){return function(b){return null==a?_:a[b]}}function z(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function A(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function B(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==_&&(c=c===_?f:c+f)}return c}function C(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function D(a,b){return k(b,function(b){return[b,a[b]]})}function E(a){return function(b){return a(b)}}function F(a,b){return k(b,function(b){return a[b]})}function G(a,b){return a.has(b)}function H(a,b){for(var c=-1,d=a.length;++c<d&&t(b,a[c],0)>-1;);return c}function I(a,b){for(var c=a.length;c--&&t(b,a[c],0)>-1;);return c}function J(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&++d;return d}function K(a){return"\\"+Yc[a]}function L(a,b){return null==a?_:a[b]}function M(a){return Pc.test(a)}function N(a){return Qc.test(a)}function O(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function P(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function Q(a,b){return function(c){return a(b(c))}}function R(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];(g===b||g===ga)&&(a[c]=ga,f[e++]=c)}return f}function S(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function T(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function U(a,b,c){for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function V(a,b,c){for(var d=c+1;d--;)if(a[d]===b)return d;return d}function W(a){return M(a)?Y(a):nd(a)}function X(a){return M(a)?Z(a):p(a)}function Y(a){for(var b=Nc.lastIndex=0;Nc.test(a);)++b;return b}function Z(a){return a.match(Nc)||[]}function $(a){return a.match(Oc)||[]}var _,aa="4.17.2",ba=200,ca="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",da="Expected a function",ea="__lodash_hash_undefined__",fa=500,ga="__lodash_placeholder__",ha=1,ia=2,ja=4,ka=1,la=2,ma=1,na=2,oa=4,pa=8,qa=16,ra=32,sa=64,ta=128,ua=256,va=512,wa=30,xa="...",ya=800,za=16,Aa=1,Ba=2,Ca=3,Da=1/0,Ea=9007199254740991,Fa=1.7976931348623157e308,Ga=NaN,Ha=4294967295,Ia=Ha-1,Ja=Ha>>>1,Ka=[["ary",ta],["bind",ma],["bindKey",na],["curry",pa],["curryRight",qa],["flip",va],["partial",ra],["partialRight",sa],["rearg",ua]],La="[object Arguments]",Ma="[object Array]",Na="[object AsyncFunction]",Oa="[object Boolean]",Pa="[object Date]",Qa="[object DOMException]",Ra="[object Error]",Sa="[object Function]",Ta="[object GeneratorFunction]",Ua="[object Map]",Va="[object Number]",Wa="[object Null]",Xa="[object Object]",Ya="[object Promise]",Za="[object Proxy]",$a="[object RegExp]",_a="[object Set]",ab="[object String]",bb="[object Symbol]",cb="[object Undefined]",db="[object WeakMap]",eb="[object WeakSet]",fb="[object ArrayBuffer]",gb="[object DataView]",hb="[object Float32Array]",ib="[object Float64Array]",jb="[object Int8Array]",kb="[object Int16Array]",lb="[object Int32Array]",mb="[object Uint8Array]",nb="[object Uint8ClampedArray]",ob="[object Uint16Array]",pb="[object Uint32Array]",qb=/\b__p \+= '';/g,rb=/\b(__p \+=) '' \+/g,sb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tb=/&(?:amp|lt|gt|quot|#39);/g,ub=/[&<>"']/g,vb=RegExp(tb.source),wb=RegExp(ub.source),xb=/<%-([\s\S]+?)%>/g,yb=/<%([\s\S]+?)%>/g,zb=/<%=([\s\S]+?)%>/g,Ab=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bb=/^\w*$/,Cb=/^\./,Db=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eb=/[\\^$.*+?()[\]{}|]/g,Fb=RegExp(Eb.source),Gb=/^\s+|\s+$/g,Hb=/^\s+/,Ib=/\s+$/,Jb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Kb=/\{\n\/\* \[wrapped with (.+)\] \*/,Lb=/,? & /,Mb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nb=/\\(\\)?/g,Ob=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pb=/\w*$/,Qb=/^[-+]0x[0-9a-f]+$/i,Rb=/^0b[01]+$/i,Sb=/^\[object .+?Constructor\]$/,Tb=/^0o[0-7]+$/i,Ub=/^(?:0|[1-9]\d*)$/,Vb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wb=/($^)/,Xb=/['\n\r\u2028\u2029\\]/g,Yb="\\ud800-\\udfff",Zb="\\u0300-\\u036f",$b="\\ufe20-\\ufe2f",_b="\\u20d0-\\u20ff",ac=Zb+$b+_b,bc="\\u2700-\\u27bf",cc="a-z\\xdf-\\xf6\\xf8-\\xff",dc="\\xac\\xb1\\xd7\\xf7",ec="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fc="\\u2000-\\u206f",gc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hc="A-Z\\xc0-\\xd6\\xd8-\\xde",ic="\\ufe0e\\ufe0f",jc=dc+ec+fc+gc,kc="['’]",lc="["+Yb+"]",mc="["+jc+"]",nc="["+ac+"]",oc="\\d+",pc="["+bc+"]",qc="["+cc+"]",rc="[^"+Yb+jc+oc+bc+cc+hc+"]",sc="\\ud83c[\\udffb-\\udfff]",tc="(?:"+nc+"|"+sc+")",uc="[^"+Yb+"]",vc="(?:\\ud83c[\\udde6-\\uddff]){2}",wc="[\\ud800-\\udbff][\\udc00-\\udfff]",xc="["+hc+"]",yc="\\u200d",zc="(?:"+qc+"|"+rc+")",Ac="(?:"+xc+"|"+rc+")",Bc="(?:"+kc+"(?:d|ll|m|re|s|t|ve))?",Cc="(?:"+kc+"(?:D|LL|M|RE|S|T|VE))?",Dc=tc+"?",Ec="["+ic+"]?",Fc="(?:"+yc+"(?:"+[uc,vc,wc].join("|")+")"+Ec+Dc+")*",Gc="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Hc="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Ic=Ec+Dc+Fc,Jc="(?:"+[pc,vc,wc].join("|")+")"+Ic,Kc="(?:"+[uc+nc+"?",nc,vc,wc,lc].join("|")+")",Lc=RegExp(kc,"g"),Mc=RegExp(nc,"g"),Nc=RegExp(sc+"(?="+sc+")|"+Kc+Ic,"g"),Oc=RegExp([xc+"?"+qc+"+"+Bc+"(?="+[mc,xc,"$"].join("|")+")",Ac+"+"+Cc+"(?="+[mc,xc+zc,"$"].join("|")+")",xc+"?"+zc+"+"+Bc,xc+"+"+Cc,Hc,Gc,oc,Jc].join("|"),"g"),Pc=RegExp("["+yc+Yb+ac+ic+"]"),Qc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Rc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sc=-1,Tc={};Tc[hb]=Tc[ib]=Tc[jb]=Tc[kb]=Tc[lb]=Tc[mb]=Tc[nb]=Tc[ob]=Tc[pb]=!0,Tc[La]=Tc[Ma]=Tc[fb]=Tc[Oa]=Tc[gb]=Tc[Pa]=Tc[Ra]=Tc[Sa]=Tc[Ua]=Tc[Va]=Tc[Xa]=Tc[$a]=Tc[_a]=Tc[ab]=Tc[db]=!1;
var Uc={};Uc[La]=Uc[Ma]=Uc[fb]=Uc[gb]=Uc[Oa]=Uc[Pa]=Uc[hb]=Uc[ib]=Uc[jb]=Uc[kb]=Uc[lb]=Uc[Ua]=Uc[Va]=Uc[Xa]=Uc[$a]=Uc[_a]=Uc[ab]=Uc[bb]=Uc[mb]=Uc[nb]=Uc[ob]=Uc[pb]=!0,Uc[Ra]=Uc[Sa]=Uc[db]=!1;var Vc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Wc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Yc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zc=parseFloat,$c=parseInt,_c="object"==typeof global&&global&&global.Object===Object&&global,ad="object"==typeof self&&self&&self.Object===Object&&self,bd=_c||ad||Function("return this")(),cd="object"==typeof exports&&exports&&!exports.nodeType&&exports,dd=cd&&"object"==typeof module&&module&&!module.nodeType&&module,ed=dd&&dd.exports===cd,fd=ed&&_c.process,gd=function(){try{return fd&&fd.binding&&fd.binding("util")}catch(a){}}(),hd=gd&&gd.isArrayBuffer,id=gd&&gd.isDate,jd=gd&&gd.isMap,kd=gd&&gd.isRegExp,ld=gd&&gd.isSet,md=gd&&gd.isTypedArray,nd=x("length"),od=y(Vc),pd=y(Wc),qd=y(Xc),rd=function td(p){function y(a){if(hi(a)&&!sm(a)&&!(a instanceof Z)){if(a instanceof Y)return a;if(sk.call(a,"__wrapped__"))return eg(a)}return new Y(a)}function U(){}function Y(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=_}function Z(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ha,this.__views__=[]}function Mb(){var a=new Z(this.__wrapped__);return a.__actions__=Oe(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Oe(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Oe(this.__views__),a}function Yb(){if(this.__filtered__){var a=new Z(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Zb(){var a=this.__wrapped__.value(),b=this.__dir__,c=sm(a),d=0>b,e=c?a.length:0,f=Bf(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=Wk(i,this.__takeCount__);if(!c||ba>e||e==i&&n==i)return ve(a,this.__actions__);var o=[];a:for(;i--&&n>m;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==Ba)q=u;else if(!u){if(t==Aa)continue a;break a}}o[m++]=q}return o}function $b(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function _b(){this.__data__=el?el(null):{},this.size=0}function ac(a){var b=this.has(a)&&delete this.__data__[a];return this.size-=b?1:0,b}function bc(a){var b=this.__data__;if(el){var c=b[a];return c===ea?_:c}return sk.call(b,a)?b[a]:_}function cc(a){var b=this.__data__;return el?b[a]!==_:sk.call(b,a)}function dc(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=el&&b===_?ea:b,this}function ec(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function fc(){this.__data__=[],this.size=0}function gc(a){var b=this.__data__,c=Gc(b,a);if(0>c)return!1;var d=b.length-1;return c==d?b.pop():Gk.call(b,c,1),--this.size,!0}function hc(a){var b=this.__data__,c=Gc(b,a);return 0>c?_:b[c][1]}function ic(a){return Gc(this.__data__,a)>-1}function jc(a,b){var c=this.__data__,d=Gc(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this}function kc(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function lc(){this.size=0,this.__data__={hash:new $b,map:new(al||ec),string:new $b}}function mc(a){var b=xf(this,a)["delete"](a);return this.size-=b?1:0,b}function nc(a){return xf(this,a).get(a)}function oc(a){return xf(this,a).has(a)}function pc(a,b){var c=xf(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this}function qc(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new kc;++b<c;)this.add(a[b])}function rc(a){return this.__data__.set(a,ea),this}function sc(a){return this.__data__.has(a)}function tc(a){var b=this.__data__=new ec(a);this.size=b.size}function uc(){this.__data__=new ec,this.size=0}function vc(a){var b=this.__data__,c=b["delete"](a);return this.size=b.size,c}function wc(a){return this.__data__.get(a)}function xc(a){return this.__data__.has(a)}function yc(a,b){var c=this.__data__;if(c instanceof ec){var d=c.__data__;if(!al||d.length<ba-1)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new kc(d)}return c.set(a,b),this.size=c.size,this}function zc(a,b){var c=sm(a),d=!c&&rm(a),e=!c&&!d&&um(a),f=!c&&!d&&!e&&zm(a),g=c||d||e||f,h=g?C(a.length,lk):[],i=h.length;for(var j in a)!b&&!sk.call(a,j)||g&&("length"==j||e&&("offset"==j||"parent"==j)||f&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||Jf(j,i))||h.push(j);return h}function Ac(a){var b=a.length;return b?a[ce(0,b-1)]:_}function Bc(a,b){return ag(Oe(a),Oc(b,0,a.length))}function Cc(a){return ag(Oe(a))}function Dc(a,b,c,d){return a===_||Vh(a,pk[c])&&!sk.call(d,c)?b:a}function Ec(a,b,c){(c!==_&&!Vh(a[b],c)||c===_&&!(b in a))&&Kc(a,b,c)}function Fc(a,b,c){var d=a[b];sk.call(a,b)&&Vh(d,c)&&(c!==_||b in a)||Kc(a,b,c)}function Gc(a,b){for(var c=a.length;c--;)if(Vh(a[c][0],b))return c;return-1}function Hc(a,b,c,d){return ql(a,function(a,e,f){b(d,a,c(a),f)}),d}function Ic(a,b){return a&&Pe(b,Qi(b),a)}function Jc(a,b){return a&&Pe(b,Ri(b),a)}function Kc(a,b,c){"__proto__"==b&&Kk?Kk(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function Nc(a,b){for(var c=-1,d=b.length,e=ek(d),f=null==a;++c<d;)e[c]=f?_:Ni(a,b[c]);return e}function Oc(a,b,c){return a===a&&(c!==_&&(a=c>=a?a:c),b!==_&&(a=a>=b?a:b)),a}function Pc(a,b,c,d,f,g){var h,i=b&ha,j=b&ia,k=b&ja;if(c&&(h=f?c(a,d,f,g):c(a)),h!==_)return h;if(!gi(a))return a;var l=sm(a);if(l){if(h=Ef(a),!i)return Oe(a,h)}else{var m=Cl(a),n=m==Sa||m==Ta;if(um(a))return Ce(a,i);if(m==Xa||m==La||n&&!f){if(h=j||n?{}:Ff(a),!i)return j?Re(a,Jc(h,a)):Qe(a,Ic(h,a))}else{if(!Uc[m])return f?a:{};h=Gf(a,m,Pc,i)}}g||(g=new tc);var o=g.get(a);if(o)return o;g.set(a,h);var p=k?j?tf:sf:j?Ri:Qi,q=l?_:p(a);return e(q||a,function(d,e){q&&(e=d,d=a[e]),Fc(h,e,Pc(d,b,c,e,a,g))}),h}function Qc(a){var b=Qi(a);return function(c){return Vc(c,a,b)}}function Vc(a,b,c){var d=c.length;if(null==a)return!d;for(a=jk(a);d--;){var e=c[d],f=b[e],g=a[e];if(g===_&&!(e in a)||!f(g))return!1}return!0}function Wc(a,b,c){if("function"!=typeof a)throw new mk(da);return Fl(function(){a.apply(_,c)},b)}function Xc(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,E(c))),d?(f=j,g=!1):b.length>=ba&&(f=G,g=!1,b=new qc(b));a:for(;++e<h;){var n=a[e],o=null==c?n:c(n);if(n=d||0!==n?n:0,g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function Yc(a,b){var c=!0;return ql(a,function(a,d,e){return c=!!b(a,d,e)}),c}function _c(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===_?g===g&&!si(g):c(g,h)))var h=g,i=f}return i}function ad(a,b,c,d){var e=a.length;for(c=yi(c),0>c&&(c=-c>e?0:e+c),d=d===_||d>e?e:yi(d),0>d&&(d+=e),d=c>d?0:zi(d);d>c;)a[c++]=b;return a}function cd(a,b){var c=[];return ql(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function dd(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=If),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?dd(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function fd(a,b){return a&&sl(a,b,Qi)}function gd(a,b){return a&&tl(a,b,Qi)}function nd(a,b){return h(b,function(b){return di(a[b])})}function rd(a,b){b=Ae(b,a);for(var c=0,d=b.length;null!=a&&d>c;)a=a[bg(b[c++])];return c&&c==d?a:_}function ud(a,b,c){var d=b(a);return sm(a)?d:l(d,c(a))}function vd(a){return null==a?a===_?cb:Wa:(a=jk(a),Jk&&Jk in a?Af(a):Wf(a))}function wd(a,b){return a>b}function xd(a,b){return null!=a&&sk.call(a,b)}function yd(a,b){return null!=a&&b in jk(a)}function zd(a,b,c){return a>=Wk(b,c)&&a<Vk(b,c)}function Ad(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=ek(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,E(b))),l=Wk(n.length,l),h[g]=!c&&(b||e>=120&&n.length>=120)?new qc(g&&n):_}n=a[0];var o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q;if(q=c||0!==q?q:0,!(p?G(p,r):d(m,r,c))){for(g=f;--g;){var s=h[g];if(!(s?G(s,r):d(a[g],r,c)))continue a}p&&p.push(r),m.push(q)}}return m}function Bd(a,b,c,d){return fd(a,function(a,e,f){b(d,c(a),e,f)}),d}function Cd(a,b,d){b=Ae(b,a),a=Yf(a,b);var e=null==a?a:a[bg(xg(b))];return null==e?_:c(e,a,d)}function Dd(a){return hi(a)&&vd(a)==La}function Ed(a){return hi(a)&&vd(a)==fb}function Fd(a){return hi(a)&&vd(a)==Pa}function Gd(a,b,c,d,e){return a===b?!0:null==a||null==b||!gi(a)&&!hi(b)?a!==a&&b!==b:Hd(a,b,c,d,Gd,e)}function Hd(a,b,c,d,e,f){var g=sm(a),h=sm(b),i=Ma,j=Ma;g||(i=Cl(a),i=i==La?Xa:i),h||(j=Cl(b),j=j==La?Xa:j);var k=i==Xa,l=j==Xa,m=i==j;if(m&&um(a)){if(!um(b))return!1;g=!0,k=!1}if(m&&!k)return f||(f=new tc),g||zm(a)?of(a,b,c,d,e,f):pf(a,b,i,c,d,e,f);if(!(c&ka)){var n=k&&sk.call(a,"__wrapped__"),o=l&&sk.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new tc),e(p,q,c,d,f)}}return m?(f||(f=new tc),qf(a,b,c,d,e,f)):!1}function Id(a){return hi(a)&&Cl(a)==Ua}function Jd(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=jk(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===_&&!(i in a))return!1}else{var l=new tc;if(d)var m=d(j,k,i,a,b,l);if(!(m===_?Gd(k,j,ka|la,d,l):m))return!1}}return!0}function Kd(a){if(!gi(a)||Of(a))return!1;var b=di(a)?yk:Sb;return b.test(cg(a))}function Ld(a){return hi(a)&&vd(a)==$a}function Md(a){return hi(a)&&Cl(a)==_a}function Nd(a){return hi(a)&&fi(a.length)&&!!Tc[vd(a)]}function Od(a){return"function"==typeof a?a:null==a?Gj:"object"==typeof a?sm(a)?Ud(a[0],a[1]):Td(a):Oj(a)}function Pd(a){if(!Pf(a))return Uk(a);var b=[];for(var c in jk(a))sk.call(a,c)&&"constructor"!=c&&b.push(c);return b}function Qd(a){if(!gi(a))return Vf(a);var b=Pf(a),c=[];for(var d in a)("constructor"!=d||!b&&sk.call(a,d))&&c.push(d);return c}function Rd(a,b){return b>a}function Sd(a,b){var c=-1,d=Wh(a)?ek(a.length):[];return ql(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Td(a){var b=yf(a);return 1==b.length&&b[0][2]?Rf(b[0][0],b[0][1]):function(c){return c===a||Jd(c,a,b)}}function Ud(a,b){return Lf(a)&&Qf(b)?Rf(bg(a),b):function(c){var d=Ni(c,a);return d===_&&d===b?Pi(c,a):Gd(b,d,ka|la)}}function Vd(a,b,c,d,e){a!==b&&sl(b,function(f,g){if(gi(f))e||(e=new tc),Wd(a,b,g,c,Vd,d,e);else{var h=d?d(a[g],f,g+"",a,b,e):_;h===_&&(h=f),Ec(a,g,h)}},Ri)}function Wd(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void Ec(a,c,j);var k=f?f(h,i,c+"",a,b,g):_,l=k===_;if(l){var m=sm(i),n=!m&&um(i),o=!m&&!n&&zm(i);k=i,m||n||o?sm(h)?k=h:Xh(h)?k=Oe(h):n?(l=!1,k=Ce(i,!0)):o?(l=!1,k=Je(i,!0)):k=[]:pi(i)||rm(i)?(k=h,rm(h)?k=Bi(h):(!gi(h)||d&&di(h))&&(k=Ff(i))):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g["delete"](i)),Ec(a,c,k)}function Xd(a,b){var c=a.length;if(c)return b+=0>b?c:0,Jf(b,c)?a[b]:_}function Yd(a,b,c){var d=-1;b=k(b.length?b:[Gj],E(wf()));var e=Sd(a,function(a,c,e){var f=k(b,function(b){return b(a)});return{criteria:f,index:++d,value:a}});return A(e,function(a,b){return Le(a,b,c)})}function Zd(a,b){return a=jk(a),$d(a,b,function(b,c){return Pi(a,c)})}function $d(a,b,c){for(var d=-1,e=b.length,f={};++d<e;){var g=b[d],h=rd(a,g);c(h,g)&&ie(f,Ae(g,a),h)}return f}function _d(a){return function(b){return rd(b,a)}}function ae(a,b,c,d){var e=d?u:t,f=-1,g=b.length,h=a;for(a===b&&(b=Oe(b)),c&&(h=k(a,E(c)));++f<g;)for(var i=0,j=b[f],l=c?c(j):j;(i=e(h,l,i,d))>-1;)h!==a&&Gk.call(h,i,1),Gk.call(a,i,1);return a}function be(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;Jf(e)?Gk.call(a,e,1):se(a,e)}}return a}function ce(a,b){return a+Pk(Zk()*(b-a+1))}function de(a,b,c,d){for(var e=-1,f=Vk(Ok((b-a)/(c||1)),0),g=ek(f);f--;)g[d?f:++e]=a,a+=c;return g}function ee(a,b){var c="";if(!a||1>b||b>Ea)return c;do b%2&&(c+=a),b=Pk(b/2),b&&(a+=a);while(b);return c}function fe(a,b){return Gl(Xf(a,b,Gj),a+"")}function ge(a){return Ac(bj(a))}function he(a,b){var c=bj(a);return ag(c,Oc(b,0,c.length))}function ie(a,b,c,d){if(!gi(a))return a;b=Ae(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=bg(b[e]),j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):_,j===_&&(j=gi(k)?k:Jf(b[e+1])?[]:{})}Fc(h,i,j),h=h[i]}return a}function je(a){return ag(bj(a))}function ke(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=ek(e);++d<e;)f[d]=a[d+b];return f}function le(a,b){var c;return ql(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function me(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&Ja>=e){for(;e>d;){var f=d+e>>>1,g=a[f];null!==g&&!si(g)&&(c?b>=g:b>g)?d=f+1:e=f}return e}return ne(a,b,Gj,c)}function ne(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,i=si(b),j=b===_;f>e;){var k=Pk((e+f)/2),l=c(a[k]),m=l!==_,n=null===l,o=l===l,p=si(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?!1:d?b>=l:b>l;q?e=k+1:f=k}return Wk(f,Ia)}function oe(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!Vh(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function pe(a){return"number"==typeof a?a:si(a)?Ga:+a}function qe(a){if("string"==typeof a)return a;if(sm(a))return k(a,qe)+"";if(si(a))return ol?ol.call(a):"";var b=a+"";return"0"==b&&1/a==-Da?"-0":b}function re(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(f>=ba){var l=b?null:yl(a);if(l)return S(l);g=!1,e=G,k=new qc}else k=b?[]:h;a:for(;++d<f;){var m=a[d],n=b?b(m):m;if(m=c||0!==m?m:0,g&&n===n){for(var o=k.length;o--;)if(k[o]===n)continue a;b&&k.push(n),h.push(m)}else e(k,n,c)||(k!==h&&k.push(n),h.push(m))}return h}function se(a,b){return b=Ae(b,a),a=Yf(a,b),null==a||delete a[bg(xg(b))]}function te(a,b,c,d){return ie(a,b,c(rd(a,b)),d)}function ue(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?ke(a,d?0:f,d?f+1:e):ke(a,d?f+1:0,d?e:f)}function ve(a,b){var c=a;return c instanceof Z&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function we(a,b,c){var d=a.length;if(2>d)return d?re(a[0]):[];for(var e=-1,f=ek(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=Xc(f[e]||g,a[h],b,c));return re(dd(f,1),b,c)}function xe(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=f>d?b[d]:_;c(g,a[d],h)}return g}function ye(a){return Xh(a)?a:[]}function ze(a){return"function"==typeof a?a:Gj}function Ae(a,b){return sm(a)?a:Lf(a,b)?[a]:Hl(Di(a))}function Be(a,b,c){var d=a.length;return c=c===_?d:c,!b&&c>=d?a:ke(a,b,c)}function Ce(a,b){if(b)return a.slice();var c=a.length,d=Ck?Ck(c):new a.constructor(c);return a.copy(d),d}function De(a){var b=new a.constructor(a.byteLength);return new Bk(b).set(new Bk(a)),b}function Ee(a,b){var c=b?De(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function Fe(b,c,d){var e=c?d(P(b),ha):P(b);return m(e,a,new b.constructor)}function Ge(a){var b=new a.constructor(a.source,Pb.exec(a));return b.lastIndex=a.lastIndex,b}function He(a,c,d){var e=c?d(S(a),ha):S(a);return m(e,b,new a.constructor)}function Ie(a){return nl?jk(nl.call(a)):{}}function Je(a,b){var c=b?De(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function Ke(a,b){if(a!==b){var c=a!==_,d=null===a,e=a===a,f=si(a),g=b!==_,h=null===b,i=b===b,j=si(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&b>a||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function Le(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Ke(e[d],f[d]);if(i){if(d>=h)return i;var j=c[d];return i*("desc"==j?-1:1)}}return a.index-b.index}function Me(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Vk(f-g,0),k=ek(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||f>e)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function Ne(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Vk(f-h,0),l=ek(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||f>e)&&(l[n+c[g]]=a[e++]);return l}function Oe(a,b){var c=-1,d=a.length;for(b||(b=ek(d));++c<d;)b[c]=a[c];return b}function Pe(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=d?d(c[h],a[h],h,c,a):_;i===_&&(i=a[h]),e?Kc(c,h,i):Fc(c,h,i)}return c}function Qe(a,b){return Pe(a,Al(a),b)}function Re(a,b){return Pe(a,Bl(a),b)}function Se(a,b){return function(c,e){var f=sm(c)?d:Hc,g=b?b():{};return f(c,a,wf(e,2),g)}}function Te(a){return fe(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:_,g=e>2?c[2]:_;for(f=a.length>3&&"function"==typeof f?(e--,f):_,g&&Kf(c[0],c[1],g)&&(f=3>e?_:f,e=1),b=jk(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function Ue(a,b){return function(c,d){if(null==c)return c;if(!Wh(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=jk(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function Ve(a){return function(b,c,d){for(var e=-1,f=jk(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function We(a,b,c){function d(){var b=this&&this!==bd&&this instanceof d?f:a;return b.apply(e?c:this,arguments)}var e=b&ma,f=Ze(a);return d}function Xe(a){return function(b){b=Di(b);var c=M(b)?X(b):_,d=c?c[0]:b.charAt(0),e=c?Be(c,1).join(""):b.slice(1);return d[a]()+e}}function Ye(a){return function(b){return m(Bj(hj(b).replace(Lc,"")),a,"")}}function Ze(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=pl(a.prototype),d=a.apply(c,b);return gi(d)?d:c}}function $e(a,b,d){function e(){for(var g=arguments.length,h=ek(g),i=g,j=vf(e);i--;)h[i]=arguments[i];var k=3>g&&h[0]!==j&&h[g-1]!==j?[]:R(h,j);if(g-=k.length,d>g)return kf(a,b,bf,e.placeholder,_,h,k,_,_,d-g);var l=this&&this!==bd&&this instanceof e?f:a;return c(l,this,h)}var f=Ze(a);return e}function _e(a){return function(b,c,d){var e=jk(b);if(!Wh(b)){var f=wf(c,3);b=Qi(b),c=function(a){return f(e[a],a,e)}}var g=a(b,c,d);return g>-1?e[f?b[g]:g]:_}}function af(a){return rf(function(b){var c=b.length,d=c,e=Y.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new mk(da);if(e&&!g&&"wrapper"==uf(f))var g=new Y([],!0)}for(d=g?d:c;++d<c;){f=b[d];var h=uf(f),i="wrapper"==h?zl(f):_;g=i&&Nf(i[0])&&i[1]==(ta|pa|ra|ua)&&!i[4].length&&1==i[9]?g[uf(i[0])].apply(g,i[3]):1==f.length&&Nf(f)?g[h]():g.thru(f)}return function(){var a=arguments,d=a[0];if(g&&1==a.length&&sm(d)&&d.length>=ba)return g.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function bf(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=ek(r),t=r;t--;)s[t]=arguments[t];if(o)var u=vf(k),v=J(s,u);if(d&&(s=Me(s,d,e,o)),f&&(s=Ne(s,f,g,o)),r-=v,o&&j>r){var w=R(s,u);return kf(a,b,bf,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=Zf(s,h):p&&r>1&&s.reverse(),l&&r>i&&(s.length=i),this&&this!==bd&&this instanceof k&&(y=q||Ze(y)),y.apply(x,s)}var l=b&ta,m=b&ma,n=b&na,o=b&(pa|qa),p=b&va,q=n?_:Ze(a);return k}function cf(a,b){return function(c,d){return Bd(c,a,b(d),{})}}function df(a,b){return function(c,d){var e;if(c===_&&d===_)return b;if(c!==_&&(e=c),d!==_){if(e===_)return d;"string"==typeof c||"string"==typeof d?(c=qe(c),d=qe(d)):(c=pe(c),d=pe(d)),e=a(c,d)}return e}}function ef(a){return rf(function(b){return b=k(b,E(wf())),fe(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function ff(a,b){b=b===_?" ":qe(b);var c=b.length;if(2>c)return c?ee(b,a):b;var d=ee(b,Ok(a/W(b)));return M(b)?Be(X(d),0,a).join(""):d.slice(0,a)}function gf(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=ek(k+i),m=this&&this!==bd&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=b&ma,h=Ze(a);return f}function hf(a){return function(b,c,d){return d&&"number"!=typeof d&&Kf(b,c,d)&&(c=d=_),b=xi(b),c===_?(c=b,b=0):c=xi(c),d=d===_?c>b?1:-1:xi(d),de(b,c,d,a)}}function jf(a){return function(b,c){return("string"!=typeof b||"string"!=typeof c)&&(b=Ai(b),c=Ai(c)),a(b,c)}}function kf(a,b,c,d,e,f,g,h,i,j){var k=b&pa,l=k?g:_,m=k?_:g,n=k?f:_,o=k?_:f;b|=k?ra:sa,b&=~(k?sa:ra),b&oa||(b&=~(ma|na));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(_,p);return Nf(a)&&El(q,p),q.placeholder=d,$f(q,a,b)}function lf(a){var b=ik[a];return function(a,c){if(a=Ai(a),c=Wk(yi(c),292)){var d=(Di(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));return d=(Di(e)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function mf(a){return function(b){var c=Cl(b);return c==Ua?P(b):c==_a?T(b):D(b,a(b))}}function nf(a,b,c,d,e,f,g,h){var i=b&na;if(!i&&"function"!=typeof a)throw new mk(da);var j=d?d.length:0;if(j||(b&=~(ra|sa),d=e=_),g=g===_?g:Vk(yi(g),0),h=h===_?h:yi(h),j-=e?e.length:0,b&sa){var k=d,l=e;d=e=_}var m=i?_:zl(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&Tf(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=null==n[9]?i?0:a.length:Vk(n[9]-j,0),!h&&b&(pa|qa)&&(b&=~(pa|qa)),b&&b!=ma)o=b==pa||b==qa?$e(a,b,h):b!=ra&&b!=(ma|ra)||e.length?bf.apply(_,n):gf(a,b,c,d);else var o=We(a,b,c);var p=m?ul:El;return $f(p(o,n),a,b)}function of(a,b,c,d,e,f){var g=c&ka,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j&&f.get(b))return j==b;var k=-1,l=!0,m=c&la?new qc:_;for(f.set(a,b),f.set(b,a);++k<h;){var n=a[k],p=b[k];if(d)var q=g?d(p,n,k,b,a,f):d(n,p,k,a,b,f);if(q!==_){if(q)continue;l=!1;break}if(m){if(!o(b,function(a,b){return G(m,b)||n!==a&&!e(n,a,c,d,f)?void 0:m.push(b)})){l=!1;break}}else if(n!==p&&!e(n,p,c,d,f)){l=!1;break}}return f["delete"](a),f["delete"](b),l}function pf(a,b,c,d,e,f,g){switch(c){case gb:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case fb:return a.byteLength==b.byteLength&&f(new Bk(a),new Bk(b))?!0:!1;case Oa:case Pa:case Va:return Vh(+a,+b);case Ra:return a.name==b.name&&a.message==b.message;case $a:case ab:return a==b+"";case Ua:var h=P;case _a:var i=d&ka;if(h||(h=S),a.size!=b.size&&!i)return!1;var j=g.get(a);if(j)return j==b;d|=la,g.set(a,b);var k=of(h(a),h(b),d,e,f,g);return g["delete"](a),k;case bb:if(nl)return nl.call(a)==nl.call(b)}return!1}function qf(a,b,c,d,e,f){var g=c&ka,h=Qi(a),i=h.length,j=Qi(b),k=j.length;if(i!=k&&!g)return!1;for(var l=i;l--;){var m=h[l];if(!(g?m in b:sk.call(b,m)))return!1}var n=f.get(a);if(n&&f.get(b))return n==b;var o=!0;f.set(a,b),f.set(b,a);for(var p=g;++l<i;){m=h[l];var q=a[m],r=b[m];if(d)var s=g?d(r,q,m,b,a,f):d(q,r,m,a,b,f);if(!(s===_?q===r||e(q,r,c,d,f):s)){o=!1;break}p||(p="constructor"==m)}if(o&&!p){var t=a.constructor,u=b.constructor;t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u)&&(o=!1)}return f["delete"](a),f["delete"](b),o}function rf(a){return Gl(Xf(a,_,pg),a+"")}function sf(a){return ud(a,Qi,Al)}function tf(a){return ud(a,Ri,Bl)}function uf(a){for(var b=a.name+"",c=gl[b],d=sk.call(gl,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function vf(a){var b=sk.call(y,"placeholder")?y:a;return b.placeholder}function wf(){var a=y.iteratee||Hj;return a=a===Hj?Od:a,arguments.length?a(arguments[0],arguments[1]):a}function xf(a,b){var c=a.__data__;return Mf(b)?c["string"==typeof b?"string":"hash"]:c.map}function yf(a){for(var b=Qi(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,Qf(e)]}return b}function zf(a,b){var c=L(a,b);return Kd(c)?c:_}function Af(a){var b=sk.call(a,Jk),c=a[Jk];try{a[Jk]=_;var d=!0}catch(e){}var f=vk.call(a);return d&&(b?a[Jk]=c:delete a[Jk]),f}function Bf(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=Wk(b,a+g);break;case"takeRight":a=Vk(a,b-g)}}return{start:a,end:b}}function Cf(a){var b=a.match(Kb);return b?b[1].split(Lb):[]}function Df(a,b,c){b=Ae(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=bg(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&fi(e)&&Jf(g,e)&&(sm(a)||rm(a)))}function Ef(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&sk.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Ff(a){return"function"!=typeof a.constructor||Pf(a)?{}:pl(Dk(a))}function Gf(a,b,c,d){var e=a.constructor;switch(b){case fb:return De(a);case Oa:case Pa:return new e(+a);case gb:return Ee(a,d);case hb:case ib:case jb:case kb:case lb:case mb:case nb:case ob:case pb:return Je(a,d);case Ua:return Fe(a,d,c);case Va:case ab:return new e(a);case $a:return Ge(a);case _a:return He(a,d,c);case bb:return Ie(a)}}function Hf(a,b){var c=b.length;if(!c)return a;var d=c-1;return b[d]=(c>1?"& ":"")+b[d],b=b.join(c>2?", ":" "),a.replace(Jb,"{\n/* [wrapped with "+b+"] */\n")}function If(a){return sm(a)||rm(a)||!!(Hk&&a&&a[Hk])}function Jf(a,b){return b=null==b?Ea:b,!!b&&("number"==typeof a||Ub.test(a))&&a>-1&&a%1==0&&b>a}function Kf(a,b,c){if(!gi(c))return!1;var d=typeof b;return("number"==d?Wh(c)&&Jf(b,c.length):"string"==d&&b in c)?Vh(c[b],a):!1}function Lf(a,b){if(sm(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||si(a)?!0:Bb.test(a)||!Ab.test(a)||null!=b&&a in jk(b)}function Mf(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function Nf(a){var b=uf(a),c=y[b];if("function"!=typeof c||!(b in Z.prototype))return!1;if(a===c)return!0;var d=zl(c);return!!d&&a===d[0]}function Of(a){return!!uk&&uk in a}function Pf(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||pk;return a===c}function Qf(a){return a===a&&!gi(a)}function Rf(a,b){return function(c){return null==c?!1:c[a]===b&&(b!==_||a in jk(c))}}function Sf(a){var b=Hh(a,function(a){return c.size===fa&&c.clear(),a}),c=b.cache;return b}function Tf(a,b){var c=a[1],d=b[1],e=c|d,f=(ma|na|ta)>e,g=d==ta&&c==pa||d==ta&&c==ua&&a[7].length<=b[8]||d==(ta|ua)&&b[7].length<=b[8]&&c==pa;if(!f&&!g)return a;d&ma&&(a[2]=b[2],e|=c&ma?0:oa);var h=b[3];if(h){var i=a[3];a[3]=i?Me(i,h,b[4]):h,a[4]=i?R(a[3],ga):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?Ne(i,h,b[6]):h,a[6]=i?R(a[5],ga):b[6]),h=b[7],h&&(a[7]=h),d&ta&&(a[8]=null==a[8]?b[8]:Wk(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Uf(a,b,c,d,e,f){return gi(a)&&gi(b)&&(f.set(b,a),Vd(a,b,_,Uf,f),f["delete"](b)),a}function Vf(a){var b=[];if(null!=a)for(var c in jk(a))b.push(c);return b}function Wf(a){return vk.call(a)}function Xf(a,b,d){return b=Vk(b===_?a.length-1:b,0),function(){for(var e=arguments,f=-1,g=Vk(e.length-b,0),h=ek(g);++f<g;)h[f]=e[b+f];f=-1;for(var i=ek(b+1);++f<b;)i[f]=e[f];return i[b]=d(h),c(a,this,i)}}function Yf(a,b){return b.length<2?a:rd(a,ke(b,0,-1))}function Zf(a,b){for(var c=a.length,d=Wk(b.length,c),e=Oe(a);d--;){var f=b[d];a[d]=Jf(f,c)?e[f]:_}return a}function $f(a,b,c){var d=b+"";return Gl(a,Hf(d,dg(Cf(d),c)))}function _f(a){var b=0,c=0;return function(){var d=Xk(),e=za-(d-c);if(c=d,e>0){if(++b>=ya)return arguments[0]}else b=0;return a.apply(_,arguments)}}function ag(a,b){var c=-1,d=a.length,e=d-1;for(b=b===_?d:b;++c<b;){var f=ce(c,e),g=a[f];a[f]=a[c],a[c]=g}return a.length=b,a}function bg(a){if("string"==typeof a||si(a))return a;var b=a+"";return"0"==b&&1/a==-Da?"-0":b}function cg(a){if(null!=a){try{return rk.call(a)}catch(b){}try{return a+""}catch(b){}}return""}function dg(a,b){return e(Ka,function(c){var d="_."+c[0];b&c[1]&&!i(a,d)&&a.push(d)}),a.sort()}function eg(a){if(a instanceof Z)return a.clone();var b=new Y(a.__wrapped__,a.__chain__);return b.__actions__=Oe(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function fg(a,b,c){b=(c?Kf(a,b,c):b===_)?1:Vk(yi(b),0);var d=null==a?0:a.length;if(!d||1>b)return[];for(var e=0,f=0,g=ek(Ok(d/b));d>e;)g[f++]=ke(a,e,e+=b);return g}function gg(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function hg(){var a=arguments.length;if(!a)return[];for(var b=ek(a-1),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return l(sm(c)?Oe(c):[c],dd(b,1))}function ig(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:yi(b),ke(a,0>b?0:b,d)):[]}function jg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:yi(b),b=d-b,ke(a,0,0>b?0:b)):[]}function kg(a,b){return a&&a.length?ue(a,wf(b,3),!0,!0):[]}function lg(a,b){return a&&a.length?ue(a,wf(b,3),!0):[]}function mg(a,b,c,d){var e=null==a?0:a.length;return e?(c&&"number"!=typeof c&&Kf(a,b,c)&&(c=0,d=e),ad(a,b,c,d)):[]}function ng(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:yi(c);return 0>e&&(e=Vk(d+e,0)),s(a,wf(b,3),e)}function og(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==_&&(e=yi(c),e=0>c?Vk(d+e,0):Wk(e,d-1)),s(a,wf(b,3),e,!0)}function pg(a){var b=null==a?0:a.length;return b?dd(a,1):[]}function qg(a){var b=null==a?0:a.length;return b?dd(a,Da):[]}function rg(a,b){var c=null==a?0:a.length;return c?(b=b===_?1:yi(b),dd(a,b)):[]}function sg(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function tg(a){return a&&a.length?a[0]:_}function ug(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=null==c?0:yi(c);return 0>e&&(e=Vk(d+e,0)),t(a,b,e)}function vg(a){var b=null==a?0:a.length;return b?ke(a,0,-1):[]}function wg(a,b){return null==a?"":Tk.call(a,b)}function xg(a){var b=null==a?0:a.length;return b?a[b-1]:_}function yg(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;return c!==_&&(e=yi(c),e=0>e?Vk(d+e,0):Wk(e,d-1)),b===b?V(a,b,e):s(a,v,e,!0)}function zg(a,b){return a&&a.length?Xd(a,yi(b)):_}function Ag(a,b){return a&&a.length&&b&&b.length?ae(a,b):a}function Bg(a,b,c){return a&&a.length&&b&&b.length?ae(a,b,wf(c,2)):a}function Cg(a,b,c){return a&&a.length&&b&&b.length?ae(a,b,_,c):a}function Dg(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=wf(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return be(a,e),c}function Eg(a){return null==a?a:$k.call(a)}function Fg(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Kf(a,b,c)?(b=0,c=d):(b=null==b?0:yi(b),c=c===_?d:yi(c)),ke(a,b,c)):[]}function Gg(a,b){return me(a,b)}function Hg(a,b,c){return ne(a,b,wf(c,2))}function Ig(a,b){var c=null==a?0:a.length;if(c){var d=me(a,b);if(c>d&&Vh(a[d],b))return d}return-1}function Jg(a,b){return me(a,b,!0)}function Kg(a,b,c){return ne(a,b,wf(c,2),!0)}function Lg(a,b){var c=null==a?0:a.length;if(c){var d=me(a,b,!0)-1;if(Vh(a[d],b))return d}return-1}function Mg(a){return a&&a.length?oe(a):[]}function Ng(a,b){return a&&a.length?oe(a,wf(b,2)):[]}function Og(a){var b=null==a?0:a.length;
return b?ke(a,1,b):[]}function Pg(a,b,c){return a&&a.length?(b=c||b===_?1:yi(b),ke(a,0,0>b?0:b)):[]}function Qg(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===_?1:yi(b),b=d-b,ke(a,0>b?0:b,d)):[]}function Rg(a,b){return a&&a.length?ue(a,wf(b,3),!1,!0):[]}function Sg(a,b){return a&&a.length?ue(a,wf(b,3)):[]}function Tg(a){return a&&a.length?re(a):[]}function Ug(a,b){return a&&a.length?re(a,wf(b,2)):[]}function Vg(a,b){return b="function"==typeof b?b:_,a&&a.length?re(a,_,b):[]}function Wg(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){return Xh(a)?(b=Vk(a.length,b),!0):void 0}),C(b,function(b){return k(a,x(b))})}function Xg(a,b){if(!a||!a.length)return[];var d=Wg(a);return null==b?d:k(d,function(a){return c(b,_,a)})}function Yg(a,b){return xe(a||[],b||[],Fc)}function Zg(a,b){return xe(a||[],b||[],ie)}function $g(a){var b=y(a);return b.__chain__=!0,b}function _g(a,b){return b(a),a}function ah(a,b){return b(a)}function bh(){return $g(this)}function ch(){return new Y(this.value(),this.__chain__)}function dh(){this.__values__===_&&(this.__values__=wi(this.value()));var a=this.__index__>=this.__values__.length,b=a?_:this.__values__[this.__index__++];return{done:a,value:b}}function eh(){return this}function fh(a){for(var b,c=this;c instanceof U;){var d=eg(c);d.__index__=0,d.__values__=_,b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function gh(){var a=this.__wrapped__;if(a instanceof Z){var b=a;return this.__actions__.length&&(b=new Z(this)),b=b.reverse(),b.__actions__.push({func:ah,args:[Eg],thisArg:_}),new Y(b,this.__chain__)}return this.thru(Eg)}function hh(){return ve(this.__wrapped__,this.__actions__)}function ih(a,b,c){var d=sm(a)?g:Yc;return c&&Kf(a,b,c)&&(b=_),d(a,wf(b,3))}function jh(a,b){var c=sm(a)?h:cd;return c(a,wf(b,3))}function kh(a,b){return dd(qh(a,b),1)}function lh(a,b){return dd(qh(a,b),Da)}function mh(a,b,c){return c=c===_?1:yi(c),dd(qh(a,b),c)}function nh(a,b){var c=sm(a)?e:ql;return c(a,wf(b,3))}function oh(a,b){var c=sm(a)?f:rl;return c(a,wf(b,3))}function ph(a,b,c,d){a=Wh(a)?a:bj(a),c=c&&!d?yi(c):0;var e=a.length;return 0>c&&(c=Vk(e+c,0)),ri(a)?e>=c&&a.indexOf(b,c)>-1:!!e&&t(a,b,c)>-1}function qh(a,b){var c=sm(a)?k:Sd;return c(a,wf(b,3))}function rh(a,b,c,d){return null==a?[]:(sm(b)||(b=null==b?[]:[b]),c=d?_:c,sm(c)||(c=null==c?[]:[c]),Yd(a,b,c))}function sh(a,b,c){var d=sm(a)?m:z,e=arguments.length<3;return d(a,wf(b,4),c,e,ql)}function th(a,b,c){var d=sm(a)?n:z,e=arguments.length<3;return d(a,wf(b,4),c,e,rl)}function uh(a,b){var c=sm(a)?h:cd;return c(a,Ih(wf(b,3)))}function vh(a){var b=sm(a)?Ac:ge;return b(a)}function wh(a,b,c){b=(c?Kf(a,b,c):b===_)?1:yi(b);var d=sm(a)?Bc:he;return d(a,b)}function xh(a){var b=sm(a)?Cc:je;return b(a)}function yh(a){if(null==a)return 0;if(Wh(a))return ri(a)?W(a):a.length;var b=Cl(a);return b==Ua||b==_a?a.size:Pd(a).length}function zh(a,b,c){var d=sm(a)?o:le;return c&&Kf(a,b,c)&&(b=_),d(a,wf(b,3))}function Ah(a,b){if("function"!=typeof b)throw new mk(da);return a=yi(a),function(){return--a<1?b.apply(this,arguments):void 0}}function Bh(a,b,c){return b=c?_:b,b=a&&null==b?a.length:b,nf(a,ta,_,_,_,_,b)}function Ch(a,b){var c;if("function"!=typeof b)throw new mk(da);return a=yi(a),function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=_),c}}function Dh(a,b,c){b=c?_:b;var d=nf(a,pa,_,_,_,_,_,b);return d.placeholder=Dh.placeholder,d}function Eh(a,b,c){b=c?_:b;var d=nf(a,qa,_,_,_,_,_,b);return d.placeholder=Eh.placeholder,d}function Fh(a,b,c){function d(b){var c=m,d=n;return m=n=_,s=b,p=a.apply(d,c)}function e(a){return s=a,q=Fl(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?Wk(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===_||c>=b||0>c||u&&d>=o}function h(){var a=gm();return g(a)?i(a):void(q=Fl(h,f(a)))}function i(a){return q=_,v&&m?d(a):(m=n=_,p)}function j(){q!==_&&xl(q),s=0,m=r=n=q=_}function k(){return q===_?p:i(gm())}function l(){var a=gm(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===_)return e(r);if(u)return q=Fl(h,b),d(r)}return q===_&&(q=Fl(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new mk(da);return b=Ai(b)||0,gi(c)&&(t=!!c.leading,u="maxWait"in c,o=u?Vk(Ai(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function Gh(a){return nf(a,va)}function Hh(a,b){if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new mk(da);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g)||f,g};return c.cache=new(Hh.Cache||kc),c}function Ih(a){if("function"!=typeof a)throw new mk(da);return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Jh(a){return Ch(2,a)}function Kh(a,b){if("function"!=typeof a)throw new mk(da);return b=b===_?b:yi(b),fe(a,b)}function Lh(a,b){if("function"!=typeof a)throw new mk(da);return b=b===_?0:Vk(yi(b),0),fe(function(d){var e=d[b],f=Be(d,0,b);return e&&l(f,e),c(a,this,f)})}function Mh(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new mk(da);return gi(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Fh(a,b,{leading:d,maxWait:b,trailing:e})}function Nh(a){return Bh(a,1)}function Oh(a,b){return mm(ze(b),a)}function Ph(){if(!arguments.length)return[];var a=arguments[0];return sm(a)?a:[a]}function Qh(a){return Pc(a,ja)}function Rh(a,b){return b="function"==typeof b?b:_,Pc(a,ja,b)}function Sh(a){return Pc(a,ha|ja)}function Th(a,b){return b="function"==typeof b?b:_,Pc(a,ha|ja,b)}function Uh(a,b){return null==b||Vc(a,b,Qi(b))}function Vh(a,b){return a===b||a!==a&&b!==b}function Wh(a){return null!=a&&fi(a.length)&&!di(a)}function Xh(a){return hi(a)&&Wh(a)}function Yh(a){return a===!0||a===!1||hi(a)&&vd(a)==Oa}function Zh(a){return hi(a)&&1===a.nodeType&&!pi(a)}function $h(a){if(null==a)return!0;if(Wh(a)&&(sm(a)||"string"==typeof a||"function"==typeof a.splice||um(a)||zm(a)||rm(a)))return!a.length;var b=Cl(a);if(b==Ua||b==_a)return!a.size;if(Pf(a))return!Pd(a).length;for(var c in a)if(sk.call(a,c))return!1;return!0}function _h(a,b){return Gd(a,b)}function ai(a,b,c){c="function"==typeof c?c:_;var d=c?c(a,b):_;return d===_?Gd(a,b,_,c):!!d}function bi(a){if(!hi(a))return!1;var b=vd(a);return b==Ra||b==Qa||"string"==typeof a.message&&"string"==typeof a.name&&!pi(a)}function ci(a){return"number"==typeof a&&Sk(a)}function di(a){if(!gi(a))return!1;var b=vd(a);return b==Sa||b==Ta||b==Na||b==Za}function ei(a){return"number"==typeof a&&a==yi(a)}function fi(a){return"number"==typeof a&&a>-1&&a%1==0&&Ea>=a}function gi(a){var b=typeof a;return null!=a&&("object"==b||"function"==b)}function hi(a){return null!=a&&"object"==typeof a}function ii(a,b){return a===b||Jd(a,b,yf(b))}function ji(a,b,c){return c="function"==typeof c?c:_,Jd(a,b,yf(b),c)}function ki(a){return oi(a)&&a!=+a}function li(a){if(Dl(a))throw new gk(ca);return Kd(a)}function mi(a){return null===a}function ni(a){return null==a}function oi(a){return"number"==typeof a||hi(a)&&vd(a)==Va}function pi(a){if(!hi(a)||vd(a)!=Xa)return!1;var b=Dk(a);if(null===b)return!0;var c=sk.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&rk.call(c)==wk}function qi(a){return ei(a)&&a>=-Ea&&Ea>=a}function ri(a){return"string"==typeof a||!sm(a)&&hi(a)&&vd(a)==ab}function si(a){return"symbol"==typeof a||hi(a)&&vd(a)==bb}function ti(a){return a===_}function ui(a){return hi(a)&&Cl(a)==db}function vi(a){return hi(a)&&vd(a)==eb}function wi(a){if(!a)return[];if(Wh(a))return ri(a)?X(a):Oe(a);if(Ik&&a[Ik])return O(a[Ik]());var b=Cl(a),c=b==Ua?P:b==_a?S:bj;return c(a)}function xi(a){if(!a)return 0===a?a:0;if(a=Ai(a),a===Da||a===-Da){var b=0>a?-1:1;return b*Fa}return a===a?a:0}function yi(a){var b=xi(a),c=b%1;return b===b?c?b-c:b:0}function zi(a){return a?Oc(yi(a),0,Ha):0}function Ai(a){if("number"==typeof a)return a;if(si(a))return Ga;if(gi(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=gi(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(Gb,"");var c=Rb.test(a);return c||Tb.test(a)?$c(a.slice(2),c?2:8):Qb.test(a)?Ga:+a}function Bi(a){return Pe(a,Ri(a))}function Ci(a){return Oc(yi(a),-Ea,Ea)}function Di(a){return null==a?"":qe(a)}function Ei(a,b){var c=pl(a);return null==b?c:Ic(c,b)}function Fi(a,b){return r(a,wf(b,3),fd)}function Gi(a,b){return r(a,wf(b,3),gd)}function Hi(a,b){return null==a?a:sl(a,wf(b,3),Ri)}function Ii(a,b){return null==a?a:tl(a,wf(b,3),Ri)}function Ji(a,b){return a&&fd(a,wf(b,3))}function Ki(a,b){return a&&gd(a,wf(b,3))}function Li(a){return null==a?[]:nd(a,Qi(a))}function Mi(a){return null==a?[]:nd(a,Ri(a))}function Ni(a,b,c){var d=null==a?_:rd(a,b);return d===_?c:d}function Oi(a,b){return null!=a&&Df(a,b,xd)}function Pi(a,b){return null!=a&&Df(a,b,yd)}function Qi(a){return Wh(a)?zc(a):Pd(a)}function Ri(a){return Wh(a)?zc(a,!0):Qd(a)}function Si(a,b){var c={};return b=wf(b,3),fd(a,function(a,d,e){Kc(c,b(a,d,e),a)}),c}function Ti(a,b){var c={};return b=wf(b,3),fd(a,function(a,d,e){Kc(c,d,b(a,d,e))}),c}function Ui(a,b){return Vi(a,Ih(wf(b)))}function Vi(a,b){if(null==a)return{};var c=k(tf(a),function(a){return[a]});return b=wf(b),$d(a,c,function(a,c){return b(a,c[0])})}function Wi(a,b,c){b=Ae(b,a);var d=-1,e=b.length;for(e||(e=1,a=_);++d<e;){var f=null==a?_:a[bg(b[d])];f===_&&(d=e,f=c),a=di(f)?f.call(a):f}return a}function Xi(a,b,c){return null==a?a:ie(a,b,c)}function Yi(a,b,c,d){return d="function"==typeof d?d:_,null==a?a:ie(a,b,c,d)}function Zi(a,b,c){var d=sm(a),f=d||um(a)||zm(a);if(b=wf(b,4),null==c){var g=a&&a.constructor;c=f?d?new g:[]:gi(a)&&di(g)?pl(Dk(a)):{}}return(f?e:fd)(a,function(a,d,e){return b(c,a,d,e)}),c}function $i(a,b){return null==a?!0:se(a,b)}function _i(a,b,c){return null==a?a:te(a,b,ze(c))}function aj(a,b,c,d){return d="function"==typeof d?d:_,null==a?a:te(a,b,ze(c),d)}function bj(a){return null==a?[]:F(a,Qi(a))}function cj(a){return null==a?[]:F(a,Ri(a))}function dj(a,b,c){return c===_&&(c=b,b=_),c!==_&&(c=Ai(c),c=c===c?c:0),b!==_&&(b=Ai(b),b=b===b?b:0),Oc(Ai(a),b,c)}function ej(a,b,c){return b=xi(b),c===_?(c=b,b=0):c=xi(c),a=Ai(a),zd(a,b,c)}function fj(a,b,c){if(c&&"boolean"!=typeof c&&Kf(a,b,c)&&(b=c=_),c===_&&("boolean"==typeof b?(c=b,b=_):"boolean"==typeof a&&(c=a,a=_)),a===_&&b===_?(a=0,b=1):(a=xi(a),b===_?(b=a,a=0):b=xi(b)),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=Zk();return Wk(a+e*(b-a+Zc("1e-"+((e+"").length-1))),b)}return ce(a,b)}function gj(a){return Zm(Di(a).toLowerCase())}function hj(a){return a=Di(a),a&&a.replace(Vb,od).replace(Mc,"")}function ij(a,b,c){a=Di(a),b=qe(b);var d=a.length;c=c===_?d:Oc(yi(c),0,d);var e=c;return c-=b.length,c>=0&&a.slice(c,e)==b}function jj(a){return a=Di(a),a&&wb.test(a)?a.replace(ub,pd):a}function kj(a){return a=Di(a),a&&Fb.test(a)?a.replace(Eb,"\\$&"):a}function lj(a,b,c){a=Di(a),b=yi(b);var d=b?W(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return ff(Pk(e),c)+a+ff(Ok(e),c)}function mj(a,b,c){a=Di(a),b=yi(b);var d=b?W(a):0;return b&&b>d?a+ff(b-d,c):a}function nj(a,b,c){a=Di(a),b=yi(b);var d=b?W(a):0;return b&&b>d?ff(b-d,c)+a:a}function oj(a,b,c){return c||null==b?b=0:b&&(b=+b),Yk(Di(a).replace(Hb,""),b||0)}function pj(a,b,c){return b=(c?Kf(a,b,c):b===_)?1:yi(b),ee(Di(a),b)}function qj(){var a=arguments,b=Di(a[0]);return a.length<3?b:b.replace(a[1],a[2])}function rj(a,b,c){return c&&"number"!=typeof c&&Kf(a,b,c)&&(b=c=_),(c=c===_?Ha:c>>>0)?(a=Di(a),a&&("string"==typeof b||null!=b&&!xm(b))&&(b=qe(b),!b&&M(a))?Be(X(a),0,c):a.split(b,c)):[]}function sj(a,b,c){return a=Di(a),c=Oc(yi(c),0,a.length),b=qe(b),a.slice(c,c+b.length)==b}function tj(a,b,c){var d=y.templateSettings;c&&Kf(a,b,c)&&(b=_),a=Di(a),b=Em({},b,d,Dc);var e,f,g=Em({},b.imports,d.imports,Dc),h=Qi(g),i=F(g,h),j=0,k=b.interpolate||Wb,l="__p += '",m=kk((b.escape||Wb).source+"|"+k.source+"|"+(k===zb?Ob:Wb).source+"|"+(b.evaluate||Wb).source+"|$","g"),n="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Sc+"]")+"\n";a.replace(m,function(b,c,d,g,h,i){return d||(d=g),l+=a.slice(j,i).replace(Xb,K),c&&(e=!0,l+="' +\n__e("+c+") +\n'"),h&&(f=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var o=b.variable;o||(l="with (obj) {\n"+l+"\n}\n"),l=(f?l.replace(qb,""):l).replace(rb,"$1").replace(sb,"$1;"),l="function("+(o||"obj")+") {\n"+(o?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(e?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var p=$m(function(){return hk(h,n+"return "+l).apply(_,i)});if(p.source=l,bi(p))throw p;return p}function uj(a){return Di(a).toLowerCase()}function vj(a){return Di(a).toUpperCase()}function wj(a,b,c){if(a=Di(a),a&&(c||b===_))return a.replace(Gb,"");if(!a||!(b=qe(b)))return a;var d=X(a),e=X(b),f=H(d,e),g=I(d,e)+1;return Be(d,f,g).join("")}function xj(a,b,c){if(a=Di(a),a&&(c||b===_))return a.replace(Ib,"");if(!a||!(b=qe(b)))return a;var d=X(a),e=I(d,X(b))+1;return Be(d,0,e).join("")}function yj(a,b,c){if(a=Di(a),a&&(c||b===_))return a.replace(Hb,"");if(!a||!(b=qe(b)))return a;var d=X(a),e=H(d,X(b));return Be(d,e).join("")}function zj(a,b){var c=wa,d=xa;if(gi(b)){var e="separator"in b?b.separator:e;c="length"in b?yi(b.length):c,d="omission"in b?qe(b.omission):d}a=Di(a);var f=a.length;if(M(a)){var g=X(a);f=g.length}if(c>=f)return a;var h=c-W(d);if(1>h)return d;var i=g?Be(g,0,h).join(""):a.slice(0,h);if(e===_)return i+d;if(g&&(h+=i.length-h),xm(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=kk(e.source,Di(Pb.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===_?h:l)}}else if(a.indexOf(qe(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function Aj(a){return a=Di(a),a&&vb.test(a)?a.replace(tb,qd):a}function Bj(a,b,c){return a=Di(a),b=c?_:b,b===_?N(a)?$(a):q(a):a.match(b)||[]}function Cj(a){var b=null==a?0:a.length,d=wf();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new mk(da);return[d(a[0]),a[1]]}):[],fe(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})}function Dj(a){return Qc(Pc(a,ha))}function Ej(a){return function(){return a}}function Fj(a,b){return null==a||a!==a?b:a}function Gj(a){return a}function Hj(a){return Od("function"==typeof a?a:Pc(a,ha))}function Ij(a){return Td(Pc(a,ha))}function Jj(a,b){return Ud(a,Pc(b,ha))}function Kj(a,b,c){var d=Qi(b),f=nd(b,d);null!=c||gi(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=nd(b,Qi(b)));var g=!(gi(c)&&"chain"in c&&!c.chain),h=di(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__),e=c.__actions__=Oe(this.__actions__);return e.push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Lj(){return bd._===this&&(bd._=xk),this}function Mj(){}function Nj(a){return a=yi(a),fe(function(b){return Xd(b,a)})}function Oj(a){return Lf(a)?x(bg(a)):_d(a)}function Pj(a){return function(b){return null==a?_:rd(a,b)}}function Qj(){return[]}function Rj(){return!1}function Sj(){return{}}function Tj(){return""}function Uj(){return!0}function Vj(a,b){if(a=yi(a),1>a||a>Ea)return[];var c=Ha,d=Wk(a,Ha);b=wf(b),a-=Ha;for(var e=C(d,b);++c<a;)b(c);return e}function Wj(a){return sm(a)?k(a,bg):si(a)?[a]:Oe(Hl(Di(a)))}function Xj(a){var b=++tk;return Di(a)+b}function Yj(a){return a&&a.length?_c(a,Gj,wd):_}function Zj(a,b){return a&&a.length?_c(a,wf(b,2),wd):_}function $j(a){return w(a,Gj)}function _j(a,b){return w(a,wf(b,2))}function ak(a){return a&&a.length?_c(a,Gj,Rd):_}function bk(a,b){return a&&a.length?_c(a,wf(b,2),Rd):_}function ck(a){return a&&a.length?B(a,Gj):0}function dk(a,b){return a&&a.length?B(a,wf(b,2)):0}p=null==p?bd:sd.defaults(bd.Object(),p,sd.pick(bd,Rc));var ek=p.Array,fk=p.Date,gk=p.Error,hk=p.Function,ik=p.Math,jk=p.Object,kk=p.RegExp,lk=p.String,mk=p.TypeError,nk=ek.prototype,ok=hk.prototype,pk=jk.prototype,qk=p["__core-js_shared__"],rk=ok.toString,sk=pk.hasOwnProperty,tk=0,uk=function(){var a=/[^.]+$/.exec(qk&&qk.keys&&qk.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),vk=pk.toString,wk=rk.call(jk),xk=bd._,yk=kk("^"+rk.call(sk).replace(Eb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zk=ed?p.Buffer:_,Ak=p.Symbol,Bk=p.Uint8Array,Ck=zk?zk.allocUnsafe:_,Dk=Q(jk.getPrototypeOf,jk),Ek=jk.create,Fk=pk.propertyIsEnumerable,Gk=nk.splice,Hk=Ak?Ak.isConcatSpreadable:_,Ik=Ak?Ak.iterator:_,Jk=Ak?Ak.toStringTag:_,Kk=function(){try{var a=zf(jk,"defineProperty");return a({},"",{}),a}catch(b){}}(),Lk=p.clearTimeout!==bd.clearTimeout&&p.clearTimeout,Mk=fk&&fk.now!==bd.Date.now&&fk.now,Nk=p.setTimeout!==bd.setTimeout&&p.setTimeout,Ok=ik.ceil,Pk=ik.floor,Qk=jk.getOwnPropertySymbols,Rk=zk?zk.isBuffer:_,Sk=p.isFinite,Tk=nk.join,Uk=Q(jk.keys,jk),Vk=ik.max,Wk=ik.min,Xk=fk.now,Yk=p.parseInt,Zk=ik.random,$k=nk.reverse,_k=zf(p,"DataView"),al=zf(p,"Map"),bl=zf(p,"Promise"),cl=zf(p,"Set"),dl=zf(p,"WeakMap"),el=zf(jk,"create"),fl=dl&&new dl,gl={},hl=cg(_k),il=cg(al),jl=cg(bl),kl=cg(cl),ll=cg(dl),ml=Ak?Ak.prototype:_,nl=ml?ml.valueOf:_,ol=ml?ml.toString:_,pl=function(){function a(){}return function(b){if(!gi(b))return{};if(Ek)return Ek(b);a.prototype=b;var c=new a;return a.prototype=_,c}}();y.templateSettings={escape:xb,evaluate:yb,interpolate:zb,variable:"",imports:{_:y}},y.prototype=U.prototype,y.prototype.constructor=y,Y.prototype=pl(U.prototype),Y.prototype.constructor=Y,Z.prototype=pl(U.prototype),Z.prototype.constructor=Z,$b.prototype.clear=_b,$b.prototype["delete"]=ac,$b.prototype.get=bc,$b.prototype.has=cc,$b.prototype.set=dc,ec.prototype.clear=fc,ec.prototype["delete"]=gc,ec.prototype.get=hc,ec.prototype.has=ic,ec.prototype.set=jc,kc.prototype.clear=lc,kc.prototype["delete"]=mc,kc.prototype.get=nc,kc.prototype.has=oc,kc.prototype.set=pc,qc.prototype.add=qc.prototype.push=rc,qc.prototype.has=sc,tc.prototype.clear=uc,tc.prototype["delete"]=vc,tc.prototype.get=wc,tc.prototype.has=xc,tc.prototype.set=yc;var ql=Ue(fd),rl=Ue(gd,!0),sl=Ve(),tl=Ve(!0),ul=fl?function(a,b){return fl.set(a,b),a}:Gj,vl=Kk?function(a,b){return Kk(a,"toString",{configurable:!0,enumerable:!1,value:Ej(b),writable:!0})}:Gj,wl=fe,xl=Lk||function(a){return bd.clearTimeout(a)},yl=cl&&1/S(new cl([,-0]))[1]==Da?function(a){return new cl(a)}:Mj,zl=fl?function(a){return fl.get(a)}:Mj,Al=Qk?Q(Qk,jk):Qj,Bl=Qk?function(a){for(var b=[];a;)l(b,Al(a)),a=Dk(a);return b}:Qj,Cl=vd;(_k&&Cl(new _k(new ArrayBuffer(1)))!=gb||al&&Cl(new al)!=Ua||bl&&Cl(bl.resolve())!=Ya||cl&&Cl(new cl)!=_a||dl&&Cl(new dl)!=db)&&(Cl=function(a){var b=vd(a),c=b==Xa?a.constructor:_,d=c?cg(c):"";if(d)switch(d){case hl:return gb;case il:return Ua;case jl:return Ya;case kl:return _a;case ll:return db}return b});var Dl=qk?di:Rj,El=_f(ul),Fl=Nk||function(a,b){return bd.setTimeout(a,b)},Gl=_f(vl),Hl=Sf(function(a){var b=[];return Cb.test(a)&&b.push(""),a.replace(Db,function(a,c,d,e){b.push(d?e.replace(Nb,"$1"):c||a)}),b}),Il=fe(function(a,b){return Xh(a)?Xc(a,dd(b,1,Xh,!0)):[]}),Jl=fe(function(a,b){var c=xg(b);return Xh(c)&&(c=_),Xh(a)?Xc(a,dd(b,1,Xh,!0),wf(c,2)):[]}),Kl=fe(function(a,b){var c=xg(b);return Xh(c)&&(c=_),Xh(a)?Xc(a,dd(b,1,Xh,!0),_,c):[]}),Ll=fe(function(a){var b=k(a,ye);return b.length&&b[0]===a[0]?Ad(b):[]}),Ml=fe(function(a){var b=xg(a),c=k(a,ye);return b===xg(c)?b=_:c.pop(),c.length&&c[0]===a[0]?Ad(c,wf(b,2)):[]}),Nl=fe(function(a){var b=xg(a),c=k(a,ye);return b="function"==typeof b?b:_,b&&c.pop(),c.length&&c[0]===a[0]?Ad(c,_,b):[]}),Ol=fe(Ag),Pl=rf(function(a,b){var c=null==a?0:a.length,d=Nc(a,b);return be(a,k(b,function(a){return Jf(a,c)?+a:a}).sort(Ke)),d}),Ql=fe(function(a){return re(dd(a,1,Xh,!0))}),Rl=fe(function(a){var b=xg(a);return Xh(b)&&(b=_),re(dd(a,1,Xh,!0),wf(b,2))}),Sl=fe(function(a){var b=xg(a);return b="function"==typeof b?b:_,re(dd(a,1,Xh,!0),_,b)}),Tl=fe(function(a,b){return Xh(a)?Xc(a,b):[]}),Ul=fe(function(a){return we(h(a,Xh))}),Vl=fe(function(a){var b=xg(a);return Xh(b)&&(b=_),we(h(a,Xh),wf(b,2))}),Wl=fe(function(a){var b=xg(a);return b="function"==typeof b?b:_,we(h(a,Xh),_,b)}),Xl=fe(Wg),Yl=fe(function(a){var b=a.length,c=b>1?a[b-1]:_;return c="function"==typeof c?(a.pop(),c):_,Xg(a,c)}),Zl=rf(function(a){var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return Nc(b,a)};return!(b>1||this.__actions__.length)&&d instanceof Z&&Jf(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:ah,args:[e],thisArg:_}),new Y(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(_),a})):this.thru(e)}),$l=Se(function(a,b,c){sk.call(a,c)?++a[c]:Kc(a,c,1)}),_l=_e(ng),am=_e(og),bm=Se(function(a,b,c){sk.call(a,c)?a[c].push(b):Kc(a,c,[b])}),cm=fe(function(a,b,d){var e=-1,f="function"==typeof b,g=Wh(a)?ek(a.length):[];return ql(a,function(a){g[++e]=f?c(b,a,d):Cd(a,b,d)}),g}),dm=Se(function(a,b,c){Kc(a,c,b)}),em=Se(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),fm=fe(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Kf(a,b[0],b[1])?b=[]:c>2&&Kf(b[0],b[1],b[2])&&(b=[b[0]]),Yd(a,dd(b,1),[])}),gm=Mk||function(){return bd.Date.now()},hm=fe(function(a,b,c){var d=ma;if(c.length){var e=R(c,vf(hm));d|=ra}return nf(a,d,b,c,e)}),im=fe(function(a,b,c){var d=ma|na;if(c.length){var e=R(c,vf(im));d|=ra}return nf(b,d,a,c,e)}),jm=fe(function(a,b){return Wc(a,1,b)}),km=fe(function(a,b,c){return Wc(a,Ai(b)||0,c)});Hh.Cache=kc;var lm=wl(function(a,b){b=1==b.length&&sm(b[0])?k(b[0],E(wf())):k(dd(b,1),E(wf()));var d=b.length;return fe(function(e){for(var f=-1,g=Wk(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),mm=fe(function(a,b){var c=R(b,vf(mm));return nf(a,ra,_,b,c)}),nm=fe(function(a,b){var c=R(b,vf(nm));return nf(a,sa,_,b,c)}),om=rf(function(a,b){return nf(a,ua,_,_,_,b)}),pm=jf(wd),qm=jf(function(a,b){return a>=b}),rm=Dd(function(){return arguments}())?Dd:function(a){return hi(a)&&sk.call(a,"callee")&&!Fk.call(a,"callee")},sm=ek.isArray,tm=hd?E(hd):Ed,um=Rk||Rj,vm=id?E(id):Fd,wm=jd?E(jd):Id,xm=kd?E(kd):Ld,ym=ld?E(ld):Md,zm=md?E(md):Nd,Am=jf(Rd),Bm=jf(function(a,b){return b>=a}),Cm=Te(function(a,b){if(Pf(b)||Wh(b))return void Pe(b,Qi(b),a);for(var c in b)sk.call(b,c)&&Fc(a,c,b[c])}),Dm=Te(function(a,b){Pe(b,Ri(b),a)}),Em=Te(function(a,b,c,d){Pe(b,Ri(b),a,d)}),Fm=Te(function(a,b,c,d){Pe(b,Qi(b),a,d)}),Gm=rf(Nc),Hm=fe(function(a){return a.push(_,Dc),c(Em,_,a)}),Im=fe(function(a){return a.push(_,Uf),c(Nm,_,a)}),Jm=cf(function(a,b,c){a[b]=c},Ej(Gj)),Km=cf(function(a,b,c){sk.call(a,b)?a[b].push(c):a[b]=[c]},wf),Lm=fe(Cd),Mm=Te(function(a,b,c){Vd(a,b,c)}),Nm=Te(function(a,b,c,d){Vd(a,b,c,d)}),Om=rf(function(a,b){var c={};if(null==a)return c;var d=!1;b=k(b,function(b){return b=Ae(b,a),d||(d=b.length>1),b}),Pe(a,tf(a),c),d&&(c=Pc(c,ha|ia|ja));for(var e=b.length;e--;)se(c,b[e]);return c}),Pm=rf(function(a,b){return null==a?{}:Zd(a,b)}),Qm=mf(Qi),Rm=mf(Ri),Sm=Ye(function(a,b,c){return b=b.toLowerCase(),a+(c?gj(b):b)}),Tm=Ye(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Um=Ye(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Vm=Xe("toLowerCase"),Wm=Ye(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Xm=Ye(function(a,b,c){return a+(c?" ":"")+Zm(b)}),Ym=Ye(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Zm=Xe("toUpperCase"),$m=fe(function(a,b){try{return c(a,_,b)}catch(d){return bi(d)?d:new gk(d)}}),_m=rf(function(a,b){return e(b,function(b){b=bg(b),Kc(a,b,hm(a[b],a))}),a}),an=af(),bn=af(!0),cn=fe(function(a,b){return function(c){return Cd(c,a,b)}}),dn=fe(function(a,b){return function(c){return Cd(a,c,b)}}),en=ef(k),fn=ef(g),gn=ef(o),hn=hf(),jn=hf(!0),kn=df(function(a,b){return a+b},0),ln=lf("ceil"),mn=df(function(a,b){return a/b},1),nn=lf("floor"),on=df(function(a,b){return a*b},1),pn=lf("round"),qn=df(function(a,b){return a-b},0);return y.after=Ah,y.ary=Bh,y.assign=Cm,y.assignIn=Dm,y.assignInWith=Em,y.assignWith=Fm,y.at=Gm,y.before=Ch,y.bind=hm,y.bindAll=_m,y.bindKey=im,y.castArray=Ph,y.chain=$g,y.chunk=fg,y.compact=gg,y.concat=hg,y.cond=Cj,y.conforms=Dj,y.constant=Ej,y.countBy=$l,y.create=Ei,y.curry=Dh,y.curryRight=Eh,y.debounce=Fh,y.defaults=Hm,y.defaultsDeep=Im,y.defer=jm,y.delay=km,y.difference=Il,y.differenceBy=Jl,y.differenceWith=Kl,y.drop=ig,y.dropRight=jg,y.dropRightWhile=kg,y.dropWhile=lg,y.fill=mg,y.filter=jh,y.flatMap=kh,y.flatMapDeep=lh,y.flatMapDepth=mh,y.flatten=pg,y.flattenDeep=qg,y.flattenDepth=rg,y.flip=Gh,y.flow=an,y.flowRight=bn,y.fromPairs=sg,y.functions=Li,y.functionsIn=Mi,y.groupBy=bm,y.initial=vg,y.intersection=Ll,y.intersectionBy=Ml,y.intersectionWith=Nl,y.invert=Jm,y.invertBy=Km,y.invokeMap=cm,y.iteratee=Hj,y.keyBy=dm,y.keys=Qi,y.keysIn=Ri,y.map=qh,y.mapKeys=Si,y.mapValues=Ti,y.matches=Ij,y.matchesProperty=Jj,y.memoize=Hh,y.merge=Mm,y.mergeWith=Nm,y.method=cn,y.methodOf=dn,y.mixin=Kj,y.negate=Ih,y.nthArg=Nj,y.omit=Om,y.omitBy=Ui,y.once=Jh,y.orderBy=rh,y.over=en,y.overArgs=lm,y.overEvery=fn,y.overSome=gn,y.partial=mm,y.partialRight=nm,y.partition=em,y.pick=Pm,y.pickBy=Vi,y.property=Oj,y.propertyOf=Pj,y.pull=Ol,y.pullAll=Ag,y.pullAllBy=Bg,y.pullAllWith=Cg,y.pullAt=Pl,y.range=hn,y.rangeRight=jn,y.rearg=om,y.reject=uh,y.remove=Dg,y.rest=Kh,y.reverse=Eg,y.sampleSize=wh,y.set=Xi,y.setWith=Yi,y.shuffle=xh,y.slice=Fg,y.sortBy=fm,y.sortedUniq=Mg,y.sortedUniqBy=Ng,y.split=rj,y.spread=Lh,y.tail=Og,y.take=Pg,y.takeRight=Qg,y.takeRightWhile=Rg,y.takeWhile=Sg,y.tap=_g,y.throttle=Mh,y.thru=ah,y.toArray=wi,y.toPairs=Qm,y.toPairsIn=Rm,y.toPath=Wj,y.toPlainObject=Bi,y.transform=Zi,y.unary=Nh,y.union=Ql,y.unionBy=Rl,y.unionWith=Sl,y.uniq=Tg,y.uniqBy=Ug,y.uniqWith=Vg,y.unset=$i,y.unzip=Wg,y.unzipWith=Xg,y.update=_i,y.updateWith=aj,y.values=bj,y.valuesIn=cj,y.without=Tl,y.words=Bj,y.wrap=Oh,y.xor=Ul,y.xorBy=Vl,y.xorWith=Wl,y.zip=Xl,y.zipObject=Yg,y.zipObjectDeep=Zg,y.zipWith=Yl,y.entries=Qm,y.entriesIn=Rm,y.extend=Dm,y.extendWith=Em,Kj(y,y),y.add=kn,y.attempt=$m,y.camelCase=Sm,y.capitalize=gj,y.ceil=ln,y.clamp=dj,y.clone=Qh,y.cloneDeep=Sh,y.cloneDeepWith=Th,y.cloneWith=Rh,y.conformsTo=Uh,y.deburr=hj,y.defaultTo=Fj,y.divide=mn,y.endsWith=ij,y.eq=Vh,y.escape=jj,y.escapeRegExp=kj,y.every=ih,y.find=_l,y.findIndex=ng,y.findKey=Fi,y.findLast=am,y.findLastIndex=og,y.findLastKey=Gi,y.floor=nn,y.forEach=nh,y.forEachRight=oh,y.forIn=Hi,y.forInRight=Ii,y.forOwn=Ji,y.forOwnRight=Ki,y.get=Ni,y.gt=pm,y.gte=qm,y.has=Oi,y.hasIn=Pi,y.head=tg,y.identity=Gj,y.includes=ph,y.indexOf=ug,y.inRange=ej,y.invoke=Lm,y.isArguments=rm,y.isArray=sm,y.isArrayBuffer=tm,y.isArrayLike=Wh,y.isArrayLikeObject=Xh,y.isBoolean=Yh,y.isBuffer=um,y.isDate=vm,y.isElement=Zh,y.isEmpty=$h,y.isEqual=_h,y.isEqualWith=ai,y.isError=bi,y.isFinite=ci,y.isFunction=di,y.isInteger=ei,y.isLength=fi,y.isMap=wm,y.isMatch=ii,y.isMatchWith=ji,y.isNaN=ki,y.isNative=li,y.isNil=ni,y.isNull=mi,y.isNumber=oi,y.isObject=gi,y.isObjectLike=hi,y.isPlainObject=pi,y.isRegExp=xm,y.isSafeInteger=qi,y.isSet=ym,y.isString=ri,y.isSymbol=si,y.isTypedArray=zm,y.isUndefined=ti,y.isWeakMap=ui,y.isWeakSet=vi,y.join=wg,y.kebabCase=Tm,y.last=xg,y.lastIndexOf=yg,y.lowerCase=Um,y.lowerFirst=Vm,y.lt=Am,y.lte=Bm,y.max=Yj,y.maxBy=Zj,y.mean=$j,y.meanBy=_j,y.min=ak,y.minBy=bk,y.stubArray=Qj,y.stubFalse=Rj,y.stubObject=Sj,y.stubString=Tj,y.stubTrue=Uj,y.multiply=on,y.nth=zg,y.noConflict=Lj,y.noop=Mj,y.now=gm,y.pad=lj,y.padEnd=mj,y.padStart=nj,y.parseInt=oj,y.random=fj,y.reduce=sh,y.reduceRight=th,y.repeat=pj,y.replace=qj,y.result=Wi,y.round=pn,y.runInContext=td,y.sample=vh,y.size=yh,y.snakeCase=Wm,y.some=zh,y.sortedIndex=Gg,y.sortedIndexBy=Hg,y.sortedIndexOf=Ig,y.sortedLastIndex=Jg,y.sortedLastIndexBy=Kg,y.sortedLastIndexOf=Lg,y.startCase=Xm,y.startsWith=sj,y.subtract=qn,y.sum=ck,y.sumBy=dk,y.template=tj,y.times=Vj,y.toFinite=xi,y.toInteger=yi,y.toLength=zi,y.toLower=uj,y.toNumber=Ai,y.toSafeInteger=Ci,y.toString=Di,y.toUpper=vj,y.trim=wj,y.trimEnd=xj,y.trimStart=yj,y.truncate=zj,y.unescape=Aj,y.uniqueId=Xj,y.upperCase=Ym,y.upperFirst=Zm,y.each=nh,y.eachRight=oh,y.first=tg,Kj(y,function(){var a={};return fd(y,function(b,c){sk.call(y.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),y.VERSION=aa,e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){y[a].placeholder=y}),e(["drop","take"],function(a,b){Z.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Z(this);c=c===_?1:Vk(yi(c),0);var e=this.clone();return d?e.__takeCount__=Wk(c,e.__takeCount__):e.__views__.push({size:Wk(c,Ha),type:a+(e.__dir__<0?"Right":"")}),e},Z.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==Aa||c==Ca;Z.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:wf(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Z.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Z.prototype[a]=function(){return this.__filtered__?new Z(this):this[c](1)}}),Z.prototype.compact=function(){return this.filter(Gj)},Z.prototype.find=function(a){return this.filter(a).head()},Z.prototype.findLast=function(a){return this.reverse().find(a)},Z.prototype.invokeMap=fe(function(a,b){return"function"==typeof a?new Z(this):this.map(function(c){return Cd(c,a,b)})}),Z.prototype.reject=function(a){return this.filter(Ih(wf(a)))},Z.prototype.slice=function(a,b){a=yi(a);var c=this;return c.__filtered__&&(a>0||0>b)?new Z(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==_&&(b=yi(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Z.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Z.prototype.toArray=function(){return this.take(Ha)},fd(Z.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=y[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(y.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof Z,i=g[0],j=h||sm(b),k=function(a){var b=e.apply(y,l([a],g));return d&&m?b[0]:b};j&&c&&"function"==typeof i&&1!=i.length&&(h=j=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=h&&!n;if(!f&&j){b=p?b:new Z(this);var q=a.apply(b,g);return q.__actions__.push({func:ah,args:[k],thisArg:_}),new Y(q,m)}return o&&p?a.apply(this,g):(q=this.thru(k),o?d?q.value()[0]:q.value():q)})}),e(["pop","push","shift","sort","splice","unshift"],function(a){var b=nk[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);y.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(sm(e)?e:[],a)}return this[c](function(c){return b.apply(sm(c)?c:[],a)})}}),fd(Z.prototype,function(a,b){var c=y[b];if(c){var d=c.name+"",e=gl[d]||(gl[d]=[]);e.push({name:b,func:c})}}),gl[bf(_,na).name]=[{name:"wrapper",func:_}],Z.prototype.clone=Mb,Z.prototype.reverse=Yb,Z.prototype.value=Zb,y.prototype.at=Zl,y.prototype.chain=bh,y.prototype.commit=ch,y.prototype.next=dh,y.prototype.plant=fh,y.prototype.reverse=gh,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=hh,y.prototype.first=y.prototype.head,Ik&&(y.prototype[Ik]=eh),y},sd=rd();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(bd._=sd,define(function(){return sd})):dd?((dd.exports=sd)._=sd,cd._=sd):bd._=sd}.call(this),angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(a,b){return function(){var c={};c.promises=[],c.delayPromise=null,c.durationPromise=null,c.delayJustFinished=!1,c.reset=function(b){c.minDuration=b.minDuration,c.promises=[],angular.forEach(b.promises,function(a){a&&!a.$cgBusyFulfilled&&d(a)}),0!==c.promises.length&&(c.delayJustFinished=!1,b.delay&&(c.delayPromise=a(function(){c.delayPromise=null,c.delayJustFinished=!0},parseInt(b.delay,10))),b.minDuration&&(c.durationPromise=a(function(){c.durationPromise=null},parseInt(b.minDuration,10)+(b.delay?parseInt(b.delay,10):0))))},c.isPromise=function(a){var b=a&&(a.then||a.$then||a.$promise&&a.$promise.then);return"undefined"!=typeof b;
},c.callThen=function(a,c,d){var e;a.then||a.$then?e=a:a.$promise?e=a.$promise:a.denodeify&&(e=b.when(a));var f=e.then||e.$then;f.call(e,c,d)};var d=function(a){if(!c.isPromise(a))throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise");-1===c.promises.indexOf(a)&&(c.promises.push(a),c.callThen(a,function(){a.$cgBusyFulfilled=!0,-1!==c.promises.indexOf(a)&&c.promises.splice(c.promises.indexOf(a),1)},function(){a.$cgBusyFulfilled=!0,-1!==c.promises.indexOf(a)&&c.promises.splice(c.promises.indexOf(a),1)}))};return c.active=function(){return c.delayPromise?!1:c.delayJustFinished?(c.delayJustFinished=!1,0===c.promises.length&&(c.durationPromise=null),c.promises.length>0):c.durationPromise?!0:c.promises.length>0},c}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(a,b,c,d,e){return{restrict:"A",link:function(f,g,h,i){var j=g.css("position");("static"===j||""===j||"undefined"==typeof j)&&g.css("position","relative");var k,l,m,n,o,p=e(),q={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait...",wrapperClass:"cg-busy cg-busy-animation"};angular.extend(q,c),f.$watchCollection(h.cgBusy,function(c){if(c||(c={promise:null}),angular.isString(c))throw new Error("Invalid value for cg-busy. cgBusy no longer accepts string ids to represent promises/trackers.");(angular.isArray(c)||p.isPromise(c))&&(c={promise:c}),c=angular.extend(angular.copy(q),c),c.templateUrl||(c.templateUrl=q.templateUrl),angular.isArray(c.promise)||(c.promise=[c.promise]),n||(n=f.$new()),n.$message=c.message,angular.equals(p.promises,c.promise)||p.reset({promises:c.promise,delay:c.delay,minDuration:c.minDuration}),n.$cgBusyIsActive=function(){return p.active()},k&&m===c.templateUrl&&o===c.backdrop||(k&&k.remove(),l&&l.remove(),m=c.templateUrl,o=c.backdrop,d.get(m,{cache:b}).success(function(b){if(c.backdrop="undefined"==typeof c.backdrop?!0:c.backdrop,c.backdrop){var d='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';l=a(d)(n),g.append(l)}var e='<div class="'+c.wrapperClass+' ng-hide" ng-show="$cgBusyIsActive()">'+b+"</div>";k=a(e)(n),angular.element(k.children()[0]).css("position","absolute").css("top",0).css("left",0).css("right",0).css("bottom",0),g.append(k)}).error(function(a){throw new Error("Template specified for cgBusy ("+c.templateUrl+") could not be loaded. "+a)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(a){"use strict";a.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\n\n   <div class="cg-busy-default-sign">\n\n      <div class="cg-busy-default-spinner">\n         <div class="bar1"></div>\n         <div class="bar2"></div>\n         <div class="bar3"></div>\n         <div class="bar4"></div>\n         <div class="bar5"></div>\n         <div class="bar6"></div>\n         <div class="bar7"></div>\n         <div class="bar8"></div>\n         <div class="bar9"></div>\n         <div class="bar10"></div>\n         <div class="bar11"></div>\n         <div class="bar12"></div>\n      </div>\n\n      <div class="cg-busy-default-text">{{$message}}</div>\n\n   </div>\n\n</div>')}]),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.vg=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={version:"2.6.3",dataflow:a("vega-dataflow"),parse:a("./src/parse/"),scene:{Bounder:a("./src/scene/Bounder"),Builder:a("./src/scene/Builder"),Encoder:a("./src/scene/Encoder"),GroupBuilder:a("./src/scene/GroupBuilder"),visit:a("./src/scene/visit")},transforms:a("./src/transforms"),Transform:a("./src/transforms/Transform"),BatchTransform:a("./src/transforms/BatchTransform"),Parameter:a("./src/transforms/Parameter"),schema:a("./src/core/schema"),config:a("./src/core/config"),util:a("./src/util"),logging:a("vega-logging"),debug:a("vega-logging").debug}},{"./src/core/config":91,"./src/core/schema":92,"./src/parse/":97,"./src/scene/Bounder":109,"./src/scene/Builder":110,"./src/scene/Encoder":111,"./src/scene/GroupBuilder":112,"./src/scene/visit":117,"./src/transforms":145,"./src/transforms/BatchTransform":119,"./src/transforms/Parameter":135,"./src/transforms/Transform":140,"./src/util":148,"vega-dataflow":41,"vega-logging":48}],2:[function(a,b,c){},{}],3:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3_dsv={})}(this,function(a){"use strict";function b(a){return new f(a)}function c(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function d(a,b){var d=c(a);return function(c,e){return b(d(c),e,a)}}function e(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function f(a){function b(b){return b.map(f).join(a)}function f(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);this.parse=function(a,b){var e,f,g=this.parseRows(a,function(a,g){return e?e(a,g-1):(f=a,void(e=b?d(a,b):c(a)))});return g.columns=f,g},this.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b,c=k;if(34===a.charCodeAt(c)){for(var d=c;d++<j;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}return k=d+2,b=a.charCodeAt(d+1),13===b?(e=!0,10===a.charCodeAt(d+2)&&++k):10===b&&(e=!0),a.slice(c+1,d).replace(/""/g,'"')}for(;j>k;){var i=1;if(b=a.charCodeAt(k++),10===b)e=!0;else if(13===b)e=!0,10===a.charCodeAt(k)&&(++k,++i);else if(b!==h)continue;return a.slice(c,k-i)}return a.slice(c)}for(var d,e,f={},g={},i=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||i.push(m)}return i},this.format=function(b,c){return null==c&&(c=e(b)),[c.map(f).join(a)].concat(b.map(function(b){return c.map(function(a){return f(b[a])}).join(a)})).join("\n")},this.formatRows=function(a){return a.map(b).join("\n")}}b.prototype=f.prototype;var g=b(","),h=b("	"),i="0.1.14";a.version=i,a.dsv=b,a.csv=g,a.tsv=h})},{}],4:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a("d3-format",["exports"],e):e(b.d3_format={})}(this,function(a){"use strict";function b(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function c(a){return a=b(Math.abs(a)),a?a[1]:NaN}function d(a,b){return function(c,d){for(var e=c.length,f=[],g=0,h=a[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(c.substring(e-=h,e+h)),!((i+=h+1)>d));)h=a[g=(g+1)%a.length];return f.reverse().join(b)}}function e(a,c){var d=b(a,c);if(!d)return a+"";var e=d[0],f=d[1],g=f-(o=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,h=e.length;return g===h?e:g>h?e+new Array(g-h+1).join("0"):g>0?e.slice(0,g)+"."+e.slice(g):"0."+new Array(1-g).join("0")+b(a,Math.max(0,c+g-1))[0]}function f(a,c){var d=b(a,c);if(!d)return a+"";var e=d[0],f=d[1];return 0>f?"0."+new Array(-f).join("0")+e:e.length>f+1?e.slice(0,f+1)+"."+e.slice(f+1):e+new Array(f-e.length+2).join("0")}function g(a,b){a=a.toPrecision(b);a:for(var c,d=a.length,e=1,f=-1;d>e;++e)switch(a[e]){case".":f=c=e;break;case"0":0===f&&(f=e),c=e;break;case"e":break a;default:f>0&&(f=0)}return f>0?a.slice(0,f)+a.slice(c+1):a}function h(a){return new i(a)}function i(a){if(!(b=q.exec(a)))throw new Error("invalid format: "+a);var b,c=b[1]||" ",d=b[2]||">",e=b[3]||"-",f=b[4]||"",g=!!b[5],h=b[6]&&+b[6],i=!!b[7],j=b[8]&&+b[8].slice(1),k=b[9]||"";"n"===k?(i=!0,k="g"):p[k]||(k=""),(g||"0"===c&&"="===d)&&(g=!0,c="0",d="="),this.fill=c,this.align=d,this.sign=e,this.symbol=f,this.zero=g,this.width=h,this.comma=i,this.precision=j,this.type=k}function j(a){return a}function k(a){function b(a){a=h(a);var b=a.fill,c=a.align,d=a.sign,e=a.symbol,j=a.zero,k=a.width,l=a.comma,m=a.precision,n=a.type,q="$"===e?g[0]:"#"===e&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",s="$"===e?g[1]:/[%p]/.test(n)?"%":"",t=p[n],u=!n||/[defgprs%]/.test(n);return m=null==m?n?6:12:/[gprs]/.test(n)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),function(a){var e=q,g=s;if("c"===n)g=t(a)+g,a="";else{a=+a;var h=(0>a||0>1/a)&&(a*=-1,!0);if(a=t(a,m),h){var p,v=-1,w=a.length;for(h=!1;++v<w;)if(p=a.charCodeAt(v),p>48&&58>p||"x"===n&&p>96&&103>p||"X"===n&&p>64&&71>p){h=!0;break}}if(e=(h?"("===d?d:"-":"-"===d||"("===d?"":d)+e,g=g+("s"===n?r[8+o/3]:"")+(h&&"("===d?")":""),u)for(var p,v=-1,w=a.length;++v<w;)if(p=a.charCodeAt(v),48>p||p>57){g=(46===p?i+a.slice(v+1):a.slice(v))+g,a=a.slice(0,v);break}}l&&!j&&(a=f(a,1/0));var x=e.length+a.length+g.length,y=k>x?new Array(k-x+1).join(b):"";switch(l&&j&&(a=f(y+a,y.length?k-g.length:1/0),y=""),c){case"<":return e+a+g+y;case"=":return e+y+a+g;case"^":return y.slice(0,x=y.length>>1)+e+a+g+y.slice(x)}return y+e+a+g}}function e(a,d){var e=b((a=h(a),a.type="f",a)),f=3*Math.max(-8,Math.min(8,Math.floor(c(d)/3))),g=Math.pow(10,-f),i=r[8+f/3];return function(a){return e(g*a)+i}}var f=a.grouping&&a.thousands?d(a.grouping,a.thousands):j,g=a.currency,i=a.decimal;return{format:b,formatPrefix:e}}function l(a){return Math.max(0,-c(Math.abs(a)))}function m(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(b)/3)))-c(Math.abs(a)))}function n(a,b){return a=Math.abs(a),b=Math.abs(b)-a,Math.max(0,c(b)-c(a))+1}var o,p={"":g,"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return f(100*a,b)},r:f,s:e,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},q=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var r=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],s=k({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),t=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),u=k({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),v=k({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),w=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),x=k({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),y=k({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),z=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),A=k({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),B=k({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),C=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),D=k({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),E=k({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),F=k({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),G=k({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),H=k({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),I=k({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),J=k({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),K=k({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),L=k({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),M=k({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),N=k({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),O=k({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),P=s.format,Q=s.formatPrefix,R="0.4.2";a.version=R,a.format=P,a.formatPrefix=Q,a.locale=k,a.localeCaEs=t,a.localeCsCz=u,a.localeDeCh=v,a.localeDeDe=w,a.localeEnCa=x,a.localeEnGb=y,a.localeEnUs=s,a.localeEsEs=z,a.localeFiFi=A,a.localeFrCa=B,a.localeFrFr=C,a.localeHeIl=D,a.localeHuHu=E,a.localeItIt=F,a.localeJaJp=G,a.localeKoKr=H,a.localeMkMk=I,a.localeNlNl=J,a.localePlPl=K,a.localePtBr=L,a.localeRuRu=M,a.localeSvSe=N,a.localeZhCn=O,a.formatSpecifier=h,a.precisionFixed=l,a.precisionPrefix=m,a.precisionRound=n})},{}],5:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("d3-time")):"function"==typeof a&&a.amd?a("d3-time-format",["exports","d3-time"],f):f(e.d3_time_format={},e.d3_time)}(this,function(a,b){"use strict";function c(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function d(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function e(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function f(a){function b(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=aa[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function f(a,b){return function(c){var f=e(1900),h=g(f,a,c+="",0);if(h!=c.length)return null;if("p"in f&&(f.H=f.H%12+12*f.p),"W"in f||"U"in f){"w"in f||(f.w="W"in f?1:0);var i="Z"in f?d(e(f.y)).getUTCDay():b(e(f.y)).getDay();f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(i+5)%7:f.w+7*f.U-(i+6)%7}return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,d(f)):b(f)}}function g(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37===e){if(e=b.charAt(g++),f=La[e in aa?b.charAt(g++):e],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function h(a,b,c){var d=za.exec(b.slice(c));return d?(a.p=Aa[d[0].toLowerCase()],c+d[0].length):-1}function _(a,b,c){var d=Da.exec(b.slice(c));return d?(a.w=Ea[d[0].toLowerCase()],c+d[0].length):-1}function ba(a,b,c){var d=Ba.exec(b.slice(c));return d?(a.w=Ca[d[0].toLowerCase()],c+d[0].length):-1}function ca(a,b,c){var d=Ha.exec(b.slice(c));return d?(a.m=Ia[d[0].toLowerCase()],c+d[0].length):-1}function da(a,b,c){var d=Fa.exec(b.slice(c));return d?(a.m=Ga[d[0].toLowerCase()],c+d[0].length):-1}function ea(a,b,c){return g(a,ra,b,c)}function fa(a,b,c){return g(a,sa,b,c)}function ga(a,b,c){return g(a,ta,b,c)}function ha(a){return wa[a.getDay()]}function ia(a){return va[a.getDay()]}function ja(a){return ya[a.getMonth()]}function ka(a){return xa[a.getMonth()]}function la(a){return ua[+(a.getHours()>=12)]}function ma(a){return wa[a.getUTCDay()]}function na(a){return va[a.getUTCDay()]}function oa(a){return ya[a.getUTCMonth()]}function pa(a){return xa[a.getUTCMonth()]}function qa(a){return ua[+(a.getUTCHours()>=12)]}var ra=a.dateTime,sa=a.date,ta=a.time,ua=a.periods,va=a.days,wa=a.shortDays,xa=a.months,ya=a.shortMonths,za=i(ua),Aa=j(ua),Ba=i(va),Ca=j(va),Da=i(wa),Ea=j(wa),Fa=i(xa),Ga=j(xa),Ha=i(ya),Ia=j(ya),Ja={a:ha,A:ia,b:ja,B:ka,c:null,d:y,e:y,H:z,I:A,j:B,L:C,m:D,M:E,p:la,S:F,U:G,w:H,W:I,x:null,X:null,y:J,Y:K,Z:L,"%":$},Ka={a:ma,A:na,b:oa,B:pa,c:null,d:M,e:M,H:N,I:O,j:P,L:Q,m:R,M:S,p:qa,S:T,U:U,w:V,W:W,x:null,X:null,y:X,Y:Y,Z:Z,"%":$},La={a:_,A:ba,b:ca,B:da,c:ea,d:r,e:r,H:t,I:t,j:s,L:w,m:q,M:u,p:h,S:v,U:l,w:k,W:m,x:fa,X:ga,y:o,Y:n,Z:p,"%":x};return Ja.x=b(sa,Ja),Ja.X=b(ta,Ja),Ja.c=b(ra,Ja),Ka.x=b(sa,Ka),Ka.X=b(ta,Ka),Ka.c=b(ra,Ka),{format:function(a){var d=b(a+="",Ja);return d.parse=f(a,c),d.toString=function(){return a},d},utcFormat:function(a){var c=b(a+="",Ka);return c.parse=f(a,d),c.toString=function(){return a},c}}}function g(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function h(a){return a.replace(da,"\\$&")}function i(a){return new RegExp("^(?:"+a.map(h).join("|")+")","i")}function j(a){for(var b={},c=-1,d=a.length;++c<d;)b[a[c].toLowerCase()]=c;return b}function k(a,b,c){var d=ba.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function l(a,b,c){var d=ba.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function m(a,b,c){var d=ba.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function n(a,b,c){var d=ba.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function o(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function p(a,b,c){var d=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function q(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function r(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function s(a,b,c){var d=ba.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function t(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function u(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function v(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function w(a,b,c){var d=ba.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function x(a,b,c){var d=ca.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function y(a,b){return g(a.getDate(),b,2)}function z(a,b){return g(a.getHours(),b,2)}function A(a,b){return g(a.getHours()%12||12,b,2)}function B(a,c){return g(1+b.day.count(b.year(a),a),c,3)}function C(a,b){return g(a.getMilliseconds(),b,3)}function D(a,b){return g(a.getMonth()+1,b,2)}function E(a,b){return g(a.getMinutes(),b,2)}function F(a,b){return g(a.getSeconds(),b,2)}function G(a,c){return g(b.sunday.count(b.year(a),a),c,2)}function H(a){return a.getDay()}function I(a,c){return g(b.monday.count(b.year(a),a),c,2)}function J(a,b){return g(a.getFullYear()%100,b,2)}function K(a,b){return g(a.getFullYear()%1e4,b,4)}function L(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+g(b/60|0,"0",2)+g(b%60,"0",2)}function M(a,b){return g(a.getUTCDate(),b,2)}function N(a,b){return g(a.getUTCHours(),b,2)}function O(a,b){return g(a.getUTCHours()%12||12,b,2)}function P(a,c){return g(1+b.utcDay.count(b.utcYear(a),a),c,3)}function Q(a,b){return g(a.getUTCMilliseconds(),b,3)}function R(a,b){return g(a.getUTCMonth()+1,b,2)}function S(a,b){return g(a.getUTCMinutes(),b,2)}function T(a,b){return g(a.getUTCSeconds(),b,2)}function U(a,c){return g(b.utcSunday.count(b.utcYear(a),a),c,2)}function V(a){return a.getUTCDay()}function W(a,c){return g(b.utcMonday.count(b.utcYear(a),a),c,2)}function X(a,b){return g(a.getUTCFullYear()%100,b,2)}function Y(a,b){return g(a.getUTCFullYear()%1e4,b,4)}function Z(){return"+0000"}function $(){return"%"}function _(a){return a.toISOString()}var aa={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,ca=/^%/,da=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ea=f({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),fa=f({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),ga=f({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ha=f({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ia=f({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ja=f({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ka=f({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),la=f({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),ma=f({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),na=f({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),oa=f({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),pa=f({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),qa=f({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ra=f({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),sa=f({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),ta=f({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),ua=f({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),va=f({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),wa=f({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),xa=f({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),ya=f({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),za=f({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Aa="%Y-%m-%dT%H:%M:%S.%LZ";_.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},_.toString=function(){return Aa};var Ba=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?_:ea.utcFormat(Aa),Ca=ea.format,Da=ea.utcFormat,Ea="0.2.1";a.version=Ea,a.format=Ca,a.utcFormat=Da,a.locale=f,a.localeCaEs=fa,a.localeDeCh=ga,a.localeDeDe=ha,a.localeEnCa=ia,a.localeEnGb=ja,a.localeEnUs=ea,a.localeEsEs=ka,a.localeFiFi=la,a.localeFrCa=ma,a.localeFrFr=na,a.localeHeIl=oa,a.localeHuHu=pa,a.localeItIt=qa,a.localeJaJp=ra,a.localeKoKr=sa,a.localeMkMk=ta,a.localeNlNl=ua,a.localePlPl=va,a.localePtBr=wa,a.localeRuRu=xa,a.localeSvSe=ya,a.localeZhCn=za,a.isoFormat=Ba})},{"d3-time":6}],6:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a("d3-time",["exports"],e):e(b.d3_time={})}(this,function(a){"use strict";function b(a,c,d,g){function h(b){return a(b=new Date(+b)),b}return h.floor=h,h.round=function(b){var d=new Date(+b),e=new Date(b-1);return a(d),a(e),c(e,1),e-b>b-d?d:e},h.ceil=function(b){return a(b=new Date(b-1)),c(b,1),b},h.offset=function(a,b){return c(a=new Date(+a),null==b?1:Math.floor(b)),a},h.range=function(b,d,e){var f=[];if(b=new Date(b-1),d=new Date(+d),e=null==e?1:Math.floor(e),!(d>b&&e>0))return f;for(c(b,1),a(b),d>b&&f.push(new Date(+b));c(b,e),a(b),d>b;)f.push(new Date(+b));return f},h.filter=function(d){return b(function(b){for(;a(b),!d(b);)b.setTime(b-1)},function(a,b){for(;--b>=0;)for(;c(a,1),!d(a););})},d&&(h.count=function(b,c){return e.setTime(+b),f.setTime(+c),a(e),a(f),Math.floor(d(e,f))},h.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?h.filter(g?function(b){return g(b)%a===0}:function(b){return h.count(0,b)%a===0}):h:null}),h}function c(a){return b(function(b){b.setHours(0,0,0,0),b.setDate(b.getDate()-(b.getDay()+7-a)%7)},function(a,b){a.setDate(a.getDate()+7*b)},function(a,b){return(b-a-6e4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/6048e5})}function d(a){return b(function(b){b.setUTCHours(0,0,0,0),b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7)},function(a,b){a.setUTCDate(a.getUTCDate()+7*b)},function(a,b){return(b-a)/6048e5})}var e=new Date,f=new Date,g=b(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});g.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?b(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a}):g:null};var h=b(function(a){a.setMilliseconds(0)},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getSeconds()}),i=b(function(a){a.setSeconds(0,0)},function(a,b){a.setTime(+a+6e4*b)},function(a,b){return(b-a)/6e4},function(a){return a.getMinutes()}),j=b(function(a){a.setMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getHours()}),k=b(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-6e4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/864e5},function(a){return a.getDate()-1}),l=c(0),m=c(1),n=c(2),o=c(3),p=c(4),q=c(5),r=c(6),s=b(function(a){a.setHours(0,0,0,0),a.setDate(1)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+12*(b.getFullYear()-a.getFullYear())},function(a){return a.getMonth()}),t=b(function(a){a.setHours(0,0,0,0),a.setMonth(0,1)},function(a,b){
a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()}),u=b(function(a){a.setUTCMilliseconds(0)},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getUTCSeconds()}),v=b(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+6e4*b)},function(a,b){return(b-a)/6e4},function(a){return a.getUTCMinutes()}),w=b(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getUTCHours()}),x=b(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return(b-a)/864e5},function(a){return a.getUTCDate()-1}),y=d(0),z=d(1),A=d(2),B=d(3),C=d(4),D=d(5),E=d(6),F=b(function(a){a.setUTCHours(0,0,0,0),a.setUTCDate(1)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+12*(b.getUTCFullYear()-a.getUTCFullYear())},function(a){return a.getUTCMonth()}),G=b(function(a){a.setUTCHours(0,0,0,0),a.setUTCMonth(0,1)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()}),H=g.range,I=h.range,J=i.range,K=j.range,L=k.range,M=l.range,N=m.range,O=n.range,P=o.range,Q=p.range,R=q.range,S=r.range,T=l.range,U=s.range,V=t.range,W=g,X=H,Y=u.range,Z=v.range,$=w.range,_=x.range,aa=y.range,ba=z.range,ca=A.range,da=B.range,ea=C.range,fa=D.range,ga=E.range,ha=y.range,ia=F.range,ja=G.range,ka="0.1.1";a.version=ka,a.milliseconds=H,a.seconds=I,a.minutes=J,a.hours=K,a.days=L,a.sundays=M,a.mondays=N,a.tuesdays=O,a.wednesdays=P,a.thursdays=Q,a.fridays=R,a.saturdays=S,a.weeks=T,a.months=U,a.years=V,a.utcMillisecond=W,a.utcMilliseconds=X,a.utcSeconds=Y,a.utcMinutes=Z,a.utcHours=$,a.utcDays=_,a.utcSundays=aa,a.utcMondays=ba,a.utcTuesdays=ca,a.utcWednesdays=da,a.utcThursdays=ea,a.utcFridays=fa,a.utcSaturdays=ga,a.utcWeeks=ha,a.utcMonths=ia,a.utcYears=ja,a.millisecond=g,a.second=h,a.minute=i,a.hour=j,a.day=k,a.sunday=l,a.monday=m,a.tuesday=n,a.wednesday=o,a.thursday=p,a.friday=q,a.saturday=r,a.week=l,a.month=s,a.year=t,a.utcSecond=u,a.utcMinute=v,a.utcHour=w,a.utcDay=x,a.utcSunday=y,a.utcMonday=z,a.utcTuesday=A,a.utcWednesday=B,a.utcThursday=C,a.utcFriday=D,a.utcSaturday=E,a.utcWeek=y,a.utcMonth=F,a.utcYear=G,a.interval=b})},{}],7:[function(a,b,c){var d=a("./util"),e=a("./time"),f=e.utc,g=b.exports;g.$year=d.$func("year",e.year.unit),g.$month=d.$func("month",e.months.unit),g.$date=d.$func("date",e.dates.unit),g.$day=d.$func("day",e.weekdays.unit),g.$hour=d.$func("hour",e.hours.unit),g.$minute=d.$func("minute",e.minutes.unit),g.$second=d.$func("second",e.seconds.unit),g.$utcYear=d.$func("utcYear",f.year.unit),g.$utcMonth=d.$func("utcMonth",f.months.unit),g.$utcDate=d.$func("utcDate",f.dates.unit),g.$utcDay=d.$func("utcDay",f.weekdays.unit),g.$utcHour=d.$func("utcHour",f.hours.unit),g.$utcMinute=d.$func("utcMinute",f.minutes.unit),g.$utcSecond=d.$func("utcSecond",f.seconds.unit)},{"./time":29,"./util":30}],8:[function(a,b,c){function d(){this._cells={},this._aggr=[],this._stream=!1}function e(a){if(f.isArray(a))return a;if(null==a)return[];var b,c,d=[];for(b in a)c=f.array(a[b]),d.push({name:b,ops:c});return d}var f=a("../util"),g=a("./measures"),h=a("./collector"),i=d.Flags={ADD_CELL:1,MOD_CELL:2},j=d.prototype;j.stream=function(a){return null==a?this._stream:(this._stream=!!a,this._aggr=[],this)},j.key=function(a){return null==a?this._key:(this._key=f.$(a),this)},j.groupby=function(a){return this._dims=f.array(a).map(function(a,b){if(a=f.isString(a)?{name:a,get:f.$(a)}:f.isFunction(a)?{name:f.name(a)||a.name||"_"+b,get:a}:a.name&&f.isFunction(a.get)?a:null,null==a)throw"Invalid groupby argument: "+a;return a}),this.clear()},j.summarize=function(a){a=e(a),this._count=!0;var b,c,d,h,i,j,k,l=this._aggr=[];for(d=0;d<a.length;++d){for(h=0,b=[],c=a[d];h<c.ops.length;++h)i=c.ops[h],"count"!==i&&(this._count=!1),j=c.as&&c.as[h]||i+("*"===c.name?"":"_"+c.name),b.push(g[i](j));k=c.get&&f.$(c.get)||("*"===c.name?f.identity:f.$(c.name)),l.push({name:c.name,measures:g.create(b,this._stream,k,this._assign)})}return this.clear()},j.count=function(){return this.summarize({"*":"count"})},j._assign=function(a,b,c){a[b]=c},j.clear=function(){return this._cells={},this},j._cellkey=function(a){var b,c=this._dims,d=c.length,e=String(c[0].get(a));for(b=1;d>b;++b)e+="|"+c[b].get(a);return e},j._cell=function(a){var b=this._dims.length?this._cellkey(a):"";return this._cells[b]||(this._cells[b]=this._newcell(a,b))},j._newcell=function(a,b){var c,d={num:0,tuple:this._newtuple(a,b),flag:i.ADD_CELL,aggs:{}},e=this._aggr;for(c=0;c<e.length;++c)d.aggs[e[c].name]=new e[c].measures(d,d.tuple);return d.collect&&(d.data=new h(this._key)),d},j._newtuple=function(a){var b,c,d=this._dims,e={};for(b=0,c=d.length;c>b;++b)e[d[b].name]=d[b].get(a);return this._ingest(e)},j._ingest=f.identity,j._add=function(a){var b,c=this._cell(a),d=this._aggr;if(c.num+=1,!this._count)for(c.collect&&c.data.add(a),b=0;b<d.length;++b)c.aggs[d[b].name].add(a);c.flag|=i.MOD_CELL,this._on_add&&this._on_add(a,c)},j._rem=function(a){var b,c=this._cell(a),d=this._aggr;if(c.num-=1,!this._count)for(c.collect&&c.data.rem(a),b=0;b<d.length;++b)c.aggs[d[b].name].rem(a);c.flag|=i.MOD_CELL,this._on_rem&&this._on_rem(a,c)},j._mod=function(a,b){var c,d=this._cell(b),e=this._cell(a),g=this._aggr;for(d!==e?(d.num-=1,e.num+=1,d.collect&&d.data.rem(b),e.collect&&e.data.add(a)):d.collect&&!f.isObject(a)&&(d.data.rem(b),d.data.add(a)),c=0;c<g.length;++c)d.aggs[g[c].name].rem(b),e.aggs[g[c].name].add(a);d.flag|=i.MOD_CELL,e.flag|=i.MOD_CELL,this._on_mod&&this._on_mod(a,b,d,e)},j._markMod=function(a){var b=this._cell(a);b.flag|=i.MOD_CELL},j.result=function(){var a,b,c,d=[],e=this._aggr;for(c in this._cells){if(a=this._cells[c],a.num>0){for(a.collect&&a.data.values(),b=0;b<e.length;++b)a.aggs[e[b].name].set();d.push(a.tuple)}else delete this._cells[c];a.flag=0}return this._rems=!1,d},j.changes=function(a){var b,c,d,e,f=a||{add:[],rem:[],mod:[]},g=this._aggr;for(e in this._cells){for(b=this._cells[e],c=b.flag,b.collect&&b.data.values(),d=0;d<g.length;++d)b.aggs[g[d].name].set();b.num<=0?(f.rem.push(b.tuple),delete this._cells[e],this._on_drop&&this._on_drop(b)):(this._on_keep&&this._on_keep(b),c&i.ADD_CELL?f.add.push(b.tuple):c&i.MOD_CELL&&f.mod.push(b.tuple)),b.flag=0}return this._rems=!1,f},j.execute=function(a){return this.clear().insert(a).result()},j.insert=function(a){this._consolidate();for(var b=0;b<a.length;++b)this._add(a[b]);return this},j.remove=function(a){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var b=0;b<a.length;++b)this._rem(a[b]);return this._rems=!0,this},j._consolidate=function(){if(this._rems){for(var a in this._cells)this._cells[a].collect&&this._cells[a].data.values();this._rems=!1}},b.exports=d},{"../util":30,"./collector":9,"./measures":11}],9:[function(a,b,c){function d(a){this._add=[],this._rem=[],this._key=a||null,this._last=null}var e=a("../util"),f=a("../stats"),g="__dl_rem__",h=d.prototype;h.add=function(a){this._add.push(a)},h.rem=function(a){this._rem.push(a)},h.values=function(){if(this._get=null,0===this._rem.length)return this._add;var a,b,c,d,h=this._add,i=this._rem,j=this._key,k=Array(h.length-i.length);if(e.isObject(i[0]))if(j)for(d=e.toMap(i,j),a=0,b=0,c=h.length;c>a;++a)d.hasOwnProperty(j(h[a]))||(k[b++]=h[a]);else{for(a=0,c=i.length;c>a;++a)i[a][g]=1;for(a=0,b=0,c=h.length;c>a;++a)h[a][g]||(k[b++]=h[a]);for(a=0,c=i.length;c>a;++a)delete i[a][g]}else for(d=f.count.map(i),a=0,b=0,c=h.length;c>a;++a)d[h[a]]>0?d[h[a]]-=1:k[b++]=h[a];return this._rem=[],this._add=k},h.extent=function(a){if(this._get!==a||!this._ext){var b=this.values(),c=f.extent.index(b,a);this._ext=[b[c[0]],b[c[1]]],this._get=a}return this._ext},h.argmin=function(a){return this.extent(a)[0]},h.argmax=function(a){return this.extent(a)[1]},h.min=function(a){var b=this.extent(a)[0];return null!=b?a(b):+(1/0)},h.max=function(a){var b=this.extent(a)[1];return null!=b?a(b):-(1/0)},h.quartile=function(a){return this._get===a&&this._q||(this._q=f.quartile(this.values(),a),this._get=a),this._q},h.q1=function(a){return this.quartile(a)[0]},h.q2=function(a){return this.quartile(a)[1]},h.q3=function(a){return this.quartile(a)[2]},b.exports=d},{"../stats":27,"../util":30}],10:[function(a,b,c){var d=a("../util"),e=a("./aggregator");b.exports=function(){var a=[].reduce.call(arguments,function(a,b){return a.concat(d.array(b))},[]);return(new e).groupby(a).summarize({"*":"values"})}},{"../util":30,"./aggregator":8}],11:[function(a,b,c){function d(a){return function(b){var c=g.extend({init:"",add:"",rem:"",idx:0},a);return c.out=b||a.name,c}}function e(a,b){function c(a,d){function e(b){a[b]||c(a,a[b]=h[b]())}return d.req&&d.req.forEach(e),b&&d.str&&d.str.forEach(e),a}var d=a.reduce(c,a.reduce(function(a,b){return a[b.name]=b,a},{}));return g.vals(d).sort(function(a,b){return a.idx-b.idx})}function f(b,c,d,f){var h=e(b,c),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",j="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",k="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",l="var t = this.tuple; var cell = this.cell;";return h.forEach(function(a){a.idx<0?(i=a.init+i,j=a.add+j,k=a.rem+k):(i+=a.init,j+=a.add,k+=a.rem)}),b.slice().sort(function(a,b){return a.idx-b.idx}).forEach(function(a){l+="this.assign(t,'"+a.out+"',"+a.set+");"}),l+="return t;",i=Function("cell","t",i),i.prototype.assign=f,i.prototype.add=Function("t","var v = this.get(t);"+j),i.prototype.rem=Function("t","var v = this.get(t);"+k),i.prototype.set=Function(l),i.prototype.get=d,i.prototype.distinct=a("../stats").count.distinct,i.prototype.isValid=g.isValid,i.fields=b.map(g.$("out")),i}var g=a("../util"),h={values:d({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:d({name:"count",set:"cell.num"}),missing:d({name:"missing",set:"this.missing"}),valid:d({name:"valid",set:"this.valid"}),sum:d({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:d({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:d({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:d({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:d({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:d({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:d({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:d({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:d({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:d({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:d({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:d({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:d({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:d({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:d({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:d({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:d({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};h.create=f,b.exports=h},{"../stats":27,"../util":30}],12:[function(a,b,c){function d(a){if(!a)throw Error("Missing binning options.");var b,c,d,h,i,j,k,l=a.maxbins||15,m=a.base||10,n=Math.log(m),o=a.div||[5,2],p=a.min,q=a.max,r=q-p;if(a.step)b=a.step;else if(a.steps)b=a.steps[Math.min(a.steps.length-1,e(a.steps,r/l,0,a.steps.length))];else{for(c=Math.ceil(Math.log(l)/n),d=a.minstep||0,b=Math.max(d,Math.pow(m,Math.round(Math.log(r)/n)-c));Math.ceil(r/b)>l;)b*=m;for(j=0;j<o.length;++j)i=b/o[j],i>=d&&l>=r/i&&(b=i)}return i=Math.log(b),h=i>=0?0:~~(-i/n)+1,k=Math.pow(m,-h-1),p=Math.min(p,Math.floor(p/b+k)*b),q=Math.ceil(q/b)*b,{start:p,stop:q,step:b,unit:{precision:h},value:f,index:g}}function e(a,b,c,d){for(;d>c;){var e=c+d>>>1;j.cmp(a[e],b)<0?c=e+1:d=e}return c}function f(a){return this.step*Math.floor(a/this.step+l)}function g(a){return Math.floor((a-this.start)/this.step+l)}function h(a){return this.unit.date(f.call(this,a))}function i(a){return g.call(this,this.unit.unit(a))}var j=a("../util"),k=a("../time"),l=1e-15;d.date=function(a){if(!a)throw Error("Missing date binning options.");var b=a.utc?k.utc:k,c=a.min,e=a.max,f=a.maxbins||20,g=a.minbins||4,j=+e-+c,l=a.unit?b[a.unit]:b.find(j,g,f),m=d({min:null!=l.min?l.min:l.unit(c),max:null!=l.max?l.max:l.unit(e),maxbins:f,minstep:l.minstep,steps:l.step});return m.unit=l,m.index=i,a.raw||(m.value=h),m},b.exports=d},{"../time":29,"../util":30}],13:[function(a,b,c){function d(a,b,c){c=g(a,b,c);var d=f(c);return d?m.$func("bin",d.unit.unit?function(a){return d.value(d.unit.unit(a))}:function(a){return d.value(a)})(c.accessor):c.accessor||m.identity}function e(a,b,c){c=g(a,b,c);var d=f(c);return d?h(a,c.accessor,d):i(a,c.accessor,c&&c.sort)}function f(a){var b=a.type,c=null;return(null==b||o[b])&&("integer"===b&&null==a.minstep&&(a.minstep=1),c="date"===b?j.date(a):j(a)),c}function g(){var a=arguments,b=0,c=m.isArray(a[b])?a[b++]:null,d=m.isFunction(a[b])||m.isString(a[b])?m.$(a[b++]):null,e=m.extend({},a[b]);if(c&&(e.type=e.type||l(c,d),o[e.type])){var f=n.extent(c,d);e=m.extend({min:f[0],max:f[1]},e)}return d&&(e.accessor=d),e}function h(a,b,c){for(var d,e,f=k.range(c.start,c.stop+c.step/2,c.step).map(function(a){return{value:c.value(a),count:0}}),g=0;g<a.length;++g)if(d=b?b(a[g]):a[g],m.isValid(d)){if(e=c.index(d),0>e||e>=f.length||!isFinite(e))continue;f[e].count+=1}return f.bins=c,f}function i(a,b,c){var d=n.unique(a,b),e=n.count.map(a,b);return d.map(function(a){return{value:a,count:e[a]}}).sort(m.comparator(c?"-count":"+value"))}var j=a("./bins"),k=a("../generate"),l=a("../import/type"),m=a("../util"),n=a("../stats"),o={integer:1,number:1,date:1};b.exports={$bin:d,histogram:e}},{"../generate":16,"../import/type":25,"../stats":27,"../util":30,"./bins":12}],14:[function(a,b,c){function d(a,b){b=h.extend({separator:" ",minwidth:8,maxwidth:15},b);var c=b.fields||h.keys(a[0]),d=i.all(a);if(b.start||b.limit){var e=b.start||0,f=b.limit?e+b.limit:a.length;a=a.slice(e,f)}var g=c.map(function(c){var e=l[d[c]]||"",f=k("{{"+c+e+"}}"),g=j.max(a,function(a){return f(a).length});return g=Math.max(Math.min(c.length,b.minwidth),g),b.maxwidth>0?Math.min(g,b.maxwidth):g}),n=c.map(function(a,b){return h.truncate(h.pad(a,g[b],"center"),g[b])}).join(b.separator),o=k(c.map(function(a,b){return"{{"+a+(l[d[a]]||"")+("|pad:"+g[b]+","+(m[d[a]]||"right"))+("|truncate:"+g[b])+"}}"}).join(b.separator));return n+"\n"+a.map(o).join("\n")}function e(a){a=a?a.__summary__?a:j.summary(a):this;var b,c,d=[];for(b=0,c=a.length;c>b;++b)d.push("-- "+a[b].field+" --"),"string"===a[b].type||a[b].distinct<10?d.push(g(a[b])):d.push(f(a[b])),d.push("");return d.join("\n")}function f(a){return["valid:    "+a.valid,"missing:  "+a.missing,"distinct: "+a.distinct,"min:      "+a.min,"max:      "+a.max,"median:   "+a.median,"mean:     "+a.mean,"stdev:    "+a.stdev,"modeskew: "+a.modeskew].join("\n")}function g(a){var b=["valid:    "+a.valid,"missing:  "+a.missing,"distinct: "+a.distinct,"top values: "],c=a.unique,d=h.keys(c).sort(function(a,b){return c[b]-c[a]}).slice(0,6).map(function(a){return" '"+a+"' ("+c[a]+")"});return b.concat(d).join("\n")}var h=a("./util"),i=a("./import/type"),j=a("./stats"),k=a("./template");b.exports={table:d,summary:e};var l={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},m={number:"left",integer:"left"}},{"./import/type":25,"./stats":27,"./template":28,"./util":30}],15:[function(a,b,c){function d(a){return a.length>4&&"locale"+(a[0].toUpperCase()+a[1].toLowerCase()+a[3].toUpperCase()+a[4].toLowerCase())}function e(a){var b=v.isString(a)?y[d(a)]:y.locale(a);if(null==b)throw Error("Unrecognized locale: "+a);z=b}function f(a){var b=v.isString(a)?x[d(a)]:x.locale(a);if(null==b)throw Error("Unrecognized locale: "+a);A=b,r=s=t=u=null}function g(a,b){a.length||(a=[0]),null==b&&(b=10);var c=a[0],d=a[a.length-1];c>d&&(g=d,d=c,c=g);var e=d-c||(b=1,c||d||1),f=Math.pow(10,Math.floor(Math.log(e/b)/Math.LN10)),g=e/b/f;return g>=C?f*=10:g>=D?f*=5:g>=E&&(f*=2),[Math.ceil(c/f)*f,Math.floor(d/f)*f+f/2,f]}function h(a,b){return function(c){var d=a(c),e=d.indexOf(b);if(0>e)return d;for(var f=i(d,e),g=f<d.length?d.slice(f):"";--f>e;)if("0"!==d[f]){++f;break}return d.slice(0,f)+g}}function i(a,b){var c,d=a.lastIndexOf("e");if(d>0)return d;for(d=a.length;--d>b;)if(c=a.charCodeAt(d),c>=48&&57>=c)return d+1}function j(a){var b=z.format(".1f")(1)[1];switch(null==a&&(a=","),a=y.formatSpecifier(a),null==a.precision&&(a.precision=12),a.type){case"%":a.precision-=2;break;case"e":a.precision-=1}return h(z.format(a),b)}function k(a,b,c){var d=g(a,b);switch(null==c&&(c=",f"),c=y.formatSpecifier(c),c.type){case"s":var e=Math.max(Math.abs(d[0]),Math.abs(d[1]));return null==c.precision&&(c.precision=y.precisionPrefix(d[2],e)),z.formatPrefix(c,e);case"":case"e":case"g":case"p":case"r":null==c.precision&&(c.precision=y.precisionRound(d[2],Math.max(Math.abs(d[0]),Math.abs(d[1])))-("e"===c.type));break;case"f":case"%":null==c.precision&&(c.precision=y.precisionFixed(d[2])-2*("%"===c.type))}return z.format(c)}function l(){var a=A.format,b=a(".%L"),c=a(":%S"),d=a("%I:%M"),e=a("%I %p"),f=a("%a %d"),g=a("%b %d"),h=a("%B"),i=a("%Y");return function(a){var j=+a;return(w.second(a)<j?b:w.minute(a)<j?c:w.hour(a)<j?d:w.day(a)<j?e:w.month(a)<j?w.week(a)<j?f:g:w.year(a)<j?h:i)(a)}}function m(){var a=A.utcFormat,b=a(".%L"),c=a(":%S"),d=a("%I:%M"),e=a("%I %p"),f=a("%a %d"),g=a("%b %d"),h=a("%B"),i=a("%Y");return function(a){var j=+a;return(w.utcSecond(a)<j?b:w.utcMinute(a)<j?c:w.utcHour(a)<j?d:w.utcDay(a)<j?e:w.utcMonth(a)<j?w.utcWeek(a)<j?f:g:w.utcYear(a)<j?h:i)(a)}}function n(a,b){var c=b?s||(s=A.format("%b")):r||(r=A.format("%B"));return B.setMonth(a),c(B)}function o(a,b){var c=b?u||(u=A.format("%a")):t||(t=A.format("%A"));return B.setMonth(0),B.setDate(2+a),c(B)}function p(a){return Math.floor(a.getMonth()/3)+1}function q(a){return Math.floor(a.getUTCMonth()/3)+1}var r,s,t,u,v=a("./util"),w=a("d3-time"),x=a("d3-time-format"),y=a("d3-format"),z=y,A=x,B=new Date(2e3,0,1);b.exports={numberLocale:e,number:function(a){return z.format(a)},numberPrefix:function(a,b){return z.formatPrefix(a,b)},timeLocale:f,time:function(a){return A.format(a)},utc:function(a){return A.utcFormat(a)},locale:function(a){e(a),f(a)},auto:{number:j,linear:k,time:function(){return l()},utc:function(){return m()}},month:n,day:o,quarter:p,utcQuarter:q};var C=Math.sqrt(50),D=Math.sqrt(10),E=Math.sqrt(2)},{"./util":30,"d3-format":4,"d3-time":6,"d3-time-format":5}],16:[function(a,b,c){var d=a("./util"),e=b.exports;e.repeat=function(a,b){var c,d=Array(b);for(c=0;b>c;++c)d[c]=a;return d},e.zeros=function(a){return e.repeat(0,a)},e.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c==1/0)throw new Error("Infinite range");var d,e=[],f=-1;if(0>c)for(;(d=a+c*++f)>b;)e.push(d);else for(;(d=a+c*++f)<b;)e.push(d);return e},e.random={},e.random.uniform=function(a,b){void 0===b&&(b=void 0===a?1:a,a=0);var c=b-a,d=function(){return a+c*Math.random()};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(d){return d>=a&&b>=d?1/c:0},d.cdf=function(d){return a>d?0:d>b?1:(d-a)/c},d.icdf=function(b){return b>=0&&1>=b?a+b*c:NaN},d},e.random.integer=function(a,b){void 0===b&&(b=a,a=0);var c=b-a,d=function(){return a+Math.floor(c*Math.random())};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(d){return d===Math.floor(d)&&d>=a&&b>d?1/c:0},d.cdf=function(d){var e=Math.floor(d);return a>e?0:e>=b?1:(e-a+1)/c},d.icdf=function(b){return b>=0&&1>=b?a-1+Math.floor(b*c):NaN},d},e.random.normal=function(a,b){a=a||0,b=b||1;var c,d=function(){var d,e,f=0,g=0;if(void 0!==c)return f=c,c=void 0,f;do f=2*Math.random()-1,g=2*Math.random()-1,d=f*f+g*g;while(0===d||d>1);return e=Math.sqrt(-2*Math.log(d)/d),c=a+g*e*b,a+f*e*b};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(c){var d=Math.exp(Math.pow(c-a,2)/(-2*Math.pow(b,2)));return 1/(b*Math.sqrt(2*Math.PI))*d},d.cdf=function(c){var d,e=(c-a)/b,f=Math.abs(e);if(f>37)d=0;else{var g,h=Math.exp(-f*f/2);7.07106781186547>f?(g=.0352624965998911*f+.700383064443688,g=g*f+6.37396220353165,g=g*f+33.912866078383,g=g*f+112.079291497871,g=g*f+221.213596169931,g=g*f+220.206867912376,d=h*g,g=.0883883476483184*f+1.75566716318264,g=g*f+16.064177579207,g=g*f+86.7807322029461,g=g*f+296.564248779674,g=g*f+637.333633378831,g=g*f+793.826512519948,g=g*f+440.413735824752,d/=g):(g=f+.65,g=f+4/g,g=f+3/g,g=f+2/g,g=f+1/g,d=h/g/2.506628274631)}return e>0?1-d:d},d.icdf=function(c){if(0>=c||c>=1)return NaN;var d=2*c-1,e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),f=2/(Math.PI*e)+Math.log(1-Math.pow(d,2))/2,g=Math.log(1-d*d)/e,h=(d>0?1:-1)*Math.sqrt(Math.sqrt(f*f-g)-f);return a+b*Math.SQRT2*h},d},e.random.bootstrap=function(a,b){var c=a.filter(d.isValid),f=c.length,g=b?e.random.normal(0,b):null,h=function(){return c[~~(Math.random()*f)]+(g?g():0)};return h.samples=function(a){return e.zeros(a).map(h)},h}},{"./util":30}],17:[function(a,b,c){function d(a,b){if(a){var c=b.header;a=(c?c.join(b.delimiter)+"\n":"")+a}return f.dsv(b.delimiter).parse(a)}var e=a("../../util"),f=a("d3-dsv");d.delimiter=function(a){var b={delimiter:a};return function(a,c){return d(a,c?e.extend(c,b):b)}},b.exports=d},{"../../util":30,"d3-dsv":3}],18:[function(a,b,c){var d=a("./dsv");b.exports={json:a("./json"),topojson:a("./topojson"),treejson:a("./treejson"),dsv:d,csv:d.delimiter(","),tsv:d.delimiter("	")}},{"./dsv":17,"./json":19,"./topojson":20,"./treejson":21}],19:[function(a,b,c){var d=a("../../util");b.exports=function(a,b){var c=d.isObject(a)&&!d.isBuffer(a)?a:JSON.parse(a);return b&&b.property&&(c=d.accessor(b.property)(c)),c}},{"../../util":30}],20:[function(a,b,c){var d=a("./json"),e=function(a,b){var c=e.topojson;if(null==c)throw Error("TopoJSON library not loaded.");var f,g=d(a,b);if(b&&b.feature){if(f=g.objects[b.feature])return c.feature(g,f).features;throw Error("Invalid TopoJSON object: "+b.feature)}if(b&&b.mesh){if(f=g.objects[b.mesh])return[c.mesh(g,g.objects[b.mesh])];throw Error("Invalid TopoJSON object: "+b.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};e.topojson=a("topojson"),b.exports=e},{"./json":19,topojson:31}],21:[function(a,b,c){function d(a,b){function c(a,b){a[e]=b,f.push(a);var g=a[d];if(g)for(var h=0;h<g.length;++h)c(g[h],a)}var d=b&&b.children||"children",e=b&&b.parent||"parent",f=[];return c(a,null),f.root=a,f}var e=a("./json");b.exports=function(a,b){return d(e(a,b),b)}},{"./json":19}],22:[function(a,b,c){function d(b){var c=b.url;if(!c&&b.file)return n+b.file;if(b.baseURL&&!m.test(c)&&(k(c,"/")||"/"===b.baseURL[b.baseURL.length-1]||(c="/"+c),c=b.baseURL+c),!e.useXHR&&k(c,"//")&&(c=(b.defaultProtocol||"http")+":"+c),b.domainWhiteList){var d,f;if(e.useXHR){var g=document.createElement("a");g.href=c,""===g.host&&(g.href=g.href),d=g.hostname.toLowerCase(),f=window.location.hostname}else{var h=a("url").parse(c);d=h.hostname,f=null}if(f!==d){var i=b.domainWhiteList.some(function(a){var b=d.length-a.length;return a===d||b>1&&"."===d[b-1]&&d.lastIndexOf(a)===b});if(!i)throw"URL is not whitelisted: "+c}}return c}function e(a,b){return e.loader(a,b)}function f(a,b){var c,d=b||function(a){throw a};try{c=e.sanitizeUrl(a)}catch(f){return void d(f)}return c?e.useXHR?e.xhr(c,a,b):k(c,n)?e.file(c.slice(n.length),a,b):c.indexOf("://")<0?e.file(c,a,b):e.http(c,a,b):void d("Invalid URL: "+a.url)}function g(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function h(a,b,c){function d(){var a=h.status;!a&&g(h)||a>=200&&300>a||304===a?c(null,h.responseText):c(h,null)}var f=!!c,h=new XMLHttpRequest;if("undefined"==typeof XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest),f&&("onload"in h?h.onload=h.onerror=d:h.onreadystatechange=function(){h.readyState>3&&d()}),h.open("GET",a,f),h.setRequestHeader){var i=l.extend({},e.headers,b.headers);for(var j in i)h.setRequestHeader(j,i[j])}return h.send(),!f&&g(h)?h.responseText:void 0}function i(b,c,d){var e=a("fs");return d?void e.readFile(b,d):e.readFileSync(b,"utf8")}function j(b,c,d){var f=l.extend({},e.headers,c.headers),g={url:b,encoding:null,gzip:!0,headers:f};return d?void a("request")(g,function(a,b,c){a||200!==b.statusCode?(a=a||"Load failed with response code "+b.statusCode+".",d(a,null)):d(null,c)}):a("sync-request")("GET",b,g).getBody()}function k(a,b){return null==a?!1:0===a.lastIndexOf(b,0)}var l=a("../util"),m=/^([A-Za-z]+:)?\/\//,n="file://";e.loader=f,e.sanitizeUrl=d,e.xhr=h,e.file=i,e.http=j,e.useXHR="undefined"!=typeof XMLHttpRequest,e.headers={},b.exports=e},{"../util":30,fs:2,request:2,"sync-request":2,url:2}],23:[function(a,b,c){function d(a,b){var c=b&&b.type||"json";return a=h[c](a,b),b&&b.parse&&e(a,b.parse),a}function e(a,b){var c,d,e,h,j,k,l=a.length;for(b="auto"===b?g.inferAll(a):f.duplicate(b),c=f.keys(b),d=c.map(function(a){var c=b[a];if(c&&0===c.indexOf("date:")){var d=c.split(/:(.+)?/,2),e=d[1];if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);return e=e.slice(1,-1),e=i(e),function(a){return e.parse(a)}}if(!g.parsers[c])throw Error("Illegal format pattern: "+a+":"+c);return g.parsers[c]}),h=0,k=c.length;l>h;++h)for(e=a[h],j=0;k>j;++j)e[c[j]]=d[j](e[c[j]]);g.annotation(a,b)}var f=a("../util"),g=a("./type"),h=a("./formats"),i=a("../format").time;d.formats=h,b.exports=d},{"../format":15,"../util":30,"./formats":18,"./type":25}],24:[function(a,b,c){var d=a("../util"),e=a("./load"),f=a("./read");b.exports=d.keys(f.formats).reduce(function(a,b){return a[b]=function(a,c,g){d.isString(a)&&(a={url:a}),2===arguments.length&&d.isFunction(c)&&(g=c,c=void 0),c=d.extend({parse:"auto"},c),c.type=b;var h=e(a,g?function(a,b){if(a)return void g(a,null);try{b=f(b,c),g(null,b)}catch(d){g(d,null)}}:void 0);return g?void 0:f(h,c)},a},{})},{"../util":30,"./load":22,"./read":23}],25:[function(a,b,c){function d(a,b){return b?void(a[j]=b):a&&a[j]||null}function e(a,b){a=i.array(a),b=i.$(b);var c,d,e;if(a[j]&&(c=b(a[j]),i.isString(c)))return c;for(d=0,e=a.length;!i.isValid(c)&&e>d;++d)c=b?b(a[d]):a[d];return i.isDate(c)?"date":i.isNumber(c)?"number":i.isBoolean(c)?"boolean":i.isString(c)?"string":null}function f(a,b){return a.length?(b=b||i.keys(a[0]),b.reduce(function(b,c){return b[c]=e(a,c),b},{})):void 0}function g(a,b){a=i.array(a),b=i.$(b);var c,d,e,f=["boolean","integer","number","date"];for(c=0;c<a.length;++c){for(e=b?b(a[c]):a[c],d=0;d<f.length;++d)i.isValid(e)&&!l[f[d]](e)&&(f.splice(d,1),d-=1);if(0===f.length)return"string"}return f[0]}function h(a,b){return b=b||i.keys(a[0]),b.reduce(function(b,c){return b[c]=g(a,c),b},{})}var i=a("../util"),j="__types__",k={"boolean":i["boolean"],integer:i.number,number:i.number,date:i.date,string:function(a){return null==a||""===a?null:a+""}},l={"boolean":function(a){return"true"===a||"false"===a||i.isBoolean(a)},integer:function(a){return l.number(a)&&(a=+a)===~~a},number:function(a){return!isNaN(+a)&&!i.isDate(a)},date:function(a){return!isNaN(Date.parse(a))}};e.annotation=d,e.all=f,e.infer=g,e.inferAll=h,e.parsers=k,b.exports=e},{"../util":30}],26:[function(a,b,c){var d=a("./util"),e={version:"1.7.2",load:a("./import/load"),read:a("./import/read"),type:a("./import/type"),Aggregator:a("./aggregate/aggregator"),groupby:a("./aggregate/groupby"),bins:a("./bins/bins"),$bin:a("./bins/histogram").$bin,histogram:a("./bins/histogram").histogram,format:a("./format"),template:a("./template"),time:a("./time")};d.extend(e,d),d.extend(e,a("./accessor")),d.extend(e,a("./generate")),d.extend(e,a("./stats")),d.extend(e,a("./import/readers")),d.extend(e.format,a("./format-tables")),e.print={table:e.format.table,summary:e.format.summary},b.exports=e},{"./accessor":7,"./aggregate/aggregator":8,"./aggregate/groupby":10,"./bins/bins":12,"./bins/histogram":13,"./format":15,"./format-tables":14,"./generate":16,"./import/load":22,"./import/read":23,"./import/readers":24,"./import/type":25,"./stats":27,"./template":28,"./time":29,"./util":30}],27:[function(a,b,c){function d(a,b,c){var d=a&&a.nullh||0,e=i.random.normal(0,1),f=j.mean(b,c),g=j.stdev(b,c)/Math.sqrt(j.count.valid(b,c));if(0===g)return f-d===0?1:0;var h=(f-d)/g;return 2*e.cdf(-Math.abs(h))}function e(a,b,c,d){var e,f=d?b.map(g.$(c)):b,h=d?b.map(g.$(d)):c,i=j.count(f),k=j.count(h),l=Array();if(i!==k)throw Error("Array lengths must match.");for(e=0;i>e;++e)g.isValid(f[e])&&g.isValid(h[e])&&l.push(f[e]-h[e]);return j.z.test(l,a&&a.nullh||0)}function f(a,b,c,d){var e=d?b.map(g.$(c)):b,f=d?b.map(g.$(d)):c,h=j.count.valid(e),k=j.count.valid(f),l=i.random.normal(0,1),m=j.mean(e)-j.mean(f)-(a&&a.nullh||0),n=Math.sqrt(j.variance(e)/h+j.variance(f)/k);if(0===n)return 0===m?1:0;var o=m/n;return 2*l.cdf(-Math.abs(o))}var g=a("./util"),h=a("./import/type"),i=a("./generate"),j=b.exports;j.unique=function(a,b,c){b=g.$(b),c=c||[];var d,e,f,h={};for(e=0,f=a.length;f>e;++e)d=b?b(a[e]):a[e],d in h||(h[d]=1,c.push(d));return c},j.count=function(a){return a&&a.length||0},j.count.valid=function(a,b){b=g.$(b);var c,d,e,f=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],g.isValid(c)&&(f+=1);return f},j.count.missing=function(a,b){b=g.$(b);var c,d,e,f=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],null==c&&(f+=1);return f},j.count.distinct=function(a,b){b=g.$(b);var c,d,e,f={},h=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],c in f||(f[c]=1,h+=1);return h},j.count.map=function(a,b){b=g.$(b);var c,d,e,f={};for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],f[c]=c in f?f[c]+1:1;return f},j.median=function(a,b){return b&&(a=a.map(g.$(b))),a=a.filter(g.isValid).sort(g.cmp),j.quantile(a,.5)},j.quartile=function(a,b){b&&(a=a.map(g.$(b))),a=a.filter(g.isValid).sort(g.cmp);var c=j.quantile;return[c(a,.25),c(a,.5),c(a,.75)]},j.quantile=function(a,b,c){void 0===c&&(c=b,b=g.identity),b=g.$(b);var d=(a.length-1)*c+1,e=Math.floor(d),f=+b(a[e-1]),h=d-e;return h?f+h*(b(a[e])-f):f},j.sum=function(a,b){b=g.$(b);for(var c,d=0,e=0,f=a.length;f>e;++e)c=b?b(a[e]):a[e],g.isValid(c)&&(d+=c);return d},j.mean=function(a,b){b=g.$(b);var c,d,e,f,h,i=0;for(d=0,f=0,e=a.length;e>d;++d)h=b?b(a[d]):a[d],g.isValid(h)&&(c=h-i,i+=c/++f);return i},j.mean.geometric=function(a,b){b=g.$(b);var c,d,e,f,h=1;for(f=0,c=0,d=a.length;d>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){if(0>=e)throw Error("Geometric mean only defined for positive values.");h*=e,++c}return h=c>0?Math.pow(h,1/c):0},j.mean.harmonic=function(a,b){b=g.$(b);var c,d,e,f,h=0;for(f=0,c=0,d=a.length;d>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(h+=1/e,++c);return c/h;
},j.variance=function(a,b){if(b=g.$(b),!g.isArray(a)||a.length<2)return 0;var c,d,e,f,h=0,i=0;for(d=0,e=0;d<a.length;++d)f=b?b(a[d]):a[d],g.isValid(f)&&(c=f-h,h+=c/++e,i+=c*(f-h));return i/=e-1},j.stdev=function(a,b){return Math.sqrt(j.variance(a,b))},j.modeskew=function(a,b){var c=j.mean(a,b),d=j.median(a,b),e=j.stdev(a,b);return 0===e?0:(c-d)/e},j.min=function(a,b){return j.extent(a,b)[0]},j.max=function(a,b){return j.extent(a,b)[1]},j.extent=function(a,b){b=g.$(b);var c,d,e,f,h=a.length;for(f=0;h>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){c=d=e;break}for(;h>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(c>e&&(c=e),e>d&&(d=e));return[c,d]},j.extent.index=function(a,b){b=g.$(b);var c,d,e,f,h=-1,i=-1,j=a.length;for(f=0;j>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){c=d=e,h=i=f;break}for(;j>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(c>e&&(c=e,h=f),e>d&&(d=e,i=f));return[h,i]},j.dot=function(a,b,c){var d,e,f=0;if(c)for(b=g.$(b),c=g.$(c),d=0;d<a.length;++d)e=b(a[d])*c(a[d]),e===e&&(f+=e);else{if(a.length!==b.length)throw Error("Array lengths must match.");for(d=0;d<a.length;++d)e=a[d]*b[d],e===e&&(f+=e)}return f},j.dist=function(a,b,c,d){var e,f,h=g.isFunction(c)||g.isString(c),i=a,j=h?a:b,k=h?d:c,l=2===k||null==k,m=a.length,n=0;for(h&&(b=g.$(b),c=g.$(c)),f=0;m>f;++f)e=h?b(i[f])-c(j[f]):i[f]-j[f],n+=l?e*e:Math.pow(Math.abs(e),k);return l?Math.sqrt(n):Math.pow(n,1/k)},j.cohensd=function(a,b,c){var d=c?a.map(g.$(b)):a,e=c?a.map(g.$(c)):b,f=j.mean(d),h=j.mean(e),i=j.count.valid(d),k=j.count.valid(e);if(0>=i+k-2)return 0;var l=j.variance(d),m=j.variance(e),n=Math.sqrt(((i-1)*l+(k-1)*m)/(i+k-2));return 0===n?0:(f-h)/n},j.covariance=function(a,b,c){var d,e,f,h,i,k=c?a.map(g.$(b)):a,l=c?a.map(g.$(c)):b,m=k.length,n=j.mean(k),o=j.mean(l),p=0,q=0;if(m!==l.length)throw Error("Input lengths must match.");for(d=0;m>d;++d)if(e=k[d],h=g.isValid(e),f=l[d],i=g.isValid(f),h&&i)p+=(e-n)*(f-o),++q;else if(h||i)throw Error("Valid values must align.");return p/(q-1)},j.rank=function(a,b){b=g.$(b)||g.identity;var c,d,e,f=a.map(function(a,c){return{idx:c,val:b(a)}}).sort(g.comparator("val")),h=a.length,i=Array(h),j=-1,k={};for(c=0;h>c;++c){if(d=f[c].val,0>j&&k===d)j=c-1;else if(j>-1&&k!==d){for(e=1+(c-1+j)/2;c>j;++j)i[f[j].idx]=e;j=-1}i[f[c].idx]=c+1,k=d}if(j>-1)for(e=1+(h-1+j)/2;h>j;++j)i[f[j].idx]=e;return i},j.cor=function(a,b,c){var d=c;c=d?a.map(g.$(c)):b,b=d?a.map(g.$(b)):a;var e=j.dot(b,c),f=j.mean(b),h=j.mean(c),i=j.stdev(b),k=j.stdev(c),l=a.length;return(e-l*f*h)/((l-1)*i*k)},j.cor.rank=function(a,b,c){var d,e,f,g=c?j.rank(a,b):j.rank(a),h=c?j.rank(a,c):j.rank(b),i=a.length;for(d=0,e=0;i>d;++d)f=g[d]-h[d],e+=f*f;return 1-6*e/(i*(i*i-1))},j.cor.dist=function(a,b,c){var d,e,f,h,i=c?a.map(g.$(b)):a,k=c?a.map(g.$(c)):b,l=j.dist.mat(i),m=j.dist.mat(k),n=l.length;for(d=0,e=0,f=0,h=0;n>d;++d)e+=l[d]*l[d],f+=m[d]*m[d],h+=l[d]*m[d];return Math.sqrt(h/Math.sqrt(e*f))},j.linearRegression=function(a,b,c){var d,e,f=c?a.map(g.$(b)):a,h=c?a.map(g.$(c)):b,i=f.length,k=j.covariance(f,h),l=j.stdev(f),m=j.stdev(h),n=k/(l*l),o=j.mean(h)-n*j.mean(f),p={slope:n,intercept:o,R:k/(l*m),rss:0};for(e=0;i>e;++e)g.isValid(f[e])&&g.isValid(h[e])&&(d=n*f[e]+o-h[e],p.rss+=d*d);return p},j.bootstrap={},j.bootstrap.ci=function(a,b,c,d,e){var f,h,k,l,m,n,o;for(g.isFunction(b)||g.isString(b)?(f=a.map(g.$(b)),h=c,k=d,l=e):(f=a,h=b,k=c,l=d),h=h?+h:1e3,k=k||.05,m=i.random.bootstrap(f,l),o=0,n=Array(h);h>o;++o)n[o]=j.mean(m.samples(f.length));return n.sort(g.numcmp),[j.quantile(n,k/2),j.quantile(n,1-k/2)]},j.z={},j.z.ci=function(a,b,c){var d=a,e=b;(g.isFunction(b)||g.isString(b))&&(d=a.map(g.$(b)),e=c),e=e||.05;var f=.05===e?1.96:i.random.normal(0,1).icdf(1-e/2),h=j.mean(d),k=j.stdev(d)/Math.sqrt(j.count.valid(d));return[h-f*k,h+f*k]},j.z.test=function(a,b,c,h){return g.isFunction(c)||g.isString(c)?(h&&h.paired?e:f)(h,a,b,c):g.isArray(b)?(c&&c.paired?e:f)(c,a,b):g.isFunction(b)||g.isString(b)?d(c,a,b):d(b,a)},j.dist.mat=function(a){var b,c,d,e=a.length,f=e*e,g=Array(f),h=i.zeros(e),j=0;for(c=0;e>c;++c)for(g[c*e+c]=0,d=c+1;e>d;++d)g[c*e+d]=b=Math.abs(a[c]-a[d]),g[d*e+c]=b,h[c]+=b,h[d]+=b;for(c=0;e>c;++c)j+=h[c],h[c]/=e;for(j/=f,c=0;e>c;++c)for(d=c;e>d;++d)g[c*e+d]+=j-h[c]-h[d],g[d*e+c]=g[c*e+d];return g},j.entropy=function(a,b){b=g.$(b);var c,d,e=0,f=0,h=a.length;for(c=0;h>c;++c)e+=b?b(a[c]):a[c];if(0===e)return 0;for(c=0;h>c;++c)d=(b?b(a[c]):a[c])/e,d&&(f+=d*Math.log(d));return-f/Math.LN2},j.mutual=function(a,b,c,d){var e,f,h,i=d?a.map(g.$(b)):a,j=d?a.map(g.$(c)):b,k=d?a.map(g.$(d)):c,l={},m={},n=k.length,o=0,p=0,q=0;for(h=0;n>h;++h)l[i[h]]=0,m[j[h]]=0;for(h=0;n>h;++h)l[i[h]]+=k[h],m[j[h]]+=k[h],o+=k[h];for(f=1/(o*Math.LN2),h=0;n>h;++h)0!==k[h]&&(e=o*k[h]/(l[i[h]]*m[j[h]]),p+=k[h]*f*Math.log(e),q+=k[h]*f*Math.log(k[h]/o));return[p,1+p/q]},j.mutual.info=function(a,b,c,d){return j.mutual(a,b,c,d)[0]},j.mutual.dist=function(a,b,c,d){return j.mutual(a,b,c,d)[1]},j.profile=function(a,b){var c,d,e,f,i,k=0,l=0,m=0,n=0,o=null,p=null,q=0,r=[],s={};for(e=0;e<a.length;++e)f=b?b(a[e]):a[e],s[f]=f in s?s[f]+1:(n+=1,1),null==f?++m:g.isValid(f)&&(i="string"==typeof f?f.length:f,(null===o||o>i)&&(o=i),(null===p||i>p)&&(p=i),c=i-k,k+=c/++l,q+=c*(i-k),r.push(i));return q/=l-1,d=Math.sqrt(q),r.sort(g.cmp),{type:h(a,b),unique:s,count:a.length,valid:l,missing:m,distinct:n,min:o,max:p,mean:k,stdev:d,median:f=j.quantile(r,.5),q1:j.quantile(r,.25),q3:j.quantile(r,.75),modeskew:0===d?0:(k-f)/d}},j.summary=function(a,b){b=b||g.keys(a[0]);var c=b.map(function(b){var c=j.profile(a,g.$(b));return c.field=b,c});return c.__summary__=!0,c}},{"./generate":16,"./import/type":25,"./util":30}],28:[function(a,b,c){function d(a){var b=e(a,"d");return b="var __t; return "+b+";",new Function("d",b).bind(l)}function e(a,b,c){b=b||"obj";var d=0,e="'",h=m;return a.replace(h,function(h,i,j){return e+=a.slice(d,j).replace(q,g),d=j+h.length,i&&(e+="'\n+((__t=("+f(i,b,c)+"))==null?'':__t)+\n'"),h}),e+"'"}function f(a,b,c){function e(a){return a=a||"",l?(l=!1,m="String("+m+")"+a):m+=a,m}function f(){return"(typeof "+m+'==="number"?new Date('+m+"):"+m+")"}function g(a){var b=u[0];if(!("'"===b[0]&&"'"===b[b.length-1]||'"'===b[0]&&'"'===b[b.length-1]))throw Error("Format pattern must be quoted: "+b);b=b.slice(1,-1),r=h(b,a),l=!1;var c="number"===a?m:f();m="this.formats["+r+"]("+c+")"}var i=a.match(n),k=i.shift().trim(),l=!0;c&&(c[k]=1);for(var m=d.property(b,k),p=0;p<i.length;++p){var q,r,s,t=i[p],u=null;switch((q=t.indexOf(":"))>0&&(t=t.slice(0,q),u=i[p].slice(q+1).match(o).map(function(a){return a.trim()})),t=t.trim()){case"length":e(".length");break;case"lower":e(".toLowerCase()");break;case"upper":e(".toUpperCase()");break;case"lower-locale":e(".toLocaleLowerCase()");break;case"upper-locale":e(".toLocaleUpperCase()");break;case"trim":e(".trim()");break;case"left":r=j.number(u[0]),e(".slice(0,"+r+")");break;case"right":r=j.number(u[0]),e(".slice(-"+r+")");break;case"mid":r=j.number(u[0]),s=r+j.number(u[1]),e(".slice(+"+r+","+s+")");break;case"slice":r=j.number(u[0]),e(".slice("+r+(u.length>1?","+j.number(u[1]):"")+")");break;case"truncate":r=j.number(u[0]),s=u[1],s="left"!==s&&"middle"!==s&&"center"!==s?"right":s,m="this.truncate("+e()+","+r+",'"+s+"')";break;case"pad":r=j.number(u[0]),s=u[1],s="left"!==s&&"middle"!==s&&"center"!==s?"right":s,m="this.pad("+e()+","+r+",'"+s+"')";break;case"number":g("number");break;case"time":g("time");break;case"time-utc":g("utc");break;case"month":m="this.month("+m+")";break;case"month-abbrev":m="this.month("+m+",true)";break;case"day":m="this.day("+m+")";break;case"day-abbrev":m="this.day("+m+",true)";break;case"quarter":m="this.quarter("+m+")";break;case"quarter-utc":m="this.utcQuarter("+m+")";break;default:throw Error("Unrecognized template filter: "+t)}}return m}function g(a){return"\\"+p[a]}function h(a,b){var c=b+":"+a;if(null==l.format_map[c]){var d=k[b](a),e=l.formats.length;return l.formats.push(d),l.format_map[c]=e,e}return l.format_map[c]}function i(a,b){return l.formats[h(a,b)]}var j=a("./util"),k=a("./format"),l={formats:[],format_map:{},truncate:j.truncate,pad:j.pad,day:k.day,month:k.month,quarter:k.quarter,utcQuarter:k.utcQuarter};d.source=e,d.context=l,d.format=i,b.exports=d,d.clearFormatCache=function(){l.formats=[],l.format_map={}},d.property=function(a,b){var c=j.field(b).map(j.str).join("][");return a+"["+c+"]"};var m=/\{\{(.+?)\}\}|$/g,n=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,o=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":15,"./util":30}],29:[function(a,b,c){function d(a){return j.setTime(+a),j}function e(a,b,c,d,e,f){var g={type:a,date:b,unit:c};return d?g.step=d:g.minstep=1,null!=e&&(g.min=e),null!=f&&(g.max=f),g}function f(a,b,c,d,f,g){return e(a,function(a){return b.offset(c,a)},function(a){return b.count(c,a)},d,f,g)}function g(a,b,c,d){var e,f,g,h=o[0];for(e=1,f=o.length;f>e;++e)if(h=o[e],b>h[0]){if(g=b/h[0],g>d)return a[o[e-1][1]];if(g>=c)return a[h[1]]}return a[o[f-1][1]]}function h(a){var b,c,d={};for(b=0,c=a.length;c>b;++b)d[a[b].type]=a[b];return d.find=function(b,c,d){return g(a,b,c,d)},d}var i=a("d3-time"),j=new Date,k=new Date(0,0,1).setFullYear(0),l=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),m=[f("second",i.second,k),f("minute",i.minute,k),f("hour",i.hour,k),f("day",i.day,k,[1,7]),f("month",i.month,k,[1,3,6]),f("year",i.year,k),e("seconds",function(a){return new Date(1970,0,1,0,0,a)},function(a){return d(a).getSeconds()},null,0,59),e("minutes",function(a){return new Date(1970,0,1,0,a)},function(a){return d(a).getMinutes()},null,0,59),e("hours",function(a){return new Date(1970,0,1,a)},function(a){return d(a).getHours()},null,0,23),e("weekdays",function(a){return new Date(1970,0,4+a)},function(a){return d(a).getDay()},[1],0,6),e("dates",function(a){return new Date(1970,0,a)},function(a){return d(a).getDate()},[1],1,31),e("months",function(a){return new Date(1970,a%12,1)},function(a){return d(a).getMonth()},[1],0,11)],n=[f("second",i.utcSecond,l),f("minute",i.utcMinute,l),f("hour",i.utcHour,l),f("day",i.utcDay,l,[1,7]),f("month",i.utcMonth,l,[1,3,6]),f("year",i.utcYear,l),e("seconds",function(a){return new Date(Date.UTC(1970,0,1,0,0,a))},function(a){return d(a).getUTCSeconds()},null,0,59),e("minutes",function(a){return new Date(Date.UTC(1970,0,1,0,a))},function(a){return d(a).getUTCMinutes()},null,0,59),e("hours",function(a){return new Date(Date.UTC(1970,0,1,a))},function(a){return d(a).getUTCHours()},null,0,23),e("weekdays",function(a){return new Date(Date.UTC(1970,0,4+a))},function(a){return d(a).getUTCDay()},[1],0,6),e("dates",function(a){return new Date(Date.UTC(1970,0,a))},function(a){return d(a).getUTCDate()},[1],1,31),e("months",function(a){return new Date(Date.UTC(1970,a%12,1))},function(a){return d(a).getUTCMonth()},[1],0,11)],o=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];b.exports=h(m),b.exports.utc=h(n)},{"d3-time":6}],30:[function(a,b,c){(function(a){function c(a,b){var c,d="";for(c=0;a>c;++c)d+=b;return d}function d(a,b,c){var d=0,e=a.split(i);return a=c?(e=e.reverse()).filter(function(a){return d+=a.length,b>=d}).reverse():e.filter(function(a){return d+=a.length,b>=d}),a.length?a.join("").trim():e[0].slice(0,b)}var e=b.exports,f="__name__";e.namedfunc=function(a,b){return b[f]=a,b},e.name=function(a){return null==a?null:a[f]},e.identity=function(a){return a},e["true"]=e.namedfunc("true",function(){return!0}),e["false"]=e.namedfunc("false",function(){return!1}),e.duplicate=function(a){return JSON.parse(JSON.stringify(a))},e.equal=function(a,b){return JSON.stringify(a)===JSON.stringify(b)},e.extend=function(a){for(var b,c,d=1,e=arguments.length;e>d;++d){b=arguments[d];for(c in b)a[c]=b[c]}return a},e.length=function(a){return null!=a&&null!=a.length?a.length:null},e.keys=function(a){var b,c=[];for(b in a)c.push(b);return c},e.vals=function(a){var b,c=[];for(b in a)c.push(a[b]);return c},e.toMap=function(a,b){return(b=e.$(b))?a.reduce(function(a,c){return a[b(c)]=1,a},{}):a.reduce(function(a,b){return a[b]=1,a},{})},e.keystr=function(a){var b=a.length;if(!b)return"";for(var c=String(a[0]),d=1;b>d;++d)c+="|"+String(a[d]);return c};var g=Object.prototype.toString;e.isObject=function(a){return a===Object(a)},e.isFunction=function(a){return"[object Function]"===g.call(a)},e.isString=function(a){return"string"==typeof value||"[object String]"===g.call(a)},e.isArray=Array.isArray||function(a){return"[object Array]"===g.call(a)},e.isNumber=function(a){return"number"==typeof a||"[object Number]"===g.call(a)},e.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==g.call(a)},e.isDate=function(a){return"[object Date]"===g.call(a)},e.isValid=function(a){return null!=a&&a===a},e.isBuffer="function"==typeof a&&a.isBuffer||e["false"],e.number=function(a){return null==a||""===a?null:+a},e["boolean"]=function(a){return null==a||""===a?null:"false"===a?!1:!!a},e.date=function(a,b){var c=b?b:Date;return null==a||""===a?null:c.parse(a)},e.array=function(a){return null!=a?e.isArray(a)?a:[a]:[]},e.str=function(a){return e.isArray(a)?"["+a.map(e.str)+"]":e.isObject(a)||e.isString(a)?JSON.stringify(a).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):a};var h=/\[(.*?)\]|[^.\[]+/g;e.field=function(a){return String(a).match(h).map(function(a){return"["!==a[0]?a:"'"!==a[1]&&'"'!==a[1]?a.slice(1,-1):a.slice(2,-2).replace(/\\(["'])/g,"$1")})},e.accessor=function(a){return null==a||e.isFunction(a)?a:e.namedfunc(a,Function("x","return x["+e.field(a).map(e.str).join("][")+"];"))},e.$=e.accessor,e.mutator=function(a){var b;return e.isString(a)&&(b=e.field(a)).length>1?function(a,c){for(var d=0;d<b.length-1;++d)a=a[b[d]];a[b[d]]=c}:function(b,c){b[a]=c}},e.$func=function(a,b){return function(c){c=e.$(c)||e.identity;var d=a+(e.name(c)?"_"+e.name(c):"");return e.namedfunc(d,function(a){return b(c(a))})}},e.$valid=e.$func("valid",e.isValid),e.$length=e.$func("length",e.length),e.$in=function(a,b){a=e.$(a);var c=e.isArray(b)?e.toMap(b):b;return function(b){return!!c[a(b)]}},e.comparator=function(a){var b=[];return void 0===a&&(a=[]),a=e.array(a).map(function(a){var c=1;return"-"===a[0]?(c=-1,a=a.slice(1)):"+"===a[0]&&(c=1,a=a.slice(1)),b.push(c),e.accessor(a)}),function(c,d){var f,g,h,i;for(f=0,g=a.length;g>f;++f)if(h=a[f],i=e.cmp(h(c),h(d)))return i*b[f];return 0}},e.cmp=function(a,b){return(b>a||null==a)&&null!=b?-1:(a>b||null==b)&&null!=a?1:(b=b instanceof Date?+b:b,(a=a instanceof Date?+a:a)!==a&&b===b?-1:b!==b&&a===a?1:0)},e.numcmp=function(a,b){return a-b},e.stablesort=function(a,b,c){var d=a.reduce(function(a,b,d){return a[c(b)]=d,a},{});return a.sort(function(a,e){var f=b(a),g=b(e);return g>f?-1:f>g?1:d[c(a)]-d[c(e)]}),a},e.permute=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b},e.pad=function(a,b,d,e){e=e||" ";var f=b-a.length;if(0>=f)return a;switch(d){case"left":return c(f,e)+a;case"middle":case"center":return c(Math.floor(f/2),e)+a+c(Math.ceil(f/2),e);default:return a+c(f,e)}},e.truncate=function(a,b,c,e,f){var g=a.length;if(b>=g)return a;f=void 0!==f?String(f):"…";var h=Math.max(0,b-f.length);switch(c){case"left":return f+(e?d(a,h,1):a.slice(g-h));case"middle":case"center":var i=Math.ceil(h/2),j=Math.floor(h/2);return(e?d(a,i):a.slice(0,i))+f+(e?d(a,j,1):a.slice(g-j));default:return(e?d(a,h):a.slice(0,h))+f}};var i=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,a("buffer").Buffer)},{buffer:2}],31:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.topojson=b.topojson||{})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=Math.round((a[0]-g)/e),j=Math.round((a[1]-h)/f);a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[0>a?~a:a],f=0,g=d.length;g>f;++f)b.push(c=d[f].slice()),k(c,f);0>a&&e(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;e>c;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=0>b?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return Math.abs(n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0]))}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h,i=1,k=d(f[0]);c>i;++i)(g=d(f[i]))>k&&(h=f[0],f[0]=f[i],f[i]=h,k=g);return f})}}function q(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&r(d[f],h)<0&&(h=d[g=f]),e>c&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;i>d;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;i>d;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;i>d;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.26";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t})},{}],32:[function(a,b,c){function d(a,b){var c={};return e(a,c),c.add=[],c.mod=[],c.rem=[],c.reflow=b,c}function e(a,b){b.stamp=a?a.stamp:0,b.sort=a?a.sort:null,b.facet=a?a.facet:null,b.trans=a?a.trans:null,b.dirty=a?a.dirty:[],b.request=a?a.request:null;for(var c,d=0,e=f.length;e>d;++d)b[c=f[d]]=a?a[c]:{}}var f=a("./Dependencies").ALL;b.exports={create:d,copy:e}},{"./Dependencies":35}],33:[function(a,b,c){function d(a){g.init.call(this,a),this._data=[],this.router(!0).collector(!0)}var e=a("vega-logging"),f=a("./Tuple"),g=a("./Node").prototype,h=a("./ChangeSet"),i=d.prototype=Object.create(g);i.constructor=d,i.data=function(){return this._data},i.evaluate=function(a){e.debug(a,["collecting"]);var b=h.create(a);return a.rem.length&&(this._data=f.idFilter(this._data,a.rem),b.rem=a.rem.slice(0)),a.add.length&&(this._data=this._data.concat(a.add),b.add=a.add.slice(0)),a.mod.length&&(b.mod=a.mod.slice(0)),a.sort&&this._data.sort(a.sort),a.reflow&&(b.mod=b.mod.concat(f.idFilter(this._data,b.add,b.mod,b.rem)),b.reflow=!1),b},b.exports=d},{"./ChangeSet":32,"./Node":38,"./Tuple":40,"vega-logging":48}],34:[function(a,b,c){function d(a,b,c){this._graph=a,this._name=b,this._data=[],this._source=null,this._facet=c,this._input=j.create(),this._output=null,this._indexes={},this._indexFields=[],this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function e(a){var b=new m(a._graph).router(!0).collector(!0);return b.data=function(){return a._data},b.evaluate=function(b){i.debug(b,["input",a._name]);var c,d=a._input,e=j.create(b);for(c in d.fields)e.fields[c]=1;return d.rem.length&&(a._data=l.idFilter(a._data,d.rem)),d.add.length&&(a._data=a._data.concat(d.add)),d.sort&&a._data.sort(d.sort),b.reflow&&(d.mod=d.mod.concat(l.idFilter(a._data,d.add,d.mod,d.rem))),a._input=j.create(),e.add=d.add,e.mod=d.mod,e.rem=d.rem,e.facet=a._facet,e},b}function f(a){function b(b){var c,d,e,f,g,i,j=a._indexFields;for(c=0;c<j.length;++c){for(f=j[c],g=a._indexes[f],e=h.$(f),d=0;d<b.add.length;++d)i=e(b.add[d]),l.prev_init(b.add[d]),g[i]=(g[i]||0)+1;for(d=0;d<b.rem.length;++d)i=e(b.rem[d]),g[i]=(g[i]||0)-1;for(d=0;d<b.mod.length;++d)i=e(b.mod[d]._prev),g[i]=(g[i]||0)-1,i=e(b.mod[d]),g[i]=(g[i]||0)+1}}var c=new m(a._graph).router(!0).reflows(!0).collector(!0);return c.data=function(){return a._collector?a._collector.data():a._data},c.evaluate=function(c){i.debug(c,["output",a._name]),b(c);var d=j.create(c,!0);return a._facet&&(a._facet.values=a.values(),c.facet=null),a._output=c,d.data[a._name]=1,d},c}function g(a){var b=new m(a._graph).router(!0);return b.evaluate=function(b){if(a.mutates()){var c=a._srcMap||(a._srcMap={}),d=j.create(b);return d.add=b.add.map(function(a){return c[a._id]=l.derive(a)}),d.mod=b.mod.map(function(a){return l.rederive(a,c[a._id])}),d.rem=b.rem.map(function(a){var b=c[a._id];return c[a._id]=null,b}),a._input=d}return a._input=b},b}var h=a("datalib"),i=a("vega-logging"),j=a("./ChangeSet"),k=a("./Collector"),l=a("./Tuple"),m=a("./Node"),n=d.prototype;n.name=function(a){return arguments.length?(this._name=a,this):this._name},n.source=function(a){return arguments.length?this._source=this._graph.data(a):this._source},n.insert=function(a){return this._input.add=this._input.add.concat(a.map(l.ingest)),this},n.remove=function(a){var b=this._data.filter(a);return this._input.rem=this._input.rem.concat(b),this},n.update=function(a,b,c){var d=this._input.mod,e=l.idMap(d);return this._input.fields[b]=1,this._data.filter(a).forEach(function(a){var f=a[b],g=c(a);f!==g&&(l.set(a,b,g),1!==e[a._id]&&(d.push(a),e[a._id]=1))}),this},n.values=function(a){return arguments.length?(this._input.rem=this._data.slice(),a&&this.insert(a),this):this._collector.data()},n.mutates=function(a){return arguments.length?(this._mutates=this._mutates||a,this):this._mutates},n.last=function(){return this._output},n.fire=function(a){return a&&(this._input=a),this._graph.propagate(this._input,this._pipeline[0]),this},n.pipeline=function(a){if(!arguments.length)return this._pipeline;var b,c=this._graph;return a.unshift(this._inputNode=e(this)),b=c.preprocess(a),b.router&&a.push(b.collector=new k(c)),a.push(this._outputNode=f(this)),this._collector=b.collector,this._mutates=!!b.mutates,c.connect(this._pipeline=a),this},n.synchronize=function(){return this._graph.synchronize(this._pipeline),this},n.getIndex=function(a){var b,c,d,e,f=this.values(),g=this._indexes,i=this._indexFields,j=h.$(a);if(!g[a])for(g[a]=b={},i.push(a),c=0,d=f.length;d>c;++c)e=j(f[c]),b[e]=(b[e]||0)+1,l.prev_init(f[c]);return g[a]},n.listener=function(){return g(this).addListener(this._inputNode)},n.addListener=function(a){return a instanceof d?this._collector.addListener(a.listener()):this._outputNode.addListener(a),this},n.removeListener=function(a){this._outputNode.removeListener(a)},n.listeners=function(a){return(a?this._collector:this._outputNode).listeners()},b.exports=d},{"./ChangeSet":32,"./Collector":33,"./Node":38,"./Tuple":40,datalib:26,"vega-logging":48}],35:[function(a,b,c){var d=b.exports={ALL:["data","fields","scales","signals"]};d.ALL.forEach(function(a){d[a.toUpperCase()]=a})},{}],36:[function(a,b,c){function d(){}var e=a("datalib"),f=a("vega-logging"),g=a("./Heap"),h=a("./ChangeSet"),i=a("./DataSource"),j=a("./Collector"),k=a("./Tuple"),l=a("./Signal"),m=a("./Dependencies"),n=d.prototype;n.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this._requestedIndexes={},this.doNotPropagate={}},n.rank=function(){return++this._rank},n.values=function(a,b,c){var d,f,g=a===m.SIGNALS?this._signals:this._data,h=void 0!==b?b:e.keys(g);if(Array.isArray(h)){for(d=c||{},f=0;f<h.length;++f)d[h[f]]=g[h[f]].values();return d}return g[h].values()},n.dataValues=function(a){return this.values(m.DATA,a)},n.signalValues=function(a){return this.values(m.SIGNALS,a)},n.data=function(a,b,c){var d=this._data;if(arguments.length)return 1===arguments.length?d[a]:d[a]=new i(this,a,c).pipeline(b);var e,f=[];for(e in d)f.push(d[e]);return f},n.signal=function(a,b){if(1===arguments.length){var c=this;return Array.isArray(a)?a.map(function(a){return c._signals[a]}):this._signals[a]}return this._signals[a]=new l(this,a,b)},n.signalRef=function(a){Array.isArray(a)||(a=e.field(a));var b=this.signal(a[0]).value();if(a.length>1)for(var c=1,d=a.length;d>c;++c)b=b[a[c]];return b},n.requestIndex=function(a,b){var c=this._requestedIndexes,d=c[a]||(c[a]={});return d[b]=!0,this},n.buildIndexes=function(){var a,b,c,d,f,g,h,i,j=this._requestedIndexes,k=e.keys(j);for(a=0,b=k.length;b>a;++a){if(g=this.data(f=k[a]),!g)throw Error("Data source "+e.str(f)+" does not exist.");for(h=e.keys(j[f]),c=0,d=h.length;d>c;++c)null!==(i=h[c])&&(g.getIndex(i),j[f][i]=null)}return this},n.propagate=function(a,b,c,d){var e,f,i,j,k,m,n,o,p={},q=new g(function(a,b){return a._qrank-b._qrank});if(a.stamp)throw Error("Pulse already has a non-zero stamp.");for(a.stamp=c||++this._stamp,p[b._id]=a,q.push(b.qrank(!0));q.size()>0;)if(b=q.peek(),o=b instanceof l,a=p[b._id],b.rank()!==b.qrank())q.replace(b.qrank(!0));else if(q.pop(),p[b._id]=null,e=b._listeners,(!o||o&&!d)&&(a=this.evaluate(a,b)),a!==this.doNotPropagate)for(!a.reflow&&b.reflows()&&(a=h.create(a,!0)),m=0,n=e.length;n>m;++m)if(f=e[m],void 0!==(i=p[f._id])){if(null===i)throw Error("Already propagated to node.");if(i===a)continue;if(j=a.add.length||a.mod.length||a.rem.length,k=i.add.length||i.mod.length||i.rem.length,j&&k)throw Error("Multiple changeset pulses to same node");p[f._id]=j?a:i,p[f._id].reflow=a.reflow||i.reflow}else q.push(f.qrank(!0)),p[f._id]=a;return this.done(a)},n.done=function(a){f.debug(a,["bookkeeping"]);for(var b in a.data)this.data(b).synchronize();return this},n.preprocess=function(a){for(var b,c,d,e,f=this,g=0,h=0;h<a.length;++h)b=a[h],b.batch()&&!b._collector&&(c||!d?(b=new j(f),a.splice(h,0,b),c=!1):b._collector=d),(e=b.collector())&&(d=b),c=c||b.router()&&!e,g=g||b.mutates(),b.produces()&&(a.splice(h+1,0,new j(f)),c=!1);return{router:c,collector:d,mutates:g}},n.connect=function(a){var b,c,d,f,g,h,i,j,k,l;for(g=0,h=a.length;h>g;++g){for(c=a[g],c.collector()&&(b=c),d=c.dependency(m.DATA),i=0,j=d.length;j>i;++i){if(!(k=this.data(l=d[i])))throw new Error("Unknown data source "+e.str(l));k.addListener(b)}for(f=c.dependency(m.SIGNALS),i=0,j=f.length;j>i;++i){if(!(k=this.signal(l=f[i])))throw new Error("Unknown signal "+e.str(l));k.addListener(b)}g>0&&a[g-1].addListener(c)}return a},n.disconnect=function(a){var b,c,d,e,f,g,h,i;for(f=0,g=a.length;g>f;++f){for(c=a[f],c.collector()&&(b=c),d=c.dependency(m.DATA),h=0,i=d.length;i>h;++h)this.data(d[h]).removeListener(b);for(e=c.dependency(m.SIGNALS),h=0,i=e.length;i>h;++h)this.signal(e[h]).removeListener(b);c.disconnect()}return a},n.synchronize=function(a){var b,c,d,e,f,g,h,i,j={};for(d=0,e=a.length;e>d;++d)if(b=a[d],b.collector())for(f=0,c=b.data(),g=c.length;g>f;++f)i=(h=c[f])._id,j[i]||(k.prev_update(h),j[i]=1);return this},n.reevaluate=function(a,b){var c=a.reflow&&b.last()>=a.stamp,d=b.router()||a.add.length||a.rem.length;return d||!c||b.reevaluate(a)},n.evaluate=function(a,b){return this.reevaluate(a,b)?(a=b.evaluate(a),b.last(a.stamp),a):a},b.exports=d},{"./ChangeSet":32,"./Collector":33,"./DataSource":34,"./Dependencies":35,"./Heap":37,"./Signal":39,"./Tuple":40,datalib:26,"vega-logging":48}],37:[function(a,b,c){function d(a){this.cmp=a,this.nodes=[]}function e(a,b,c,d){var e,f,g;for(e=a[c];c>b&&(g=c-1>>1,f=a[g],d(e,f)<0);)a[c]=f,c=g;return a[c]=e}function f(a,b,c){for(var d,f=b,g=a.length,h=a[b],i=2*b+1;g>i;)d=i+1,g>d&&c(a[i],a[d])>=0&&(i=d),a[b]=a[i],b=i,i=2*b+1;return a[b]=h,e(a,f,b,c)}var g=d.prototype;g.size=function(){return this.nodes.length},g.clear=function(){return this.nodes=[],this},g.peek=function(){return this.nodes[0]},g.push=function(a){var b=this.nodes;return b.push(a),e(b,0,b.length-1,this.cmp)},g.pop=function(){var a,b=this.nodes,c=b.pop();return b.length?(a=b[0],b[0]=c,f(b,0,this.cmp)):a=c,a},g.replace=function(a){var b=this.nodes,c=b[0];
return b[0]=a,f(b,0,this.cmp),c},g.pushpop=function(a){var b=this.nodes,c=b[0];return b.length&&this.cmp(c,a)<0&&(b[0]=a,a=c,f(b,0,this.cmp)),a},b.exports=d},{}],38:[function(a,b,c){function d(a){a&&this.init(a)}var e=a("./Dependencies").ALL,f=0,g=d.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},h=d.prototype;h.init=function(a){this._id=++f,this._graph=a,this._rank=a.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var b=0,c=e.length;c>b;++b)this._deps[e[b]]=[];return this._flags=0,this},h.rank=function(){return this._rank},h.rerank=function(){for(var a,b=this._graph,c=[this];c.length;)a=c.shift(),a._rank=b.rank(),c.unshift.apply(c,a.listeners());return this},h.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},h.last=function(a){return arguments.length?(this._stamp=a,this):this._stamp},h._setf=function(a,b){return b?this._flags|=a:this._flags&=~a,this},h.router=function(a){return arguments.length?this._setf(g.Router,a):this._flags&g.Router},h.collector=function(a){return arguments.length?this._setf(g.Collector,a):this._flags&g.Collector},h.produces=function(a){return arguments.length?this._setf(g.Produces,a):this._flags&g.Produces},h.mutates=function(a){return arguments.length?this._setf(g.Mutates,a):this._flags&g.Mutates},h.reflows=function(a){return arguments.length?this._setf(g.Reflows,a):this._flags&g.Reflows},h.batch=function(a){return arguments.length?this._setf(g.Batch,a):this._flags&g.Batch},h.dependency=function(a,b){var c=this._deps[a],d=c._names||(c._names={});if(1===arguments.length)return c;if(null===b)c.splice(0,c.length),c._names={};else if(Array.isArray(b))for(var e,f=0,g=b.length;g>f;++f)e=b[f],d[e]||(c.push(e),d[e]=1);else{if(d[b])return this;c.push(b),d[b]=1}return this},h.listeners=function(){return this._listeners},h.addListener=function(a){if(!(a instanceof d))throw Error("Listener is not a Node");return this._listeners._ids[a._id]?this:(this._listeners.push(a),this._listeners._ids[a._id]=1,this._rank>a._rank&&a.rerank(),this)},h.removeListener=function(a){if(!this._listeners._ids[a._id])return!1;var b=this._listeners.indexOf(a),c=b>=0;return c&&(this._listeners.splice(b,1),this._listeners._ids[a._id]=null),c},h.disconnect=function(){this._listeners=[],this._listeners._ids={}},h.evaluate=function(a){return a},h.reevaluate=function(a){var b,c,d,f,g,h;for(d=0,f=e.length;f>d;++d)for(b=e[d],c=this._deps[b],g=0,h=c.length;h>g;++g)if(a[b][c[g]])return!0;return!1},d.reset=function(){f=0},b.exports=d},{"./Dependencies":35}],39:[function(a,b,c){function d(a,b,c){return g.init.call(this,a),this._name=b,this._value=c,this._verbose=!1,this._handlers=[],this}var e=a("./ChangeSet"),f=a("./Node"),g=f.prototype,h=d.prototype=Object.create(g);h.constructor=d,h.name=function(){return this._name},h.value=function(a){return arguments.length?(this._value=a,this):this._value},h.values=h.value,h.verbose=function(a){return arguments.length?(this._verbose=!!a,this):this._verbose},h.evaluate=function(a){return a.signals[this._name]?a:this._graph.doNotPropagate},h.fire=function(a){a||(a=e.create(null,!0)),a.signals[this._name]=1,this._graph.propagate(a,this)},h.on=function(a){var b=this,c=new f(this._graph);return c.evaluate=function(c){return a(b.name(),b.value()),c},this._handlers.push({handler:a,node:c}),this.addListener(c)},h.off=function(a){var b,c,d=this._handlers;for(b=d.length;--b>=0;)a&&d[b].handler!==a||(c=d.splice(b,1)[0],this.removeListener(c.node));return this},b.exports=d},{"./ChangeSet":32,"./Node":38}],40:[function(a,b,c){function d(a){return a=a===Object(a)?a:{data:a},a._id=++g,a._prev&&(a._prev=null),a}function e(a,b){b=b||{};for(var c=0,d=a.length;d>c;++c)b[a[c]._id]=1;return b}function f(a,b){b=b||{};for(var c in a)"_prev"!==c&&"_id"!==c&&(b[c]=a[c]);return b}var g=0;b.exports={ingest:d,idMap:e,derive:function(a){return d(f(a))},rederive:function(a,b){return f(a,b)},set:function(a,b,c){return a[b]===c?0:(a[b]=c,1)},prev:function(a){return a._prev||a},prev_init:function(a){a._prev||(a._prev={_id:a._id})},prev_update:function(a){var b,c,d=a._prev;if(d)for(b in a)"_prev"!==b&&"_id"!==b&&(d[b]=(c=a[b])instanceof Object&&c._prev?c._prev:c)},reset:function(){g=0},idFilter:function(a){for(var b={},c=arguments.length;--c>0;)e(arguments[c],b);return a.filter(function(a){return!b[a._id]})}}},{}],41:[function(a,b,c){b.exports={ChangeSet:a("./ChangeSet"),Collector:a("./Collector"),DataSource:a("./DataSource"),Dependencies:a("./Dependencies"),Graph:a("./Graph"),Node:a("./Node"),Signal:a("./Signal"),Tuple:a("./Tuple"),debug:a("vega-logging").debug}},{"./ChangeSet":32,"./Collector":33,"./DataSource":34,"./Dependencies":35,"./Graph":36,"./Node":38,"./Signal":39,"./Tuple":40,"vega-logging":48}],42:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(b){var c,d,e=ob[b];if(e)return e;for(c=b-1;!ob[c];)c--;for(e=ob[c],e={line:e.line,column:e.column,seenCR:e.seenCR};b>c;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return ob[b]=e,e}function d(a,b){var d=c(a),e=c(b);return{start:{offset:a,line:d.line,column:d.column},end:{offset:b,line:e.line,column:e.column}}}function e(a){pb>mb||(mb>pb&&(pb=mb,qb=[]),qb.push(a))}function f(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function g(){var a;return a=h()}function h(){var b,c,d,f,g,j;return b=mb,c=i(),c!==u?(d=r(),d!==u?(44===a.charCodeAt(mb)?(f=x,mb++):(f=u,0===rb&&e(y)),f!==u?(g=r(),g!==u?(j=h(),j!==u?(nb=b,c=z(c,j),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=mb,c=i(),c!==u&&(nb=b,c=A(c)),b=c),b}function i(){var b,c,d,f,g,h,k,l,m,n,o,p,q,s;return b=mb,91===a.charCodeAt(mb)?(c=B,mb++):(c=u,0===rb&&e(C)),c!==u?(d=r(),d!==u?(f=j(),f!==u?(g=r(),g!==u?(44===a.charCodeAt(mb)?(h=x,mb++):(h=u,0===rb&&e(y)),h!==u?(k=r(),k!==u?(l=j(),l!==u?(m=r(),m!==u?(93===a.charCodeAt(mb)?(n=D,mb++):(n=u,0===rb&&e(E)),n!==u?(o=r(),o!==u?(62===a.charCodeAt(mb)?(p=F,mb++):(p=u,0===rb&&e(G)),p!==u?(q=r(),q!==u?(s=i(),s!==u?(nb=b,c=H(f,l,s),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=j()),b}function j(){var a,b,c,d;if(a=mb,b=k(),b!==u){if(c=[],d=n(),d!==u)for(;d!==u;)c.push(d),d=n();else c=u;c!==u?(nb=a,b=I(b,c),a=b):(mb=a,a=u)}else mb=a,a=u;return a===u&&(a=mb,b=k(),b!==u&&(nb=a,b=J(b)),a=b),a}function k(){var b,c,d,f,g;return b=mb,40===a.charCodeAt(mb)?(c=K,mb++):(c=u,0===rb&&e(L)),c!==u?(d=h(),d!==u?(41===a.charCodeAt(mb)?(f=M,mb++):(f=u,0===rb&&e(N)),f!==u?(nb=b,c=O(d),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=mb,64===a.charCodeAt(mb)?(c=P,mb++):(c=u,0===rb&&e(Q)),c!==u?(d=o(),d!==u?(58===a.charCodeAt(mb)?(f=R,mb++):(f=u,0===rb&&e(S)),f!==u?(g=m(),g!==u?(nb=b,c=T(d,g),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=mb,c=l(),c!==u?(58===a.charCodeAt(mb)?(d=R,mb++):(d=u,0===rb&&e(S)),d!==u?(f=m(),f!==u?(nb=b,c=U(c,f),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=mb,c=p(),c!==u?(58===a.charCodeAt(mb)?(d=R,mb++):(d=u,0===rb&&e(S)),d!==u?(f=m(),f!==u?(nb=b,c=V(c,f),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b===u&&(b=mb,c=m(),c!==u&&(nb=b,c=W(c)),b=c,b===u&&(b=mb,c=o(),c!==u&&(nb=b,c=X(c)),b=c))))),b}function l(){var b;return a.substr(mb,4)===Y?(b=Y,mb+=4):(b=u,0===rb&&e(Z)),b===u&&(a.substr(mb,6)===$?(b=$,mb+=6):(b=u,0===rb&&e(_)),b===u&&(a.substr(mb,4)===aa?(b=aa,mb+=4):(b=u,0===rb&&e(ba)),b===u&&(a.substr(mb,3)===ca?(b=ca,mb+=3):(b=u,0===rb&&e(da)),b===u&&(a.substr(mb,4)===ea?(b=ea,mb+=4):(b=u,0===rb&&e(fa)),b===u&&(a.substr(mb,4)===ga?(b=ga,mb+=4):(b=u,0===rb&&e(ha)),b===u&&(a.substr(mb,4)===ia?(b=ia,mb+=4):(b=u,0===rb&&e(ja)),b===u&&(a.substr(mb,5)===ka?(b=ka,mb+=5):(b=u,0===rb&&e(la)),b===u&&(a.substr(mb,4)===ma?(b=ma,mb+=4):(b=u,0===rb&&e(na)),b===u&&(a.substr(mb,5)===oa?(b=oa,mb+=5):(b=u,0===rb&&e(pa))))))))))),b}function m(){var b;return a.substr(mb,9)===qa?(b=qa,mb+=9):(b=u,0===rb&&e(ra)),b===u&&(a.substr(mb,7)===sa?(b=sa,mb+=7):(b=u,0===rb&&e(ta)),b===u&&(a.substr(mb,5)===ua?(b=ua,mb+=5):(b=u,0===rb&&e(va)),b===u&&(a.substr(mb,8)===wa?(b=wa,mb+=8):(b=u,0===rb&&e(xa)),b===u&&(a.substr(mb,5)===ya?(b=ya,mb+=5):(b=u,0===rb&&e(za)),b===u&&(a.substr(mb,7)===Aa?(b=Aa,mb+=7):(b=u,0===rb&&e(Ba)),b===u&&(a.substr(mb,8)===Ca?(b=Ca,mb+=8):(b=u,0===rb&&e(Da)),b===u&&(a.substr(mb,5)===Ea?(b=Ea,mb+=5):(b=u,0===rb&&e(Fa)),b===u&&(a.substr(mb,10)===Ga?(b=Ga,mb+=10):(b=u,0===rb&&e(Ha)),b===u&&(a.substr(mb,9)===Ia?(b=Ia,mb+=9):(b=u,0===rb&&e(Ja)),b===u&&(a.substr(mb,8)===Ka?(b=Ka,mb+=8):(b=u,0===rb&&e(La)),b===u&&(a.substr(mb,9)===Ma?(b=Ma,mb+=9):(b=u,0===rb&&e(Na)),b===u&&(a.substr(mb,10)===Oa?(b=Oa,mb+=10):(b=u,0===rb&&e(Pa)),b===u&&(a.substr(mb,10)===Qa?(b=Qa,mb+=10):(b=u,0===rb&&e(Ra)),b===u&&(a.substr(mb,9)===Sa?(b=Sa,mb+=9):(b=u,0===rb&&e(Ta)),b===u&&(a.substr(mb,8)===Ua?(b=Ua,mb+=8):(b=u,0===rb&&e(Va)),b===u&&(a.substr(mb,9)===Wa?(b=Wa,mb+=9):(b=u,0===rb&&e(Xa)),b===u&&(a.substr(mb,8)===Ya?(b=Ya,mb+=8):(b=u,0===rb&&e(Za)),b===u&&(a.substr(mb,9)===$a?(b=$a,mb+=9):(b=u,0===rb&&e(_a)))))))))))))))))))),b}function n(){var b,c,d,f;return b=mb,91===a.charCodeAt(mb)?(c=B,mb++):(c=u,0===rb&&e(C)),c!==u?(d=q(),d!==u?(93===a.charCodeAt(mb)?(f=D,mb++):(f=u,0===rb&&e(E)),f!==u?(nb=b,c=ab(d),b=c):(mb=b,b=u)):(mb=b,b=u)):(mb=b,b=u),b}function o(){var b,c,d;if(b=mb,c=[],bb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(cb)),d!==u)for(;d!==u;)c.push(d),bb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(cb));else c=u;return c!==u&&(nb=b,c=db(c)),b=c}function p(){var b,c,d;if(b=mb,c=[],eb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(fb)),d!==u)for(;d!==u;)c.push(d),eb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(fb));else c=u;return c!==u&&(nb=b,c=gb(c)),b=c}function q(){var b,c,d;if(b=mb,c=[],hb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(ib)),d!==u)for(;d!==u;)c.push(d),hb.test(a.charAt(mb))?(d=a.charAt(mb),mb++):(d=u,0===rb&&e(ib));else c=u;return c!==u&&(nb=b,c=jb(c)),b=c}function r(){var b,c;for(b=[],kb.test(a.charAt(mb))?(c=a.charAt(mb),mb++):(c=u,0===rb&&e(lb));c!==u;)b.push(c),kb.test(a.charAt(mb))?(c=a.charAt(mb),mb++):(c=u,0===rb&&e(lb));return b}var s,t=arguments.length>1?arguments[1]:{},u={},v={start:g},w=g,x=",",y={type:"literal",value:",",description:'","'},z=function(a,b){return[a].concat(b)},A=function(a){return[a]},B="[",C={type:"literal",value:"[",description:'"["'},D="]",E={type:"literal",value:"]",description:'"]"'},F=">",G={type:"literal",value:">",description:'">"'},H=function(a,b,c){return{start:a,middle:c,end:b,str:"["+a.str+", "+b.str+"] > "+c.str}},I=function(a,b){return a.filters=b,a.str+=b.map(function(a){return"["+a+"]"}).join(""),a},J=function(a){return a},K="(",L={type:"literal",value:"(",description:'"("'},M=")",N={type:"literal",value:")",description:'")"'},O=function(a){return{stream:a,str:"("+a.map(function(a){return a.str}).join(", ")+")"}},P="@",Q={type:"literal",value:"@",description:'"@"'},R=":",S={type:"literal",value:":",description:'":"'},T=function(a,b){return{event:b,name:a,str:"@"+a+":"+b}},U=function(a,b){return{event:b,mark:a,str:a+":"+b}},V=function(a,b){return{event:b,target:a,str:a+":"+b}},W=function(a){return{event:a,str:a}},X=function(a){return{signal:a,str:a}},Y="rect",Z={type:"literal",value:"rect",description:'"rect"'},$="symbol",_={type:"literal",value:"symbol",description:'"symbol"'},aa="path",ba={type:"literal",value:"path",description:'"path"'},ca="arc",da={type:"literal",value:"arc",description:'"arc"'},ea="area",fa={type:"literal",value:"area",description:'"area"'},ga="line",ha={type:"literal",value:"line",description:'"line"'},ia="rule",ja={type:"literal",value:"rule",description:'"rule"'},ka="image",la={type:"literal",value:"image",description:'"image"'},ma="text",na={type:"literal",value:"text",description:'"text"'},oa="group",pa={type:"literal",value:"group",description:'"group"'},qa="mousedown",ra={type:"literal",value:"mousedown",description:'"mousedown"'},sa="mouseup",ta={type:"literal",value:"mouseup",description:'"mouseup"'},ua="click",va={type:"literal",value:"click",description:'"click"'},wa="dblclick",xa={type:"literal",value:"dblclick",description:'"dblclick"'},ya="wheel",za={type:"literal",value:"wheel",description:'"wheel"'},Aa="keydown",Ba={type:"literal",value:"keydown",description:'"keydown"'},Ca="keypress",Da={type:"literal",value:"keypress",description:'"keypress"'},Ea="keyup",Fa={type:"literal",value:"keyup",description:'"keyup"'},Ga="mousewheel",Ha={type:"literal",value:"mousewheel",description:'"mousewheel"'},Ia="mousemove",Ja={type:"literal",value:"mousemove",description:'"mousemove"'},Ka="mouseout",La={type:"literal",value:"mouseout",description:'"mouseout"'},Ma="mouseover",Na={type:"literal",value:"mouseover",description:'"mouseover"'},Oa="mouseenter",Pa={type:"literal",value:"mouseenter",description:'"mouseenter"'},Qa="touchstart",Ra={type:"literal",value:"touchstart",description:'"touchstart"'},Sa="touchmove",Ta={type:"literal",value:"touchmove",description:'"touchmove"'},Ua="touchend",Va={type:"literal",value:"touchend",description:'"touchend"'},Wa="dragenter",Xa={type:"literal",value:"dragenter",description:'"dragenter"'},Ya="dragover",Za={type:"literal",value:"dragover",description:'"dragover"'},$a="dragleave",_a={type:"literal",value:"dragleave",description:'"dragleave"'},ab=function(a){return a},bb=/^[a-zA-Z0-9_\-]/,cb={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},db=function(a){return a.join("")},eb=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,fb={type:"class",value:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]",description:"[a-zA-Z0-9-_  #\\.\\>\\+~\\[\\]=|\\^\\$\\*]"},gb=function(a){return a.join("")},hb=/^['"a-zA-Z0-9_().><=! \t-&|~]/,ib={type:"class",value:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]",description:"['\"a-zA-Z0-9_\\(\\)\\.\\>\\<\\=\\! \\t-&|~]"},jb=function(a){return a.join("")},kb=/^[ \t\r\n]/,lb={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},mb=0,nb=0,ob=[{line:1,column:1,seenCR:!1}],pb=0,qb=[],rb=0;if("startRule"in t){if(!(t.startRule in v))throw new Error("Can't start parsing from rule \""+t.startRule+'".');w=v[t.startRule]}if(s=w(),s!==u&&mb===a.length)return s;throw s!==u&&mb<a.length&&e({type:"end",description:"end of input"}),f(null,qb,pb<a.length?a.charAt(pb):null,pb<a.length?d(pb,pb+1):d(pb,pb))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],43:[function(a,b,c){function d(a){var b,c,d={};for(b=0,c=a.length;c>b;++b)d[a[b]]=1;return d}function e(a){var b,c=[];for(b in a)c.push(b);return c}b.exports=function(b){function c(a){var b={code:f(a),globals:e(o),fields:e(p),dataSources:e(q),defs:i};return o={},p={},q={},b}function f(a){if("string"==typeof a)return a;var b=s[a.type];if(null==b)throw new Error("Unsupported type: "+a.type);return b(a)}b=b||{};var g=b.constants||a("./constants"),h=(b.functions||a("./functions"))(f),i=b.functionDefs?b.functionDefs(f):{},j=b.idWhiteList?d(b.idWhiteList):null,k=b.idBlackList?d(b.idBlackList):null,l=0,m=b.fieldVar||"datum",n=b.globalVar||"signals",o={},p={},q={},r="function"==typeof n?n:function(a){return n+'["'+a+'"]'},s={Literal:function(a){return a.raw},Identifier:function(a){var b=a.name;if(l>0)return b;if(g.hasOwnProperty(b))return g[b];if(j)return j.hasOwnProperty(b)?b:(o[b]=1,r(b));if(k&&k.hasOwnProperty(b))throw new Error("Illegal identifier: "+b);return b},Program:function(a){return a.body.map(f).join("\n")},MemberExpression:function(a){var b=!a.computed,c=f(a.object);b&&(l+=1);var d=f(a.property);return c===m&&(p[d]=1),b&&(l-=1),c+(b?"."+d:"["+d+"]")},CallExpression:function(a){if("Identifier"!==a.callee.type)throw new Error("Illegal callee type: "+a.callee.type);var b=a.callee.name,c=a.arguments,d=h.hasOwnProperty(b)&&h[b];if(!d)throw new Error("Unrecognized function: "+b);return d instanceof Function?d(c,o,p,q):d+"("+c.map(f).join(",")+")"},ArrayExpression:function(a){return"["+a.elements.map(f).join(",")+"]"},BinaryExpression:function(a){return"("+f(a.left)+a.operator+f(a.right)+")"},UnaryExpression:function(a){return"("+a.operator+f(a.argument)+")"},ConditionalExpression:function(a){return"("+f(a.test)+"?"+f(a.consequent)+":"+f(a.alternate)+")"},LogicalExpression:function(a){return"("+f(a.left)+a.operator+f(a.right)+")"},ObjectExpression:function(a){return"{"+a.properties.map(f).join(",")+"}"},Property:function(a){l+=1;var b=f(a.key);return l-=1,b+":"+f(a.value)},ExpressionStatement:function(a){return f(a.expression)}};return c.functions=h,c.functionDefs=i,c.constants=g,c}},{"./constants":44,"./functions":45}],44:[function(a,b,c){b.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],45:[function(a,b,c){b.exports=function(a){function b(b,c,d,e){var f=a(c[0]);return d&&(f=d+"("+f+")",0===d.lastIndexOf("new ",0)&&(f="("+f+")")),f+"."+b+(0>e?"":0===e?"()":"("+c.slice(1).map(a).join(",")+")")}function c(a,c,d){return function(e){return b(a,e,c,d)}}var d="new Date",e="String",f="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(b){if(b.length<3)throw new Error("Missing arguments to clamp function.");if(b.length>3)throw new Error("Too many arguments to clamp function.");var c=b.map(a);return"Math.max("+c[1]+", Math.min("+c[2]+","+c[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:d,date:c("getDate",d,0),day:c("getDay",d,0),year:c("getFullYear",d,0),month:c("getMonth",d,0),hours:c("getHours",d,0),minutes:c("getMinutes",d,0),seconds:c("getSeconds",d,0),milliseconds:c("getMilliseconds",d,0),time:c("getTime",d,0),timezoneoffset:c("getTimezoneOffset",d,0),utcdate:c("getUTCDate",d,0),utcday:c("getUTCDay",d,0),utcyear:c("getUTCFullYear",d,0),utcmonth:c("getUTCMonth",d,0),utchours:c("getUTCHours",d,0),utcminutes:c("getUTCMinutes",d,0),utcseconds:c("getUTCSeconds",d,0),utcmilliseconds:c("getUTCMilliseconds",d,0),length:c("length",null,-1),indexof:c("indexOf",null),lastindexof:c("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:c("toUpperCase",e,0),lower:c("toLowerCase",e,0),slice:c("slice",e),substring:c("substring",e),replace:c("replace",e),regexp:f,test:c("test",f),"if":function(b){if(b.length<3)throw new Error("Missing arguments to if function.");if(b.length>3)throw new Error("Too many arguments to if function.");var c=b.map(a);return c[0]+"?"+c[1]+":"+c[2]}}}},{}],46:[function(a,b,c){var d=a("./parser"),e=a("./codegen"),f=b.exports={parse:function(a,b){return d.parse("("+a+")",b)},code:function(a){return e(a)},compiler:function(a,b){a=a.slice();var c=e(b),d=a.length,g=function(b){var e=c(f.parse(b));a[d]='"use strict"; return ('+e.code+");";var g=Function.apply(null,a);return e.fn=a.length>8?function(){return g.apply(e,arguments)}:function(a,b,c,d,f,h,i){return g.call(e,a,b,c,d,f,h,i)},e};return g.codegen=c,g},functions:a("./functions"),constants:a("./constants")}},{"./codegen":43,"./constants":44,"./functions":45,"./parser":47}],47:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){if(!a)throw new Error("ASSERT: "+b)}function b(a){return a>=48&&57>=a}function c(a){return"0123456789abcdefABCDEF".indexOf(a)>=0}function d(a){return"01234567".indexOf(a)>=0}function e(a){return 32===a||9===a||11===a||12===a||160===a||a>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a)>=0}function f(a){return 10===a||13===a||8232===a||8233===a}function g(a){return 36===a||95===a||a>=65&&90>=a||a>=97&&122>=a||92===a||a>=128&&ya.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function h(a){return 36===a||95===a||a>=65&&90>=a||a>=97&&122>=a||a>=48&&57>=a||92===a||a>=128&&ya.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function i(a){switch(a){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function j(a){switch(a){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function k(a){if(Aa&&j(a))return!0;switch(a.length){case 2:return"if"===a||"in"===a||"do"===a;case 3:return"var"===a||"for"===a||"new"===a||"try"===a||"let"===a;case 4:return"this"===a||"else"===a||"case"===a||"void"===a||"with"===a||"enum"===a;case 5:return"while"===a||"break"===a||"catch"===a||"throw"===a||"const"===a||"yield"===a||"class"===a||"super"===a;case 6:return"return"===a||"typeof"===a||"delete"===a||"switch"===a||"export"===a||"import"===a;case 7:return"default"===a||"finally"===a||"extends"===a;case 8:return"function"===a||"continue"===a||"debugger"===a;case 10:return"instanceof"===a;default:return!1}}function l(){var a,b;for(b=0===Ba;Ea>Ba;)if(a=za.charCodeAt(Ba),e(a))++Ba;else{if(!f(a))break;++Ba,13===a&&10===za.charCodeAt(Ba)&&++Ba,++Ca,Da=Ba,b=!0}}function m(a){var b,d,e,f=0;for(d="u"===a?4:2,b=0;d>b;++b){if(!(Ea>Ba&&c(za[Ba])))return"";e=za[Ba++],f=16*f+"0123456789abcdef".indexOf(e.toLowerCase())}return String.fromCharCode(f)}function n(){var a,b,d,e;for(a=za[Ba],b=0,"}"===a&&N({},xa.UnexpectedToken,"ILLEGAL");Ea>Ba&&(a=za[Ba++],c(a));)b=16*b+"0123456789abcdef".indexOf(a.toLowerCase());return(b>1114111||"}"!==a)&&N({},xa.UnexpectedToken,"ILLEGAL"),65535>=b?String.fromCharCode(b):(d=(b-65536>>10)+55296,e=(b-65536&1023)+56320,String.fromCharCode(d,e))}function o(){var a,b;for(a=za.charCodeAt(Ba++),b=String.fromCharCode(a),92===a&&(117!==za.charCodeAt(Ba)&&N({},xa.UnexpectedToken,"ILLEGAL"),++Ba,a=m("u"),a&&"\\"!==a&&g(a.charCodeAt(0))||N({},xa.UnexpectedToken,"ILLEGAL"),b=a);Ea>Ba&&(a=za.charCodeAt(Ba),h(a));)++Ba,b+=String.fromCharCode(a),92===a&&(b=b.substr(0,b.length-1),117!==za.charCodeAt(Ba)&&N({},xa.UnexpectedToken,"ILLEGAL"),++Ba,a=m("u"),a&&"\\"!==a&&h(a.charCodeAt(0))||N({},xa.UnexpectedToken,"ILLEGAL"),b+=a);return b}function p(){var a,b;for(a=Ba++;Ea>Ba;){if(b=za.charCodeAt(Ba),92===b)return Ba=a,o();if(!h(b))break;++Ba}return za.slice(a,Ba)}function q(){var a,b,c;return a=Ba,b=92===za.charCodeAt(Ba)?o():p(),c=1===b.length?ta.Identifier:k(b)?ta.Keyword:"null"===b?ta.NullLiteral:"true"===b||"false"===b?ta.BooleanLiteral:ta.Identifier,{type:c,value:b,lineNumber:Ca,lineStart:Da,start:a,end:Ba}}function r(){var a,b,c,d,e=Ba,f=za.charCodeAt(Ba),g=za[Ba];switch(f){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ba,Ha.tokenize&&(40===f?Ha.openParenToken=Ha.tokens.length:123===f&&(Ha.openCurlyToken=Ha.tokens.length)),{type:ta.Punctuator,value:String.fromCharCode(f),lineNumber:Ca,lineStart:Da,start:e,end:Ba};default:if(a=za.charCodeAt(Ba+1),61===a)switch(f){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ba+=2,{type:ta.Punctuator,value:String.fromCharCode(f)+String.fromCharCode(a),lineNumber:Ca,lineStart:Da,start:e,end:Ba};case 33:case 61:return Ba+=2,61===za.charCodeAt(Ba)&&++Ba,{type:ta.Punctuator,value:za.slice(e,Ba),lineNumber:Ca,lineStart:Da,start:e,end:Ba}}}return d=za.substr(Ba,4),">>>="===d?(Ba+=4,{type:ta.Punctuator,value:d,lineNumber:Ca,lineStart:Da,start:e,end:Ba}):(c=d.substr(0,3),">>>"===c||"<<="===c||">>="===c?(Ba+=3,{type:ta.Punctuator,value:c,lineNumber:Ca,lineStart:Da,start:e,end:Ba}):(b=c.substr(0,2),g===b[1]&&"+-<>&|".indexOf(g)>=0||"=>"===b?(Ba+=2,{type:ta.Punctuator,value:b,lineNumber:Ca,lineStart:Da,start:e,end:Ba}):"<>=!+-*%&|^/".indexOf(g)>=0?(++Ba,{type:ta.Punctuator,value:g,lineNumber:Ca,lineStart:Da,start:e,end:Ba}):void N({},xa.UnexpectedToken,"ILLEGAL")))}function s(a){for(var b="";Ea>Ba&&c(za[Ba]);)b+=za[Ba++];return 0===b.length&&N({},xa.UnexpectedToken,"ILLEGAL"),g(za.charCodeAt(Ba))&&N({},xa.UnexpectedToken,"ILLEGAL"),{type:ta.NumericLiteral,value:parseInt("0x"+b,16),lineNumber:Ca,lineStart:Da,start:a,end:Ba}}function t(a){for(var c="0"+za[Ba++];Ea>Ba&&d(za[Ba]);)c+=za[Ba++];return(g(za.charCodeAt(Ba))||b(za.charCodeAt(Ba)))&&N({},xa.UnexpectedToken,"ILLEGAL"),{type:ta.NumericLiteral,value:parseInt(c,8),octal:!0,lineNumber:Ca,lineStart:Da,start:a,end:Ba}}function u(){var c,e,f;if(f=za[Ba],a(b(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point"),e=Ba,c="","."!==f){if(c=za[Ba++],f=za[Ba],"0"===c){if("x"===f||"X"===f)return++Ba,s(e);if(d(f))return t(e);f&&b(f.charCodeAt(0))&&N({},xa.UnexpectedToken,"ILLEGAL")}for(;b(za.charCodeAt(Ba));)c+=za[Ba++];f=za[Ba]}if("."===f){for(c+=za[Ba++];b(za.charCodeAt(Ba));)c+=za[Ba++];f=za[Ba]}if("e"===f||"E"===f)if(c+=za[Ba++],f=za[Ba],("+"===f||"-"===f)&&(c+=za[Ba++]),b(za.charCodeAt(Ba)))for(;b(za.charCodeAt(Ba));)c+=za[Ba++];else N({},xa.UnexpectedToken,"ILLEGAL");return g(za.charCodeAt(Ba))&&N({},xa.UnexpectedToken,"ILLEGAL"),{type:ta.NumericLiteral,value:parseFloat(c),lineNumber:Ca,lineStart:Da,start:e,end:Ba}}function v(){var b,c,e,g,h,i,j,k,l="",o=!1;for(j=Ca,k=Da,b=za[Ba],a("'"===b||'"'===b,"String literal must starts with a quote"),c=Ba,++Ba;Ea>Ba;){if(e=za[Ba++],e===b){b="";break}if("\\"===e)if(e=za[Ba++],e&&f(e.charCodeAt(0)))++Ca,"\r"===e&&"\n"===za[Ba]&&++Ba,Da=Ba;else switch(e){case"u":case"x":"{"===za[Ba]?(++Ba,l+=n()):(i=Ba,h=m(e),h?l+=h:(Ba=i,l+=e));break;case"n":l+="\n";break;case"r":l+="\r";break;case"t":l+="	";break;case"b":l+="\b";break;case"f":l+="\f";break;case"v":l+="";break;default:d(e)?(g="01234567".indexOf(e),0!==g&&(o=!0),Ea>Ba&&d(za[Ba])&&(o=!0,g=8*g+"01234567".indexOf(za[Ba++]),"0123".indexOf(e)>=0&&Ea>Ba&&d(za[Ba])&&(g=8*g+"01234567".indexOf(za[Ba++]))),l+=String.fromCharCode(g)):l+=e}else{if(f(e.charCodeAt(0)))break;l+=e}}return""!==b&&N({},xa.UnexpectedToken,"ILLEGAL"),{type:ta.StringLiteral,value:l,octal:o,startLineNumber:j,startLineStart:k,lineNumber:Ca,lineStart:Da,start:c,end:Ba}}function w(a,b){var c,d=a;b.indexOf("u")>=0&&(d=d.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(a,b){return parseInt(b,16)<=1114111?"x":void N({},xa.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{c=new RegExp(d)}catch(e){N({},xa.InvalidRegExp)}try{return new RegExp(a,b)}catch(f){return null}}function x(){var b,c,d,e,g;for(b=za[Ba],a("/"===b,"Regular expression literal must start with a slash"),c=za[Ba++],d=!1,e=!1;Ea>Ba;)if(b=za[Ba++],c+=b,"\\"===b)b=za[Ba++],f(b.charCodeAt(0))&&N({},xa.UnterminatedRegExp),c+=b;else if(f(b.charCodeAt(0)))N({},xa.UnterminatedRegExp);else if(d)"]"===b&&(d=!1);else{if("/"===b){e=!0;break}"["===b&&(d=!0)}return e||N({},xa.UnterminatedRegExp),g=c.substr(1,c.length-2),{value:g,literal:c}}function y(){var a,b,c,d;for(b="",c="";Ea>Ba&&(a=za[Ba],h(a.charCodeAt(0)));)if(++Ba,"\\"===a&&Ea>Ba)if(a=za[Ba],"u"===a){if(++Ba,d=Ba,a=m("u"))for(c+=a,b+="\\u";Ba>d;++d)b+=za[d];else Ba=d,c+="u",b+="\\u";O({},xa.UnexpectedToken,"ILLEGAL")}else b+="\\",O({},xa.UnexpectedToken,"ILLEGAL");else c+=a,b+=a;return{value:c,literal:b}}function z(){var a,b,c,d;return Fa=null,l(),a=Ba,b=x(),c=y(),d=w(b.value,c.value),Ha.tokenize?{type:ta.RegularExpression,value:d,regex:{pattern:b.value,flags:c.value},lineNumber:Ca,lineStart:Da,start:a,end:Ba}:{literal:b.literal+c.literal,value:d,regex:{pattern:b.value,flags:c.value},start:a,end:Ba}}function A(){var a,b,c,d;return l(),a=Ba,b={start:{line:Ca,column:Ba-Da}},c=z(),b.end={line:Ca,column:Ba-Da},Ha.tokenize||(Ha.tokens.length>0&&(d=Ha.tokens[Ha.tokens.length-1],d.range[0]===a&&"Punctuator"===d.type&&("/"===d.value||"/="===d.value)&&Ha.tokens.pop()),Ha.tokens.push({type:"RegularExpression",value:c.literal,regex:c.regex,range:[a,Ba],loc:b})),c}function B(a){return a.type===ta.Identifier||a.type===ta.Keyword||a.type===ta.BooleanLiteral||a.type===ta.NullLiteral}function C(){var a,b;if(a=Ha.tokens[Ha.tokens.length-1],!a)return A();if("Punctuator"===a.type){if("]"===a.value)return r();if(")"===a.value)return b=Ha.tokens[Ha.openParenToken-1],!b||"Keyword"!==b.type||"if"!==b.value&&"while"!==b.value&&"for"!==b.value&&"with"!==b.value?r():A();if("}"===a.value){if(Ha.tokens[Ha.openCurlyToken-3]&&"Keyword"===Ha.tokens[Ha.openCurlyToken-3].type){if(b=Ha.tokens[Ha.openCurlyToken-4],!b)return r()}else{if(!Ha.tokens[Ha.openCurlyToken-4]||"Keyword"!==Ha.tokens[Ha.openCurlyToken-4].type)return r();if(b=Ha.tokens[Ha.openCurlyToken-5],!b)return A()}return r()}return A()}return"Keyword"===a.type&&"this"!==a.value?A():r()}function D(){var a;return l(),Ba>=Ea?{type:ta.EOF,lineNumber:Ca,lineStart:Da,start:Ba,end:Ba}:(a=za.charCodeAt(Ba),g(a)?q():40===a||41===a||59===a?r():39===a||34===a?v():46===a?b(za.charCodeAt(Ba+1))?u():r():b(a)?u():Ha.tokenize&&47===a?C():r())}function E(){var a,b,c,d;return l(),a={start:{line:Ca,column:Ba-Da}},b=D(),a.end={line:Ca,column:Ba-Da},b.type!==ta.EOF&&(c=za.slice(b.start,b.end),d={type:ua[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(d.regex={pattern:b.regex.pattern,flags:b.regex.flags}),Ha.tokens.push(d)),b}function F(){var a;return a=Fa,Ba=a.end,Ca=a.lineNumber,Da=a.lineStart,Fa="undefined"!=typeof Ha.tokens?E():D(),Ba=a.end,Ca=a.lineNumber,Da=a.lineStart,a}function G(){var a,b,c;a=Ba,b=Ca,c=Da,Fa="undefined"!=typeof Ha.tokens?E():D(),Ba=a,Ca=b,Da=c}function H(){this.line=Ca,this.column=Ba-Da}function I(){this.start=new H,this.end=null}function J(a){a.type===ta.StringLiteral?this.start={line:a.startLineNumber,column:a.start-a.startLineStart}:this.start={line:a.lineNumber,column:a.start-a.lineStart},this.end=null}function K(){Ba=Fa.start,Fa.type===ta.StringLiteral?(Ca=Fa.startLineNumber,Da=Fa.startLineStart):(Ca=Fa.lineNumber,Da=Fa.lineStart),Ha.range&&(this.range=[Ba,0]),Ha.loc&&(this.loc=new I)}function L(a){Ha.range&&(this.range=[a.start,0]),Ha.loc&&(this.loc=new J(a))}function M(){var a,b,c,d;return a=Ba,b=Ca,c=Da,l(),d=Ca!==b,Ba=a,Ca=b,Da=c,d}function N(b,c){var d,e=Array.prototype.slice.call(arguments,2),f=c.replace(/%(\d)/g,function(b,c){return a(c<e.length,"Message reference must be in range"),e[c]});throw"number"==typeof b.lineNumber?(d=new Error("Line "+b.lineNumber+": "+f),d.index=b.start,d.lineNumber=b.lineNumber,d.column=b.start-Da+1):(d=new Error("Line "+Ca+": "+f),d.index=Ba,d.lineNumber=Ca,d.column=Ba-Da+1),d.description=f,d}function O(){try{N.apply(null,arguments)}catch(a){if(!Ha.errors)throw a;Ha.errors.push(a)}}function P(a){if(a.type===ta.EOF&&N(a,xa.UnexpectedEOS),a.type===ta.NumericLiteral&&N(a,xa.UnexpectedNumber),a.type===ta.StringLiteral&&N(a,xa.UnexpectedString),a.type===ta.Identifier&&N(a,xa.UnexpectedIdentifier),a.type===ta.Keyword){if(i(a.value))N(a,xa.UnexpectedReserved);else if(Aa&&j(a.value))return void O(a,xa.StrictReservedWord);N(a,xa.UnexpectedToken,a.value);
}N(a,xa.UnexpectedToken,a.value)}function Q(a){var b=F();(b.type!==ta.Punctuator||b.value!==a)&&P(b)}function R(a){if(Ha.errors){var b=Fa;b.type!==ta.Punctuator&&b.value!==a?O(b,xa.UnexpectedToken,b.value):F()}else Q(a)}function S(a){return Fa.type===ta.Punctuator&&Fa.value===a}function T(a){return Fa.type===ta.Keyword&&Fa.value===a}function U(){var a;return 59===za.charCodeAt(Ba)||S(";")?void F():(a=Ca,l(),void(Ca===a&&(Fa.type===ta.EOF||S("}")||P(Fa))))}function V(){var a=[],b=new K;for(Q("[");!S("]");)S(",")?(F(),a.push(null)):(a.push(ja()),S("]")||Q(","));return F(),b.finishArrayExpression(a)}function W(){var a,b=new K;return a=F(),a.type===ta.StringLiteral||a.type===ta.NumericLiteral?(Aa&&a.octal&&O(a,xa.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function X(){var a,b,c,d,e=new K;return a=Fa,a.type===ta.Identifier?(c=W(),Q(":"),d=ja(),e.finishProperty("init",c,d)):a.type!==ta.EOF&&a.type!==ta.Punctuator?(b=W(),Q(":"),d=ja(),e.finishProperty("init",b,d)):void P(a)}function Y(){var a,b,c,d,e=[],f={},g=String,h=new K;for(Q("{");!S("}");)a=X(),b=a.key.type===va.Identifier?a.key.name:g(a.key.value),d="init"===a.kind?wa.Data:"get"===a.kind?wa.Get:wa.Set,c="$"+b,Object.prototype.hasOwnProperty.call(f,c)?(f[c]===wa.Data?Aa&&d===wa.Data?O({},xa.StrictDuplicateProperty):d!==wa.Data&&O({},xa.AccessorDataProperty):d===wa.Data?O({},xa.AccessorDataProperty):f[c]&d&&O({},xa.AccessorGetSet),f[c]|=d):f[c]=d,e.push(a),S("}")||R(",");return Q("}"),h.finishObjectExpression(e)}function Z(){var a;return Q("("),++Ga.parenthesisCount,a=ka(),Q(")"),a}function $(){var a,b,c,d;if(S("("))return Z();if(S("["))return V();if(S("{"))return Y();if(a=Fa.type,d=new K,a===ta.Identifier||Ia[Fa.value])c=d.finishIdentifier(F().value);else if(a===ta.StringLiteral||a===ta.NumericLiteral)Aa&&Fa.octal&&O(Fa,xa.StrictOctalLiteral),c=d.finishLiteral(F());else{if(a===ta.Keyword)throw new Error("Disabled.");a===ta.BooleanLiteral?(b=F(),b.value="true"===b.value,c=d.finishLiteral(b)):a===ta.NullLiteral?(b=F(),b.value=null,c=d.finishLiteral(b)):S("/")||S("/=")?(c="undefined"!=typeof Ha.tokens?d.finishLiteral(A()):d.finishLiteral(z()),G()):P(F())}return c}function _(){var a=[];if(Q("("),!S(")"))for(;Ea>Ba&&(a.push(ja()),!S(")"));)R(",");return Q(")"),a}function aa(){var a,b=new K;return a=F(),B(a)||P(a),b.finishIdentifier(a.value)}function ba(){return Q("."),aa()}function ca(){var a;return Q("["),a=ka(),Q("]"),a}function da(){var a,b,c,d,e=Ga.allowIn;for(d=Fa,Ga.allowIn=!0,a=$();;)if(S("."))c=ba(),a=new L(d).finishMemberExpression(".",a,c);else if(S("("))b=_(),a=new L(d).finishCallExpression(a,b);else{if(!S("["))break;c=ca(),a=new L(d).finishMemberExpression("[",a,c)}return Ga.allowIn=e,a}function ea(){var a=da();if(Fa.type===ta.Punctuator&&(S("++")||S("--"))&&!M())throw new Error("Disabled.");return a}function fa(){var a,b,c;if(Fa.type!==ta.Punctuator&&Fa.type!==ta.Keyword)b=ea();else{if(S("++")||S("--"))throw new Error("Disabled.");if(S("+")||S("-")||S("~")||S("!"))c=Fa,a=F(),b=fa(),b=new L(c).finishUnaryExpression(a.value,b);else{if(T("delete")||T("void")||T("typeof"))throw new Error("Disabled.");b=ea()}}return b}function ga(a,b){var c=0;if(a.type!==ta.Punctuator&&a.type!==ta.Keyword)return 0;switch(a.value){case"||":c=1;break;case"&&":c=2;break;case"|":c=3;break;case"^":c=4;break;case"&":c=5;break;case"==":case"!=":case"===":case"!==":c=6;break;case"<":case">":case"<=":case">=":case"instanceof":c=7;break;case"in":c=b?7:0;break;case"<<":case">>":case">>>":c=8;break;case"+":case"-":c=9;break;case"*":case"/":case"%":c=11}return c}function ha(){var a,b,c,d,e,f,g,h,i,j;if(a=Fa,i=fa(),d=Fa,e=ga(d,Ga.allowIn),0===e)return i;for(d.prec=e,F(),b=[a,Fa],g=fa(),f=[i,d,g];(e=ga(Fa,Ga.allowIn))>0;){for(;f.length>2&&e<=f[f.length-2].prec;)g=f.pop(),h=f.pop().value,i=f.pop(),b.pop(),c=new L(b[b.length-1]).finishBinaryExpression(h,i,g),f.push(c);d=F(),d.prec=e,f.push(d),b.push(Fa),c=fa(),f.push(c)}for(j=f.length-1,c=f[j],b.pop();j>1;)c=new L(b.pop()).finishBinaryExpression(f[j-1].value,f[j-2],c),j-=2;return c}function ia(){var a,b,c,d,e;return e=Fa,a=ha(),S("?")&&(F(),b=Ga.allowIn,Ga.allowIn=!0,c=ja(),Ga.allowIn=b,Q(":"),d=ja(),a=new L(e).finishConditionalExpression(a,c,d)),a}function ja(){var a,b,c,d;return a=Ga.parenthesisCount,d=Fa,b=Fa,c=ia()}function ka(){var a=ja();if(S(","))throw new Error("Disabled.");return a}function la(a){var b=ka();return U(),a.finishExpressionStatement(b)}function ma(){var a,b,c=Fa.type;if(c===ta.EOF&&P(Fa),c===ta.Punctuator&&"{"===Fa.value)throw new Error("Disabled.");if(b=new K,c===ta.Punctuator)switch(Fa.value){case";":throw new Error("Disabled.");case"(":return la(b)}else if(c===ta.Keyword)throw new Error("Disabled.");return a=ka(),U(),b.finishExpressionStatement(a)}function na(){if(Fa.type===ta.Keyword)switch(Fa.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return ma()}return Fa.type!==ta.EOF?ma():void 0}function oa(){for(var a,b,c,d,e=[];Ea>Ba&&(b=Fa,b.type===ta.StringLiteral)&&(a=na(),e.push(a),a.expression.type===va.Literal);)c=za.slice(b.start+1,b.end-1),"use strict"===c?(Aa=!0,d&&O(d,xa.StrictOctalLiteral)):!d&&b.octal&&(d=b);for(;Ea>Ba&&(a=na(),"undefined"!=typeof a);)e.push(a);return e}function pa(){var a,b;return l(),G(),b=new K,Aa=!0,a=oa(),b.finishProgram(a)}function qa(){var a,b,c,d=[];for(a=0;a<Ha.tokens.length;++a)b=Ha.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),Ha.range&&(c.range=b.range),Ha.loc&&(c.loc=b.loc),d.push(c);Ha.tokens=d}function ra(a,b){var c,d;c=String,"string"==typeof a||a instanceof String||(a=c(a)),za=a,Ba=0,Ca=za.length>0?1:0,Da=0,Ea=za.length,Fa=null,Ga={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ha={},b=b||{},b.tokens=!0,Ha.tokens=[],Ha.tokenize=!0,Ha.openParenToken=-1,Ha.openCurlyToken=-1,Ha.range="boolean"==typeof b.range&&b.range,Ha.loc="boolean"==typeof b.loc&&b.loc,"boolean"==typeof b.tolerant&&b.tolerant&&(Ha.errors=[]);try{if(G(),Fa.type===ta.EOF)return Ha.tokens;for(F();Fa.type!==ta.EOF;)try{F()}catch(e){if(Ha.errors){Ha.errors.push(e);break}throw e}qa(),d=Ha.tokens,"undefined"!=typeof Ha.errors&&(d.errors=Ha.errors)}catch(f){throw f}finally{Ha={}}return d}function sa(a,b){var c,d;d=String,"string"==typeof a||a instanceof String||(a=d(a)),za=a,Ba=0,Ca=za.length>0?1:0,Da=0,Ea=za.length,Fa=null,Ga={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ha={},"undefined"!=typeof b&&(Ha.range="boolean"==typeof b.range&&b.range,Ha.loc="boolean"==typeof b.loc&&b.loc,Ha.loc&&null!==b.source&&void 0!==b.source&&(Ha.source=d(b.source)),"boolean"==typeof b.tokens&&b.tokens&&(Ha.tokens=[]),"boolean"==typeof b.tolerant&&b.tolerant&&(Ha.errors=[]));try{c=pa(),"undefined"!=typeof Ha.tokens&&(qa(),c.tokens=Ha.tokens),"undefined"!=typeof Ha.errors&&(c.errors=Ha.errors)}catch(e){throw e}finally{Ha={}}return c}var ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha;ta={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},ua={},ua[ta.BooleanLiteral]="Boolean",ua[ta.EOF]="<end>",ua[ta.Identifier]="Identifier",ua[ta.Keyword]="Keyword",ua[ta.NullLiteral]="Null",ua[ta.NumericLiteral]="Numeric",ua[ta.Punctuator]="Punctuator",ua[ta.StringLiteral]="String",ua[ta.RegularExpression]="RegularExpression",va={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},wa={Data:1,Get:2,Set:4},xa={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ya={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},L.prototype=K.prototype={finish:function(){Ha.range&&(this.range[1]=Ba),Ha.loc&&(this.loc.end=new H,Ha.source&&(this.loc.source=Ha.source))},finishArrayExpression:function(a){return this.type=va.ArrayExpression,this.elements=a,this.finish(),this},finishAssignmentExpression:function(a,b,c){return this.type=va.AssignmentExpression,this.operator=a,this.left=b,this.right=c,this.finish(),this},finishBinaryExpression:function(a,b,c){return this.type="||"===a||"&&"===a?va.LogicalExpression:va.BinaryExpression,this.operator=a,this.left=b,this.right=c,this.finish(),this},finishCallExpression:function(a,b){return this.type=va.CallExpression,this.callee=a,this.arguments=b,this.finish(),this},finishConditionalExpression:function(a,b,c){return this.type=va.ConditionalExpression,this.test=a,this.consequent=b,this.alternate=c,this.finish(),this},finishExpressionStatement:function(a){return this.type=va.ExpressionStatement,this.expression=a,this.finish(),this},finishIdentifier:function(a){return this.type=va.Identifier,this.name=a,this.finish(),this},finishLiteral:function(a){return this.type=va.Literal,this.value=a.value,this.raw=za.slice(a.start,a.end),a.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=a.regex),this.finish(),this},finishMemberExpression:function(a,b,c){return this.type=va.MemberExpression,this.computed="["===a,this.object=b,this.property=c,this.finish(),this},finishObjectExpression:function(a){return this.type=va.ObjectExpression,this.properties=a,this.finish(),this},finishProgram:function(a){return this.type=va.Program,this.body=a,this.finish(),this},finishProperty:function(a,b,c){return this.type=va.Property,this.key=b,this.value=c,this.kind=a,this.finish(),this},finishUnaryExpression:function(a,b){return this.type=va.UnaryExpression,this.operator=a,this.argument=b,this.prefix=!0,this.finish(),this}};var Ia={"if":1,"this":1};return{tokenize:ra,parse:sa}}()},{}],48:[function(a,b,c){function d(a){console.log("[Vega Log]",a)}function e(a){console.error("[Vega Err]",a)}function f(a,b){if(f.enable){var c=Function.prototype.bind.call(console.log,console),d={prevTime:Date.now()-g,stamp:a.stamp};a.add&&(d.add=a.add.length,d.mod=a.mod.length,d.rem=a.rem.length,d.reflow=!!a.reflow),c.apply(console,(b.push(JSON.stringify(d)),b)),g=Date.now()}}var g=Date.now();b.exports={log:d,error:e,debug:(f.enable=!1,f)}},{}],49:[function(a,b,c){b.exports={path:a("./path"),render:a("./render"),Item:a("./util/Item"),bound:a("./util/bound"),Bounds:a("./util/Bounds"),canvas:a("./util/canvas"),Gradient:a("./util/Gradient"),toJSON:a("./util/scene").toJSON,fromJSON:a("./util/scene").fromJSON}},{"./path":51,"./render":71,"./util/Bounds":77,"./util/Gradient":79,"./util/Item":81,"./util/bound":82,"./util/canvas":83,"./util/scene":85}],50:[function(a,b,c){function d(a,b,c,d,e,g,i,j,k){var l=h.call(arguments);if(f[l])return f[l];var m=i*(Math.PI/180),n=Math.sin(m),o=Math.cos(m);c=Math.abs(c),d=Math.abs(d);var p=o*(j-a)*.5+n*(k-b)*.5,q=o*(k-b)*.5-n*(j-a)*.5,r=p*p/(c*c)+q*q/(d*d);r>1&&(r=Math.sqrt(r),c*=r,d*=r);var s=o/c,t=n/c,u=-n/d,v=o/d,w=s*j+t*k,x=u*j+v*k,y=s*a+t*b,z=u*a+v*b,A=(y-w)*(y-w)+(z-x)*(z-x),B=1/A-.25;0>B&&(B=0);var C=Math.sqrt(B);g==e&&(C=-C);var D=.5*(w+y)-C*(z-x),E=.5*(x+z)+C*(y-w),F=Math.atan2(x-E,w-D),G=Math.atan2(z-E,y-D),H=G-F;0>H&&1===g?H+=2*Math.PI:H>0&&0===g&&(H-=2*Math.PI);for(var I=Math.ceil(Math.abs(H/(.5*Math.PI+.001))),J=[],K=0;I>K;++K){var L=F+K*H/I,M=F+(K+1)*H/I;J[K]=[D,E,L,M,c,d,n,o]}return f[l]=J}function e(a){var b=h.call(a);if(g[b])return g[b];var c=a[0],d=a[1],e=a[2],f=a[3],i=a[4],j=a[5],k=a[6],l=a[7],m=l*i,n=-k*j,o=k*i,p=l*j,q=Math.cos(e),r=Math.sin(e),s=Math.cos(f),t=Math.sin(f),u=.5*(f-e),v=Math.sin(.5*u),w=8/3*v*v/Math.sin(u),x=c+q-w*r,y=d+r+w*q,z=c+s,A=d+t,B=z+w*t,C=A-w*s;return g[b]=[m*x+n*y,o*x+p*y,m*B+n*C,o*B+p*C,m*z+n*A,o*z+p*A]}var f={},g={},h=[].join;b.exports={segments:d,bezier:e,cache:{segments:f,bezier:g}}},{}],51:[function(a,b,c){b.exports={parse:a("./parse"),render:a("./render")}},{"./parse":52,"./render":53}],52:[function(a,b,c){var d={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},e=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];b.exports=function(a){var b,c,f,g,h,i,j,k,l,m,n,o=[];for(b=a.slice().replace(e[0],"###$1").split(e[1]).slice(1),k=0,m=b.length;m>k;++k){for(c=b[k],f=c.slice(1).trim().replace(e[2],"$1###$2").split(e[3]),i=c.charAt(0),g=[i],l=0,n=f.length;n>l;++l)(h=+f[l])===h&&g.push(h);if(j=d[i.toLowerCase()],g.length-1>j)for(l=1,n=g.length;n>l;l+=j)o.push([i].concat(g.slice(l,l+j)));else o.push(g)}return o}},{}],53:[function(a,b,c){function d(a,b,c,d){for(var f=e.segments(d[5],d[6],d[0],d[1],d[3],d[4],d[2],b,c),g=0;g<f.length;++g){var h=e.bezier(f[g]);a.bezierCurveTo.apply(a,h)}}var e=a("./arc");b.exports=function(a,b,c,e){var f,g,h,i,j,k=null,l=0,m=0,n=0,o=0;null==c&&(c=0),null==e&&(e=0),a.beginPath();for(var p=0,q=b.length;q>p;++p){switch(f=b[p],f[0]){case"l":l+=f[1],m+=f[2],a.lineTo(l+c,m+e);break;case"L":l=f[1],m=f[2],a.lineTo(l+c,m+e);break;case"h":l+=f[1],a.lineTo(l+c,m+e);break;case"H":l=f[1],a.lineTo(l+c,m+e);break;case"v":m+=f[1],a.lineTo(l+c,m+e);break;case"V":m=f[1],a.lineTo(l+c,m+e);break;case"m":l+=f[1],m+=f[2],a.moveTo(l+c,m+e);break;case"M":l=f[1],m=f[2],a.moveTo(l+c,m+e);break;case"c":g=l+f[5],h=m+f[6],n=l+f[3],o=m+f[4],a.bezierCurveTo(l+f[1]+c,m+f[2]+e,n+c,o+e,g+c,h+e),l=g,m=h;break;case"C":l=f[5],m=f[6],n=f[3],o=f[4],a.bezierCurveTo(f[1]+c,f[2]+e,n+c,o+e,l+c,m+e);break;case"s":g=l+f[3],h=m+f[4],n=2*l-n,o=2*m-o,a.bezierCurveTo(n+c,o+e,l+f[1]+c,m+f[2]+e,g+c,h+e),n=l+f[1],o=m+f[2],l=g,m=h;break;case"S":g=f[3],h=f[4],n=2*l-n,o=2*m-o,a.bezierCurveTo(n+c,o+e,f[1]+c,f[2]+e,g+c,h+e),l=g,m=h,n=f[1],o=f[2];break;case"q":g=l+f[3],h=m+f[4],n=l+f[1],o=m+f[2],a.quadraticCurveTo(n+c,o+e,g+c,h+e),l=g,m=h;break;case"Q":g=f[3],h=f[4],a.quadraticCurveTo(f[1]+c,f[2]+e,g+c,h+e),l=g,m=h,n=f[1],o=f[2];break;case"t":g=l+f[1],h=m+f[2],null===k[0].match(/[QqTt]/)?(n=l,o=m):"t"===k[0]?(n=2*l-i,o=2*m-j):"q"===k[0]&&(n=2*l-n,o=2*m-o),i=n,j=o,a.quadraticCurveTo(n+c,o+e,g+c,h+e),l=g,m=h,n=l+f[1],o=m+f[2];break;case"T":g=f[1],h=f[2],n=2*l-n,o=2*m-o,a.quadraticCurveTo(n+c,o+e,g+c,h+e),l=g,m=h;break;case"a":d(a,l+c,m+e,[f[1],f[2],f[3],f[4],f[5],f[6]+l+c,f[7]+m+e]),l+=f[6],m+=f[7];break;case"A":d(a,l+c,m+e,[f[1],f[2],f[3],f[4],f[5],f[6]+c,f[7]+e]),l=f[6],m=f[7];break;case"z":case"Z":a.closePath()}k=f}}},{"./arc":50}],54:[function(a,b,c){function d(){this._active=null,this._handlers={}}var e=d.prototype;e.initialize=function(a,b,c){return this._el=a,this._obj=c||null,this.padding(b)},e.element=function(){return this._el},e.padding=function(a){return this._padding=a||{top:0,left:0,bottom:0,right:0},this},e.scene=function(a){return arguments.length?(this._scene=a,this):this._scene},e.on=function(){},e.off=function(){},e.handlers=function(){var a,b=this._handlers,c=[];for(a in b)c.push.apply(c,b[a]);return c},e.eventName=function(a){var b=a.indexOf(".");return 0>b?a:a.slice(0,b)},b.exports=d},{}],55:[function(a,b,c){function d(){this._el=null,this._bgcolor=null}var e=d.prototype;e.initialize=function(a,b,c,d){return this._el=a,this.resize(b,c,d)},e.element=function(){return this._el},e.scene=function(){return this._el&&this._el.firstChild},e.background=function(a){return 0===arguments.length?this._bgcolor:(this._bgcolor=a,this)},e.resize=function(a,b,c){return this._width=a,this._height=b,this._padding=c||{top:0,left:0,bottom:0,right:0},this},e.render=function(){return this},b.exports=d},{}],56:[function(a,b,c){function d(){h.call(this),this._down=null,this._touch=null,this._first=!0}function e(a,b,c){return function(d){var e=this._active,f=this.pickEvent(d);f===e?this.fire(a,d):(this.fire(c,d),this._active=f,this.fire(b,d),this.fire(a,d))}}function f(a){return function(b){this.fire(a,b),this._active=null}}var g=a("../../util/dom"),h=a("../Handler"),i=a("./marks"),j=h.prototype,k=d.prototype=Object.create(j);k.constructor=d,k.initialize=function(a,b,c){var d=this._canvas=g.find(a,"canvas");if(d){var e=this;this.events.forEach(function(a){d.addEventListener(a,function(b){k[a]?k[a].call(e,b):e.fire(a,b)})})}return j.initialize.call(this,a,b,c)},k.canvas=function(){return this._canvas},k.context=function(){return this._canvas.getContext("2d")},k.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],k.DOMMouseScroll=function(a){this.fire("mousewheel",a)},k.mousemove=e("mousemove","mouseover","mouseout"),k.dragover=e("dragover","dragenter","dragleave"),k.mouseout=f("mouseout"),k.dragleave=f("dragleave"),k.mousedown=function(a){this._down=this._active,this.fire("mousedown",a)},k.click=function(a){this._down===this._active&&(this.fire("click",a),this._down=null)},k.touchstart=function(a){this._touch=this.pickEvent(a.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",a,!0)},k.touchmove=function(a){this.fire("touchmove",a,!0)},k.touchend=function(a){this.fire("touchend",a,!0),this._touch=null},k.fire=function(a,b,c){var d,e,f=c?this._touch:this._active,g=this._handlers[a];if(g)for(b.vegaType=a,d=0,e=g.length;e>d;++d)g[d].handler.call(this._obj,b,f)},k.on=function(a,b){var c=this.eventName(a),d=this._handlers;return(d[c]||(d[c]=[])).push({type:a,handler:b}),this},k.off=function(a,b){var c,d=this.eventName(a),e=this._handlers[d];if(e){for(c=e.length;--c>=0;)e[c].type===a&&(b&&e[c].handler!==b||e.splice(c,1));return this}},k.pickEvent=function(a){var b,c,d=this._canvas.getBoundingClientRect(),e=this._padding;return this.pick(this._scene,b=a.clientX-d.left,c=a.clientY-d.top,b-e.left,c-e.top)},k.pick=function(a,b,c,d,e){var f=this.context(),g=i[a.marktype];return g.pick.call(this,f,a,b,c,d,e)},b.exports=d},{"../../util/dom":84,"../Handler":54,"./marks":63}],57:[function(a,b,c){function d(a){k.call(this),this._loader=new i(a)}function e(a,b){if(!b)return null;var c,d,e,g,i,j=new h;for(c=0,d=b.length;d>c;++c)e=b[c],g=e.mark,i=g.group,e=l[g.marktype].nested?g:e,j.union(f(e.bounds,i)),e["bounds:prev"]&&j.union(f(e["bounds:prev"],i));return j.round(),a.beginPath(),a.rect(j.x1,j.y1,j.width(),j.height()),a.clip(),j}function f(a,b){if(null==b)return a;for(var c=a.clone();null!=b;b=b.mark.group)c.translate(b.x||0,b.y||0);return c}var g=a("../../util/dom"),h=a("../../util/Bounds"),i=a("../../util/ImageLoader"),j=a("../../util/canvas"),k=a("../Renderer"),l=a("./marks");d.RETINA=!0;var m=k.prototype,n=d.prototype=Object.create(m);n.constructor=d,n.initialize=function(a,b,c,d){return this._canvas=j.instance(b,c),a&&(g.clear(a,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),m.initialize.call(this,a,b,c,d)},n.resize=function(a,b,c){return m.resize.call(this,a,b,c),j.resize(this._canvas,this._width,this._height,this._padding,d.RETINA),this},n.canvas=function(){return this._canvas},n.context=function(){return this._canvas?this._canvas.getContext("2d"):null},n.pendingImages=function(){return this._loader.pending()},n.render=function(a,b){var c,d=this.context(),f=this._padding,g=this._width+f.left+f.right,h=this._height+f.top+f.bottom;return this._scene=a,d.save(),c=e(d,b),this.clear(-f.left,-f.top,g,h),this.draw(d,a,c),d.restore(),this._scene=null,this},n.draw=function(a,b,c){var d=l[b.marktype];d.draw.call(this,a,b,c)},n.clear=function(a,b,c,d){var e=this.context();e.clearRect(a,b,c,d),null!=this._bgcolor&&(e.fillStyle=this._bgcolor,e.fillRect(a,b,c,d))},n.loadImage=function(a){var b=this,c=this._scene;return this._loader.loadImage(a,function(){b.renderAsync(c)})},n.renderAsync=function(a){var b=this;b._async_id&&clearTimeout(b._async_id),b._async_id=setTimeout(function(){b.render(a),delete b._async_id},10)},b.exports=d},{"../../util/Bounds":77,"../../util/ImageLoader":80,"../../util/canvas":83,"../../util/dom":84,"../Renderer":55,"./marks":63}],58:[function(a,b,c){b.exports={Handler:a("./CanvasHandler"),Renderer:a("./CanvasRenderer")}},{"./CanvasHandler":56,"./CanvasRenderer":57}],59:[function(a,b,c){function d(a,b){var c=b.x||0,d=b.y||0,e=b.innerRadius||0,g=b.outerRadius||0,h=(b.startAngle||0)-f,i=(b.endAngle||0)-f;a.beginPath(),0===e?a.moveTo(c,d):a.arc(c,d,e,h,i,0),a.arc(c,d,g,i,h,1),a.closePath()}var e=a("./util"),f=Math.PI/2;b.exports={draw:e.drawAll(d),pick:e.pickPath(d)}},{"./util":70}],60:[function(a,b,c){function d(a,b){var c=b[0],d=c.pathCache||(c.pathCache=g(i(b)));h(a,d)}function e(a,b,c,d,e,f){var g=b.items,h=b.bounds;return!g||!g.length||h&&!h.contains(e,f)?null:(null!=a.pixelratio&&1!==a.pixelratio&&(c*=a.pixelratio,d*=a.pixelratio),j(a,g,c,d)?g[0]:null)}var f=a("./util"),g=a("../../../path/parse"),h=a("../../../path/render"),i=a("../../../util/svg").path.area,j=f.testPath(d);b.exports={draw:f.drawOne(d),pick:e,nested:!0}},{"../../../path/parse":52,"../../../path/render":53,"../../../util/svg":86,"./util":70}],61:[function(a,b,c){function d(a,b,c){if(b.items&&b.items.length){var d,e,h,i,j,k,l,m,n,o,p,q,r,s=b.items,t=this;for(o=0,p=s.length;p>o;++o){for(d=s[o],h=d.axisItems||g,e=d.items||g,i=d.legendItems||g,j=d.x||0,k=d.y||0,l=d.width||0,m=d.height||0,(d.stroke||d.fill)&&(n=null==d.opacity?1:d.opacity,n>0&&(d.fill&&f.fill(a,d,n)&&a.fillRect(j,k,l,m),d.stroke&&f.stroke(a,d,n)&&a.strokeRect(j,k,l,m))),a.save(),a.translate(j,k),d.clip&&(a.beginPath(),a.rect(0,0,l,m),a.clip()),c&&c.translate(-j,-k),q=0,r=h.length;r>q;++q)"back"===h[q].layer&&t.draw(a,h[q],c);for(q=0,r=e.length;r>q;++q)t.draw(a,e[q],c);for(q=0,r=h.length;r>q;++q)"back"!==h[q].layer&&t.draw(a,h[q],c);for(q=0,r=i.length;r>q;++q)t.draw(a,i[q],c);c&&c.translate(j,k),a.restore()}}}function e(a,b,c,d,e,f){if(b.bounds&&!b.bounds.contains(e,f))return null;var h,i,j,k,l,m,n,o,p,q,r,s=b.items||g;for(p=s.length;--p>=0;)if(i=s[p],r=i.bounds,!r||r.contains(e,f)){for(j=i.axisItems||g,k=i.items||g,l=i.legendItems||g,n=i.x||0,o=i.y||0,a.save(),a.translate(n,o),n=e-n,o=f-o,q=l.length;--q>=0;)if(h=l[q],h.interactive!==!1&&(m=this.pick(h,c,d,n,o)))return a.restore(),m;for(q=j.length;--q>=0;)if(h=j[q],h.interactive!==!1&&"back"!==h.layer&&(m=this.pick(h,c,d,n,o)))return a.restore(),m;for(q=k.length;--q>=0;)if(h=k[q],h.interactive!==!1&&(m=this.pick(h,c,d,n,o)))return a.restore(),m;for(q=j.length;--q>=0;)if(h=j[q],h.interative!==!1&&"back"===h.layer&&(m=this.pick(h,c,d,n,o)))return a.restore(),m;if(a.restore(),b.interactive!==!1&&(i.fill||i.stroke)&&n>=0&&n<=i.width&&o>=0&&o<=i.height)return i}return null}var f=a("./util"),g=[];b.exports={draw:d,pick:e}},{"./util":70}],62:[function(a,b,c){function d(a,b,c){if(b.items&&b.items.length)for(var d,e=this,f=b.items,g=0,h=f.length;h>g;++g)if(d=f[g],!c||c.intersects(d.bounds)){d.image&&d.image.url===d.url||(d.image=e.loadImage(d.url),d.image.url=d.url);var i,j=d.x||0,k=d.y||0,l=d.width||d.image&&d.image.width||0,m=d.height||d.image&&d.image.height||0;j-="center"===d.align?l/2:"right"===d.align?l:0,k-="middle"===d.baseline?m/2:"bottom"===d.baseline?m:0,d.image.loaded&&(a.globalAlpha=null!=(i=d.opacity)?i:1,a.drawImage(d.image,j,k,l,m))}}var e=a("./util");b.exports={draw:d,pick:e.pick()}},{"./util":70}],63:[function(a,b,c){b.exports={arc:a("./arc"),area:a("./area"),group:a("./group"),image:a("./image"),line:a("./line"),path:a("./path"),rect:a("./rect"),rule:a("./rule"),symbol:a("./symbol"),text:a("./text")}},{"./arc":59,"./area":60,"./group":61,"./image":62,"./line":64,"./path":65,"./rect":66,"./rule":67,"./symbol":68,"./text":69}],64:[function(a,b,c){function d(a,b){var c=b[0],d=c.pathCache||(c.pathCache=g(i(b)));h(a,d)}function e(a,b,c,d,e,f){var g=b.items,h=b.bounds;return!g||!g.length||h&&!h.contains(e,f)?null:(null!=a.pixelratio&&1!==a.pixelratio&&(c*=a.pixelratio,d*=a.pixelratio),j(a,g,c,d)?g[0]:null)}var f=a("./util"),g=a("../../../path/parse"),h=a("../../../path/render"),i=a("../../../util/svg").path.line,j=f.testPath(d,!1);b.exports={draw:f.drawOne(d),pick:e,nested:!0}},{"../../../path/parse":52,"../../../path/render":53,"../../../util/svg":86,"./util":70}],65:[function(a,b,c){function d(a,b){if(null==b.path)return!0;var c=b.pathCache||(b.pathCache=f(b.path));g(a,c,b.x,b.y)}var e=a("./util"),f=a("../../../path/parse"),g=a("../../../path/render");b.exports={draw:e.drawAll(d),pick:e.pickPath(d)}},{"../../../path/parse":52,"../../../path/render":53,"./util":70}],66:[function(a,b,c){function d(a,b,c){if(b.items&&b.items.length)for(var d,f,g,h,i,j,k=b.items,l=0,m=k.length;m>l;++l)d=k[l],(!c||c.intersects(d.bounds))&&(f=null==d.opacity?1:d.opacity,0!==f&&(g=d.x||0,h=d.y||0,i=d.width||0,j=d.height||0,d.fill&&e.fill(a,d,f)&&a.fillRect(g,h,i,j),d.stroke&&e.stroke(a,d,f)&&a.strokeRect(g,h,i,j)))}var e=a("./util");b.exports={draw:d,pick:e.pick()}},{"./util":70}],67:[function(a,b,c){function d(a,b,c){if(b.items&&b.items.length)for(var d,e,f,h,i,j,k=b.items,l=0,m=k.length;m>l;++l)d=k[l],(!c||c.intersects(d.bounds))&&(e=null==d.opacity?1:d.opacity,0!==e&&(f=d.x||0,h=d.y||0,i=null!=d.x2?d.x2:f,j=null!=d.y2?d.y2:h,d.stroke&&g.stroke(a,d,e)&&(a.beginPath(),a.moveTo(f,h),a.lineTo(i,j),a.stroke())))}function e(a,b){var c=b.x||0,d=b.y||0,e=null!=b.x2?b.x2:c,f=null!=b.y2?b.y2:d,g=b.strokeWidth,h=b.strokeCap;a.lineWidth=null!=g?g:1,a.lineCap=null!=h?h:"butt",a.beginPath(),a.moveTo(c,d),a.lineTo(e,f)}function f(a,b,c,d){return a.isPointInStroke?(e(a,b),a.isPointInStroke(c,d)):!1}var g=a("./util");b.exports={draw:d,pick:g.pick(f)}},{"./util":70}],68:[function(a,b,c){function d(a,b){var c,d,f,k,l=null!=b.size?b.size:100,m=b.x,n=b.y;if(a.beginPath(),null==b.shape||"circle"===b.shape)return c=Math.sqrt(l/Math.PI),a.arc(m,n,c,0,2*Math.PI,0),void a.closePath();switch(b.shape){case"cross":c=Math.sqrt(l/5)/2,d=3*c,a.moveTo(m-d,n-c),a.lineTo(m-c,n-c),a.lineTo(m-c,n-d),a.lineTo(m+c,n-d),a.lineTo(m+c,n-c),a.lineTo(m+d,n-c),a.lineTo(m+d,n+c),a.lineTo(m+c,n+c),a.lineTo(m+c,n+d),a.lineTo(m-c,n+d),a.lineTo(m-c,n+c),a.lineTo(m-d,n+c);break;case"diamond":k=Math.sqrt(l/(2*j)),f=k*j,a.moveTo(m,n-k),a.lineTo(m+f,n),a.lineTo(m,n+k),a.lineTo(m-f,n);break;case"square":d=Math.sqrt(l),c=d/2,a.rect(m-c,n-c,d,d);break;case"triangle-down":f=Math.sqrt(l/i),k=f*i/2,a.moveTo(m,n+k),a.lineTo(m+f,n-k),a.lineTo(m-f,n-k);break;case"triangle-up":f=Math.sqrt(l/i),k=f*i/2,a.moveTo(m,n-k),a.lineTo(m+f,n+k),a.lineTo(m-f,n+k);break;default:var o=e(g(b.shape),l);h(a,o,m,n)}a.closePath()}function e(a,b){var c,d,e,f,g,h=Math.sqrt(b);for(c=0,d=a.length;d>c;++c)for(g=a[c],e=1,f=g.length;f>e;++e)g[e]*=h;return a}var f=a("./util"),g=a("../../../path/parse"),h=a("../../../path/render"),i=Math.sqrt(3),j=Math.tan(30*Math.PI/180);b.exports={draw:f.drawAll(d),pick:f.pickPath(d)}},{"../../../path/parse":52,"../../../path/render":53,"./util":70}],69:[function(a,b,c){function d(a,b,c){if(b.items&&b.items.length)for(var d,e,f,g,j,k,l,m=b.items,n=0,o=m.length;o>n;++n)d=m[n],(!c||c.intersects(d.bounds))&&(l=h.value(d.text),l&&(e=null==d.opacity?1:d.opacity,0!==e&&(a.font=h.font(d),a.textAlign=d.align||"left",f=d.x||0,g=d.y||0,(j=d.radius)&&(k=(d.theta||0)-Math.PI/2,f+=j*Math.cos(k),g+=j*Math.sin(k)),d.angle&&(a.save(),a.translate(f,g),a.rotate(d.angle*Math.PI/180),f=g=0),f+=d.dx||0,g+=(d.dy||0)+h.offset(d),d.fill&&i.fill(a,d,e)&&a.fillText(l,f,g),d.stroke&&i.stroke(a,d,e)&&a.strokeText(l,f,g),d.angle&&a.restore())))}function e(a,b,c,d,e,f){if(b.fontSize<=0)return!1;if(!b.angle)return!0;var h=g(b,j,!0),i=-b.angle*Math.PI/180,k=Math.cos(i),l=Math.sin(i),m=b.x,n=b.y,o=k*e-l*f+(m-m*k+n*l),p=l*e+k*f+(n-m*l-n*k);return h.contains(o,p)}var f=a("../../../util/Bounds"),g=a("../../../util/bound").text,h=a("../../../util/text"),i=a("./util"),j=new f;b.exports={draw:d,pick:i.pick(e)}},{"../../../util/Bounds":77,"../../../util/bound":82,"../../../util/text":87,"./util":70}],70:[function(a,b,c){function d(a,b,c,d){if(!a(b,d)){var e=null==c.opacity?1:c.opacity;0!==e&&(c.fill&&k(b,c,e)&&b.fill(),c.stroke&&l(b,c,e)&&b.stroke())}}function e(a,b,c,e){var f,g,h;for(f=0,g=c.items.length;g>f;++f)h=c.items[f],
(!e||e.intersects(h.bounds))&&d(a,b,h,h)}function f(a){return function(b,c,d){e(a,b,c,d)}}function g(a){return function(b,c,e){c.items.length&&(!e||e.intersects(c.bounds))&&d(a,b,c.items[0],c.items)}}function h(a){return a||(a=o),function(b,c,d,e,f,g){if(!c.items.length)return null;var h,i,j;for(null!=b.pixelratio&&1!==b.pixelratio&&(d*=b.pixelratio,e*=b.pixelratio),j=c.items.length;--j>=0;)if(h=c.items[j],i=h.bounds,(!i||i.contains(f,g))&&i&&a(b,h,d,e,f,g))return h;return null}}function i(a,b){return function(c,d,e,f){var g,h,i=Array.isArray(d)?d[0]:d,j=null==b?i.fill:b,k=i.stroke&&c.isPointInStroke;return k&&(g=i.strokeWidth,h=i.strokeCap,c.lineWidth=null!=g?g:1,c.lineCap=null!=h?h:"butt"),a(c,d)?!1:j&&c.isPointInPath(e,f)||k&&c.isPointInStroke(e,f)}}function j(a){return h(i(a))}function k(a,b,c){return c*=null==b.fillOpacity?1:b.fillOpacity,c>0?(a.globalAlpha=c,a.fillStyle=m(a,b,b.fill),!0):!1}function l(a,b,c){var d,e=null!=(e=b.strokeWidth)?e:1;return 0>=e?!1:(c*=null==b.strokeOpacity?1:b.strokeOpacity,c>0?(a.globalAlpha=c,a.strokeStyle=m(a,b,b.stroke),a.lineWidth=e,a.lineCap=null!=(d=b.strokeCap)?d:"butt",a.vgLineDash(b.strokeDash||null),a.vgLineDashOffset(b.strokeDashOffset||0),!0):!1)}function m(a,b,c){return c.id?n(a,c,b.bounds):c}function n(a,b,c){var d,e,f=c.width(),g=c.height(),h=c.x1+b.x1*f,i=c.y1+b.y1*g,j=c.x1+b.x2*f,k=c.y1+b.y2*g,l=a.createLinearGradient(h,i,j,k),m=b.stops;for(d=0,e=m.length;e>d;++d)l.addColorStop(m[d].offset,m[d].color);return l}var o=function(){return!0};b.exports={drawOne:g,drawAll:f,pick:h,pickPath:j,testPath:i,stroke:l,fill:k,color:m,gradient:n}},{}],71:[function(a,b,c){b.exports={canvas:a("./canvas"),svg:a("./svg")}},{"./canvas":58,"./svg":75}],72:[function(a,b,c){function d(){f.call(this)}var e=a("../../util/dom"),f=a("../Handler"),g=f.prototype,h=d.prototype=Object.create(g);h.constructor=d,h.initialize=function(a,b,c){return this._svg=e.find(a,"svg"),g.initialize.call(this,a,b,c)},h.svg=function(){return this._svg},h.listener=function(a){var b=this;return function(c){var d=c.target,e=d.__data__;c.vegaType=c.type,e=Array.isArray(e)?e[0]:e,a.call(b._obj,c,e)}},h.on=function(a,b){var c=this.eventName(a),d=this._svg,e=this._handlers,f={type:a,handler:b,listener:this.listener(b)};return(e[c]||(e[c]=[])).push(f),d.addEventListener(c,f.listener),this},h.off=function(a,b){var c,d=this.eventName(a),e=this._svg,f=this._handlers[d];if(f){for(c=f.length;--c>=0;)(f[c].type===a&&!b||f[c].handler===b)&&(e.removeEventListener(d,f[c].listener),f.splice(c,1));return this}},b.exports=d},{"../../util/dom":84,"../Handler":54}],73:[function(a,b,c){function d(a){l.call(this),this._loader=new k(a),this._dirtyID=0}function e(a,b,c){var d,e,f;for(a=n.child(a,c,"linearGradient",p),a.setAttribute("id",b.id),a.setAttribute("x1",b.x1),a.setAttribute("x2",b.x2),a.setAttribute("y1",b.y1),a.setAttribute("y2",b.y2),d=0,e=b.stops.length;e>d;++d)f=n.child(a,d,"stop",p),f.setAttribute("offset",b.stops[d].offset),f.setAttribute("stop-color",b.stops[d].color);n.clear(a,d)}function f(a,b,c){var d;a=n.child(a,c,"clipPath",p),a.setAttribute("id",b.id),d=n.child(a,0,"rect",p),d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",b.width),d.setAttribute("height",b.height)}function g(a,b){for(;a&&a.dirty!==b;a=a.mark.group){if(a.dirty=b,!a.mark||a.mark.dirty===b)return;a.mark.dirty=b}}function h(a,b,c,d,e){var f=n.child(a,d,b.tag,p,null,e);if(f.__data__=c,f.__values__={fill:"default"},"g"===b.tag){var g=n.child(f,0,"rect",p,"background");g.__data__=c}return c._svg=f}function i(a,b,c){b!==u[a]&&(null!=b?c?t.setAttributeNS(c,a,b):t.setAttribute(a,b):c?t.removeAttributeNS(c,a):t.removeAttribute(a),u[a]=b)}function j(){return"undefined"!=typeof window?window.location.href:""}var k=a("../../util/ImageLoader"),l=a("../Renderer"),m=a("../../util/text"),n=a("../../util/dom"),o=a("../../util/svg"),p=o.metadata.xmlns,q=a("./marks"),r=l.prototype,s=d.prototype=Object.create(r);s.constructor=d,s.initialize=function(a,b,c,d){return a&&(this._svg=n.child(a,0,"svg",p,"marks"),n.clear(a,1),this._root=n.child(this._svg,0,"g",p),n.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),r.initialize.call(this,a,b,c,d)},s.background=function(a){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",a),r.background.apply(this,arguments)},s.resize=function(a,b,c){if(r.resize.call(this,a,b,c),this._svg){var d=this._width,e=this._height,f=this._padding;this._svg.setAttribute("width",d+f.left+f.right),this._svg.setAttribute("height",e+f.top+f.bottom),this._root.setAttribute("transform","translate("+f.left+","+f.top+")")}return this},s.svg=function(){if(!this._svg)return null;var a={"class":"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var b in o.metadata)a[b]=o.metadata[b];return n.openTag("svg",a)+this._svg.innerHTML+n.closeTag("svg")},s.imageURL=function(a){return this._loader.imageURL(a)},s.render=function(a,b){return this._dirtyCheck(b)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,a,-1),n.clear(this._root,1)),this.updateDefs(),this},s.draw=function(a,b,c){this.drawMark(a,b,c,q[b.marktype])},s.updateDefs=function(){var a,b=this._svg,c=this._defs,d=c.el,g=0;for(a in c.gradient)d||(d=c.el=n.child(b,0,"defs",p)),e(d,c.gradient[a],g++);for(a in c.clipping)d||(d=c.el=n.child(b,0,"defs",p)),f(d,c.clipping[a],g++);d&&(0===g?(b.removeChild(d),c.el=null):n.clear(d,g))},s._resetDefs=function(){var a=this._defs;a.clip_id=1,a.gradient={},a.clipping={}},s.isDirty=function(a){return this._dirtyAll||a.dirty===this._dirtyID},s._dirtyCheck=function(a){if(this._dirtyAll=!0,!a)return!0;var b,c,d,e,f,h,i,j=++this._dirtyID;for(f=0,h=a.length;h>f;++f)b=a[f],c=b.mark,c.marktype!==d&&(d=c.marktype,e=q[d]),"exit"!==b.status?(b=e.nest?c.items[0]:b,b._update!==j&&(b._svg?this._update(e,b._svg,b):(this._dirtyAll=!1,g(b,j)),b._update=j)):b._svg&&(e.nest&&b.mark.items.length?(this._update(e,b._svg,b.mark.items[0]),i=b.mark.items[0],i._svg=b._svg,i._update=j):n.remove(b._svg),b._svg=null);return!this._dirtyAll},s.drawMark=function(a,b,c,d){if(this.isDirty(b)){var e,f,g,i,j,k,l=d.nest?b.items&&b.items.length?[b.items[0]]:[]:b.items||[],m=b.interactive===!1?"none":null,o="g"===d.tag,q=n.cssClass(b);for(e=n.child(a,c+1,"g",p,q),e.setAttribute("class",q),b._svg=e,!o&&m&&e.style.setProperty("pointer-events",m),f=0,g=l.length;g>f;++f)this.isDirty(j=l[f])&&(k=!(this._dirtyAll||j._svg),i=h(e,d,j,f,k),this._update(d,i,j),o&&(k&&(this._dirtyAll=!0),this._recurse(i,j),k&&(this._dirtyAll=!1)));return n.clear(e,f),e}},s._recurse=function(a,b){var c,d,e=b.items||[],f=b.legendItems||[],g=b.axisItems||[],h=0;for(c=0,d=g.length;d>c;++c)"back"===g[c].layer&&this.drawMark(a,g[c],h++,q.group);for(c=0,d=e.length;d>c;++c)this.draw(a,e[c],h++);for(c=0,d=g.length;d>c;++c)"back"!==g[c].layer&&this.drawMark(a,g[c],h++,q.group);for(c=0,d=f.length;d>c;++c)this.drawMark(a,f[c],h++,q.group);n.clear(a,1+h)};var t=null,u=null,v={group:function(a,b,c){t=b.childNodes[0],u=b.__values__,a.background(i,c,this);var d=c.mark.interactive===!1?"none":null;d!==u.events&&(t.style.setProperty("pointer-events",d),u.events=d)},text:function(a,b,c){var d=m.value(c.text);d!==u.text&&(b.textContent=d,u.text=d),d=m.font(c),d!==u.font&&(b.style.setProperty("font",d),u.font=d)}};s._update=function(a,b,c){t=b,u=b.__values__,a.attr(i,c,this);var d=v[a.type];d&&d(a,b,c),this.style(t,c)},s.style=function(a,b){if(null!=b){var c,d,e,f,g;for(c=0,d=o.styleProperties.length;d>c;++c)e=o.styleProperties[c],g=b[e],g!==u[e]&&(f=o.styles[e],null==g?"fill"===f?a.style.setProperty(f,"none"):a.style.removeProperty(f):(g.id&&(this._defs.gradient[g.id]=g,g="url("+j()+"#"+g.id+")"),a.style.setProperty(f,g+"")),u[e]=g)}},b.exports=d},{"../../util/ImageLoader":80,"../../util/dom":84,"../../util/svg":86,"../../util/text":87,"../Renderer":55,"./marks":76}],74:[function(a,b,c){function d(a){h.call(this),this._loader=new i(a),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}function e(a,b,c,d){r[d||a]=b}function f(a,b,c,d){if(null==a)return"";var e,f,g,h,i,l="";for("bgrect"===c&&b.interactive===!1&&(l+="pointer-events: none;"),"text"===c&&(l+="font: "+k.font(a)+";"),e=0,f=j.styleProperties.length;f>e;++e)g=j.styleProperties[e],h=j.styles[g],i=a[g],null==i?"fill"===h&&(l+=(l.length?" ":"")+"fill: none;"):(i.id&&(d.gradient[i.id]=i,i="url(#"+i.id+")"),l+=(l.length?" ":"")+h+": "+i+";");return l?'style="'+l+'"':null}function g(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var h=a("../Renderer"),i=a("../../util/ImageLoader"),j=a("../../util/svg"),k=a("../../util/text"),l=a("../../util/dom"),m=l.openTag,n=l.closeTag,o=a("./marks"),p=h.prototype,q=d.prototype=Object.create(p);q.constructor=d,q.resize=function(a,b,c){p.resize.call(this,a,b,c);var d=this._padding,e=this._text,f={"class":"marks",width:this._width+d.left+d.right,height:this._height+d.top+d.bottom};for(var g in j.metadata)f[g]=j.metadata[g];return e.head=m("svg",f),e.root=m("g",{transform:"translate("+d.left+","+d.top+")"}),e.foot=n("g")+n("svg"),this},q.svg=function(){var a=this._text;return a.head+a.defs+a.root+a.body+a.foot},q.render=function(a){return this._text.body=this.mark(a),this._text.defs=this.buildDefs(),this},q.reset=function(){return this._defs.clip_id=0,this},q.buildDefs=function(){var a,b,c,d,e=this._defs,f="";for(b in e.gradient){for(c=e.gradient[b],d=c.stops,f+=m("linearGradient",{id:b,x1:c.x1,x2:c.x2,y1:c.y1,y2:c.y2}),a=0;a<d.length;++a)f+=m("stop",{offset:d[a].offset,"stop-color":d[a].color})+n("stop");f+=n("linearGradient")}for(b in e.clipping)c=e.clipping[b],f+=m("clipPath",{id:b}),f+=m("rect",{x:0,y:0,width:c.width,height:c.height})+n("rect"),f+=n("clipPath");return f.length>0?m("defs")+f+n("defs"):""},q.imageURL=function(a){return this._loader.imageURL(a)};var r;q.attributes=function(a,b){return r={},a(e,b,this),r},q.mark=function(a){var b,c,d,e=o[a.marktype],h=e.tag,i=e.attr,j=e.nest||!1,p=j?a.items&&a.items.length?[a.items[0]]:[]:a.items||[],q=this._defs,r="";for("g"!==h&&a.interactive===!1&&(b='style="pointer-events: none;"'),r+=m("g",{"class":l.cssClass(a)},b),c=0;c<p.length;++c)d=p[c],b="g"!==h?f(d,a,h,q):null,r+=m(h,this.attributes(i,d),b),"text"===h?r+=g(k.value(d.text)):"g"===h&&(r+=m("rect",this.attributes(e.background,d),f(d,a,"bgrect",q))+n("rect"),r+=this.markGroup(d)),r+=n(h);return r+n("g")},q.markGroup=function(a){var b,c,d="",e=a.axisItems||[],f=a.items||[],g=a.legendItems||[];for(b=0,c=e.length;c>b;++b)"back"===e[b].layer&&(d+=this.mark(e[b]));for(b=0,c=f.length;c>b;++b)d+=this.mark(f[b]);for(b=0,c=e.length;c>b;++b)"back"!==e[b].layer&&(d+=this.mark(e[b]));for(b=0,c=g.length;c>b;++b)d+=this.mark(g[b]);return d},b.exports=d},{"../../util/ImageLoader":80,"../../util/dom":84,"../../util/svg":86,"../../util/text":87,"../Renderer":55,"./marks":76}],75:[function(a,b,c){b.exports={Handler:a("./SVGHandler"),Renderer:a("./SVGRenderer"),string:{Renderer:a("./SVGStringRenderer")}}},{"./SVGHandler":72,"./SVGRenderer":73,"./SVGStringRenderer":74}],76:[function(a,b,c){function d(a){return e(a.x||0,a.y||0)}function e(a,b){return"translate("+a+","+b+")"}var f=a("../../util/text"),g=a("../../util/svg"),h=g.symbolTypes,i=g.textAlign,j=g.path;b.exports={arc:{tag:"path",type:"arc",attr:function(a,b){a("transform",d(b)),a("d",j.arc(b))}},area:{tag:"path",type:"area",nest:!0,attr:function(a,b){var c=b.mark.items;c.length&&a("d",j.area(c))}},group:{tag:"g",type:"group",attr:function(a,b,c){var e,f,g=null;a("transform",d(b)),b.clip&&(e=c._defs,g=b.clip_id||(b.clip_id="clip"+e.clip_id++),f=e.clipping[g]||(e.clipping[g]={id:g}),f.width=b.width||0,f.height=b.height||0),a("clip-path",g?"url(#"+g+")":null)},background:function(a,b){a("class","background"),a("width",b.width||0),a("height",b.height||0)}},image:{tag:"image",type:"image",attr:function(a,b,c){var d=b.x||0,f=b.y||0,g=b.width||0,h=b.height||0,i=c.imageURL(b.url);d-="center"===b.align?g/2:"right"===b.align?g:0,f-="middle"===b.baseline?h/2:"bottom"===b.baseline?h:0,a("href",i,"http://www.w3.org/1999/xlink","xlink:href"),a("transform",e(d,f)),a("width",g),a("height",h)}},line:{tag:"path",type:"line",nest:!0,attr:function(a,b){var c=b.mark.items;c.length&&a("d",j.line(c))}},path:{tag:"path",type:"path",attr:function(a,b){a("transform",d(b)),a("d",b.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(a,b){a("transform",d(b)),a("width",b.width||0),a("height",b.height||0)}},rule:{tag:"line",type:"rule",attr:function(a,b){a("transform",d(b)),a("x2",null!=b.x2?b.x2-(b.x||0):0),a("y2",null!=b.y2?b.y2-(b.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(a,b){var c=!b.shape||h[b.shape]?j.symbol(b):j.resize(b.shape,b.size);a("transform",d(b)),a("d",c)}},text:{tag:"text",type:"text",nest:!1,attr:function(a,b){var c,d=b.dx||0,g=(b.dy||0)+f.offset(b),h=b.x||0,j=b.y||0,k=b.angle||0,l=b.radius||0;l&&(c=(b.theta||0)-Math.PI/2,h+=l*Math.cos(c),j+=l*Math.sin(c)),a("text-anchor",i[b.align]||"start"),k?(c=e(h,j)+" rotate("+k+")",(d||g)&&(c+=" "+e(d,g))):c=e(h+d,j+g),a("transform",c)}}}},{"../../util/svg":86,"../../util/text":87}],77:[function(a,b,c){function d(a){this.clear(),a&&this.union(a)}var e=d.prototype;e.clone=function(){return new d(this)},e.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},e.set=function(a,b,c,d){return this.x1=a,this.y1=b,this.x2=c,this.y2=d,this},e.add=function(a,b){return a<this.x1&&(this.x1=a),b<this.y1&&(this.y1=b),a>this.x2&&(this.x2=a),b>this.y2&&(this.y2=b),this},e.expand=function(a){return this.x1-=a,this.y1-=a,this.x2+=a,this.y2+=a,this},e.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},e.translate=function(a,b){return this.x1+=a,this.x2+=a,this.y1+=b,this.y2+=b,this},e.rotate=function(a,b,c){var d=Math.cos(a),e=Math.sin(a),f=b-b*d+c*e,g=c-b*e-c*d,h=this.x1,i=this.x2,j=this.y1,k=this.y2;return this.clear().add(d*h-e*j+f,e*h+d*j+g).add(d*h-e*k+f,e*h+d*k+g).add(d*i-e*j+f,e*i+d*j+g).add(d*i-e*k+f,e*i+d*k+g)},e.union=function(a){return a.x1<this.x1&&(this.x1=a.x1),a.y1<this.y1&&(this.y1=a.y1),a.x2>this.x2&&(this.x2=a.x2),a.y2>this.y2&&(this.y2=a.y2),this},e.encloses=function(a){return a&&this.x1<=a.x1&&this.x2>=a.x2&&this.y1<=a.y1&&this.y2>=a.y2},e.alignsWith=function(a){return a&&(this.x1==a.x1||this.x2==a.x2||this.y1==a.y1||this.y2==a.y2)},e.intersects=function(a){return a&&!(this.x2<a.x1||this.x1>a.x2||this.y2<a.y1||this.y1>a.y2)},e.contains=function(a,b){return!(a<this.x1||a>this.x2||b<this.y1||b>this.y2)},e.width=function(){return this.x2-this.x1},e.height=function(){return this.y2-this.y1},b.exports=d},{}],78:[function(a,b,c){b.exports=function(a){function b(){}function c(b,c){a.add(b,c)}return{bounds:function(b){return arguments.length?(a=b,this):a},beginPath:b,closePath:b,moveTo:c,lineTo:c,quadraticCurveTo:function(b,c,d,e){a.add(b,c),a.add(d,e)},bezierCurveTo:function(b,c,d,e,f,g){a.add(b,c),a.add(d,e),a.add(f,g)}}}},{}],79:[function(a,b,c){function d(a){this.id="gradient_"+e++,this.type=a||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}var e=0,f=d.prototype;f.stop=function(a,b){return this.stops.push({offset:a,color:b}),this},b.exports=d},{}],80:[function(a,b,c){(function(c){function d(a){this._pending=0,this._config=a||d.Config}function e(a,b){var c=g.sanitizeUrl(this.params(a));if(!c)return b&&b(a,null),null;var d=this,e=new Image;return d._pending+=1,e.onload=function(){d._pending-=1,e.loaded=!0,b&&b(null,e)},e.src=c,e}function f(a,b){var d=this,e=new("undefined"!=typeof window?window.canvas:"undefined"!=typeof c?c.canvas:null).Image;return d._pending+=1,g(this.params(a),function(a,c){return d._pending-=1,a?(b&&b(a,null),null):(e.src=c,e.loaded=!0,void(b&&b(null,e)))}),e}var g=a("datalib/src/import/load");d.Config=null;var h=d.prototype;h.pending=function(){return this._pending},h.params=function(a){var b,c={url:a};for(b in this._config)c[b]=this._config[b];return c},h.imageURL=function(a){return g.sanitizeUrl(this.params(a))},h.loadImage=function(a,b){return g.useXHR?e.call(this,a,b):f.call(this,a,b)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"datalib/src/import/load":22}],81:[function(a,b,c){function d(a){this.mark=a}var e=d.prototype;e.hasPropertySet=function(a){var b=this.mark.def.properties;return b&&null!=b[a]},e.cousin=function(a,b){if(0===a)return this;a=a||-1;var c=this.mark,d=c.group,e=null==b?c.items.indexOf(this):b,f=d.items.indexOf(c)+a;return d.items[f].items[e]},e.sibling=function(a){if(0===a)return this;a=a||-1;var b=this.mark,c=b.items.indexOf(this)+a;return b.items[c]},e.remove=function(){var a=this,b=a.mark.items,c=b.indexOf(a);return c>=0&&(c===b.length-1?b.pop():b.splice(c,1)),a},e.touch=function(){this.pathCache&&(this.pathCache=null)},b.exports=d},{}],82:[function(a,b,c){function d(){return F||(F=u.instance(1,1).getContext("2d"))}function e(a,b){return a.stroke&&0!==a.opacity&&0!==a.stokeOpacity&&b.expand(null!=a.strokeWidth?a.strokeWidth:1),b}function f(a,b,c,d,f){return null==b?c.set(0,0,0,0):(z(G.bounds(c),b,d,f),e(a,c)),c}function g(a,b){var c=a.path?a.pathCache||(a.pathCache=y(a.path)):null;return f(a,c,b,a.x,a.y)}function h(a,b){if(0===a.items.length)return b;var c=a.items,d=c[0],e=d.pathCache||(d.pathCache=y(A(c)));return f(d,e,b)}function i(a,b){if(0===a.items.length)return b;var c=a.items,d=c[0],e=d.pathCache||(d.pathCache=y(B(c)));return f(d,e,b)}function j(a,b){var c,d;return e(a,b.set(c=a.x||0,d=a.y||0,c+a.width||0,d+a.height||0))}function k(a,b){var c=a.x||0,d=a.y||0,e=a.width||0,f=a.height||0;return c-="center"===a.align?e/2:"right"===a.align?e:0,d-="middle"===a.baseline?f/2:"bottom"===a.baseline?f:0,b.set(c,d,c+e,d+f)}function l(a,b){var c,d;return e(a,b.set(c=a.x||0,d=a.y||0,null!=a.x2?a.x2:c,null!=a.y2?a.y2:d))}function m(a,b){var c,d,f,g,h,i,j,k,l,m=a.x||0,n=a.y||0,o=a.innerRadius||0,p=a.outerRadius||0,q=(a.startAngle||0)-C,r=(a.endAngle||0)-C,s=1/0,t=-(1/0),u=1/0,v=-(1/0),w=[q,r],x=q-q%C;for(d=0;4>d&&r>x;++d,x+=C)w.push(x);for(d=0,f=w.length;f>d;++d)c=w[d],g=Math.cos(c),i=o*g,k=p*g,h=Math.sin(c),j=o*h,l=p*h,s=Math.min(s,i,k),t=Math.max(t,i,k),u=Math.min(u,j,l),v=Math.max(v,j,l);return e(a,b.set(m+s,n+u,m+t,n+v))}function n(a,b){var c,d,f,g,h=null!=a.size?a.size:100,i=a.x||0,j=a.y||0;switch(a.shape){case"cross":d=3*Math.sqrt(h/5)/2,b.set(i-d,j-d,i+d,j+d);break;case"diamond":g=Math.sqrt(h/(2*E)),f=g*E,b.set(i-f,j-g,i+f,j+g);break;case"square":d=Math.sqrt(h),c=d/2,b.set(i-c,j-c,i+c,j+c);break;case"triangle-down":f=Math.sqrt(h/D),g=f*D/2,b.set(i-f,j-g,i+f,j+g);break;case"triangle-up":f=Math.sqrt(h/D),g=f*D/2,b.set(i-f,j-g,i+f,j+g);break;default:c=Math.sqrt(h/Math.PI),b.set(i-c,j-c,i+c,j+c)}return e(a,b)}function o(a,b,c){var e,f,g=d(),h=w.size(a),i=a.align,j=a.radius||0,k=a.x||0,l=a.y||0,m=a.dx||0,n=(a.dy||0)+w.offset(a)-Math.round(.8*h);return j&&(f=(a.theta||0)-Math.PI/2,k+=j*Math.cos(f),l+=j*Math.sin(f)),g.font=w.font(a),e=g.measureText(w.value(a.text)).width,"center"===i?m-=e/2:"right"===i&&(m-=e),b.set(m+=k,n+=l,m+e,n+h),a.angle&&!c&&b.rotate(a.angle*Math.PI/180,k,l),b.expand(c?0:1)}function p(a,b,c){var d,f,g=a.axisItems||[],h=a.items||[],i=a.legendItems||[];if(!a.clip){for(d=0,f=g.length;f>d;++d)b.union(g[d].bounds);for(d=0,f=h.length;f>d;++d)h[d].bounds&&b.union(h[d].bounds);if(c)for(d=0,f=i.length;f>d;++d)b.union(i[d].bounds)}return(a.clip||a.width||a.height)&&e(a,b.add(0,0).add(a.width||0,a.height||0)),b.translate(a.x||0,a.y||0)}function q(a,b,c){var d=a.mark.marktype;b=b||H[d],b.nest&&(a=a.mark);var e=a.bounds,f=a["bounds:prev"]||(a["bounds:prev"]=new t);return e?(f.clear().union(e),e.clear()):a.bounds=new t,b(a,a.bounds,c),e||f.clear().union(a.bounds),a.bounds}function r(a,b,c){var d,e,f,g,h=a.marktype,i=H[h],j=a.items,k=j&&j.length;if(i.nest)return f=k?j[0]:(I.mark=a,I),g=q(f,i,c),b=b&&b.union(g)||g;if(b=b||a.bounds&&a.bounds.clear()||new t,k)for(d=0,e=j.length;e>d;++d)b.union(q(j[d],i,c));return a.bounds=b}var s=a("./BoundsContext"),t=a("./Bounds"),u=a("./canvas"),v=a("./svg"),w=a("./text"),x=a("../path"),y=x.parse,z=x.render,A=v.path.area,B=v.path.line,C=Math.PI/2,D=Math.sqrt(3),E=Math.tan(30*Math.PI/180),F=null,G=s(),H={group:p,symbol:n,image:k,rect:j,rule:l,arc:m,text:o,path:g,area:h,line:i};H.area.nest=!0,H.line.nest=!0;var I={mark:null};b.exports={mark:r,item:q,text:o,group:p}},{"../path":51,"./Bounds":77,"./BoundsContext":78,"./canvas":83,"./svg":86,"./text":87}],83:[function(a,b,c){(function(a){function c(b,c){b=b||1,c=c||1;var d;if("undefined"!=typeof document&&document.createElement)d=document.createElement("canvas"),d.width=b,d.height=c;else{var e="undefined"!=typeof window?window.canvas:"undefined"!=typeof a?a.canvas:null;if(!e.prototype)return null;d=new e(b,c)}return f(d)}function d(a,b,c,d,f){var g=this._ctx=a.getContext("2d"),h=1;return a.width=b+d.left+d.right,a.height=c+d.top+d.bottom,f&&"undefined"!=typeof HTMLElement&&a instanceof HTMLElement&&(g.pixelratio=h=e(a)||1),g.setTransform(h,0,0,h,h*d.left,h*d.top),a}function e(a){var b=a.getContext("2d"),c=window&&window.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,e=c/d;if(c!==d){var f=a.width,g=a.height;a.width=f*e,a.height=g*e,a.style.width=f+"px",a.style.height=g+"px"}return e}function f(a){var b=a.getContext("2d");if(!b.vgLineDash){var c=function(){},d=[];return b.setLineDash?(b.vgLineDash=function(a){this.setLineDash(a||d)},b.vgLineDashOffset=function(a){this.lineDashOffset=a}):void 0!==b.webkitLineDash?(b.vgLineDash=function(a){this.webkitLineDash=a||d},b.vgLineDashOffset=function(a){this.webkitLineDashOffset=a}):void 0!==b.mozDash?(b.vgLineDash=function(a){this.mozDash=a},b.vgLineDashOffset=c):(b.vgLineDash=c,b.vgLineDashOffset=c),a}}b.exports={instance:c,resize:d,lineDash:f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],84:[function(a,b,c){function d(a,b,c){return c?a.createElementNS(c,b):a.createElement(b)}function e(a){if(a){var b=a.parentNode;b&&(b.removeChild(a),b.childNodes&&b.childNodes.length||e(b))}}b.exports={find:function(a,b){b=b.toLowerCase();for(var c=0,d=a.childNodes.length;d>c;++c)if(a.childNodes[c].tagName.toLowerCase()===b)return a.childNodes[c]},child:function(a,b,c,e,f,g){var h,i;return h=i=a.childNodes[b],(!h||g||h.tagName.toLowerCase()!==c.toLowerCase()||f&&h.getAttribute("class")!=f)&&(h=d(a.ownerDocument,c,e),a.insertBefore(h,i||null),f&&h.setAttribute("class",f)),h},clear:function(a,b){for(var c=a.childNodes.length;c>b;)a.removeChild(a.childNodes[--c]);return a},remove:e,cssClass:function(a){return"mark-"+a.marktype+(a.name?" "+a.name:"")},openTag:function(a,b,c){var d,e,f="<"+a;if(b)for(d in b)e=b[d],null!=e&&(f+=" "+d+'="'+e+'"');return c&&(f+=" "+c),f+">"},closeTag:function(a){return"</"+a+">"}}},{}],85:[function(a,b,c){function d(a,b){return JSON.stringify(a,i,b)}function e(a){var b="string"==typeof a?JSON.parse(a):a;return f(b)}function f(a){var b,c,d,e,i,j=a.marktype;for(d=0,e=h.length;e>d;++d)if(i=a[h[d]])for(b=0,c=i.length;c>b;++b)i[b][j?"mark":"group"]=a,j&&"group"!==j||f(i[b]);return j&&g.mark(a),a}var g=a("../util/bound"),h=["items","axisItems","legendItems"],i=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];b.exports={toJSON:d,fromJSON:e}},{"../util/bound":82}],86:[function(a,b,c){(function(c){function d(a){return a.x||0}function e(a){return a.y||0}function f(a){return(a.x||0)+(a.width||0)}function g(a){return(a.y||0)+(a.height||0)}function h(a){return null==a.size?100:a.size}function i(a){return a.shape||"circle"}var j=a("datalib"),k=("undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null).svg,l=a("../path/parse"),m=k.area().x(d).y1(e).y0(g),n=k.area().y(e).x1(d).x0(f),o=k.line().x(d).y(e);b.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:k.arc(),symbol:k.symbol().type(i).size(h),area:function(a){var b=a[0];return("horizontal"===b.orient?n:m).interpolate(b.interpolate||"linear").tension(b.tension||.7)(a)},line:function(a){var b=a[0];return o.interpolate(b.interpolate||"linear").tension(b.tension||.7)(a)},resize:function(a,b){var c,d,e,f,g,h,i,j=l(a),k="";for(b=Math.sqrt(b),f=0,g=j.length;g>f;++f)for(c=j[f],h=0,i=c.length;i>h&&"Z"!==c[h];++h)(d=+c[h])===d&&(e=a.indexOf(d),k+=a.substring(0,e)+d*b,a=a.substring(e+(d+"").length));return k+"Z"}},symbolTypes:j.toMap(k.symbolTypes),textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../path/parse":52,datalib:26}],87:[function(a,b,c){function d(a){return null!=a.fontSize?a.fontSize:11}b.exports={size:d,value:function(a){return null!=a?String(a):""},font:function(a,b){var c=a.font;return b&&c&&(c=String(c).replace(/\"/g,"'")),""+(a.fontStyle?a.fontStyle+" ":"")+(a.fontVariant?a.fontVariant+" ":"")+(a.fontWeight?a.fontWeight+" ":"")+d(a)+"px "+(c||"sans-serif")},offset:function(a){var b=a.baseline,c=d(a);return Math.round("top"===b?.93*c:"middle"===b?.3*c:"bottom"===b?-.21*c:0)}}},{}],88:[function(a,b,c){function d(a,b,c){h.call(this,a,b,c),this._type="canvas",this._renderers={canvas:f,svg:g}}var e=a("vega-scenegraph").render,f=e.canvas,g=e.svg.string,h=a("./View"),i=d.prototype=new h;i.renderer=function(a){return a&&(this._type=a),h.prototype.renderer.apply(this,arguments)},i.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},i.canvasAsync=function(a){function b(){0===c.pendingImages()?(d.render(),a(d.canvas())):setTimeout(b,10)}var c=this._renderer,d=this;return"canvas"!==this._type?null:void(c.pendingImages()>0?b():a(this.canvas()))},i.svg=function(){return"svg"===this._type?this._renderer.svg():null},i.initialize=function(){var a=this._width,b=this._height,c=this._bgcolor,d=this._padding,e=this.model().config();return this._viewport&&(a=this._viewport[0]-(d?d.left+d.right:0),b=this._viewport[1]-(d?d.top+d.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(e.load)).initialize(null,a,b,d).background(c),this},b.exports=d},{"./View":90,"vega-scenegraph":49}],89:[function(a,b,c){function d(a){this._defs={},this._predicates={},this._scene=null,this._groups=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(a),this.expr=m(this),i.init.call(this)}function e(a){var b=this,c={};return f.isArray(a)?(a.forEach(function(a){c[a]=b._predicates[a]}),c):this._predicates[a]}var f=a("datalib"),g=a("vega-dataflow"),h=g.ChangeSet,i=g.Graph.prototype,j=g.Node,k=a("../scene/GroupBuilder"),l=a("../scene/visit"),m=a("../parse/expr"),n=a("./config"),o=d.prototype=Object.create(i);o.constructor=d,o.defs=function(a){return arguments.length?(this._defs=a,this):this._defs},o.config=function(a){if(!arguments.length)return this._config;this._config=Object.create(n);for(var b in a){var c=a[b],d=this._config[b];f.isObject(c)&&f.isObject(d)?this._config[b]=f.extend({},d,c):this._config[b]=c}return this},o.width=function(a){return this._defs&&(this._defs.width=a),this._defs&&this._defs.marks&&(this._defs.marks.width=a),this._scene&&(this._scene.items[0].width=a,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},o.height=function(a){return this._defs&&(this._defs.height=a),this._defs&&this._defs.marks&&(this._defs.marks.height=a),this._scene&&(this._scene.items[0].height=a,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},o.node=function(){return this._node||(this._node=new j(this))},o.data=function(){var a=i.data.apply(this,arguments);return arguments.length>1&&this.node().addListener(a.pipeline()[0]),a},o.predicate=function(a,b){return 1===arguments.length?e.call(this,a):this._predicates[a]=b},o.predicates=function(){return this._predicates},o.scene=function(a){if(!arguments.length)return this._scene;this._builder&&(this.node().removeListener(this._builder),this._builder._groupBuilder.disconnect());var b=this,c=this._builder=new j(this);return c.evaluate=function(d){if(c._groupBuilder)return d;var e=c._groupBuilder=new k(b,b._defs.marks,b._scene={}),f=e.pipeline();return b._groups={},this.addListener(e.connect()),f[f.length-1].addListener(a),d},this.addListener(c),this},o.group=function(a,b){var c=this._groups;return 1===arguments.length?c[a]:(c[a]=b,this)},o.reset=function(){return this._scene&&this._reset.axes&&(l(this._scene,function(a){a.axes&&a.axes.forEach(function(a){a.reset()})}),this._reset.axes=!1),this._scene&&this._reset.legends&&(l(this._scene,function(a){a.legends&&a.legends.forEach(function(a){a.reset()})}),this._reset.legends=!1),this},o.addListener=function(a){this.node().addListener(a)},o.removeListener=function(a){this.node().removeListener(a)},o.fire=function(a){a||(a=h.create()),this.propagate(a,this.node())},b.exports=d},{"../parse/expr":96,"../scene/GroupBuilder":112,"../scene/visit":117,"./config":91,datalib:26,"vega-dataflow":41}],90:[function(a,b,c){(function(c){function d(a,b,c){this._el=null,this._model=null,this._width=this.__width=b||500,this._height=this.__height=c||300,this._bgcolor=null,this._cursor=!0,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._skipSignals=!1,this._changeset=null,this._repaint=!0,this._renderers=k,this._io=null,this._api={}}function e(a){var b=this,c=this._model.data(a);if(!c)return l.error('Data source "'+a+'" is not defined.');var d=c.pipeline()[0],e=this._streamer,f={};return this._api[a]?this._api[a]:(f.insert=function(g){return c.insert(i.duplicate(g)),e.addListener(d),b._changeset.data[a]=1,f},f.update=function(){return e.addListener(d),b._changeset.data[a]=1,c.update.apply(c,arguments),f},f.remove=function(){return e.addListener(d),b._changeset.data[a]=1,c.remove.apply(c,arguments),f},f.values=function(){return c.values()},this._api[a]=f)}function f(a,b){var c=this._changeset,d=this._model.signal(a);return d?(this._streamer.addListener(d.value(b)),c.signals[a]=1,void(c.reflow=!0)):l.error('Signal "'+a+'" is not defined.')}function g(){var a=this;return a._renderNode=new j.Node(a._model).router(!0),a._renderNode.evaluate=function(b){l.debug(b,["rendering"]);var c=a._model.scene(),d=a._handler;return d&&d.scene&&d.scene(c),b.trans?b.trans.start(function(b){a._renderer.render(c,b)}):a._repaint?a._renderer.render(c):b.dirty.length&&a._renderer.render(c,b.dirty),b.dirty.length&&(b.dirty.forEach(function(a){a._dirty=!1}),c.items[0]._dirty=!1),a._repaint=a._skipSignals=!1,b},a._model.scene(a._renderNode),!0}var h="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,i=a("datalib"),j=a("vega-dataflow"),k=a("vega-scenegraph").render,l=a("vega-logging"),m=j.Dependencies,n=a("../parse/streams"),o=a("../scene/Encoder"),p=a("../scene/Transition"),q=d.prototype;q.model=function(a){
return arguments.length?(this._model!==a&&(this._model=a,this._streamer=new j.Node(a),this._streamer._rank=-1,this._changeset=j.ChangeSet.create(),this._handler&&this._handler.model(a)),this):this._model},q.data=function(a){var b=this;return arguments.length?i.isString(a)?e.call(b,a):(i.isObject(a)&&i.keys(a).forEach(function(c){var d=e.call(b,c);a[c](d)}),this):b._model.values()};var r=i.toMap(["width","height","padding"]);q.signal=function(a,b,c){var d,e,g=this._model;if(!arguments.length)return g.values(m.SIGNALS);if(1===arguments.length&&i.isString(a))return g.values(m.SIGNALS,a);i.isObject(a)?(e=a,c=b):(e={},e[a]=b);for(d in e)r[d]?this[d](e[d]):f.call(this,d,e[d]);return this._skipSignals=c,this},q.width=function(a){return arguments.length?(this.__width!==a&&(this._width=this.__width=a,this.model().width(a),this.initialize(),this._strict&&(this._autopad=1),f.call(this,"width",a)),this):this.__width},q.height=function(a){return arguments.length?(this.__height!==a&&(this._height=this.__height=a,this.model().height(a),this.initialize(),this._strict&&(this._autopad=1),f.call(this,"height",a)),this):this.__height},q.background=function(a){return arguments.length?(this._bgcolor!==a&&(this._bgcolor=a,this.initialize()),this):this._bgcolor},q.padding=function(a){return arguments.length?(this._padding!==a&&(i.isString(a)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===a):(this._autopad=0,this._padding=a,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,this._padding),this._handler&&this._handler.padding(this._padding),f.call(this,"padding",this._padding)),this._repaint=!0,this):this._padding},q.autopad=function(a){if(this._autopad<1)return this;this._autopad=0;var b=this.model().scene().bounds,c=this._padding,d=this.model().config(),e=d.autopadInset,g=b.x1<0?Math.ceil(-b.x1)+e:0,h=b.y1<0?Math.ceil(-b.y1)+e:0,i=b.x2>this._width?Math.ceil(+b.x2-this._width)+e:0;return b=b.y2>this._height?Math.ceil(+b.y2-this._height)+e:0,c={left:g,top:h,right:i,bottom:b},this._strict?(this._autopad=0,this._padding=c,this._width=Math.max(0,this.__width-(g+i)),this._height=Math.max(0,this.__height-(h+b)),this._model.width(this._width).height(this._height).reset(),f.call(this,"width",this._width),f.call(this,"height",this._height),f.call(this,"padding",c),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(c).update(a),this},q.viewport=function(a){return arguments.length?(this._viewport!==a&&(this._viewport=a,this.initialize()),this):this._viewport},q.renderer=function(a){if(!arguments.length)return this._renderer;if(this._renderers[a])a=this._renderers[a];else{if(i.isString(a))throw new Error("Unknown renderer: "+a);if(!a)throw new Error("No renderer specified")}return this._io!==a&&(this._io=a,this._renderer=null,this.initialize(),this._build&&this.render()),this},q.initialize=function(a){var b,c=this,d=c._width,e=c._height,f=c._padding,g=c._bgcolor,i=this.model().config();return arguments.length&&null!==a||(a=this._el?this._el.parentNode:null)?(h.select(a).select("div.vega").remove(),this._el=a=h.select(a).append("div").attr("class","vega").style("position","relative").node(),c._viewport&&h.select(a).style("width",(c._viewport[0]||d)+"px").style("height",(c._viewport[1]||e)+"px").style("overflow","auto"),k.canvas.Renderer.RETINA=i.render.retina,c._renderer=(c._renderer||new this._io.Renderer(i.load)).initialize(a,d,e,f).background(g),b=c._handler,c._handler=(new this._io.Handler).initialize(a,f,c),b?b.handlers().forEach(function(a){c._handler.on(a.type,a.handler)}):c._detach=n(this),this._repaint=!0,this):this},q.destroy=function(){this._detach&&this._detach()},q.update=function(a){a=a||{};var b=this,c=this._model,d=this._streamer,e=this._changeset,f=a.duration?new p(a.duration,a.ease):null;if(f&&(e.trans=f),void 0!==a.props){if(i.keys(e.data).length>0)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");e.reflow=!0,e.request=a.props}var h=b._build;return b._build=b._build||g.call(this),a.items&&h?(o.update(c,a.trans,a.props,a.items,e.dirty),b._renderNode.evaluate(e)):d.listeners().length&&h?(this._repaint&&d.addListener(c.node()),c.propagate(e,d,null,this._skipSignals),d.disconnect()):c.fire(e),b._changeset=j.ChangeSet.create(),b.autopad(a)},q.toImageURL=function(a){var b,c=this;switch(a||"png"){case"canvas":case"png":b=k.canvas.Renderer;break;case"svg":b=k.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+a)}var d=k.canvas.Renderer.RETINA;k.canvas.Renderer.RETINA=!1;var e=new b(c._model.config.load).initialize(null,c._width,c._height,c._padding).background(c._bgcolor).render(c._model.scene());if(k.canvas.Renderer.RETINA=d,"svg"===a){var f=new Blob([e.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(f)}return e.canvas().toDataURL("image/png")},q.render=function(a){return this._renderer.render(this._model.scene(),a),this},q.on=function(){return this._handler.on.apply(this._handler,arguments),this},q.onSignal=function(a,b){var c=this._model.signal(a);return c?c.on(b):l.error('Signal "'+a+'" is not defined.'),this},q.off=function(){return this._handler.off.apply(this._handler,arguments),this},q.offSignal=function(a,b){var c=this._model.signal(a);return c?c.off(b):l.error('Signal "'+a+'" is not defined.'),this},d.factory=function(b){var c=a("./HeadlessView");return function(a){a=a||{};var e=b.defs(),f=(a.el?new d:new c).model(b).renderer(a.renderer||"canvas").width(e.width).height(e.height).background(e.background).padding(e.padding).viewport(e.viewport).initialize(a.el);return a.data&&f.data(a.data),a.el&&(a.hover!==!1&&f.on("mouseover",function(a,b){b&&b.hasPropertySet("hover")&&this.update({props:"hover",items:b})}).on("mouseout",function(a,b){b&&b.hasPropertySet("hover")&&this.update({props:"update",items:b})}),a.cursor!==!1&&f.onSignal("cursor",function(a,b){var c=h.select("body");i.isString(b)?(f._cursor="default"===b,c.style("cursor",b)):i.isObject(b)&&f._cursor&&c.style("cursor",b["default"])})),f}},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/streams":107,"../scene/Encoder":111,"../scene/Transition":114,"./HeadlessView":88,datalib:26,"vega-dataflow":41,"vega-logging":48,"vega-scenegraph":49}],91:[function(a,b,c){(function(a){var c="undefined"!=typeof window?window.d3:"undefined"!=typeof a?a.d3:null,d={};d.load={baseURL:"",domainWhiteList:!1},d.autopadInset=5,d.scale={time:c.time.scale,utc:c.time.scale.utc},d.render={retina:!0},d.scene={fill:void 0,fillOpacity:void 0,stroke:void 0,strokeOpacity:void 0,strokeWidth:void 0,strokeDash:void 0,strokeDashOffset:void 0},d.axis={layer:"back",ticks:10,padding:3,axisColor:"#000",axisWidth:1,gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:"auto",titleOffsetAutoMin:30,titleOffsetAutoMax:1e4,titleOffsetAutoMargin:4},d.legend={orient:"right",offset:20,padding:3,margin:2,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},d.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},d.range={category10:c.scale.category10().range(),category20:c.scale.category20().range(),category20b:c.scale.category20b().range(),category20c:c.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],92:[function(a,b,c){function d(a,b,c){var d=a.schema;d&&(d.refs&&e.extend(c.refs,d.refs),d.defs&&e.extend(c.defs,d.defs))}var e=a("datalib"),f=a("../parse"),g=a("../scene/Scale"),h=a("./config");b.exports=function(a){var b=null;return a=a||{},a.url?b=e.json(e.extend({url:a.url},h.load)):(b={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},e.keys(f).forEach(function(c){d(f[c],a,b)}),d(g,a,b)),a.properties&&e.keys(a.properties).forEach(function(c){b.defs.propset.properties[c]={$ref:"#/refs/"+a.properties[c]+"Value"}}),a.propertySets&&e.keys(a.propertySets).forEach(function(a){b.defs.mark.properties.properties.properties[a]={$ref:"#/defs/propset"}}),b}},{"../parse":97,"../scene/Scale":113,"./config":91,datalib:26}],93:[function(a,b,c){function d(a,b,c,d){var g=f(a);(b||[]).forEach(function(b,f){c[f]=c[f]||h(a,g[b.type]),e(g[b.type],b,f,c[f],d)})}function e(a,b,c,d,e){var f;void 0!==b.scale&&d.scale(f=e.scale(b.scale));var h=a.grid;g.isObject(h)&&(a.grid=void 0!==h[f.type]?h[f.type]:h["default"]),d.orient(i(b,a,"orient",j[b.type])),d.offset(i(b,a,"offset",0)),d.layer(i(b,a,"layer","front")),d.grid(i(b,a,"grid",!1)),d.title(b.title||null),d.titleOffset(i(b,a,"titleOffset")),d.tickValues(b.values||null),d.tickFormat(b.format||null),d.tickFormatType(b.formatType||null),d.tickSubdivide(b.subdivide||0),d.tickPadding(i(b,a,"tickPadding",a.padding));var k=i(b,a,"tickSize"),l=[k,k,k];l[0]=i(b,a,"tickSizeMajor",l[0]),l[1]=i(b,a,"tickSizeMinor",l[1]),l[2]=i(b,a,"tickSizeEnd",l[2]),l.length&&d.tickSize.apply(d,l),d.tickCount(i(b,a,"ticks"));var m=b.properties;m&&m.ticks?(d.majorTickProperties(m.majorTicks?g.extend({},m.ticks,m.majorTicks):m.ticks),d.minorTickProperties(m.minorTicks?g.extend({},m.ticks,m.minorTicks):m.ticks)):(d.majorTickProperties(m&&m.majorTicks||{}),d.minorTickProperties(m&&m.minorTicks||{})),d.tickLabelProperties(m&&m.labels||{}),d.titleProperties(m&&m.title||{}),d.gridLineProperties(m&&m.grid||{}),d.domainProperties(m&&m.axis||{})}function f(a){var b=a.config(),c=b.axis;return{x:g.extend(g.duplicate(c),b.axis_x),y:g.extend(g.duplicate(c),b.axis_y)}}var g=a("datalib"),h=a("../scene/axis"),i=a("../util/theme-val"),j={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};b.exports=d},{"../scene/axis":115,"../util/theme-val":149,datalib:26}],94:[function(a,b,c){(function(a){function c(a){return null==a?null:d.rgb(a)+""}var d="undefined"!=typeof window?window.d3:"undefined"!=typeof a?a.d3:null;b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(a,b,c){function d(a,b,c){function g(a,b){f.error("PARSE DATA FAILED: "+b.name+" "+a),j=-1,c(a)}function h(b){return function(d,f){if(d)g(d,b);else if(j>0)try{a.data(b.name).values(e.read(f,b.format)),0===--j&&c()}catch(h){g(h,b)}}}var i=a.config(),j=0;return(b||[]).forEach(function(b){b.url&&(j+=1,e.load(e.extend({url:b.url},i.load),h(b)));try{d.datasource(a,b)}catch(c){g(c,b)}}),0===j&&setTimeout(c,1),b}var e=a("datalib"),f=a("vega-logging"),g=a("./transforms"),h=a("./modify");d.datasource=function(a,b){var c=(b.transform||[]).map(function(b){return g(a,b)}),d=(b.modify||[]).map(function(c){return h(a,c,b)}),f=a.data(b.name,d.concat(c));return b.values?f.values(e.read(b.values,b.format)):b.source&&(f.source(b.source).addListener(f),a.removeListener(f.pipeline()[0])),f},b.exports=d},{"./modify":101,"./transforms":108,datalib:26,"vega-logging":48}],96:[function(a,b,c){function d(a){return function(b){b=b.map(a);var c=b.length;if(1>c||c>2)throw Error("open takes exactly 1 or 2 arguments.");return"this.defs.open(this.model, "+b[0]+(c>1?","+b[1]:"")+")"}}function e(a,b,c){if("undefined"==typeof window||!window||!window.open)throw Error("Open function can only be invoked in a browser.");var d=o.extend({type:"open",url:b,name:c},a.config().load),e=o.load.sanitizeUrl(d);if(!e)throw Error("Invalid URL: "+d.url);window.open(e,c)}function f(a,b){return function(c){c=c.map(a);var d=c.length;if(2>d||d>3)throw Error("scale takes exactly 2 or 3 arguments.");return"this.defs.scale(this.model, "+b+", "+c[0]+","+c[1]+(d>2?","+c[2]:"")+")"}}function g(a,b,c,d,e){if(e&&e.scale||(e=e&&e.mark?e.mark.group:a.scene().items[0]),a.group(e._id)!==e)throw Error('Scope for scale "'+c+'" is not a valid group item.');var f=e.scale(c);return f?b?f.invert(d):f(d):d}function h(a,b,c,d){var e=b,f=c;return b>c&&(e=c,f=b),d?a>e&&f>a:a>=e&&f>=a}function i(a){return function(b,c,d,e){var f;if(3!==b.length)throw Error("indata takes 3 arguments.");if("Literal"!==b[0].type)throw Error("Data source name must be a literal for indata.");return f=b[0].value,e[f]=1,"Literal"===b[2].type&&i.model.requestIndex(f,b[2].value),b=b.map(a),"this.defs.indata(this.model,"+b[0]+","+b[1]+","+b[2]+")"}}function j(a,b,c,d){var e=a.data(b),f=e.getIndex(d);return f[c]>0}function k(a,b){return p.format(a,"number")(b)}function l(a,b){return p.format(a,"time")(b)}function m(a,b){return p.format(a,"utc")(b)}function n(a){return function(b){i.model=a;var c=s(b);return c.model=a,c.sig=a?a._signals:{},c}}var o=a("datalib"),p=o.template,q=a("vega-expression"),r=["datum","parent","event","signals"],s=q.compiler(r,{idWhiteList:r,fieldVar:r[0],globalVar:function(a){return"this.sig["+o.str(a)+"]._value"},functions:function(a){var b=q.functions(a);return b.eventItem="event.vg.getItem",b.eventGroup="event.vg.getGroup",b.eventX="event.vg.getX",b.eventY="event.vg.getY",b.open=d(a),b.scale=f(a,!1),b.iscale=f(a,!0),b.inrange="this.defs.inrange",b.indata=i(a),b.format="this.defs.format",b.timeFormat="this.defs.timeFormat",b.utcFormat="this.defs.utcFormat",b},functionDefs:function(){return{scale:g,inrange:h,indata:j,format:k,timeFormat:l,utcFormat:m,open:e}}});n.scale=g,n.codegen=s.codegen,b.exports=n},{datalib:26,"vega-expression":46}],97:[function(a,b,c){b.exports={axes:a("./axes"),background:a("./background"),data:a("./data"),events:a("vega-event-selector"),expr:a("./expr"),legends:a("./legends"),mark:a("./mark"),marks:a("./marks"),modify:a("./modify"),padding:a("./padding"),predicates:a("./predicates"),properties:a("./properties"),signals:a("./signals"),spec:a("./spec"),streams:a("./streams"),transforms:a("./transforms")}},{"./axes":93,"./background":94,"./data":95,"./expr":96,"./legends":98,"./mark":99,"./marks":100,"./modify":101,"./padding":102,"./predicates":103,"./properties":104,"./signals":105,"./spec":106,"./streams":107,"./transforms":108,"vega-event-selector":42}],98:[function(a,b,c){function d(a,b,c,d){(b||[]).forEach(function(b,g){c[g]=c[g]||f(a),e(b,g,c[g],d)})}function e(a,b,c,d){c.size(a.size?d.scale(a.size):null),c.shape(a.shape?d.scale(a.shape):null),c.fill(a.fill?d.scale(a.fill):null),c.stroke(a.stroke?d.scale(a.stroke):null),c.opacity(a.opacity?d.scale(a.opacity):null),a.orient&&c.orient(a.orient),null!=a.offset&&c.offset(a.offset),c.title(a.title||null),c.values(a.values||null),c.format(void 0!==a.format?a.format:null),c.formatType(a.formatType||null);var e=a.properties;c.titleProperties(e&&e.title||{}),c.labelProperties(e&&e.labels||{}),c.legendProperties(e&&e.legend||{}),c.symbolProperties(e&&e.symbols||{}),c.gradientProperties(e&&e.gradient||{})}var f=a("../scene/legend");b.exports=d},{"../scene/legend":116}],99:[function(a,b,c){function d(a,b,c){var g=b.properties||c&&(b.properties={}),h=g.enter||c&&(g.enter={}),i=b.marks,j=a.config().marks||{};if(c){"symbol"===b.type&&!h.size&&j.symbolSize&&(h.size={value:j.symbolSize});var k={arc:"fill",area:"fill",rect:"fill",symbol:"fill",text:"fill",line:"stroke",path:"stroke",rule:"stroke"},l=k[b.type];!h[l]&&j.color&&(h[l]={value:j.color})}return e.keys(g).forEach(function(c){g[c]=f(a,b.type,g[c])}),b.delay&&(b.delay=f(a,b.type,{delay:b.delay})),i&&(b.marks=i.map(function(b){return d(a,b,!0)})),b}var e=a("datalib"),f=a("./properties");b.exports=d},{"./properties":104,datalib:26}],100:[function(a,b,c){function d(a,b,c,d){return{type:"group",width:c,height:d,properties:e(b.scene||{},a),scales:b.scales||[],axes:b.axes||[],legends:b.legends||[],marks:(b.marks||[]).map(function(b){return f(a,b,!0)})}}function e(a,b){var c,d,e,f,i,j=b.config().scene,k={};for(c=0,d=e=h.length;d>c;++c)f=h[c],void 0!==(i=a[f])?k[f]=i.signal?i:{value:i}:j[f]?k[f]={value:j[f]}:--e;return e?{update:g(b,"group",k)}:{}}var f=a("./mark"),g=a("./properties"),h=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDash","strokeDashOffset"];b.exports=d},{"./mark":99,"./properties":104}],101:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i=!0,j=a.length;for(e=c.length-1;e>=0;--e){for(f=0;j>f;++f)if(g=a[f],h=b&&g(b)||b,g(c[e])!==h){i=!1;break}i&&d.push.apply(d,c.splice(e,1)),i=!0}}function e(a,b,c){var d=k.ingest(b);a.add.push(d),c._data.push(d)}function f(a,b,c){var f=b.signal?g.field(b.signal):null,i=f?f[0]:null,o=b.predicate?a.predicate(b.predicate.name||b.predicate):null,p=b.test?a.expr(b.test):null,q=null===o&&null===p,r=b.type===m.CLEAR,s=g.array(b.field||"data"),t=s.map(g.accessor),u=s.map(g.mutator),v=new j(a).router(r);return v.evaluate=function(j){var v,w;if(null!==o&&(v=a.values(l.DATA,o.data||n),w=a.values(l.SIGNALS,o.signals||n),q=o.call(o,{},v,w,a._predicates)),null!==p&&(w=a.values(l.SIGNALS,p.globals||n),q=p.fn()),h.debug(j,[b.type+"ing",q]),!q||!r&&!j.signals[i])return j;var x,y=f?a.signalRef(b.signal):null,z=a.data(c.name),A=null,B=[],C=[],D=0;return g.isObject(y)?(x=y,b.field||(s=g.keys(x),t=s.map(g.accessor),u=s.map(g.mutator))):(x={},u.forEach(function(a){a(x,y)})),b.type===m.INSERT?e(j,x,z):b.type===m.REMOVE?(d(t,y,j.mod,j.rem),d(t,y,j.add,C),d(t,y,z._data,C)):b.type===m.UPSERT?(j.mod.forEach(function(a){var b=t.every(function(b){return b(a)===b(x)});b&&(g.extend(a,x),D+=1)}),0===D&&e(j,x,z)):b.type===m.TOGGLE?(d(t,y,j.mod,C),j.rem.push.apply(j.rem,C),d(t,y,j.add,B),B.length||C.length?z._data=z._data.filter(function(a){return C.indexOf(a)<0&&B.indexOf(a)<0}):(j.add.push(A=k.ingest(x)),z._data.push(A))):b.type===m.CLEAR&&(j.rem.push.apply(j.rem,j.mod.splice(0)),j.add.splice(0),z._data.splice(0)),s.forEach(function(a){j.fields[a]=1}),j},i&&v.dependency(l.SIGNALS,i),o&&(v.dependency(l.DATA,o.data),v.dependency(l.SIGNALS,o.signals)),p&&(v.dependency(l.SIGNALS,p.globals),v.dependency(l.DATA,p.dataSources)),v}var g=a("datalib"),h=a("vega-logging"),i=a("vega-dataflow"),j=i.Node,k=i.Tuple,l=i.Dependencies,m={INSERT:"insert",REMOVE:"remove",UPSERT:"upsert",TOGGLE:"toggle",CLEAR:"clear"},n=[];b.exports=f},{datalib:26,"vega-dataflow":41,"vega-logging":48}],102:[function(a,b,c){function d(a){return null==a?"auto":e.isObject(a)?a:e.isNumber(a)?{top:a,left:a,right:a,bottom:a}:"strict"===a?a:"auto"}var e=a("datalib");b.exports=d},{datalib:26}],103:[function(a,b,c){function d(a,b){return(b||[]).forEach(function(b){var c=l[b.type](a,b),d=Function("args","db","signals","predicates",c.code);d.root=function(){return a.scene().items[0]},d.nullScale=m,d.isFunction=k.isFunction,d.signals=c.signals,d.data=c.data,a.predicate(b.name,d)}),b}function e(a,b){var c=k.field(a),d="signals["+c.map(k.str).join("][")+"]";return b[c[0]]=1,d}function f(a,b){function c(a){h[a]=1}function d(a){i[a]=1}var f=[],g=[],h={},i={};return k.array(b).forEach(function(b,i){var j="o"+i,l="";if(void 0!==b.value)l=k.str(b.value);else if(b.arg)l="args["+k.str(b.arg)+"]";else if(b.signal)l=e(b.signal,h);else if(b.predicate){var m=b.predicate,n=m&&(m.name||m),o=a.predicate(n),p="predicates["+k.str(n)+"]";o.signals.forEach(c),o.data.forEach(d),k.isObject(m)&&k.keys(m).forEach(function(a){if("name"!==a){var b=m[a];l+="args["+k.str(a)+"] = ",b.signal?l+=e(b.signal,h):b.arg&&(l+="args["+k.str(b.arg)+"]"),l+=", "}}),l+=p+".call("+p+", args, db, signals, predicates)"}f.push(j),g.push(j+"=("+l+")")}),{code:"var "+f.join(", ")+";\n"+g.join(";\n")+";\n",signals:k.keys(h),data:k.keys(i)}}function g(a,b){var c=f(a,b.operands);return"="===b.type&&(b.type="=="),c.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:c.code+"return "+["o0","o1"].join(b.type)+";",signals:c.signals,data:c.data}}function h(a,b){for(var c=f(a,b.operands),d=[],e=0,g=b.operands.length;d.push("o"+e++)<g;);return"and"===b.type?b.type="&&":"or"===b.type&&(b.type="||"),{code:c.code+"return "+d.join(b.type)+";",signals:c.signals,data:c.data}}function i(a,b){var c=[b.item],d="";b.range&&c.push.apply(c,b.range),b.scale&&(d=j(b.scale,c));var e=f(a,c);if(d=e.code+d+"\n  var ordSet = null;\n",b.data){var g=k.field(b.field).map(k.str);d+="var where = function(d) { return d["+g.join("][")+"] == o0 };\n",d+="return db["+k.str(b.data)+"].filter(where).length > 0;"}else b.range&&(b.scale&&(d+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),d+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;");return{code:d,signals:e.signals,data:e.data.concat(b.data?[b.data]:[])}}function j(a,b){var c="var scale = ",d=b.length;return k.isString(a)?(b.push({value:a}),c+="this.root().scale(o"+d+")"):a.arg?(b.push(a),c+="o"+d):a.name&&(b.push(k.isString(a.name)?{value:a.name}:a.name),c+="(this.isFunction(o"+d+") ? o"+d+" : ",a.scope?(b.push(a.scope),c+="((o"+(d+1)+".scale || this.root().scale)(o"+d+") || this.nullScale)"):c+="this.root().scale(o"+d+")",c+=")"),a.invert===!0&&(c+=".invert"),c+";\n"}var k=a("datalib"),l={"=":g,"==":g,"!=":g,">":g,">=":g,"<":g,"<=":g,and:h,"&&":h,or:h,"||":h,"in":i},m=function(){return 0};m.invert=m,b.exports=d},{datalib:26}],104:[function(a,b,c){(function(c){function d(a,b,c){function d(a){if(null!=r[a]){var b,c,d=n.array(r[a]);for(b=0,c=d.length;c>b;++b)x[a][d[b]]=1}}function e(a){var b=(a.parent?"parent_":"group_")+a.level;x._nRefs[b]=a}var j,k,l,r,s=a.config(),t="",u=n.keys(c),v=[],w={},x={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};for(t+="var o = trans ? {} : item, d=0, exprs=this.exprs, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",g(a,s,c),j=0,k=u.length;k>j;++j)r=c[l=u[j]],t+=j>0?"\n  ":"  ",r.rule?(r=h(a,l,r.rule,v),t+="\n  "+r.code):n.isArray(r)?(r=h(a,l,r,v),t+="\n  "+r.code):(r=i(s,l,r),t+="d += set(o, "+n.str(l)+", "+r.val+");"),w[l]=!0,q.forEach(d),x.reflow=x.reflow||r.reflow,r.nested.length&&r.nested.forEach(e);n.keys(x._nRefs).forEach(function(a){x.nested.push(x._nRefs[a])}),x.nested.sort(function(a,b){return a=a.level,b=b.level,b>a?-1:a>b?1:a>=b?0:NaN}),w.x2&&(w.x?(t+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",t+="\n  d += set(o, 'width', (o.x2 - o.x));"):t+=w.width?"\n  d += set(o, 'x', (o.x2 - o.width));":"\n  d += set(o, 'x', o.x2);"),w.xc&&(t+=w.width?"\n  d += set(o, 'x', (o.xc - o.width/2));":"\n  d += set(o, 'x', o.xc);"),w.y2&&(w.y?(t+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",t+="\n  d += set(o, 'height', (o.y2 - o.y));"):t+=w.height?"\n  d += set(o, 'y', (o.y2 - o.height));":"\n  d += set(o, 'y', o.y2);"),w.yc&&(t+=w.height?"\n  d += set(o, 'y', (o.yc - o.height/2));":"\n  d += set(o, 'y', o.yc);"),f(b,w)&&(t+="\n  d += (item.touch(), 1);"),t+="\n  if (trans) trans.interpolate(item, o);",t+="\n  return d > 0;";try{var y=Function("item","group","trans","db","signals","predicates",t);return y.tpl=p,y.exprs=v,y.util=n,y.d3=m,n.extend(y,n.template.context),{encode:y,signals:n.keys(x.signals),scales:n.keys(x.scales),data:n.keys(x.data),fields:n.keys(x.fields),nested:x.nested,reflow:x.reflow}}catch(z){o.error(z),o.log(t)}}function e(a,b){return n.isObject(a)||(a={reflow:!1,nested:[]},q.forEach(function(b){a[b]=[]})),n.isObject(b)&&(a.reflow=a.reflow||b.reflow,a.nested.push.apply(a.nested,b.nested),q.forEach(function(c){a[c].push.apply(a[c],b[c])})),a}function f(a,b){return b.path||("area"===a||"line"===a)&&(b.x||b.x2||b.width||b.y||b.y2||b.height||b.tension||b.interpolate)}function g(a,b,c){var d,e,f=c.shape,g=0;if(f&&(d=f.value)){for(b.shape&&b.shape[d]&&(d=b.shape[d]),f="";null!==(e=r.exec(d));)f+=d.substring(g,e.index),f+=a.expr(e[1]).fn(),g=r.lastIndex;c.shape.value=f+d.substring(g)}}function h(a,b,c,d){var f=a.config(),g=e(),h=[],j="";return(c||[]).forEach(function(k,l){var m=i(f,b,k);if(e(g,m),k.test){var o=a.expr(k.test);g.signals.push.apply(g.signals,o.globals),g.data.push.apply(g.data,o.dataSources),j+="if (exprs["+d.length+"](item.datum, item.mark.group.datum, null)) {\n    d += set(o, "+n.str(b)+", "+m.val+");",j+=c[l+1]?"\n  } else ":"  }",d.push(o.fn)}else{var p=k.predicate,q=p&&(p.name||p),r=a.predicate(q),s="predicates["+n.str(q)+"]",t=[],u=b+"_arg"+l;n.isObject(p)&&n.keys(p).forEach(function(a){if("name"!==a){var b=i(f,l,p[a],!0);t.push(n.str(a)+": "+b.val),e(g,b)}}),q?(g.signals.push.apply(g.signals,r.signals),g.data.push.apply(g.data,r.data),h.push(u+" = {\n    "+t.join(",\n    ")+"\n  }"),j+="if ("+s+".call("+s+","+u+", db, signals, predicates)) {\n    d += set(o, "+n.str(b)+", "+m.val+");",j+=c[l+1]?"\n  } else ":"  }"):j+="{\n    d += set(o, "+n.str(b)+", "+m.val+");\n  }\n"}}),h.length&&(j="var "+h.join(",\n      ")+";\n  "+j),g.code=j,g}function i(a,b,c,d){if(null==c)return null;if("fill"===b||"stroke"===b){if(c.c)return j(a,"hcl",c.h,c.c,c.l);if(c.h||c.s)return j(a,"hsl",c.h,c.s,c.l);if(c.l||c.a)return j(a,"lab",c.l,c.a,c.b);if(c.r||c.g||c.b)return j(a,"rgb",c.r,c.g,c.b)}var f=null,g=null,h=e(),i=null,m=null,o=null,p={};return void 0!==c.template&&(f=n.template.source(c.template,"tmpl",p),n.keys(p).forEach(function(a){var b=n.field(a),c=b.shift();"parent"===c||"group"===c?h.nested.push({parent:"parent"===c,group:"group"===c,level:1}):"datum"===c?h.fields.push(b[0]):h.signals.push(c)})),void 0!==c.value&&(f=n.str(c.value)),void 0!==c.signal&&(i=n.field(c.signal),f="signals["+i.map(n.str).join("][")+"]",h.signals.push(i.shift())),void 0!==c.field&&(c.field=n.isString(c.field)?{datum:c.field}:c.field,m=k(c.field),f=m.val,e(h,m)),void 0!==c.scale&&(o=l(c.scale),g=o.val,e(h,o),h.scales.push(c.scale.name||c.scale),null!==f||c.band||c.mult||c.offset||!d?f=g+(c.band?".rangeBand()":"("+(null!==f?f:"item.datum.data")+")"):d&&(f=g)),f="("+(c.mult?n.number(c.mult)+" * ":"")+f+")"+(c.offset?" + "+n.number(c.offset):""),h.val=f,h}function j(a,b,c,d,f){var g=c?i(a,"",c):a.color[b][0],h=d?i(a,"",d):a.color[b][1],j=f?i(a,"",f):a.color[b][2],k=e();[g,h,j].forEach(function(a){n.isArray||e(k,a)});var l="(this.d3."+b+"("+[g.val,h.val,j.val].join(",")+') + "")';return k.val=l,k}function k(a){if(n.isString(a))return{val:n.field(a).map(n.str).join("][")};var b=a.level||1,c=(a.group||a.parent)&&b,d=c?Array(b).join("group.mark."):"",f=k(a.datum||a.group||a.parent||a.signal),g=f.val,h=e(null,f);return a.datum?(g="item.datum["+g+"]",h.fields.push(a.datum)):a.group?(g=d+"group["+g+"]",h.nested.push({level:b,group:!0})):a.parent?(g=d+"group.datum["+g+"]",h.nested.push({level:b,parent:!0})):a.signal&&(g="signals["+g+"]",h.signals.push(n.field(a.signal)[0]),h.reflow=!0),h.val=g,h}function l(a){var b=null,c=null,d=e();return b=n.isString(a)?n.str(a):a.name?n.isString(a.name)?n.str(a.name):(c=k(a.name)).val:(c=k(a)).val,b="(item.mark._scaleRefs["+b+"] = 1, group.scale("+b+"))",a.invert&&(b+=".invert"),c&&c.nested.forEach(function(a){a.scale=!0}),c?(c.val=b,c):(d.val=b,d)}var m="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,n=a("datalib"),o=a("vega-logging"),p=a("vega-dataflow").Tuple,q=["signals","scales","data","fields"],r=/{{(.*?)}}/g;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{datalib:26,"vega-dataflow":41,"vega-logging":48}],105:[function(a,b,c){function d(a,b){return(b||[]).forEach(function(b){if(-1!==i.indexOf(b.name))throw Error('Signal name "'+b.name+'" is a reserved keyword ('+i.join(", ")+").");var c=a.signal(b.name,b.init).verbose(b.verbose);b.init&&b.init.expr&&(b.init.expr=a.expr(b.init.expr),c.value(e(a,b.init))),b.expr&&(b.expr=a.expr(b.expr),c.evaluate=function(d){var f=e(a,b),g=d.signals;return(f!==c.value()||c.verbose())&&(c.value(f),g[b.name]=1),g[b.name]?d:a.doNotPropagate},c.dependency(h,b.expr.globals),b.expr.globals.forEach(function(b){a.signal(b).addListener(c)}))}),b}function e(a,b){var c=b.expr,e=c.fn();return b.scale?d.scale(a,b,e):e}var f=a("datalib"),g=a("./expr"),h=a("vega-dataflow").Dependencies.SIGNALS,i=["datum","event","signals","width","height","padding"].concat(f.keys(g.codegen.functions));d.scale=function(a,b,c,d,e){var h,i=b.scale,j=i.name||i.signal||i,k=i.scope;return k&&(k.signal?k=a.signalRef(k.signal):f.isString(k)&&(h=i._expr=i._expr||a.expr(k),k=h.fn(d,e))),g.scale(a,i.invert,j,c,k)},b.exports=d},{"./expr":96,datalib:26,"vega-dataflow":41}],106:[function(a,b,c){function d(b){function c(b){try{b=e.duplicate(b);var c=a("./"),f=g(b,k,"width",500),h=g(b,k,"height",500),i=c.padding(g(b,k,"padding")),l=g(b,k,"background");o.signal("width",f),o.signal("height",h),o.signal("padding",i),d(b),o.defs({width:f,height:h,padding:i,viewport:b.viewport||null,background:c.background(l),signals:c.signals(o,b.signals),predicates:c.predicates(o,b.predicates),marks:c.marks(o,b,f,h),data:c.data(o,b.data,j)})}catch(m){j(m)}}function d(a){var b,c=a.signals||(a.signals=[]);c.some(function(a){return"cursor"===a.name?(b=a,!0):!1}),b||c.push(b={name:"cursor",streams:[]}),b.init=b.init||{},b.streams.unshift({type:"mousemove",expr:"eventItem().cursor === cursor.default ? cursor : {default: eventItem().cursor}"})}function j(a){var b;a?f.error(a):b=p(o.buildIndexes()),n&&(n.length>1?n(a,b):a||n(b),n=null)}var k,l=arguments.length,m=2,n=arguments[l-1],o=new h,p=i.factory;if(l>m&&e.isFunction(arguments[l-m])&&(p=arguments[l-m],++m),l>m&&e.isObject(arguments[l-m])&&o.config(arguments[l-m]),k=o.config(),e.isObject(b))c(b);else if(e.isString(b)){var q=e.extend({url:b},k.load);e.json(q,function(a,b){a?j("SPECIFICATION LOAD FAILED: "+a):c(b)})}else j("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}var e=a("datalib"),f=a("vega-logging"),g=a("../util/theme-val"),h=a("../core/Model"),i=a("../core/View");b.exports=d},{"../core/Model":89,"../core/View":90,"../util/theme-val":149,"./":97,datalib:26,"vega-logging":48}],107:[function(a,b,c){(function(c){function d(a){function b(b,c){var d,f,g,h=e.mouse((e.event=b,a.renderer().scene())),i=a.padding(),j={};if(c)for(d=c.mark,f="group"===d.marktype?c:d.group,g=c;null!=g;g=g.mark.group)g.mark.def.name&&(j[g.mark.def.name]=g);j.root=a.model().scene().items[0],b.vg=Object.create(l),b.vg.group=f,b.vg.item=c||{},b.vg.name=j,b.vg.x=h[0]-i.left,b.vg.y=h[1]-i.top}function c(a,b,c,d,e){function f(a){return!a.fn(c,d,e)}var h,j,k,l,m=a.handlers[b],n=a.nodes[b],o=g.ChangeSet.create(null,!0),q=!1;for(j=0,k=m.length;k>j;++j)l=m[j],q=l.filters.some(f),q||(h=l.exp.fn(c,d,e),l.spec.scale&&(h=i.scale(p,l.spec,h,c,e)),(h!==l.signal.value()||l.signal.verbose())&&(l.signal.value(h),o.signals[l.signal.name()]=1));p.propagate(o,n)}function d(a,b,c,e){b.forEach(function(b){b.event?m(a,b,c,e):b.signal?n(a,b,c,e):b.start?o(a,b,c,e):b.stream&&(b.filters&&b.stream.forEach(function(a){a.filters=f.array(a.filters).concat(b.filters)}),d(a,b.stream,c,e))})}function m(a,b,c,d){var e=b.event,h=b.name,i=b.mark,j=b.target,k=f.array(b.filters),l=j?v:u,m=j?j+":"+e:e,n=l.nodes[m]||(l.nodes[m]=new g.Node(p)),o=l.handlers[m]||(l.handlers[m]=[]);h?k.push('!!event.vg.name["'+h+'"]'):i&&k.push("event.vg.item.mark && event.vg.item.mark.marktype==="+f.str(i)),o.push({signal:a,exp:c,spec:d,filters:k.map(function(a){return p.expr(a)})}),n.addListener(a)}function n(a,b,c,d){var e=a.name(),f=p.signal(e+k,null);f.evaluate=function(f){if(!f.signals[b.signal])return p.doNotPropagate;var g=c.fn();return d.scale&&(g=i.scale(p,d,g)),(g!==a.value()||a.verbose())&&(a.value(g),f.signals[e]=1,f.reflow=!0),f},f.dependency(g.Dependencies.SIGNALS,b.signal),f.addListener(a),p.signal(b.signal).addListener(f);
}function o(a,b,c,e){var f=a.name(),g=f+j,h=b.middle,i=h.filters||(h.filters=[]),k=p.signal(g)||p.signal(g,!1);d(k,[b.start],q,{}),d(k,[b.end],r,{}),i.push(k.name()),d(a,[b.middle],c,e)}var p=a.model(),q=p.expr("true"),r=p.expr("false"),s=p.defs().signals,t={handlers:{},nodes:{}},u=f.duplicate(t),v=f.duplicate(t);return f.array(s).forEach(function(a){var b=p.signal(a.name);a.expr||f.array(a.streams).forEach(function(a){var c=h.parse(a.type),e=p.expr(a.expr);d(b,c,e,a)})}),f.keys(u.handlers).forEach(function(d){a.on(d,function(a,e){a.preventDefault(),b(a,e),c(u,d,e&&e.datum||{},e&&e.mark&&e.mark.group&&e.mark.group.datum||{},a)})}),f.keys(v.handlers).forEach(function(a){function d(d){b(d),c(v,a,e.select(this).datum(),this.parentNode&&e.select(this.parentNode).datum(),d)}if("undefined"!=typeof window){for(var f=v.handlers[a],g=a.split(":"),h="window"===g[0]?[window]:window.document.querySelectorAll(g[0]),i=0;i<h.length;++i)h[i].addEventListener(g[1],d);f.elements=h,f.listener=d}}),v.detach=function(){f.keys(v.handlers).forEach(function(a){for(var b=v.handlers[a],c=a.split(":"),d=f.array(b.elements),e=0;e<d.length;++e)d[e].removeEventListener(c[1],b.listener)})},v.detach}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("datalib"),g=a("vega-dataflow"),h=a("vega-event-selector"),i=a("./signals"),j="_vgGATEKEEPER",k="_vgEVALUATOR",l={getItem:function(){return this.item},getGroup:function(a){var b=a?this.name[a]:this.group,c=b&&b.mark,d=c&&(c.interactive||void 0===c.interactive);return d?b:{}},getXY:function(a){var b={x:this.x,y:this.y};for("string"==typeof a&&(a=this.name[a]);a;a=a.mark&&a.mark.group)b.x-=a.x||0,b.y-=a.y||0;return b},getX:function(a){return this.getXY(a).x},getY:function(a){return this.getXY(a).y}};b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./signals":105,datalib:26,"vega-dataflow":41,"vega-event-selector":42}],108:[function(a,b,c){function d(a,b){var c,d=f[b.type];if(!d)throw new Error('"'+b.type+'" is not a valid transformation');return c=new d(a),b.output&&c.output(b.output),e.keys(b).forEach(function(a){"type"!==a&&"output"!==a&&c.param(a,b[a])}),c}var e=a("datalib"),f=a("../transforms/index");b.exports=d},{"../transforms/index":145,datalib:26}],109:[function(a,b,c){function d(a,b){return this._mark=b,h.prototype.init.call(this,a).router(!0).reflows(!0).mutates(!0)}var e=a("datalib"),f=a("vega-dataflow"),g=a("vega-scenegraph"),h=f.Node,i=a("vega-logging"),j=g.bound,k=g.Bounds,l=a("./Encoder"),m=d.prototype=new h;m.evaluate=function(a){i.debug(a,["bounds",this._mark.marktype]);var b,c,d,g,h,m,n=this._mark,o=n.marktype,p="group"===o,q=n.items,r=e.array(n.def.legends).length>0,s=n.bounds,t=!s||a.rem.length;if("line"===o||"area"===o)j.mark(n,null,p&&!r);else if(a.add.forEach(function(a){j.item(a),t=t||s&&!s.encloses(a.bounds)}),a.mod.forEach(function(a){t=t||s&&s.alignsWith(a.bounds),j.item(a)}),t)for(s=n.bounds&&n.bounds.clear()||(n.bounds=new k),b=0,c=q.length;c>b;++b)s.union(q[b].bounds);if(p&&r){for(b=0,c=q.length;c>b;++b)for(h=q[b],h._legendPositions=null,d=0,g=h.legendItems.length;g>d;++d)m=h.legendItems[d],l.update(this._graph,a.trans,"legendPosition",m.items,a.dirty),j.mark(m,null,!1);j.mark(n,null,!0)}return f.ChangeSet.create(a,!0)},b.exports=d},{"./Encoder":111,datalib:26,"vega-dataflow":41,"vega-logging":48,"vega-scenegraph":49}],110:[function(a,b,c){function d(){return arguments.length?this.init.apply(this,arguments):this}function e(){var a,b,c,d,e,f,g,h=this._def.from,i=h.mark;if(i)d=this.sibling(i),a=d._isSuper?d:d._bounder,b=["vg",this._parent_id,i,a.listeners(!0).length].join("_"),c={name:b,transform:h.transform,modify:h.modify};else{if(a=this._graph.data(this._from),!a)throw Error('Data source "'+this._from+'" is not defined.');b=["vg",this._from,this._def.type,a.listeners(!0).length].join("_"),c={name:b,source:this._from,transform:h.transform,modify:h.modify}}this._from=b,this._ds=t.datasource(this._graph,c),i?(g=new m(this._graph).addListener(this._ds.listener()),g.evaluate=function(a){var b=p.create(a),c=d._output;return b.add=c.add,b.mod=c.mod,b.rem=c.rem,b},a.addListener(g)):(e=this._ds.source().last(),f=p.create(e),f.add=e.add,f.mod=e.mod,f.rem=e.rem,f.stamp=null,this._graph.propagate(f,this._ds.listener(),e.stamp))}function f(){var a=o.ingest(new k(this._mark));return this._def.width&&o.set(a,"width",this._def.width),this._def.height&&o.set(a,"height",this._def.height),a}function g(a,b,c,d,e){var g,i,j,k,l,m,n,p=h(this._def.key||(d?"_id":null)),q=this._mark.items||[],r=d?a.rem:q,s=o.idMap(!d||e?c:a.mod),t=[];for(g=0,j=r.length;j>g;++g)k=r[g]===q[g]?q[g]:p?this._map[p(r[g])]:r[g],k.status=u.EXIT;for(g=0,j=c.length;j>g;++g)l=c[g],k=p?this._map[i=p(l)]:q[g],m=k?!1:(k=f.call(this),!0),k.status=m?u.ENTER:u.UPDATE,n=!m&&k.datum!==l,k.datum=l,p&&(o.set(k,"key",i),this._map[i]=k),m?b.add.push(k):(n||s[l._id])&&b.mod.push(k),t.push(k);for(g=0,j=r.length;j>g;++g)k=r[g]===q[g]?q[g]:p?this._map[i=p(r[g])]:r[g],k.status===u.EXIT&&(k._dirty=!0,a.dirty.push(k),t.push(k),b.rem.push(k),p&&(this._map[i]=null));return this._mark.items=t,b}function h(a){if(null==a)return null;var b=i.array(a).map(i.accessor);return function(a){for(var c="",d=0,e=b.length;e>d;++d)d>0&&(c+="|"),c+=String(b[d](a));return c}}var i=a("datalib"),j=a("vega-logging"),k=a("vega-scenegraph").Item,l=a("vega-dataflow"),m=l.Node,n=l.Dependencies,o=l.Tuple,p=l.ChangeSet,q={},r=a("./Encoder"),s=a("./Bounder"),t=a("../parse/data"),u=d.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},v=1,w=2,x=d.prototype=new m;x.init=function(a,b,c,d,f,g){return m.prototype.init.call(this,a).router(!0).collector(!0),this._def=b,this._mark=c,this._from=(b.from?b.from.data:null)||g,this._ds=i.isString(this._from)?a.data(this._from):null,this._map={},this._status=null,c.def=b,c.marktype=b.type,c.interactive=b.interactive!==!1,c.items=[],i.isValid(b.name)&&(c.name=b.name),this._parent=d,this._parent_id=f,b.from&&(b.from.mark||b.from.transform||b.from.modify)&&e.call(this),this._isSuper="group"!==this._def.type,this._encoder=new r(this._graph,this._mark,this),this._bounder=new s(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(n.DATA,this._from),this.dependency(n.DATA,this._encoder.dependency(n.DATA)),this.dependency(n.SCALES,this._encoder.dependency(n.SCALES)),this.dependency(n.SIGNALS,this._encoder.dependency(n.SIGNALS)),this},x.ds=function(){return this._ds},x.parent=function(){return this._parent},x.encoder=function(){return this._encoder},x.pipeline=function(){return[this]},x.connect=function(){var a=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach(function(b){(b=a._parent.scale(b))&&b.addListener(a)}),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=v,this},x.disconnect=function(){function a(a){for(var c,d=0,e=a.length;e>d;++d)(c=b._parent.scale(a[d]))&&c.removeListener(b)}var b=this;return this._listeners.length?(m.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),a(this._encoder._scales),a(i.keys(this._mark._scaleRefs)),this._status=w,this):this},x.sibling=function(a){return this._parent.child(a,this._parent_id)},x.evaluate=function(a){j.debug(a,["building",this._from||this._def.from,this._def.type]);var b,c,d,e,f=this,h=this._mark.def,k=h.properties||{},l=k.update||{},m=p.create(a);if(this._ds){if(d=m.data[e=this._ds.name()],m.data[e]=null,b=this._encoder.reevaluate(m),m.data[e]=d,c=this._ds.last(),!c)throw Error("Builder evaluated before backing DataSource.");c.stamp>this._stamp?g.call(this,c,m,this._ds.values(),!0,b):b&&(m.mod=this._mark.items.slice())}else d=i.isFunction(this._def.from)?this._def.from():[q],g.call(this,a,m,d);return this._output=m=this._graph.evaluate(m,this._encoder),l.nested&&l.nested.length&&this._status===v&&i.keys(this._mark._scaleRefs).forEach(function(a){var b=f._parent.scale(a);b&&(b.addListener(f),f.dependency(n.SCALES,a),f._encoder.dependency(n.SCALES,a))}),this._isSuper&&(m.mod=m.mod.filter(function(a){return a._dirty}),m=this._graph.evaluate(m,this._bounder)),m},b.exports=d},{"../parse/data":95,"./Bounder":109,"./Encoder":111,datalib:26,"vega-dataflow":41,"vega-logging":48,"vega-scenegraph":49}],111:[function(a,b,c){function d(a,b,c){var d=b.def.properties||{},e=d.enter,f=d.update,g=d.exit;k.prototype.init.call(this,a),this._mark=b,this._builder=c;var h=this._scales=[];return e&&h.push.apply(h,e.scales),f&&(this.dependency(l.DATA,f.data),this.dependency(l.SIGNALS,f.signals),this.dependency(l.FIELDS,f.fields),this.dependency(l.SCALES,f.scales),h.push.apply(h,f.scales)),g&&h.push.apply(h,g.scales),this.mutates(!0)}function e(a,b,c,d){var e,f,g,h=c.add.length;return(e=d.enter)&&(f=e[a]).length&&h&&(g=b.values(a,f,g=g||{})),(e=d.exit)&&(f=e[a]).length&&c.rem.length&&(g=b.values(a,f,g=g||{})),(e=d.update)&&(f=e[a]).length&&(h||c.mod.length)&&(g=b.values(a,f,g=g||{})),g||n}function f(a,b,c,d,e,f,g){var h=a.encode,i=b._dirty,j=h.call(h,b,b.mark.group||b,c,d,e,f);b._dirty=j||i,j&&!i&&g.push(b)}function g(){for(var a,b,c,d=this._mark.def.properties.update.nested,e=this._builder,f=0,g=0,h=d.length;h>g;++g)if(a=d[g],!a.scale){for(;f<a.level;++f)e=e.parent(),b=e.ds();if(c=(a.group?e.encoder():b.last())._stamp,c>this._stamp)return!0}return!1}var h=a("datalib"),i=a("vega-logging"),j=a("vega-dataflow"),k=j.Node,l=j.Dependencies,m=a("vega-scenegraph").bound,n={},o=d.prototype=new k;o.evaluate=function(b){i.debug(b,["encoding",this._mark.def.type]);var c,d,g,h,j=this._graph,k=this._mark.def.properties||{},m=this._mark.items,o=k.enter,p=k.update,q=k.exit,r=b.dirty,s=j.predicates(),t=b.request,u=this._mark.group,v=u&&(u.mark.axis||u.mark.legend),w=n,x=n;if(t&&!v){if((h=k[t])&&b.mod.length)for(w=h.data?j.values(l.DATA,h.data):null,x=h.signals?j.values(l.SIGNALS,h.signals):null,c=0,d=b.mod.length;d>c;++c)g=b.mod[c],f.call(this,h,g,b.trans,w,x,s,r);return b}for(w=e(l.DATA,j,b,k),x=e(l.SIGNALS,j,b,k),c=0,d=b.rem.length;d>c;++c)g=b.rem[c],q&&f.call(this,q,g,b.trans,w,x,s,r),b.trans&&!q?b.trans.interpolate(g,n):b.trans||m.pop();var y=a("./Builder").STATUS.UPDATE;for(c=0,d=b.add.length;d>c;++c)g=b.add[c],o&&f.call(this,o,g,b.trans,w,x,s,r),p&&f.call(this,p,g,b.trans,w,x,s,r),g.status=y;if(p)for(c=0,d=b.mod.length;d>c;++c)g=b.mod[c],f.call(this,p,g,b.trans,w,x,s,r);return b},o.reevaluate=function(a){var b=this._mark.def,c=b.properties||{},d=h.isFunction(b.from)||b.orient||a.request||k.prototype.reevaluate.call(this,a);return d||(c.update?g.call(this):!1)},d.update=function(a,b,c,d,e){d=h.array(d);var g,i,j,k,n,o=a.predicates(),p=a.values(l.DATA),q=a.values(l.SIGNALS);for(g=0,i=d.length;i>g;++g)j=d[g],k=j.mark.def.properties,n=k&&k[c],n&&(f.call(null,n,j,b,p,q,o,e),m.item(j))},b.exports=d},{"./Builder":110,datalib:26,"vega-dataflow":41,"vega-logging":48,"vega-scenegraph":49}],112:[function(a,b,c){function d(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=f.bind(this),arguments.length?this.init.apply(this,arguments):this}function e(a){function b(a){a.type!=v.MARK||a.inline||void 0===q._graph.data(a.from)||q._recursor.removeListener(a.builder)}function c(b){var c=b.scale();a.scales[c.scaleName]&&b.reset().def()}function d(b){var c=b.size()||b.shape()||b.fill()||b.stroke()||b.opacity();a.scales[c.scaleName]&&b.reset().def()}function e(a){q._recursor.removeListener(a.builder),a.builder.disconnect()}var f,g,l,m,n,o,p,q=this,r=k.array(this._def.marks).length>0,s=k.array(this._def.axes).length>0,t=k.array(this._def.legends).length>0,u=!1;for(f=0,m=a.add.length;m>f;++f)n=a.add[f],r&&h.call(this,a,n),s&&i.call(this,a,n),t&&j.call(this,a,n);for(f=a.add.length-1;f>=0;--f)for(n=a.add[f],g=this._children[n._id].length-1;g>=0;--g)l=this._children[n._id][g],l.builder.connect(),o=l.builder.pipeline(),p=l.builder._def,u=p.type!==v.GROUP,u=u&&void 0!==this._graph.data(l.from),u=u&&1===o[o.length-1].listeners().length,u=u&&p.from&&!p.from.mark,l.inline=u,u?this._graph.evaluate(a,l.builder):this._recursor.addListener(l.builder);for(f=0,m=a.mod.length;m>f;++f)n=a.mod[f],r&&q._children[n._id].forEach(b),s&&n.axes.forEach(c),t&&n.legends.forEach(d);for(f=0,m=a.rem.length;m>f;++f)n=a.rem[f],q._children[n._id].forEach(e),delete q._children[n._id];return a}function f(a,b){var c=this,d=null;if(2===arguments.length)return c._scales[a]=b,b;for(;null==d&&(d=c._scales[a],c=c.mark?c.mark.group:c._parent););return d}function g(a,b){q.debug(a,["building group",b._id]),b._scales=b._scales||{},b.scale=f.bind(b),b.items=b.items||[],this._children[b._id]=this._children[b._id]||[],b.axes=b.axes||[],b.axisItems=b.axisItems||[],b.legends=b.legends||[],b.legendItems=b.legendItems||[],this._graph.group(b._id,b)}function h(a,b){q.debug(a,["building children marks #"+b._id]);var c,e,f,g,h,i,j=this._def.marks;for(g=0,h=j.length;h>g;++g)c=j[g],e=c.from||{},f=b.datum._facetID,b.items[g]={group:b,_scaleRefs:{}},i=c.type===v.GROUP?new d:new r,i.init(this._graph,c,b.items[g],this,b._id,f),this._children[b._id].push({builder:i,from:e.data||(e.mark?"vg_"+b._id+"_"+e.mark:f),type:v.MARK})}function i(a,b){var c=b.axes,e=b.axisItems,f=this;t(this._graph,this._def.axes,c,b),c.forEach(function(a,c){var g=f._def.axes[c].scale,h=a.def(),i=null;e[c]={group:b,axis:a,layer:h.layer},i=h.type===v.GROUP?new d:new r,i.init(f._graph,h,e[c],f).dependency(n.SCALES,g),f._children[b._id].push({builder:i,type:v.AXIS,scale:g})})}function j(a,b){var c=b.legends,e=b.legendItems,f=this;u(this._graph,this._def.legends,c,b),c.forEach(function(a,c){var g=a.size()||a.shape()||a.fill()||a.stroke()||a.opacity(),h=a.def(),i=null;e[c]={group:b,legend:a},i=h.type===v.GROUP?new d:new r,i.init(f._graph,h,e[c],f).dependency(n.SCALES,g),f._children[b._id].push({builder:i,type:v.LEGEND,scale:g})})}var k=a("datalib"),l=a("vega-dataflow"),m=l.Node,n=l.Dependencies,o=l.Tuple,p=l.Collector,q=a("vega-logging"),r=a("./Builder"),s=a("./Scale"),t=a("../parse/axes"),u=a("../parse/legends"),v=d.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},w=d.prototype=new r;w.init=function(a,b){var c,d=this;this._scaler=new m(a),(b.scales||[]).forEach(function(b){b=d.scale(c=b.name,new s(a,b,d)),d.scale(c+":prev",b),d._scaler.addListener(b)}),this._recursor=new m(a),this._recursor.evaluate=e.bind(this);var f=(b.axes||[]).reduce(function(a,b){return a[b.scale]=1,a},{});return f=(b.legends||[]).reduce(function(a,b){return a[b.size||b.shape||b.fill||b.stroke||b.opacity]=1,a},f),this._recursor.dependency(n.SCALES,k.keys(f)),this._collector=new p(a),r.prototype.init.apply(this,arguments)},w.evaluate=function(){var a=r.prototype.evaluate.apply(this,arguments),b=this._graph,c=this,d=this._scales,e=this._mark.items;if(a.mod.length<e.length){var f=k.keys(d).some(function(b){return d[b].reevaluate(a)});!f&&this._def.axes&&(f=this._def.axes.reduce(function(b,c){return b||a.scales[c.scale]},!1)),!f&&this._def.legends&&(f=this._def.legends.reduce(function(b,c){return b||a.scales[c.size||c.shape||c.fill||c.stroke]},!1)),f&&(a.mod=a.mod.concat(o.idFilter(e,a.mod,a.add,a.rem)))}return a.add.forEach(function(b){g.call(c,a,b)}),a.rem.forEach(function(a){b.group(a._id,null)}),a},w.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},w.disconnect=function(){var a=this;return k.keys(a._children).forEach(function(b){a._children[b].forEach(function(b){a._recursor.removeListener(b.builder),b.builder.disconnect()})}),a._children={},r.prototype.disconnect.call(this)},w.child=function(a,b){for(var c,d=this._children[b],e=0,f=d.length;f>e&&(c=d[e],c.type!=v.MARK||c.builder._def.name!=a);++e);return c.builder},b.exports=d},{"../parse/axes":93,"../parse/legends":98,"./Builder":110,"./Scale":113,datalib:26,"vega-dataflow":41,"vega-logging":48}],113:[function(a,b,c){(function(c){function d(a,b,c){return this._def=b,this._parent=c,this._updated=!1,x.prototype.init.call(this,a).reflows(!0)}function e(a){var b=this._def.name,c=b+":prev",d=f.call(this,a.scale(b)),e=d.type===B.ORDINAL?g:i,h=s.call(this,a);return e.call(this,d,h,a),a.scale(b,d),a.scale(c,a.scale(c)||d),d}function f(a){var b=this._graph.config(),c=this._def.type||B.LINEAR;if(!a||c!==a.type){var d=b.scale[c]||t.scale[c];if(!d)throw Error("Unrecognized scale type: "+c);(a=d()).type=a.type||c,a.scaleName=this._def.name,a._prev={}}return a}function g(a,b,c){var d,e,f=this._def,g=a._prev,i=!1,j=q.call(this,f.padding)||0,k=null==f.outerPadding?j:q.call(this,f.outerPadding),l=f.points&&q.call(this,f.points),m=q.call(this,f.round)||null==f.round,n=!0;if(u.isObject(f.range)&&!u.isArray(f.range)&&(i=!0,b=p.call(this,C.RANGE,f.range,a,c)),d=p.call(this,C.DOMAIN,f.domain,a,c),d&&!u.equal(g.domain,d)&&(a.domain(d),g.domain=d,this._updated=!0),!u.equal(g.range,b)){if(f.bandSize){var o,r=q.call(this,f.bandSize),s=d.length,t=f.points?j*r:j*r*(s-1)+2*k;b[0]>b[1]?(o=b[1]||0,b=[o+(r*s+t),o]):(o=b[0]||0,b=[o,o+(r*s+t)]),f.reverse&&(b=b.reverse())}e="string"==typeof b[0],e||b.length>2||1===b.length||i?(a.range(b),n=!1):l&&m?a.rangeRoundPoints(b,j):l?a.rangePoints(b,j):m?a.rangeRoundBands(b,j,k):a.rangeBands(b,j,k),g.range=b,this._updated=!0}!a.invert&&n&&h(a)}function h(a){a.invert=function(b,c){var d=a.range(),e=d[0]<d[1],f=e?F:G;if(1===arguments.length){if(!u.isNumber(b))throw Error("Ordinal scale inversion is only supported for numeric input ("+b+").");return a.domain()[f(d,b)]}if(2===arguments.length){if(!u.isNumber(b)||!u.isNumber(c))throw Error("Extents to ordinal invert are not numbers ("+b+", "+c+").");var g,h=a.domain(),i=f(d,b),j=f(d,c),k=d.length-1;return i>j&&(g=i,i=j,j=i),0>i&&(i=0),j>k&&(j=k),(e?u.range(i,j+1):u.range(j,i-1,-1)).map(function(a){return h[a]})}}}function i(a,b,c){var d,e,f=this._def,g=a._prev,h=q.call(this,f.round),i=q.call(this,f.exponent),j=q.call(this,f.clamp),k=q.call(this,f.nice);d=f.type===B.QUANTILE?p.call(this,C.DOMAIN,f.domain,a,c):r.call(this,a,c),d&&!u.equal(g.domain,d)&&(a.domain(d),g.domain=d,this._updated=!0),"height"===q.call(this,f.range)&&(b=b.reverse()),b&&!u.equal(g.range,b)&&(a[h&&a.rangeRound?"rangeRound":"range"](b),g.range=b,this._updated=!0),i&&f.type===B.POWER&&a.exponent(i),j&&a.clamp(!0),k&&(f.type===B.TIME?(e=t.time[k],e||w.error("Unrecognized interval: "+e),a.nice(e)):a.nice())}function j(a){return a.type===B.ORDINAL||a.type===B.QUANTILE}function k(a){return a.fields||u.array(a)}function l(a){return a.some(function(a){return a.data?a.data&&u.array(a.field).some(function(a){return a.parent}):!0})}function m(a,b){return u.array(a.field).map(function(a){return a.parent?u.accessor(a.parent)(b.datum):a})}function n(a,b){var c=k(a);return 1==c.length&&1==u.array(c[0].field).length?z.TYPES.TUPLE:j(b)&&u.isObject(a.sort)?z.TYPES.MULTI:z.TYPES.VALUE}function o(a,b,c,d){var e=k(b),f=l(e),g=n(b,c),h=j(c),i=b.sort,o="_"+a,p=m(e[0],d);if(c[o]||this[o])return c[o]||this[o];var q,r,s=new z(this._graph).type(g);return f?c[o]=s:this[o]=s,h?g===z.TYPES.VALUE?(q=[{name:C.GROUPBY,get:u.identity}],r={"*":C.COUNT}):g===z.TYPES.TUPLE?(q=[{name:C.GROUPBY,get:u.$(p[0])}],r=u.isObject(i)?[{field:C.VALUE,get:u.$(i.field),ops:[i.op]}]:{"*":C.COUNT}):(q=C.GROUPBY,r=[{field:C.VALUE,ops:[i.op]}]):(q=[],r=[{field:C.VALUE,get:g==z.TYPES.TUPLE?u.$(p[0]):u.identity,ops:[C.MIN,C.MAX],as:[C.MIN,C.MAX]}]),s.param("groupby",q).param("summarize",r),s._lastUpdate=-1,s}function p(a,b,c,d){function e(a){x.dependency(y.SIGNALS,a)}if(null==b)return[];if(u.isArray(b))return b.map(q.bind(this));var f,g,h,i,p,r,s,t,v,w,x=this,A=this._graph,B=k(b),D=l(B),E=n(b,c),F=o.apply(this,arguments),G=b.sort,H=j(c);if(D||!D&&F._lastUpdate<this._stamp){for(f=0,g=B.length;g>f;++f)if(p=B[f],v=p.data||d.datum._facetID,t=A.data(v).last(),!(t.stamp<=this._stamp)){for(r=m(p,d),h=0,i=r.length;i>h;++h)s=r[h],E===z.TYPES.VALUE?F.accessors(null,s):E===z.TYPES.MULTI&&F.accessors(s,p.sort||G.field),F.evaluate(t);this.dependency(y.DATA,v),F.dependency(y.SIGNALS).forEach(e)}F._lastUpdate=this._stamp,t=F.aggr().result(),H?(u.isObject(G)?(w=G.op+"_"+C.VALUE,w=u.comparator(w)):G===!0&&(w=u.comparator(C.GROUPBY)),w&&(t=t.sort(w)),F._values=t.map(function(a){return a[C.GROUPBY]})):(t=t[0],F._values=u.isValid(t)?[t[C.MIN],t[C.MAX]]:[])}return F._values}function q(a){if(!a||!a.signal)return a;var b,c=a.signal;return this.dependency(y.SIGNALS,(b=u.field(c))[0]),this._graph.signalRef(b)}function r(a,b){var c,d,e=this._def,f=[null,null];return void 0!==e.domain&&(f=u.isObject(e.domain)?p.call(this,C.DOMAIN,e.domain,a,b):f),d=f.length-1,void 0!==e.domainMin&&(u.isObject(e.domainMin)?e.domainMin.signal?f[0]=u.isValid(c=q.call(this,e.domainMin))?c:f[0]:f[0]=p.call(this,C.DOMAIN+C.MIN,e.domainMin,a,b)[0]:f[0]=e.domainMin),void 0!==e.domainMax&&(u.isObject(e.domainMax)?e.domainMax.signal?f[d]=u.isValid(c=q.call(this,e.domainMax))?c:f[d]:f[d]=p.call(this,C.DOMAIN+C.MAX,e.domainMax,a,b)[1]:f[d]=e.domainMax),e.type===B.LOG||e.type===B.TIME||!e.zero&&void 0!==e.zero||(f[0]=Math.min(0,f[0]),f[d]=Math.max(0,f[d])),f}function s(a){var b=this._def,c=this._graph.config(),d=q.call(this,b.range),e=[null,null];if(void 0!==d)if("string"==typeof d)if(A[d])e=[0,a[d]];else{if(!c.range[d])return w.error("Unrecogized range: "+d),e;e=c.range[d]}else if(u.isArray(d))e=u.duplicate(d).map(q.bind(this));else{if(u.isObject(d))return null;e=[0,d]}if(void 0!==b.rangeMin&&(e[0]=b.rangeMin.signal?q.call(this,b.rangeMin):b.rangeMin),void 0!==b.rangeMax&&(e[e.length-1]=b.rangeMax.signal?q.call(this,b.rangeMax):b.rangeMax),void 0!==b.reverse){var f=q.call(this,b.reverse);u.isObject(f)&&(f=u.accessor(f.field)(a.datum)),f&&(e=e.reverse())}return e}var t="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,u=a("datalib"),v=a("vega-dataflow"),w=a("vega-logging"),x=v.Node,y=v.Dependencies,z=a("../transforms/Aggregate"),A={width:1,height:1},B={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},C={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"},D=d.prototype=new x;D.evaluate=function(a){var b=this,c=function(a){e.call(b,a)};return this._updated=!1,a.add.forEach(c),a.mod.forEach(c),this._updated&&(a.scales[this._def.name]=1,w.debug(a,["scale",this._def.name])),v.ChangeSet.create(a,!0)},D.dependency=function(a,b){if(2==arguments.length){var c=a===y.DATA?"data":"signal";b=u.array(b);for(var d=0,e=b.length;e>d;++d)this._graph[c](b[d]).addListener(this._parent)}return x.prototype.dependency.call(this,a,b)};var E=t.bisector(u.numcmp).right,F=function(a,b){return E(a,b)-1},G=t.bisector(function(a,b){return-1*u.numcmp(a,b)}).left;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transforms/Aggregate":118,datalib:26,"vega-dataflow":41,"vega-logging":48}],114:[function(a,b,c){(function(c){function d(a,b){this.duration=a||500,this.ease=b&&f.ease(b)||f.ease("cubic-in-out"),this.updates={next:null}}function e(a){for(var b,c,d,e,f,h,j=this.updates,k=j,l=k.next,m=this.duration,n=!0;null!=l;k=l,l=k.next)if(b=l.item,c=b.delay||0,d=(a-c)/m,0>d)n=!1;else{for(d>1&&(d=1),e=l.ease(d),f=0,h=l.length;h>f;++f)b[l[f].property]=l[f](e);b.touch(),g.item(b),1===d?(l.remove&&(b.status=i.EXIT,b.remove()),k.next=l.next,l=k):n=!1}return this.callback(),n}var f="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,g=a("vega-scenegraph").bound,h=a("vega-dataflow").Tuple,i=a("./Builder").STATUS,j=d.prototype,k={text:1,url:1};j.interpolate=function(a,b){var c,d,e,g,j=null;for(c in b)d=a[c],e=b[c],d!==e&&(k[c]||void 0===d?h.set(a,c,e):"number"!=typeof d||isFinite(d)?(g=f.interpolate(d,e),g.property=c,(j||(j=[])).push(g)):h.set(a,c,e));return null===j&&a.status===i.EXIT&&(j=[]),null!=j&&(j.item=a,j.ease=a.mark.ease||this.ease,j.next=this.updates.next,this.updates.next=j),this},j.start=function(a){for(var b=this,c=b.updates,d=c.next;null!=d;c=d,d=c.next)d.item.status===i.EXIT&&(d.item.status=i.UPDATE,d.remove=!0);b.callback=a,f.timer(function(a){return e.call(b,a)})},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Builder":110,"vega-dataflow":41,"vega-scenegraph":49}],115:[function(a,b,c){function d(a,b){function c(){D.type=null}function d(a){return{data:a}}function f(a){var b=L||(z.ticks?z.ticks(P):z.domain()),c=e(z,b,O).map(d);return b=b.map(function(b){return b=d(b),b.label=a(b.data),b}),[b,c]}function x(a){var c=a.orient,d=a.marks[5].properties.update,e=d.encode,f=b.titleOffsetAutoMin,g=b.titleOffsetAutoMax,h=b.titleOffsetAutoMargin;d.encode=function(a,b,d,i,j,k){var l=e.call(e,a,b,d,i,j,k),m="bottom"===c||"top"===c?"y":"x";if(null!=U[m])return l;u.clear().union(b.items[3].bounds).union(b.items[4].bounds);var n=d?{}:a,o="left"===c||"right"===c?"width":"height",p="top"===c||"left"===c?-1:1,q=~~(u[o]()+a.fontSize/2+h);return r.set(n,m,p*Math.min(Math.max(f,q),g)),d&&d.interpolate(a,n),!0}}function y(c){var d,e,f;c.type===v?(d={scale:c.scaleName,offset:.5+c.rangeBand()/2},e=d):(d={scale:c.scaleName,offset:.5},e={scale:c.scaleName+":prev",offset:.5}),f=g(c),q.extend(W.gridLines,m(b)),q.extend(W.majorTicks,m(b)),q.extend(W.minorTicks,m(b)),q.extend(W.tickLabels,n(b)),q.extend(W.domain,p(b)),q.extend(W.title,o(b)),W.gridLines.properties.enter.stroke={value:b.gridColor},W.gridLines.properties.enter.strokeOpacity={value:b.gridOpacity},W.gridLines.properties.enter.strokeWidth={value:b.gridWidth},W.gridLines.properties.enter.strokeDash={value:b.gridDash},i(A,W.gridLines,e,d,1/0,c,b,B),i(A,W.majorTicks,e,d,H,c,b),i(A,W.minorTicks,e,d,I,c,b),h(A,W.tickLabels,e,d,H,K),k(A,W.domain,f,J),j(A,W.title,f,+C||-1),q.extend(W.gridLines.properties.update,Q),q.extend(W.majorTicks.properties.update,S),q.extend(W.minorTicks.properties.update,T),q.extend(W.tickLabels.properties.update,R),q.extend(W.domain.properties.update,V),q.extend(W.title.properties.update,U);var r=[W.gridLines,W.majorTicks,W.minorTicks,W.tickLabels,W.domain,W.title];q.extend(D,{type:"group",interactive:!1,properties:{enter:{encode:l,scales:[c.scaleName],signals:[],data:[]},update:{encode:l,scales:[c.scaleName],signals:[],data:[]}}}),D.marks=r.map(function(b){return s(a,b)})}var z,A=b.orient,B=0,C=b.titleOffset,D={},E="front",F=!1,G=null,H=b.tickSize,I=b.tickSize,J=b.tickSize,K=b.tickPadding||b.padding,L=null,M=null,N=null,O=0,P=b.ticks,Q={},R={},S={},T={},U={},V={},W={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},X={};return X.def=function(){D.type||y(z);var a=t.getTickFormat(z,P,N,M),b=f(a),c=G?[G].map(d):[];return D.marks[0].from=function(){return F?b[0]:[]},D.marks[1].from=function(){return b[0]},D.marks[2].from=function(){return b[1]},D.marks[3].from=D.marks[1].from,D.marks[4].from=function(){return[1]},D.marks[5].from=function(){return c},D.offset=B,D.orient=A,D.layer=E,"auto"===C&&x(D),D},X.scale=function(a){return arguments.length?(z!==a&&(z=a,c()),X):z},X.orient=function(a){return arguments.length?(A!==a&&(A=a in w?a+"":b.orient,c()),X):A},X.title=function(a){return arguments.length?(G!==a&&(G=a,c()),X):G},X.tickCount=function(a){return arguments.length?(P=a,X):P},X.tickValues=function(a){return arguments.length?(L=a,X):L},X.tickFormat=function(a){return arguments.length?(M!==a&&(M=a,c()),X):M},X.tickFormatType=function(a){return arguments.length?(N!==a&&(N=a,c()),X):N},X.tickSize=function(a,b){if(!arguments.length)return H;var d=arguments.length-1,e=+a,f=d>1?+b:H,g=d>0?+arguments[d]:H;return(H!==e||I!==f||J!==g)&&c(),H=e,I=f,J=g,X},X.tickSubdivide=function(a){return arguments.length?(O=+a,X):O},X.offset=function(a){return arguments.length?(B=q.isObject(a)?a:+a,X):B},X.tickPadding=function(a){return arguments.length?(K!==+a&&(K=+a,c()),X):K},X.titleOffset=function(a){return arguments.length?(C!==a&&(C=a,c()),X):C},X.layer=function(a){return arguments.length?(E!==a&&(E=a,c()),X):E},X.grid=function(a){return arguments.length?(F!==a&&(F=a,c()),X):F},X.gridLineProperties=function(a){return arguments.length?(Q!==a&&(Q=a),X):Q},X.majorTickProperties=function(a){return arguments.length?(S!==a&&(S=a),X):S},X.minorTickProperties=function(a){return arguments.length?(T!==a&&(T=a),X):T},X.tickLabelProperties=function(a){return arguments.length?(R!==a&&(R=a),X):R},X.titleProperties=function(a){return arguments.length?(U!==a&&(U=a),X):U},X.domainProperties=function(a){return arguments.length?(V!==a&&(V=a),X):V},X.reset=function(){return c(),X},X}function e(a,b,c){var d=[];if(c&&b.length>1){for(var e,g,h=f(a.domain()),i=-1,j=b.length,k=(b[1]-b[0])/++c;++i<j;)for(e=c;--e>0;)(g=+b[i]-e*k)>=h[0]&&d.push(g);for(--i,e=0;++e<c&&(g=+b[i]+e*k)<h[1];)d.push(g)}return d}function f(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function g(a){return a.rangeExtent?a.rangeExtent():f(a.range())}function h(a,b,c,d,e,f){e=Math.max(e,0)+f,("left"===a||"top"===a)&&(e*=-1),"top"===a||"bottom"===a?(q.extend(b.properties.enter,{x:c,y:{value:e}}),q.extend(b.properties.update,{x:d,y:{value:e},align:{value:"center"},baseline:{value:y[a]}})):(q.extend(b.properties.enter,{x:{value:e},y:c}),q.extend(b.properties.update,{x:{value:e},y:d,align:{value:x[a]},baseline:{value:"middle"}}))}function i(a,b,c,d,e,f,g,h){var i="left"===a||"top"===a?-1:1;if(e=e===1/0?"top"===a||"bottom"===a?{field:{group:"height",level:2},mult:-i,offset:h*-i}:{field:{group:"width",level:2},mult:-i,offset:h*-i}:{value:i*e,offset:h},"between"===g.tickPlacement&&f.type===v){var j=f.range(),k=.5+(f.rangeBand()||(j[1]-j[0])/2);d=c=q.duplicate(d),d.offset=c.offset=k}"top"===a||"bottom"===a?(q.extend(b.properties.enter,{x:c,y:{value:0},y2:e}),q.extend(b.properties.update,{x:d,y:{value:0},y2:e}),q.extend(b.properties.exit,{x:d})):(q.extend(b.properties.enter,{x:{value:0},x2:e,y:c}),q.extend(b.properties.update,{x:{value:0},x2:e,y:d}),q.extend(b.properties.exit,{y:d}))}function j(a,b,c,d){var e=b.properties.update,f=~~((c[0]+c[1])/2),g="top"===a||"left"===a?-1:1;"bottom"===a||"top"===a?(e.x={value:f},e.angle={value:0},d>=0&&(e.y={value:g*d})):(e.y={value:f},e.angle={value:"left"===a?-90:90},d>=0&&(e.x={value:g*d}))}function k(a,b,c,d){var e;("top"===a||"left"===a)&&(d=-1*d),e="bottom"===a||"top"===a?"M"+c[0]+","+d+"V0H"+c[1]+"V"+d:"M"+d+","+c[0]+"H0V"+c[1]+"H"+d,b.properties.update.path={value:e}}function l(a,b,c){var d=c?{}:a,e=a.mark.def.offset,f=a.mark.def.orient,g=b.width,h=b.height;if(q.isArray(e)){var i=e[0],j=e[1];switch(f){case"left":r.set(d,"x",-i),r.set(d,"y",j);break;case"right":r.set(d,"x",g+i),r.set(d,"y",j);break;case"bottom":r.set(d,"x",i),r.set(d,"y",h+j);break;case"top":r.set(d,"x",i),r.set(d,"y",-j);break;default:r.set(d,"x",i),r.set(d,"y",j)}}else switch(q.isObject(e)&&(e=-b.scale(e.scale)(e.value)),f){case"left":r.set(d,"x",-e),r.set(d,"y",0);break;case"right":r.set(d,"x",g+e),r.set(d,"y",0);break;case"bottom":r.set(d,"x",0),r.set(d,"y",h+e);break;case"top":r.set(d,"x",0),r.set(d,"y",-e);break;default:r.set(d,"x",0),r.set(d,"y",0)}return c&&c.interpolate(a,d),!0}function m(a){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:a.tickColor},strokeWidth:{value:a.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function n(a){return{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:a.tickLabelColor},font:{value:a.tickLabelFont},fontSize:{value:a.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function o(a){return{type:"text",interactive:!0,properties:{enter:{font:{value:a.titleFont},fontSize:{value:a.titleFontSize},fontWeight:{value:a.titleFontWeight},fill:{value:a.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function p(a){return{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:a.axisColor},strokeWidth:{value:a.axisWidth
}},update:{}}}}var q=a("datalib"),r=a("vega-dataflow").Tuple,s=a("../parse/mark"),t=a("../util"),u=new(a("vega-scenegraph").Bounds),v="ordinal",w={top:1,right:1,bottom:1,left:1},x={bottom:"center",top:"center",left:"right",right:"left"},y={bottom:"top",top:"bottom",left:"middle",right:"middle"};b.exports=d},{"../parse/mark":99,"../util":148,datalib:26,"vega-dataflow":41,"vega-scenegraph":49}],116:[function(a,b,c){(function(c){function d(a){function b(){S.type=null}function c(a,b){return{data:a,index:b}}function d(a){return"ordinal"===a||"quantize"===a||"quantile"===a||"threshold"===a}function s(a){var b,d,e,f=t(w,x,y,z,A),g=(null==C?a.ticks?a.ticks.apply(a,K):a.domain():C).map(c),h=q.getTickFormat(a,g.length,E,D),i=5,j=l.range(g.length);w?(d=g.map(function(a){return Math.sqrt(w(a.data))}),e=l.max(d),d=d.reduce(function(a,b,c,d){return c>0&&(a[c]=a[c-1]+d[c-1]/2+i),a[c]+=b/2,a},[0]).map(Math.round)):(e=Math.round(Math.sqrt(G.symbolSize)),d=B||(b=P.fontSize)&&b.value+i||G.labelFontSize+i,d=j.map(function(a,b){return Math.round(e/2+b*d)}));var k,n=J;F&&(k=O.fontSize,n+=5+(k&&k.value||G.titleFontSize));for(var o=0,p=d.length;p>o;++o)d[o]+=n;f.scales=f.scales||[{}],m.extend(f.scales[0],{name:"legend",type:"ordinal",points:!0,domain:j,range:d});var r=(F?[F]:[]).map(c);return g.forEach(function(a){a.label=h(a.data),a.offset=e}),f.marks[0].from=function(){return r},f.marks[1].from=function(){return g},f.marks[2].from=f.marks[1].from,f}function t(b,c,d,j,k){var l=m.extend(Q.titles,g(G)),n=m.extend(Q.symbols,h(G)),q=m.extend(Q.labels,i(G));return f(n,b,c,d,j,k),m.extend(l.properties.update,O),m.extend(n.properties.update,M),m.extend(q.properties.update,P),l.properties.enter.x.value+=J,l.properties.enter.y.value+=J,q.properties.enter.x.offset+=J+1,n.properties.enter.x.offset=J+1,q.properties.update.x.offset+=J+1,n.properties.update.x.offset=J+1,m.extend(S,{type:"group",interactive:!1,properties:{enter:o(a,"group",L),legendPosition:{encode:e.bind(null,G),signals:[],scales:[],data:[],fields:[]}}}),S.marks=[l,n,q].map(function(b){return p(a,b)}),S}function u(a){var b=v(a),d=a.domain(),e=(null==C?d:C).map(c),f=N.width&&N.width.value||G.gradientWidth,g=q.getTickFormat(a,e.length,E,D);b.scales=b.scales||[{}];var h=m.extend(b.scales[0],{name:"legend",type:a.type,round:!0,zero:!1,domain:[d[0],d[d.length-1]],range:[J,f+J]});"pow"===a.type&&(h.exponent=a.exponent());var i=(F?[F]:[]).map(c);return e.forEach(function(a,b){a.label=g(a.data),a.align=b==e.length-1?"right":0===b?"left":"center"}),b.marks[0].from=function(){return i},b.marks[1].from=function(){return[1]},b.marks[2].from=function(){return e},b}function v(b){var c=m.extend(Q.titles,g(G)),d=m.extend(Q.gradient,j(G)),f=m.extend(Q.labels,k(G)),h=new n,i=b.domain(),l=i[0],q=i[i.length-1],r=b.copy().domain([l,q]).range([0,1]),s="linear"!==b.type&&b.ticks?b.ticks.call(b,15):i;l!==s[0]&&s.unshift(l),q!==s[s.length-1]&&s.push(q);for(var t=0,u=s.length;u>t;++t)h.stop(r(s[t]),b(s[t]));d.properties.enter.fill={value:h},m.extend(c.properties.update,O),m.extend(d.properties.update,N),m.extend(f.properties.update,P);var v=d.properties,w=N.height,x=w&&w.value||v.enter.height.value;if(f.properties.enter.y.value=x,f.properties.update.y.value=x,F){var y=c.properties,z=O.fontSize,A=4+(z&&z.value||y.enter.fontSize.value);d.properties.enter.y.value+=A,f.properties.enter.y.value+=A,d.properties.update.y.value+=A,f.properties.update.y.value+=A}return c.properties.enter.x.value+=J,c.properties.enter.y.value+=J,d.properties.enter.x.value+=J,d.properties.enter.y.value+=J,f.properties.enter.y.value+=J,d.properties.update.x.value+=J,d.properties.update.y.value+=J,f.properties.update.y.value+=J,m.extend(S,{type:"group",interactive:!1,properties:{enter:o(a,"group",L),legendPosition:{encode:e.bind(null,G),signals:[],scales:[],data:[],fields:[]}}}),S.marks=[c,d,f].map(function(b){return p(a,b)}),S}var w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=a.config().legend,H=G.orient,I=G.offset,J=G.padding,K=[5],L={},M={},N={},O={},P={},Q={titles:{},symbols:{},labels:{},gradient:{}},R={},S={};return R.def=function(){var a=w||x||y||z||A;return S.type||(S=a!==y&&a!==z||d(a.type)?s(a):u(a)),S.orient=H,S.offset=I,S.padding=J,S.margin=G.margin,S},R.size=function(a){return arguments.length?(w!==a&&(w=a,b()),R):w},R.shape=function(a){return arguments.length?(x!==a&&(x=a,b()),R):x},R.fill=function(a){return arguments.length?(y!==a&&(y=a,b()),R):y},R.stroke=function(a){return arguments.length?(z!==a&&(z=a,b()),R):z},R.opacity=function(a){return arguments.length?(A!==a&&(A=a,b()),R):A},R.title=function(a){return arguments.length?(F!==a&&(F=a,b()),R):F},R.format=function(a){return arguments.length?(D!==a&&(D=a,b()),R):D},R.formatType=function(a){return arguments.length?(E!==a&&(E=a,b()),R):E},R.spacing=function(a){return arguments.length?(B!==+a&&(B=+a,b()),R):B},R.orient=function(a){return arguments.length?(H=a in r?a+"":G.orient,R):H},R.offset=function(a){return arguments.length?(I=+a,R):I},R.values=function(a){return arguments.length?(C=a,R):C},R.legendProperties=function(a){return arguments.length?(L=a,R):L},R.symbolProperties=function(a){return arguments.length?(M=a,R):M},R.gradientProperties=function(a){return arguments.length?(N=a,R):N},R.labelProperties=function(a){return arguments.length?(P=a,R):P},R.titleProperties=function(a){return arguments.length?(O=a,R):O},R.reset=function(){return b(),R},R}function e(a,b,c,d,e,f,g){var h,i=d?{}:b,j=b.mark.def,k=j.offset,l=j.orient,m=2*j.padding,n="left"===l?0:c.width,o=~~b.bounds.width()+(b.width?0:m),p=~~b.bounds.height()+(b.height?0:m),q=c._legendPositions||(c._legendPositions={right:.5,left:.5});if(i.x=.5,i.y=.5,i.width=o,i.height=p,"left"===l||"right"===l){i.y=q[l],q[l]+=p+j.margin;var s=c.axes,t=c.axisItems,u=r[l];for(h=0;h<s.length;++h)s[h].orient()===l&&(n=Math.max(n,Math.abs(t[h].bounds[u])))}switch(l){case"left":i.x-=n+k+o;break;case"right":i.x+=n+k;break;case"top-left":i.x+=k,i.y+=k;break;case"top-right":i.x+=c.width-o-k,i.y+=k;break;case"bottom-left":i.x+=k,i.y+=c.height-p-k;break;case"bottom-right":i.x+=c.width-o-k,i.y+=c.height-p-k}var v=a.baseline,w=0;for(h=0;h<c.legendItems.length;h++){var x=c.legendItems[h];w+=x.bounds.height()+(b.height?0:m)}"middle"===v?i.y+=k+c.height/2-w/2:"bottom"===v&&(i.y+=k+c.height-w),d&&d.interpolate(b,i);var y=b.mark.def.properties.enter.encode;return y.call(y,b,c,d,e,f,g),!0}function f(a,b,c,d,e,f){var g=a.properties.enter,h=a.properties.update;b&&(g.size=h.size={scale:b.scaleName,field:"data"}),c&&(g.shape=h.shape={scale:c.scaleName,field:"data"}),d&&(g.fill=h.fill={scale:d.scaleName,field:"data"}),e&&(g.stroke=h.stroke={scale:e.scaleName,field:"data"}),f&&(h.opacity={scale:f.scaleName,field:"data"})}function g(a){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:a.titleColor},font:{value:a.titleFont},fontSize:{value:a.titleFontSize},fontWeight:{value:a.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function h(a){return{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:a.symbolShape},size:{value:a.symbolSize},stroke:{value:a.symbolColor},strokeWidth:{value:a.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function i(a){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:a.labelColor},font:{value:a.labelFont},fontSize:{value:a.labelFontSize},align:{value:a.labelAlign},baseline:{value:a.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function j(a){return{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:a.gradientWidth},height:{value:a.gradientHeight},stroke:{value:a.gradientStrokeColor},strokeWidth:{value:a.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function k(a){return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:a.labelColor},font:{value:a.labelFont},fontSize:{value:a.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}var l="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,m=a("datalib"),n=a("vega-scenegraph").Gradient,o=a("../parse/properties"),p=a("../parse/mark"),q=a("../util"),r={left:"x1",right:"x2","top-left":"x1","top-right":"x2","bottom-left":"x1","bottom-right":"x2"};b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/mark":99,"../parse/properties":104,"../util":148,datalib:26,"vega-scenegraph":49}],117:[function(a,b,c){b.exports=function d(a,b){var c,e,f,g,h;if(b(a))return!0;var i=["items","axisItems","legendItems"];for(f=0,g=i.length;g>f;++f)if(h=a[i[f]])for(c=0,e=h.length;e>c;++c)if(d(h[c],b))return!0}},{}],118:[function(a,b,c){function d(a){return l.prototype.init.call(this,a),l.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(a){function b(a){a.signal&&(j[a.signal]=1)}var c,d,e,g,h,i,j={},l=this._transform;if(!f.isArray(g=a)){g=[];for(h in a)i=f.array(a[h]),g.push({field:h,ops:i})}for(c=0,d=g.length;d>c;++c)e=g[c],e.field.signal&&(j[e.field.signal]=1),f.array(e.ops).forEach(b),f.array(e.as).forEach(b);return l._fields=g,l._aggr=null,l.dependency(k.SIGNALS,f.keys(j)),l}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=o.TUPLE,this._acc={groupby:f["true"],value:f["true"]},this.router(!0).produces(!0)}function e(a){var b,c,d,e,f,g,h,i=[];for(f=a._dims,b=0,c=f.length;c>b;++b)i.push(f[b].name);for(g=a._aggr,b=0,c=g.length;c>b;++b)for(h=g[b].measures.fields,d=0,e=h.length;e>d;++d)i.push(h[d]);return i}var f=a("datalib"),g=a("vega-dataflow"),h=a("vega-logging"),i=g.ChangeSet,j=g.Tuple,k=g.Dependencies,l=a("./Transform"),m=a("./Facetor"),n=d.prototype=Object.create(l.prototype);n.constructor=d;var o=d.TYPES={VALUE:1,TUPLE:2,MULTI:3};d.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],n.type=function(a){return this._type=a,this},n.accessors=function(a,b){var c=this._acc;c.groupby=f.$(a)||f["true"],c.value=f.$(b)||f["true"]},n.aggr=function(){if(this._aggr)return this._aggr;var a=this._graph,b=!1,c=[],d=this.param("groupby").field,g=function(b){return b.signal?a.signalRef(b.signal):b},h=this._fields.map(function(a){var d={name:g(a.field),as:f.array(a.as),ops:f.array(g(a.ops)).map(g),get:a.get};return b=b||null!=d.get,c.push(d.name),d});d.forEach(function(a){a.get&&(b=!0),c.push(a.name||a)}),this._args=b||!h.length?null:c,h.length||(h={"*":"values"});var i=this._aggr=(new m).groupby(d).stream(!0).summarize(h);return this._out=e(i),this._type!==o.VALUE&&i.key("_id"),i},n.transform=function(a,b){h.debug(a,["aggregate"]);var c,d,e,f,g,k=i.create(a),l=this.aggr(),m=this._out,n=this._args,p=!0,q=j.prev;if(b&&(k.rem.push.apply(k.rem,l.result()),l.clear(),this._aggr=null,l=this.aggr()),this._type===o.TUPLE)c=function(a){l._add(a),j.prev_init(a)},d=function(a){l._rem(q(a))},e=function(a){l._mod(a,q(a))},f=function(a){l._markMod(a,q(a))};else{var r=this._acc.groupby,s=this._acc.value,t=this._type===o.VALUE?s:function(a){return{_id:a._id,groupby:r(a),value:s(a)}};c=function(a){l._add(t(a)),j.prev_init(a)},d=function(a){l._rem(t(q(a)))},e=function(a){l._mod(t(a),t(q(a)))},f=function(a){l._mark(t(a),t(q(a)))}}if(a.add.forEach(c),b)a.mod.forEach(c);else{if(a.rem.forEach(d),n)for(g=0,p=!1;g<n.length;++g)if(a.fields[n[g]]){p=!0;break}a.mod.forEach(p?e:f)}for(g=0;g<m.length;++g)k.fields[m[g]]=1;return l._input=a,l.changes(k)},b.exports=d},{"./Facetor":124,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],119:[function(a,b,c){function d(){this._collector=null}var e=a("./Transform").prototype,f=d.prototype=Object.create(e);f.constructor=d,f.init=function(a){return e.init.call(this,a),this.batch(!0)},f.transform=function(a,b){return this.batchTransform(a,this._collector.data(),b)},f.batchTransform=function(){},b.exports=d},{"./Transform":140}],120:[function(a,b,c){function d(a){return i.prototype.init.call(this,a),h.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value","default":10},maxbins:{type:"value","default":20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>","default":[5,2]}}),this._output={start:"bin_start",end:"bin_end",mid:"bin_mid"},this.mutates(!0)}var e=a("datalib"),f=a("vega-dataflow").Tuple,g=a("vega-logging"),h=a("./Transform"),i=a("./BatchTransform"),j=d.prototype=Object.create(i.prototype);j.constructor=d,j.extent=function(a){var b,c=[this.param("min"),this.param("max")];return(null==c[0]||null==c[1])&&(b=e.extent(a,this.param("field").accessor),null==c[0]&&(c[0]=b[0]),null==c[1]&&(c[1]=b[1])),c},j.batchTransform=function(a,b){function c(a){var b=l(a);b=null==b?null:n.start+o*~~((b-n.start)/o),f.set(a,h.start,b),f.set(a,h.end,b+o),f.set(a,h.mid,b+o/2)}g.debug(a,["binning"]);var d=this.extent(b),h=this._output,i=this.param("step"),j=this.param("steps"),k=this.param("minstep"),l=this.param("field").accessor,m={min:d[0],max:d[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};i&&(m.step=i),j&&(m.steps=j),k&&(m.minstep=k);var n=e.bins(m),o=n.step;return a.add.forEach(c),a.mod.forEach(c),a.rem.forEach(c),a.fields[h.start]=1,a.fields[h.end]=1,a.fields[h.mid]=1,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],121:[function(a,b,c){function d(a){return h.prototype.init.call(this,a),h.addParameters(this,{field:{type:"field","default":"data"},pattern:{type:"value","default":"[\\w']+"},"case":{type:"value","default":"lower"},stopwords:{type:"value","default":""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var e=a("vega-dataflow"),f=e.Tuple,g=a("vega-logging"),h=a("./Transform"),i=d.prototype=Object.create(h.prototype);i.constructor=d,i.transform=function(a,b){function c(a){return f.prev_init(a),e(a)}function d(a){return e(f.prev(a))}g.debug(a,["countpattern"]);var e=this.param("field").accessor,h=this.param("pattern"),i=this.param("stopwords"),j=!1;return this._stop!==i&&(this._stop=i,this._stop_re=new RegExp("^"+i+"$","i"),b=!0),this._pattern!==h&&(this._pattern=h,this._match=new RegExp(this._pattern,"g"),b=!0),b&&(this._counts={}),this._add(a.add,c),b||this._rem(a.rem,d),(b||(j=a.fields[e.field]))&&(j&&this._rem(a.mod,d),this._add(a.mod,c)),this._changeset(a)},i._changeset=function(a){var b,c,d,g=this._counts,h=this._tuples||(this._tuples={}),i=e.ChangeSet.create(a),j=this._output;for(b in g)c=h[b],d=g[b]||0,!c&&d?(h[b]=c=f.ingest({}),c[j.text]=b,c[j.count]=d,i.add.push(c)):0===d?(c&&i.rem.push(c),delete g[b],delete h[b]):c[j.count]!==d&&(f.set(c,j.count,d),i.mod.push(c));return i},i._tokenize=function(a){switch(this.param("case")){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase()}return a.match(this._match)},i._add=function(a,b){var c,d,e,f,g=this._counts,h=this._stop_re;for(e=0;e<a.length;++e)for(c=this._tokenize(b(a[e])),d=0;d<c.length;++d)h.test(f=c[d])||(g[f]=1+(g[f]||0))},i._rem=function(a,b){var c,d,e,f,g=this._counts,h=this._stop_re;for(e=0;e<a.length;++e)for(c=this._tokenize(b(a[e])),d=0;d<c.length;++d)h.test(f=c[d])||(g[f]-=1)},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],122:[function(a,b,c){function d(a){return q.prototype.init.call(this,a),p.addParameters(this,{"with":{type:"data"},diagonal:{type:"value","default":"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastWith=null,this._cids={},this._cache={},this.router(!0).produces(!0)}function e(a,b){var c=this._cache,d=c[a._id]||(c[a._id]={c:[],f:!1});d.c.push(b)}function f(a,b,c){return a?b._id+"_"+c._id:c._id+"_"+b._id}function g(a,b,c,d,g,h,i){for(var j,k,l=this._output,m=this._cache,o=this._cids,p=a.add,q=!1,r=0,s=c.length,t={};s>r;++r)j=c[r],k=f(b,i,j),o[k]||(i._id!==j._id||d)&&(n.set(t,l.left,b?i:j),n.set(t,l.right,b?j:i),!g||g(t)?(p.push(t=n.ingest(t)),e.call(this,i,t),i._id!==j._id&&e.call(this,j,t),h[t._id]=1,o[k]=!0,t={}):(m[j._id]&&(m[j._id].f=!0),q=!0));m[i._id]&&(m[i._id].f=q)}function h(a,b,c,d,e,h,i,j){var k,l,m,n,o,p=this._output,q=this._cache,r=this._cids,s=q[j._id],t=s&&s.c,u=!s||s.f,v=a.mod,w=a.rem;if(t)for(k=t.length-1;k>=0;--k)if(l=t[k],n=j===l[p.left],m=n?l[p.right]:l[p.left],o=f(n,j,m),q[m._id])if(!e||e(l)){if(h[l._id])continue;v.push(l),h[l._id]=1}else i[l._id]||w.push.apply(w,t.splice(k,1)),i[l._id]=1,r[o]=!1,s.f=!0;else r[o]=!1,t.splice(k,1);e&&u&&g.call(this,a,b,c,d,e,h,j)}function i(a,b,c,d){var e,g,h,i,j,k=this._output,l=this._cache[d._id],m=this._cids,n=a.rem;if(l){for(e=0,g=l.c.length;g>e;++e)h=l.c[e],j=d===h[k.left],i=j?h[k.right]:h[k.left],m[f(j,d,i)]=!1,c[h._id]||(n.push(h),c[h._id]=1);this._cache[d._id]=null}}function j(a,b){var c,d,e,f,g,h,i=this._cache,j=k.keys(i),l=a.rem;for(c=0,d=j.length;d>c;++c)for(g=i[j[c]],e=0,f=g.c.length;f>e;++e)h=g.c[e],b[h._id]||(l.push(h),b[h._id]=1);this._cache={},this._cids={},this._lastWith=null}var k=a("datalib"),l=a("vega-dataflow"),m=l.ChangeSet,n=l.Tuple,o=a("vega-logging"),p=a("./Transform"),q=a("./BatchTransform"),r=d.prototype=Object.create(q.prototype);r.constructor=d,r.batchTransform=function(a,b,c){o.debug(a,["crossing"]);var d=this.param("with"),e=this.param("diagonal"),f=this._output,k=this.param("filter")||null,l=!d.name,n=l?a:d.source.last(),p=l?b:d.source.values(),q=m.create(a),r={},s={};return c?(j.call(this,q,s),b.forEach(g.bind(this,q,!0,p,e,k,r)),this._lastWith=n.stamp):(a.rem.forEach(i.bind(this,q,!0,s)),a.add.forEach(g.bind(this,q,!0,p,e,k,r)),n.stamp>this._lastWith&&(n.rem.forEach(i.bind(this,q,!1,s)),n.add.forEach(g.bind(this,q,!1,b,e,k,r)),n.mod.forEach(h.bind(this,q,!1,b,e,k,r,s)),this._lastWith=n.stamp),a.mod.forEach(h.bind(this,q,!0,p,e,k,r,s))),q.fields[f.left]=1,q.fields[f.right]=1,q},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],123:[function(a,b,c){function d(b){return e.addParameters(this,{transform:{type:"custom",set:function(a){return this._transform._pipeline=a,this._transform},get:function(){var b=a("../parse/transforms"),c=this._transform;return c._pipeline.map(function(a){return b(c._graph,a)})}}}),this._pipeline=[],f.call(this,b)}var e=a("./Transform"),f=a("./Aggregate"),g=d.prototype=Object.create(f.prototype);g.constructor=d,g.aggr=function(){return f.prototype.aggr.call(this).facet(this)},g.transform=function(a,b){var c=f.prototype.transform.call(this,a,b);return a.add.length&&this.listeners()[0].rerank(),c},b.exports=d},{"../parse/transforms":108,"./Aggregate":118,"./Transform":140}],124:[function(a,b,c){function d(){g.call(this),this._facet=null,this._facetID=++l}function e(a){k.debug({},["disconnecting cell",this.tuple._id]);var b=this.ds.pipeline();a.removeListener(b[0]),a._graph.removeListener(b[0]),a._graph.disconnect(b)}var f=a("datalib"),g=f.Aggregator,h=g.prototype,i=a("vega-dataflow"),j=i.Tuple,k=a("vega-logging"),l=0,m=d.prototype=Object.create(h);m.constructor=d,m.facet=function(a){return arguments.length?(this._facet=a,this):this._facet},m._ingest=function(a){return j.ingest(a,null)},m._assign=j.set,m._newcell=function(a,b){var c=h._newcell.call(this,a,b),d=this._facet;if(d){var f=d._graph,g=c.tuple,i=d.param("transform");c.ds=f.data(g._facetID,i,g),c.disconnect=e,d.addListener(i[0])}return c},m._newtuple=function(a,b){var c=h._newtuple.call(this,a);return this._facet&&(j.set(c,"key",b),j.set(c,"_facetID",this._facetID+"_"+b)),c},m.clear=function(){if(this._facet)for(var a in this._cells)this._cells[a].disconnect(this._facet);return h.clear.call(this)},m._on_add=function(a,b){this._facet&&b.ds._input.add.push(a)},m._on_rem=function(a,b){this._facet&&b.ds._input.rem.push(a)},m._on_mod=function(a,b,c,d){this._facet&&(c===d?c.ds._input.mod.push(a):(c.ds._input.rem.push(a),d.ds._input.add.push(a)))},m._on_drop=function(a){this._facet&&a.disconnect(this._facet)},m._on_keep=function(a){this._facet&&i.ChangeSet.copy(this._input,a.ds._input)},b.exports=d},{datalib:26,"vega-dataflow":41,"vega-logging":48}],125:[function(a,b,c){function d(a){return g.prototype.init.call(this,a),g.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var e=a("vega-dataflow"),f=a("vega-logging"),g=a("./Transform"),h=d.prototype=Object.create(g.prototype);h.constructor=d,h.transform=function(a){f.debug(a,["filtering"]);var b=e.ChangeSet.create(a),c=this._skip,d=this.param("test");return a.rem.forEach(function(a){1!==c[a._id]?b.rem.push(a):c[a._id]=0}),a.add.forEach(function(a){d(a)?b.add.push(a):c[a._id]=1}),a.mod.forEach(function(a){var e=d(a),f=1===c[a._id];e&&f?(c[a._id]=0,b.add.push(a)):e&&!f?b.mod.push(a):!e&&f||(b.rem.push(a),c[a._id]=1)}),b},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],126:[function(a,b,c){function d(a){return h.prototype.init.call(this,a),h.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var e=a("vega-dataflow"),f=e.Tuple,g=a("vega-logging"),h=a("./Transform"),i=d.prototype=Object.create(h.prototype);i.constructor=d,i._reset=function(a,b){for(var c in this._cache)b.rem.push.apply(b.rem,this._cache[c]);this._cache={}},i._tuple=function(a,b,c){var d=this._cache[a._id]||(this._cache[a._id]=Array(c));return d[b]?f.rederive(a,d[b]):d[b]=f.derive(a)},i._fn=function(a,b,c){var d,e,g,h,i,j;for(d=0,g=a.length;g>d;++d)for(i=a[d],e=0,h=b.field.length;h>e;++e)j=this._tuple(i,e,h),f.set(j,this._output.key,b.field[e]),f.set(j,this._output.value,b.accessor[e](i)),c.push(j)},i.transform=function(a,b){g.debug(a,["folding"]);var c=this,d=this.param("fields"),f=e.ChangeSet.create(a);return b&&this._reset(a,f),this._fn(a.add,d,f.add),this._fn(a.mod,d,b?f.add:f.mod),a.rem.forEach(function(a){f.rem.push.apply(f.rem,c._cache[a._id]),c._cache[a._id]=null}),(a.add.length||a.rem.length||d.field.some(function(b){return!!a.fields[b]}))&&(f.fields[this._output.key]=1,f.fields[this._output.value]=1),f},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],127:[function(a,b,c){(function(c){function d(b){return j.prototype.init.call(this,b),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=e.layout.force(),j.addParameters(this,{size:{type:"array<value>","default":a("./screen").size},bound:{type:"value","default":!0},links:{type:"data"},linkStrength:{type:"value","default":1},linkDistance:{type:"value","default":20},charge:{type:"value","default":-30},chargeDistance:{type:"value","default":1/0},friction:{type:"value","default":.9},theta:{type:"value","default":.8},gravity:{type:"value","default":.1},alpha:{type:"value","default":.1},iterations:{type:"value","default":500},interactive:{type:"value","default":this._interactive},active:{type:"value","default":this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("vega-dataflow"),g=f.Tuple,h=f.ChangeSet,i=a("vega-logging"),j=a("./Transform"),k=d.prototype=Object.create(j.prototype);k.constructor=d,k.transform=function(a,b){i.debug(a,["force"]),b-=a.signals.active?1:0;var c=this.param("interactive"),d=this.param("links").source,e=d.last(),f=this.param("active"),h=this._output,j=this._layout,k=this._nodes,l=this._links;if(e.stamp<a.stamp&&(e=null),this.configure(a,e,c,b),!c){for(var m=this.param("iterations"),n=0;m>n;++n)j.tick();j.stop()}return this.update(f),(b||f!==this._prev&&f&&f.update)&&j.alpha(this.param("alpha")),f!==this._prev&&(this._prev=f),a.rem.length&&j.nodes(this._nodes=g.idFilter(k,a.rem)),e&&e.rem.length&&j.links(this._links=g.idFilter(l,e.rem)),a.fields[h.x]=1,a.fields[h.y]=1,a},k.configure=function(a,b,c,d){var e=this._layout,f=this._setup||a.add.length||b&&b.add.length||c!==this._interactive||this.param("charge")!==e.charge()||this.param("linkStrength")!==e.linkStrength()||this.param("linkDistance")!==e.linkDistance();if((f||d)&&e.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),f){this._setup=!1,this._interactive=c;var g,i,j=this,k=this._graph,l=this._nodes,m=this._links;for(g=a.add,i=0;i<g.length;++i)l.push({tuple:g[i]});if(b)for(g=b.add,i=0;i<g.length;++i)m.push({tuple:g[i],source:l[g[i].source],target:l[g[i].target]});var n=c?function(){k.propagate(h.create(null,!0),j)}:null;e.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(l).links(m).on("tick",n).start().alpha(this.param("alpha"))}},k.update=function(a){var b,c,d,e,f,h,i=this._output,j=this.param("bound"),k=this.param("fixed"),l=this.param("size"),m=this._nodes,n={};if(k&&k.source)for(k=k.source.values(),c=0,d=k.length;d>c;++c)n[k[c].id]=1;for(c=0;c<m.length;++c)d=m[c],e=d.tuple,b=e._id,a&&a.id===b?(d.fixed=1,a.update&&(d.x=d.px=a.x,d.y=d.py=a.y)):d.fixed=n[b]||0,f=j?Math.max(0,Math.min(d.x,l[0])):d.x,h=j?Math.max(0,Math.min(d.y,l[1])):d.y,g.set(e,i.x,f),g.set(e,i.y,h)},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":140,"./screen":146,"vega-dataflow":41,"vega-logging":48}],128:[function(a,b,c){function d(a){return h.prototype.init.call(this,a),h.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var e=a("vega-dataflow"),f=e.Tuple,g=a("vega-logging"),h=a("./Transform"),i=d.prototype=Object.create(h.prototype);i.constructor=d,i.transform=function(a){function b(a){f.set(a,c,d(a)),e=!0}g.debug(a,["formulating"]);var c=this.param("field"),d=this.param("expr"),e=!1;return a.add.forEach(b),this.reevaluate(a)&&a.mod.forEach(b),e&&(a.fields[c]=1),a},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],129:[function(a,b,c){(function(c){function d(a){return i.prototype.init.call(this,a),i.addParameters(this,d.Parameters),i.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Transform");d.Parameters={projection:{type:"value","default":"mercator"},center:{type:"array<value>"},translate:{type:"array<value>","default":a("./screen").center},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},d.d3Projection=function(){var a,b,c,g=this.param("projection"),h=d.Parameters;g!==this._mode&&(this._mode=g,this._projection=e.geo[g]()),a=this._projection;for(b in h)"projection"!==b&&a[b]&&(c=this.param(b),void 0===c||f.isArray(c)&&0===c.length||c!==a[b]()&&a[b](c));return a};var j=d.prototype=Object.create(i.prototype);j.constructor=d,j.transform=function(a){function b(a){var b=[e(a),f(a)],d=i(b)||[null,null];g.set(a,c.x,d[0]),g.set(a,c.y,d[1])}h.debug(a,["geo"]);var c=this._output,e=this.param("lon").accessor,f=this.param("lat").accessor,i=d.d3Projection.call(this);return a.add.forEach(b),this.reevaluate(a)&&(a.mod.forEach(b),a.rem.forEach(b)),a.fields[c.x]=1,a.fields[c.y]=1,a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":140,"./screen":146,datalib:26,"vega-dataflow":41,"vega-logging":48}],130:[function(a,b,c){(function(c){function d(a){return j.prototype.init.call(this,a),j.addParameters(this,i.Parameters),j.addParameters(this,{field:{type:"field","default":null}}),this._output={path:"layout_path"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Geo"),j=a("./Transform"),k=d.prototype=Object.create(j.prototype);k.constructor=d,k.transform=function(a){function b(a){g.set(a,c.path,k(d(a)))}h.debug(a,["geopath"]);var c=this._output,d=this.param("field").accessor||f.identity,j=i.d3Projection.call(this),k=e.geo.path().projection(j);return a.add.forEach(b),this.reevaluate(a)&&(a.mod.forEach(b),a.rem.forEach(b)),a.fields[c.path]=1,a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Geo":129,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],131:[function(a,b,c){(function(c){function d(b){return j.prototype.init.call(this,b),i.addParameters(this,{sort:{type:"array<field>","default":null},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"value","default":null},mode:{type:"value","default":"tidy"},size:{type:"array<value>","default":a("./screen").size},nodesize:{type:"array<value>","default":null},orient:{type:"value","default":"cartesian"}}),this._mode=null,this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Transform"),j=a("./BatchTransform"),k="partition",l={cartesian:function(a,b){return a.parent===b.parent?1:2},radial:function(a,b){return(a.parent===b.parent?1:2)/a.depth}},m=d.prototype=Object.create(j.prototype);m.constructor=d,m.batchTransform=function(a,b){h.debug(a,["hierarchy layout"]);var c=this._layout,d=this._output,i=this.param("mode"),j=this.param("sort"),m=this.param("nodesize"),n=this.param("parent").accessor,o=b.filter(function(a){return null===n(a)})[0];return i!==this._mode&&(this._mode=i,"tidy"===i&&(i="tree"),c=this._layout=e.layout[i]()),a.fields[d.x]=1,a.fields[d.y]=1,a.fields[d.depth]=1,i===k?(a.fields[d.width]=1,a.fields[d.height]=1,c.value(this.param("field").accessor)):c.separation(l[this.param("orient")]),m.length&&i!==k?c.nodeSize(m):c.size(this.param("size")),c.sort(j.field.length?f.comparator(j.field):null).children(this.param("children").accessor).nodes(o),b.forEach(function(a){g.set(a,d.x,a.x),g.set(a,d.y,a.y),g.set(a,d.depth,a.depth),i===k&&(g.set(a,d.width,a.dx),g.set(a,d.height,a.dy))}),a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":140,"./screen":146,datalib:26,"vega-dataflow":41,"vega-logging":48}],132:[function(a,b,c){function d(a){return k.prototype.init.call(this,a),j.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value","default":"value"},value:{type:"value","default":0}}),this.router(!0).produces(!0)}function e(a,b,c,d){var e,f={_imputed:!0};for(e=0;e<b.length;++e)f[a[e]]=b[e];for(e=0;e<d.length;++e)f[c[e]]=d[e];return i.ingest(f)}function f(a,b,c){var d,e,f,h,i,j,k,l,m=[],n=function(a){return a(f)},o=function(a){return f=a,c.map(n)};for(j=m.domain=g.unique(a,o),l=j.length,k=j.reduce(function(a,b,c){return a[b]={value:b,index:c},a},{}),d={},e=0;e<a.length;++e)f=a[e],h=null==b?[]:b.map(n),i=d[h]||(m.push(d[h]=Array(l)),d[h].values=h,d[h]),i[k[o(f)].index]=f;return m}var g=a("datalib"),h=a("vega-logging"),i=a("vega-dataflow").Tuple,j=a("./Transform"),k=a("./BatchTransform"),l=d.prototype=Object.create(k.prototype);
l.constructor=d,l.batchTransform=function(a,b){function c(a){return null==a?null:s(a)}h.debug(a,["imputing"]);var d,i,j,k,l,m,n=this.param("groupby"),o=this.param("orderby"),p=this.param("method"),q=this.param("value"),r=this.param("field"),s=r.accessor,t=r.field,u=this._imputed||[],v=[],w=f(b,n.accessor,o.accessor),x=w.domain;for(j=0,l=w.length;l>j;++j)for(d=w[j],"value"!==p&&(q=g[p](d,c)),i=0,k=d.length;k>i;++i)null==d[i]&&(m=e(n.field,d.values,o.field,x[i]),m[t]=q,v.push(m));for(i=0,k=v.length;k>i;++i)a.add.push(v[i]);for(i=0,k=u.length;k>i;++i)a.rem.push(u[i]);return this._imputed=v,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],133:[function(a,b,c){function d(a){return o.prototype.init.call(this,a),o.addParameters(this,{sourceX:{type:"field","default":"_source.layout_x"},sourceY:{type:"field","default":"_source.layout_y"},targetX:{type:"field","default":"_target.layout_x"},targetY:{type:"field","default":"_target.layout_y"},tension:{type:"value","default":.2},shape:{type:"value","default":"line"}}),this._output={path:"layout_path"},this.mutates(!0)}function e(a,b,c,d){return"M"+a+","+b+"L"+c+","+d}function f(a,b,c,d,e){var f=c-a,g=d-b,h=e*(f+g),i=e*(g-f);return"M"+a+","+b+"C"+(a+h)+","+(b+i)+" "+(c+i)+","+(d-h)+" "+c+","+d}function g(a,b,c,d){return"M"+a+","+b+"V"+d+"H"+c}function h(a,b,c,d){return"M"+a+","+b+"H"+c+"V"+d}function i(a,b,c,d){var e=Math.cos(a),f=Math.sin(a),g=Math.cos(c),h=Math.sin(c),i=Math.abs(c-a)>Math.PI?a>=c:c>a;return"M"+b*e+","+b*f+"A"+b+","+b+" 0 0,"+(i?1:0)+" "+b*g+","+b*h+"L"+d*g+","+d*h}function j(a,b,c,d){var e=(a+c)/2;return"M"+a+","+b+"C"+e+","+b+" "+e+","+d+" "+c+","+d}function k(a,b,c,d){var e=(b+d)/2;return"M"+a+","+b+"C"+a+","+e+" "+c+","+e+" "+c+","+d}function l(a,b,c,d){var e=Math.cos(a),f=Math.sin(a),g=Math.cos(c),h=Math.sin(c),i=(b+d)/2;return"M"+b*e+","+b*f+"C"+i*e+","+i*f+" "+i*g+","+i*h+" "+d*g+","+d*h}var m=a("vega-dataflow").Tuple,n=a("vega-logging"),o=a("./Transform"),p=d.prototype=Object.create(o.prototype);p.constructor=d;var q={line:e,curve:f,cornerX:g,cornerY:h,cornerR:i,diagonalX:j,diagonalY:k,diagonalR:l};p.transform=function(a){function b(a){var b=d(e(a),f(a),g(a),h(a),i);m.set(a,c.path,b)}n.debug(a,["linkpath"]);var c=this._output,d=q[this.param("shape")]||q.line,e=this.param("sourceX").accessor,f=this.param("sourceY").accessor,g=this.param("targetX").accessor,h=this.param("targetY").accessor,i=this.param("tension");return a.add.forEach(b),this.reevaluate(a)&&(a.mod.forEach(b),a.rem.forEach(b)),a.fields[c.path]=1,a},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],134:[function(a,b,c){function d(a){return g.prototype.init.call(this,a),g.addParameters(this,{on:{type:"data"},onKey:{type:"field","default":null},as:{type:"array<value>"},keys:{type:"array<field>","default":["data"]},"default":{type:"value"}}),this.mutates(!0)}var e=a("vega-dataflow").Tuple,f=a("vega-logging"),g=a("./Transform"),h=d.prototype=Object.create(g.prototype);h.constructor=d,h.transform=function(a,b){function c(a){for(var b=0;b<n.length;++b){var c=q[n[b](a)]||p;e.set(a,o[b],c)}}f.debug(a,["lookup"]);var d,g,h=this.param("on"),i=h.source.last(),j=h.source.values(),k=this.param("onKey"),l=k.field,m=this.param("keys"),n=m.accessor,o=this.param("as"),p=this.param("default"),q=this._lut;if(null==q||this._on!==l||l&&i.fields[l]||i.add.length||i.rem.length){if(l)for(k=k.accessor,q={},d=0;d<j.length;++d)q[k(g=j[d])]=g;else q=j;this._lut=q,this._on=l,b=!0}a.add.forEach(c);var r=m.field.some(function(b){return a.fields[b]});return(r||b)&&(a.mod.forEach(c),a.rem.forEach(c)),o.forEach(function(b){a.fields[b]=1}),a},b.exports=d},{"./Transform":140,"vega-dataflow":41,"vega-logging":48}],135:[function(a,b,c){function d(a,b,c){this._name=a,this._type=b,this._transform=c,this._value=[],this._accessors=[],this._resolution=!1,this._signals=[]}function e(){var a=h.test(this._type),b=i.test(this._type),c=j.test(this._type),d=a?this._value:this._value[0],e=a?this._accessors:this._accessors[0];return!f.isValid(e)&&l.test(this._type)?d:b?{name:d,source:e}:c?{field:d,accessor:e}:d}var f=a("datalib"),g=a("vega-dataflow").Dependencies,h=/array/i,i=/data/i,j=/field/i,k=/expr/i,l=/value/i,m=d.prototype;m.get=function(){var a,b,c,d,g,h=this._transform._graph,k=i.test(this._type),l=j.test(this._type);if(!this._resolution)return e.call(this);if(k)return this._accessors=this._value.map(function(a){return h.data(a)}),e.call(this);for(a=0,b=this._signals.length;b>a;++a)c=this._signals[a],d=c.index,g=c.value(h),l&&(this._accessors[d]=this._value[d]!=g?f.accessor(g):this._accessors[d]),this._value[d]=g;return e.call(this)},m.set=function(a){var b=this,c=b._transform._graph,d=k.test(this._type),e=i.test(this._type),h=j.test(this._type);return b._signals=[],this._value=f.array(a).map(function(a,i){var j;return f.isString(a)?d?(j=c.expr(a),b._transform.dependency(g.FIELDS,j.fields),b._transform.dependency(g.SIGNALS,j.globals),b._transform.dependency(g.DATA,j.dataSources),j.fn):(h?(b._accessors[i]=f.accessor(a),b._transform.dependency(g.FIELDS,f.field(a))):e&&(b._resolution=!0,b._transform.dependency(g.DATA,a)),a):void 0!==a.value?a.value:void 0!==a.field?(b._accessors[i]=f.accessor(a.field),b._transform.dependency(g.FIELDS,f.field(a.field)),a.field):void 0!==a.signal?(b._resolution=!0,b._transform.dependency(g.SIGNALS,f.field(a.signal)[0]),b._signals.push({index:i,value:function(b){return b.signalRef(a.signal)}}),a.signal):void 0!==a.expr?(b._resolution=!0,j=c.expr(a.expr),b._transform.dependency(g.SIGNALS,j.globals),b._signals.push({index:i,value:function(){return j.fn()}}),a.expr):a}),b._transform},b.exports=d},{datalib:26,"vega-dataflow":41}],136:[function(a,b,c){function d(a){return j.prototype.init.call(this,a),i.addParameters(this,{field:{type:"field","default":null},startAngle:{type:"value","default":0},endAngle:{type:"value","default":2*Math.PI},sort:{type:"value","default":!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function e(){return 1}var f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Transform"),j=a("./BatchTransform"),k=d.prototype=Object.create(j.prototype);k.constructor=d,k.batchTransform=function(a,b){h.debug(a,["pie"]);var c,d,i,j=this._output,k=this.param("field").accessor||e,l=this.param("startAngle"),m=this.param("endAngle"),n=this.param("sort"),o=b.map(k),p=l,q=(m-l)/f.sum(o),r=f.range(b.length);for(n&&r.sort(function(a,b){return o[a]-o[b]}),c=0;c<r.length;++c)d=b[r[c]],i=o[r[c]],g.set(d,j.start,p),g.set(d,j.mid,p+.5*i*q),g.set(d,j.end,p+=i*q);return a.fields[j.start]=1,a.fields[j.end]=1,a.fields[j.mid]=1,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],137:[function(a,b,c){function d(a){return h.prototype.init.call(this,a),g.addParameters(this,{field:{type:"field","default":null},normalize:{type:"value","default":!1}}),this._output={rank:"rank"},this.mutates(!0)}var e=a("vega-dataflow").Tuple,f=a("vega-logging"),g=a("./Transform"),h=a("./BatchTransform"),i=d.prototype=Object.create(h.prototype);i.constructor=d,i.batchTransform=function(a,b){f.debug(a,["rank"]);var c,d,g,h,i=this._output.rank,j=this.param("normalize"),k=this.param("field").accessor,l={},m=b.length;if(k)for(c=0,d=0;m>c;++c)g=b[c],l[h=k(g)]=l[h]||(l[h]=++d);for(c=0;m>c&&(g=b[c]);++c)k&&(h=k(g))?e.set(g,i,j?l[h]/d:l[h]):e.set(g,i,j?(c+1)/m:c+1);return a.fields[i]=1,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,"vega-dataflow":41,"vega-logging":48}],138:[function(a,b,c){function d(a){g.prototype.init.call(this,a),g.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var e=a("datalib"),f=a("vega-logging"),g=a("./Transform"),h=d.prototype=Object.create(g.prototype);h.constructor=d,h.transform=function(a){return f.debug(a,["sorting"]),(a.add.length||a.mod.length||a.rem.length)&&(a.sort=e.comparator(this.param("by").field)),a},b.exports=d},{"./Transform":140,datalib:26,"vega-logging":48}],139:[function(a,b,c){function d(a){return j.prototype.init.call(this,a),i.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value","default":"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function e(a,b,c,d){var e,f,g,h,i,j,k,l=[],m=function(a){return a(g)};if(null==b)l.push(a.slice());else for(e={},f=0;f<a.length;++f)g=a[f],h=b.map(m),i=e[h]||(l.push(e[h]=[]),e[h]),i.push(g);for(h=0,k=0;h<l.length;++h){for(i=l[h],f=0,j=0;f<i.length;++f)j+=d(i[f]);i.sum=j,j>k&&(k=j),null!=c&&i.sort(c)}return l.max=k,l}var f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Transform"),j=a("./BatchTransform"),k=d.prototype=Object.create(j.prototype);k.constructor=d,k.batchTransform=function(a,b){h.debug(a,["stacking"]);for(var c=this.param("groupby").accessor,d=f.comparator(this.param("sortby").field),i=this.param("field").accessor,j=this.param("offset"),k=this._output,l=e(b,c,d,i),m=0,n=l.max;m<l.length;++m){var o,p,q,r=l[m],s=r.sum,t="center"===j?(n-s)/2:0,u="normalize"===j?1/s:1,v=t,w=0;for(o=0;o<r.length;++o)p=r[o],q=v,w+=i(p),v=u*w+t,g.set(p,k.start,q),g.set(p,k.end,v),g.set(p,k.mid,.5*(q+v))}return a.fields[k.start]=1,a.fields[k.end]=1,a.fields[k.mid]=1,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],140:[function(a,b,c){function d(a){a&&f.init.call(this,a)}var e=a("vega-dataflow"),f=e.Node.prototype,g=e.Dependencies,h=a("./Parameter");d.addParameters=function(a,b){a._parameters=a._parameters||{};for(var c in b){var d=b[c],e=new h(c,d.type,a);a._parameters[c]=e,"custom"===d.type&&(d.set&&(e.set=d.set.bind(e)),d.get&&(e.get=d.get.bind(e))),d.hasOwnProperty("default")&&e.set(d["default"])}};var i=d.prototype=Object.create(f);i.constructor=d,i.param=function(a,b){var c=this._parameters[a];return void 0===c?this:1===arguments.length?c.get():c.set(b)},i.transform=function(a){return a},i.evaluate=function(a){var b=this._stamp<a.stamp&&this.dependency(g.SIGNALS).reduce(function(b,c){return b+=a.signals[c]?1:0},0);return this.transform(a,b)},i.output=function(a){for(var b in this._output)void 0!==a[b]&&(this._output[b]=a[b]);return this},b.exports=d},{"./Parameter":135,"vega-dataflow":41}],141:[function(a,b,c){function d(a){return i.prototype.init.call(this,a),h.addParameters(this,{groupby:{type:"array<field>"}}),this._output={children:"children",parent:"parent"},this.router(!0).produces(!0)}var e=a("datalib"),f=a("vega-dataflow").Tuple,g=a("vega-logging"),h=a("./Transform"),i=a("./BatchTransform"),j=d.prototype=Object.create(i.prototype);j.constructor=d,j.batchTransform=function(a,b){function c(a,b,d){var e=m[a].execute(d);b[j]=e,e.forEach(function(d){d[k]=b,o.push(f.ingest(d)),a+1<i.length?c(a+1,d,d[j]):d[j].forEach(function(a){a[k]=d})})}g.debug(a,["treeifying"]);var d,h,i=this.param("groupby").field,j=this._output.children,k=this._output.parent,l=[{name:"*",ops:["values"],as:[j]}],m=i.map(function(a){return e.groupby(a).summarize(l)}),n=this._internal||[],o=[],p=f.ingest({});for(p[k]=null,o.push(p),c(0,p,b),d=0,h=o.length;h>d;++d)a.add.push(o[d]);for(d=0,h=n.length;h>d;++d)a.rem.push(n[d]);return this._internal=o,a},b.exports=d},{"./BatchTransform":119,"./Transform":140,datalib:26,"vega-dataflow":41,"vega-logging":48}],142:[function(a,b,c){(function(c){function d(b){return j.prototype.init.call(this,b),i.addParameters(this,{sort:{type:"array<field>","default":["-value"]},children:{type:"field","default":"children"},parent:{type:"field","default":"parent"},field:{type:"field","default":"value"},size:{type:"array<value>","default":a("./screen").size},round:{type:"value","default":!0},sticky:{type:"value","default":!1},ratio:{type:"value","default":k},padding:{type:"value","default":null},mode:{type:"value","default":"squarify"}}),this._layout=e.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("datalib"),g=a("vega-dataflow").Tuple,h=a("vega-logging"),i=a("./Transform"),j=a("./BatchTransform"),k=.5*(1+Math.sqrt(5)),l=d.prototype=Object.create(j.prototype);l.constructor=d,l.batchTransform=function(a,b){h.debug(a,["treemap"]);var c=this._layout,d=this._output,e=this.param("sticky"),i=this.param("parent").accessor,j=b.filter(function(a){return null===i(a)})[0];return c.sticky()!==e&&c.sticky(e),c.sort(f.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(j),b.forEach(function(a){g.set(a,d.x,a.x),g.set(a,d.y,a.y),g.set(a,d.width,a.dx),g.set(a,d.height,a.dy),g.set(a,d.depth,a.depth)}),a.fields[d.x]=1,a.fields[d.y]=1,a.fields[d.width]=1,a.fields[d.height]=1,a.fields[d.depth]=1,a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":140,"./screen":146,datalib:26,"vega-dataflow":41,"vega-logging":48}],143:[function(a,b,c){(function(c){function d(b){return i.prototype.init.call(this,b),h.addParameters(this,{clipExtent:{type:"array<value>","default":a("./screen").extent},x:{type:"field","default":"layout_x"},y:{type:"field","default":"layout_y"}}),this._layout=e.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var e="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,f=a("vega-dataflow/src/Tuple"),g=a("vega-logging"),h=a("./Transform"),i=a("./BatchTransform"),j=d.prototype=Object.create(i.prototype);j.constructor=d,j.batchTransform=function(a,b){g.debug(a,["voronoi"]);for(var c=this._output.path,d=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(b),e=0;e<b.length;++e)d[e]&&f.set(b[e],c,"M"+d[e].join("L")+"Z");return a.fields[c]=1,a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":140,"./screen":146,"vega-dataflow/src/Tuple":40,"vega-logging":48}],144:[function(a,b,c){(function(c){function d(b){return n.prototype.init.call(this,b),m.addParameters(this,{size:{type:"array<value>","default":a("./screen").size},text:{type:"field","default":"data"},rotate:{type:"field|value","default":0},font:{type:"field|value","default":{value:"sans-serif"}},fontSize:{type:"field|value","default":14},fontStyle:{type:"field|value","default":{value:"normal"}},fontWeight:{type:"field|value","default":{value:"normal"}},fontScale:{type:"array<value>","default":[10,50]},padding:{type:"value","default":1},spiral:{type:"value","default":"archimedean"}}),this._layout=i().canvas(j.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}function e(a){return a&&a.accessor||a}function f(a){var b=Object.create(a);return b._tuple=a,b}var g=a("datalib"),h="undefined"!=typeof window?window.d3:"undefined"!=typeof c?c.d3:null,i="undefined"!=typeof window?window.d3.layout.cloud:"undefined"!=typeof c?c.d3.layout.cloud:null,j=a("vega-scenegraph").canvas,k=a("vega-dataflow/src/Tuple"),l=a("vega-logging"),m=a("./Transform"),n=a("./BatchTransform"),o=d.prototype=Object.create(n.prototype);o.constructor=d,o.batchTransform=function(a,b){l.debug(a,["wordcloud"]);var c,d,i=this._layout,j=this._output,m=this.param("fontSize"),n=m.accessor&&this.param("fontScale");m=m.accessor||h.functor(m),n.length&&(d=h.scale.sqrt().domain(g.extent(b,c=m)).range(n),m=function(a){return d(c(a))}),i.size(this.param("size")).text(e(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(e(this.param("rotate"))).font(e(this.param("font"))).fontStyle(e(this.param("fontStyle"))).fontWeight(e(this.param("fontWeight"))).fontSize(m).words(b.map(f)).on("end",function(a){var b,c,d,e,f=i.size(),g=f[0]>>1,h=f[1]>>1;for(d=0,e=a.length;e>d;++d)b=a[d],c=b._tuple,k.set(c,j.x,b.x+g),k.set(c,j.y,b.y+h),k.set(c,j.font,b.font),k.set(c,j.fontSize,b.size),k.set(c,j.fontStyle,b.style),k.set(c,j.fontWeight,b.weight),k.set(c,j.rotate,b.rotate)}).start();for(var o in j)a.fields[j[o]]=1;return a},b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":140,"./screen":146,datalib:26,"vega-dataflow/src/Tuple":40,"vega-logging":48,"vega-scenegraph":49}],145:[function(a,b,c){b.exports={aggregate:a("./Aggregate"),bin:a("./Bin"),cross:a("./Cross"),countpattern:a("./CountPattern"),linkpath:a("./LinkPath"),facet:a("./Facet"),filter:a("./Filter"),fold:a("./Fold"),force:a("./Force"),formula:a("./Formula"),geo:a("./Geo"),geopath:a("./GeoPath"),hierarchy:a("./Hierarchy"),impute:a("./Impute"),lookup:a("./Lookup"),pie:a("./Pie"),rank:a("./Rank"),sort:a("./Sort"),stack:a("./Stack"),treeify:a("./Treeify"),treemap:a("./Treemap"),voronoi:a("./Voronoi"),wordcloud:a("./Wordcloud")}},{"./Aggregate":118,"./Bin":120,"./CountPattern":121,"./Cross":122,"./Facet":123,"./Filter":125,"./Fold":126,"./Force":127,"./Formula":128,"./Geo":129,"./GeoPath":130,"./Hierarchy":131,"./Impute":132,"./LinkPath":133,"./Lookup":134,"./Pie":136,"./Rank":137,"./Sort":138,"./Stack":139,"./Treeify":141,"./Treemap":142,"./Voronoi":143,"./Wordcloud":144}],146:[function(a,b,c){b.exports={size:[{signal:"width"},{signal:"height"}],mid:[{expr:"width/2"},{expr:"height/2"}],extent:[{expr:"[-padding.left, -padding.top]"},{expr:"[width+padding.right, height+padding.bottom]"}]}},{}],147:[function(a,b,c){function d(a,b,c,d){var f=c||e(a);return g(a,b,f,d)}function e(a){switch(a.type){case i:return i;case j:return j;case l:return k;default:return m}}function f(a,b,c,d){function e(a){return(b[0]<0?-Math.log(a>0?0:-a):Math.log(0>a?0:a))/Math.log(h)}function f(a){return b[0]<0?-Math.pow(h,-a):Math.pow(h,a)}if(null==c)return d;var g,h=a.base(),i=Math.min(h,a.ticks().length/c),j=b[0]>0?(g=1e-12,Math.ceil):(g=-1e-12,Math.floor);return function(a){return f(j(e(a)+g))/a>=i?d(a):""}}function g(a,b,c,d){var e,g=h.format,k="log"===a.type;switch(c){case m:return e=a.domain(),k?f(a,e,b,g.auto.number(d||null)):g.auto.linear(e,b,d||null);case i:return(d?g:g.auto).time(d);case j:return(d?g:g.auto).utc(d);default:return String}}var h=a("datalib"),i="time",j="utc",k="string",l="ordinal",m="number";b.exports={getTickFormat:d}},{datalib:26}],148:[function(a,b,c){var d=a("datalib"),e={};d.extend(e,a("./format")),b.exports=d.extend(e,d)},{"./format":147,datalib:26}],149:[function(a,b,c){b.exports=function(a,b,c,d){return void 0!==a[c]?a[c]:void 0!==b&&void 0!==b[c]?b[c]:void 0!==d?d:void 0}},{}]},{},[1])(1)}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){r=!!("horizontal"in g),r?(s={width:""},t={width:"0"}):(s={height:""},t={height:"0"}),d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(s)}function i(a){return r?{width:a.scrollWidth+"px"}:{height:a.scrollHeight+"px"}}function j(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(n(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:i(f[0])}).start()["finally"](k):a.addClass(f,"in",{css:{overflow:"hidden"},to:i(f[0])}).then(k)})}function k(){f.removeClass("collapsing").addClass("collapse").css(s),o(d)}function l(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(p(d)).then(function(){f.css(i(f[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:t}).start()["finally"](m):a.removeClass(f,"in",{to:t}).then(m)}):m()}function m(){f.css(t),f.removeClass("collapsing").addClass("collapse"),q(d)}var n=c(g.expanding),o=c(g.expanded),p=c(g.collapsing),q=c(g.collapsed),r=!1,s={},t={};h(),d.$watch(g.uibCollapse,function(a){a?l():j()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){b.addClass("panel"),d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){function a(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html(""),d.append(b)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(a,b,c,d,e){a.closeable=!!c.close,b.addClass("alert"),c.$set("role","alert"),a.closeable&&b.addClass("alert-dismissible");var f=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;f&&e(function(){a.close()},parseInt(f,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);(!a||angular.isDefined(d.uncheckable))&&b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;t.length;)t.shift()}function g(a){for(var b=0;b<q.length;b++)q[b].slide.active=b===a}function h(c,d,i){if(!u){if(angular.extend(c,{direction:i}),angular.extend(q[s].slide||{},{direction:i}),e.enabled(b)&&!a.$currentTransition&&q[d].element&&p.slides.length>1){q[d].element.data(r,c.direction);var j=p.getCurrentIndex();angular.isNumber(j)&&q[j].element&&q[j].element.data(r,c.direction),a.$currentTransition=!0,e.on("addClass",q[d].element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),t.length)){var d=t.pop().slide,g=d.index,i=g>p.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})}a.active=c.index,s=c.index,g(d),l()}}function i(a){for(var b=0;b<q.length;b++)if(q[b].slide===a)return b}function j(){n&&(c.cancel(n),n=null)}function k(b){b.length||(a.$currentTransition=null,f())}function l(){j();var b=+a.interval;!isNaN(b)&&b>0&&(n=c(m,b))}function m(){var b=+a.interval;o&&!isNaN(b)&&b>0&&q.length?a.next():a.pause()}var n,o,p=this,q=p.slides=a.slides=[],r="uib-slideDirection",s=a.active,t=[],u=!1;b.addClass("carousel"),p.addSlide=function(b,c){q.push({slide:b,element:c}),q.sort(function(a,b){return+a.slide.index-+b.slide.index}),(b.index===a.active||1===q.length&&!angular.isNumber(a.active))&&(a.$currentTransition&&(a.$currentTransition=null),s=b.index,a.active=b.index,g(s),p.select(q[i(b)]),1===q.length&&a.play())},p.getCurrentIndex=function(){for(var a=0;a<q.length;a++)if(q[a].slide.index===s)return a},p.next=a.next=function(){var b=(p.getCurrentIndex()+1)%q.length;return 0===b&&a.noWrap()?void a.pause():p.select(q[b],"next")},p.prev=a.prev=function(){var b=p.getCurrentIndex()-1<0?q.length-1:p.getCurrentIndex()-1;return a.noWrap()&&b===q.length-1?void a.pause():p.select(q[b],"prev")},p.removeSlide=function(b){var c=i(b),d=t.indexOf(q[c]);-1!==d&&t.splice(d,1),q.splice(c,1),q.length>0&&s===c?c>=q.length?(s=q.length-1,a.active=s,g(s),p.select(q[q.length-1])):(s=c,a.active=s,g(s),p.select(q[c])):s>c&&(s--,a.active=s),0===q.length&&(s=null,a.active=null,f())},p.select=a.select=function(b,c){var d=i(b.slide);void 0===c&&(c=d>p.getCurrentIndex()?"next":"prev"),b.slide.index===s||a.$currentTransition?b&&b.slide.index!==s&&a.$currentTransition&&t.push(q[d]):h(b.slide,d,c)},a.indexOfSlide=function(a){return+a.slide.index},a.isActive=function(b){return a.active===b.slide.index},a.isPrevDisabled=function(){return 0===a.active&&a.noWrap()},a.isNextDisabled=function(){return a.active===q.length-1&&a.noWrap()},a.pause=function(){a.noPause||(o=!1,j())},a.play=function(){o||(o=!0,l())},b.on("mouseenter",a.pause),b.on("mouseleave",a.play),a.$on("$destroy",function(){u=!0,j()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",l),a.$watchCollection("slides",k),a.$watch("active",function(a){if(angular.isNumber(a)&&s!==a){for(var b=0;b<q.length;b++)if(q[b].slide.index===a){a=b;break}var c=q[a];c&&(g(a),p.select(q[a]),s=a)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(a){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(b,c,d,e){c.addClass("item"),e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(b){a[b?"addClass":"removeClass"](c,"active")})}}}]).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(a,b,c,d){function e(a){var b=[],c=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",c[g+1]=""):(c[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",c[g]="",f=!0);a=a.join("")}return angular.forEach(q,function(d){var e=a.indexOf(d.key);if(e>-1){a=a.split(""),c[e]="("+d.regex+")",a[e]="$";for(var f=e+1,g=e+d.key.length;g>f;f++)c[f]="",a[f]="$";a=a.join(""),b.push({index:e,key:d.key,apply:d.apply,matcher:d.regex})}}),{regex:new RegExp("^"+c.join("")+"$"),map:d(b,"index")}}function f(a){for(var b,c,d=[],e=0;e<a.length;)if(angular.isNumber(c)){if("'"===a.charAt(e))(e+1>=a.length||"'"!==a.charAt(e+1))&&(d.push(g(a,c,e)),c=null);else if(e===a.length)for(;c<a.length;)b=h(a,c),d.push(b),c=b.endIdx;e++}else"'"!==a.charAt(e)?(b=h(a,e),d.push(b.parser),e=b.endIdx):(c=e,e++);return d}function g(a,b,c){return function(){
return a.substr(b+1,c-b-1)}}function h(a,b){for(var c=a.substr(b),d=0;d<q.length;d++)if(new RegExp("^"+q[d].key).test(c)){var e=q[d];return{endIdx:b+e.key.length,parser:e.formatter}}return{endIdx:b+1,parser:function(){return c.charAt(0)}}}function i(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function j(a){return parseInt(a,10)}function k(a,b){return a&&b?o(a,b):a}function l(a,b){return a&&b?o(a,b,!0):a}function m(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function n(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function o(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=m(b,d);return n(a,c*(e-d))}var p,q,r=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){p=b.id,this.parsers={},this.formatters={},q=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a,this.year=69>a?a+2e3:a+1900},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=j(c+d),this.minutes+=j(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]},this.init(),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==p&&this.init(),this.formatters[c]||(this.formatters[c]=f(c));var d=this.formatters[c];return d.reduce(function(b,c){return b+c(a)},"")},this.parse=function(c,d,f){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(r,"\\$&"),b.id!==p&&this.init(),this.parsers[d]||(this.parsers[d]=e(d,"apply"));var g=this.parsers[d],h=g.regex,j=g.map,k=c.match(h),l=!1;if(k&&k.length){var m,n;angular.isDate(f)&&!isNaN(f.getTime())?m={year:f.getFullYear(),month:f.getMonth(),date:f.getDate(),hours:f.getHours(),minutes:f.getMinutes(),seconds:f.getSeconds(),milliseconds:f.getMilliseconds()}:(f&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,q=k.length;q>o;o++){var s=j[o-1];"Z"===s.matcher&&(l=!0),s.apply&&s.apply.call(m,k[o])}var t=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return i(m.year,m.month,m.date)&&(!angular.isDate(f)||isNaN(f.getTime())||l?(n=new Date(0),t.call(n,m.year,m.month,m.date),u.call(n,m.hours||0,m.minutes||0,m.seconds||0,m.milliseconds||0)):(n=new Date(f),t.call(n,m.year,m.month,m.date),u.call(n,m.hours,m.minutes,m.seconds,m.milliseconds))),n}},this.toTimezone=k,this.fromTimezone=l,this.timezoneToOffset=m,this.addDateMinutes=n,this.convertTimezoneToLocal=o}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.datepickerMode=b,a.datepickerOptions.datepickerMode=b}var n=this,o={$setViewValue:angular.noop},p={},q=[];b.addClass("uib-datepicker"),c.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:i.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":n[b]=angular.isDefined(a.datepickerOptions[b])?e(a.datepickerOptions[b])(a.$parent):i[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":n[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:i[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?n.startingDay=a.datepickerOptions.startingDay:angular.isNumber(i.startingDay)?n.startingDay=i.startingDay:n.startingDay=(f.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?n[b]=l.fromTimezone(new Date(a),p.timezone):(j&&g.warn("Literal date support has been deprecated, please switch to date object usage"),n[b]=new Date(h(a,"medium"))):n[b]=i[b]?l.fromTimezone(new Date(i[b]),p.timezone):null,n.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){n[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b],("minMode"===b&&n.modes.indexOf(a.datepickerOptions.datepickerMode)<n.modes.indexOf(n[b])||"maxMode"===b&&n.modes.indexOf(a.datepickerOptions.datepickerMode)>n.modes.indexOf(n[b]))&&(a.datepickerMode=n[b],a.datepickerOptions.datepickerMode=n[b])}):n[b]=a[b]=i[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(c.disabled)||!1,angular.isDefined(c.ngDisabled)&&q.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b,n.refreshView()})),a.isActive=function(b){return 0===n.compare(b.date,n.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(b){o=b,p=b.$options||a.datepickerOptions.ngModelOptions||i.ngModelOptions,a.datepickerOptions.initDate?(n.activeDate=l.fromTimezone(a.datepickerOptions.initDate,p.timezone)||new Date,a.$watch("datepickerOptions.initDate",function(a){a&&(o.$isEmpty(o.$modelValue)||o.$invalid)&&(n.activeDate=l.fromTimezone(a,p.timezone),n.refreshView())})):n.activeDate=new Date;var c=o.$modelValue?new Date(o.$modelValue):new Date;this.activeDate=isNaN(c)?l.fromTimezone(new Date,p.timezone):l.fromTimezone(c,p.timezone),o.$render=function(){n.render()}},this.render=function(){if(o.$viewValue){var a=new Date(o.$viewValue),b=!isNaN(a);b?this.activeDate=l.fromTimezone(a,p.timezone):k||g.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=o.$viewValue?new Date(o.$viewValue):null;b=l.fromTimezone(b,p.timezone),o.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=o.$viewValue?new Date(o.$viewValue):null;d=l.fromTimezone(d,p.timezone);var e=new Date;e=l.fromTimezone(e,p.timezone);var f=this.compare(b,e),g={date:b,label:l.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),past:0>f,current:0===f,future:f>0,customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=g),n.activeDate&&0===this.compare(g.date,n.activeDate)&&(a.activeDt=g),g},this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===n.minMode){var c=o.$viewValue?l.fromTimezone(new Date(o.$viewValue),p.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=l.toTimezone(c,p.timezone),o.$setViewValue(c),o.$render()}else n.activeDate=b,m(n.modes[n.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(a){var b=n.activeDate.getFullYear()+a*(n.step.years||0),c=n.activeDate.getMonth()+a*(n.step.months||0);n.activeDate.setFullYear(b,c,1),n.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===n.maxMode&&1===b||a.datepickerMode===n.minMode&&-1===b||(m(n.modes[n.modes.indexOf(a.datepickerMode)+b]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var r=function(){n.element[0].focus()};a.$on("uib:datepicker.focus",r),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),n.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(n.isDisabled(n.activeDate))return;a.select(n.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(n.handleKeyDown(c,b),n.refreshView()):a.toggleMode("up"===c?1:-1)},b.on("keydown",function(b){a.$apply(function(){a.keydown(b)})}),a.$on("$destroy",function(){for(;q.length;)q.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,this.monthColumns),a.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=this.monthColumns;else if("right"===a)c+=1;else if("down"===a)c+=this.monthColumns;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){var c=l.parse(b,w,a.date);if(isNaN(c))for(var d=0;d<I.length;d++)if(c=l.parse(b,I[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.fromTimezone(b,G.timezone)}return F.$options&&F.$options.allowInvalid?a:void 0}function s(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(q(d)):!1:!0):!0}function t(c){if(a.isOpen||!a.disabled){var d=H[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=angular.element(H[0].querySelector(".uib-datepicker-popup")),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,y);d.css({top:f.top+"px",left:f.left+"px"}),d.hasClass("uib-position-measure")&&d.removeClass("uib-position-measure")}}var w,x,y,z,A,B,C,D,E,F,G,H,I,J=!1,K=[];this.init=function(e){if(F=e,G=angular.isObject(e.$options)?e.$options:{timezone:null},x=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,y=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,z=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,A=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,B=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,I=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar,m.html5Types[c.type]?(w=m.html5Types[c.type],J=!0):(w=c.uibDatepickerPopup||m.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==w&&(w=c,F.$modelValue=null,!w))throw new Error("uibDatepickerPopup must have a date format specified.")})),!w)throw new Error("uibDatepickerPopup must have a date format specified.");if(J&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");C=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),C.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":A}),D=angular.element(C.children()[0]),D.attr("template-url",B),a.datepickerOptions||(a.datepickerOptions={}),J&&"month"===c.type&&(a.datepickerOptions.datepickerMode="month",a.datepickerOptions.minMode="month"),D.attr("datepicker-options","datepickerOptions"),J?F.$formatters.push(function(b){return a.date=l.fromTimezone(b,G.timezone),b}):(F.$$parserName="date",F.$validators.date=s,F.$parsers.unshift(r),F.$formatters.push(function(b){return F.$isEmpty(b)?(a.date=b,b):(angular.isNumber(b)&&(b=new Date(b)),a.date=l.fromTimezone(b,G.timezone),l.filter(a.date,w))})),F.$viewChangeListeners.push(function(){a.date=q(F.$viewValue)}),b.on("keydown",u),H=d(C)(a),C.remove(),y?h.find("body").append(H):b.after(H),a.$on("$destroy",function(){for(a.isOpen===!0&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),H.remove(),b.off("keydown",u),h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v);K.length;)K.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){"today"===b&&(b=l.fromTimezone(new Date,G.timezone));var c={};return angular.forEach(["minDate","maxDate"],function(b){a.datepickerOptions[b]?angular.isDate(a.datepickerOptions[b])?c[b]=new Date(a.datepickerOptions[b]):(p&&e.warn("Literal date support has been deprecated, please switch to date object usage"),c[b]=new Date(k(a.datepickerOptions[b],"medium"))):c[b]=null}),a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){a.date=c;var d=a.date?l.filter(a.date,w):null;b.val(d),F.$setViewValue(d),x&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):(b=l.fromTimezone(d,G.timezone),b.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&K.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),z&&a.$broadcast("uib:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;y||j.parsePlacement(d)[2]?(E=E||angular.element(j.scrollParent(b)),E&&E.on("scroll",v)):E=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("uib:datepicker.mode",function(){n(v,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",
scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b,e){c||a.on("click",d),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b,e){c===b&&(a.off("click",d),a.off("keydown",this.keybindFilter),c=null)};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.focusToggleElement(),c.isOpen=!1,b.$$phase||c.$apply())}}};this.keybindFilter=function(a){if(c){var b=c.getDropdownElement(),e=c.getToggleElement(),f=b&&b[0].contains(a.target),g=e&&e[0].contains(a.target);27===a.which?(a.stopPropagation(),c.focusToggleElement(),d()):c.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&c.isOpen&&(f||g)&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen,angular.isFunction(r)&&r(o,o.isOpen),o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,m,v,w=h.positionElements(b,n.dropdownMenu,"bottom-left",!0),x=0;if(e={top:w.top+"px",display:c?"block":"none"},m=n.dropdownMenu.hasClass("dropdown-menu-right"),m?(e.left="auto",v=h.scrollbarPadding(u),v.heightOverflow&&v.scrollbarWidth&&(x=v.scrollbarWidth),e.right=window.innerWidth-x-(w.left+b.prop("offsetWidth"))+"px"):(e.left=w.left+"px",e.right="auto"),!t){var y=h.offset(u);e.top=w.top-y.top+"px",m?e.right=window.innerWidth-(w.left-y.left+b.prop("offsetWidth"))+"px":e.left=w.left-y.left+"px"}n.dropdownMenu.css(e)}var z=u?u:b,A=z.hasClass(u?p:q);if(A===!c&&g[c?"addClass":"removeClass"](z,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl?k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b,i.on("keydown",f.keybindFilter)})}):i.on("keydown",f.keybindFilter),o.focusToggleElement(),f.open(o,b);else{if(f.close(o,b),n.dropdownMenuTemplateUrl){l&&l.$destroy();var B=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(B),n.dropdownMenu=B}n.selectedOption=null}angular.isFunction(r)&&r(a,c)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();e.$$postDigest(function(){h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty(),a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){var b="-";return a.replace(E,function(a,c){return(c?b:"")+a.toLowerCase()})}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(){for(var a=-1,b=x.keys(),c=0;c<b.length;c++)x.get(b[c]).value.backdrop&&(a=c);return a>-1&&A>a&&(a=A),a}function m(a,b){var c=x.get(a).value,d=c.appendTo;x.remove(a),B=x.top(),B&&(A=parseInt(B.value.modalDomEl.attr("index"),10)),p(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||w;y.remove(b,a);var e=y.hasKey(b);d.toggleClass(b,e),!e&&v&&v.heightOverflow&&v.scrollbarWidth&&(v.originalRight?d.css({paddingRight:v.originalRight+"px"}):d.css({paddingRight:""}),v=null),n(!0)},c.closedDeferred),o(),b&&b.focus?b.focus():d.focus&&d.focus()}function n(a){var b;x.length()>0&&(b=x.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function o(){if(t&&-1===l()){var a=u;p(t,u,function(){a=null}),t=void 0,u=void 0}}function p(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){d&&d(),b.remove(),e&&e.resolve()}),c.$destroy())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(z.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function q(a){if(a.isDefaultPrevented())return a;var b=x.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){z.dismiss(b.key,"escape key press")}));break;case 9:var c=z.loadFocusElementList(b),d=!1;a.shiftKey?(z.isFocusInFirstItem(a,c)||z.isModalFocused(a,b))&&(d=z.focusLastFocusableElement(c)):z.isFocusInLastItem(a,c)&&(d=z.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function r(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}function s(){Array.prototype.forEach.call(document.querySelectorAll("["+C+"]"),function(a){var b=parseInt(a.getAttribute(C),10),c=b-1;a.setAttribute(C,c),c||(a.removeAttribute(C),a.removeAttribute("aria-hidden"))})}var t,u,v,w="modal-open",x=h.createNew(),y=g.createNew(),z={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,B=null,C="data-bootstrap-modal-aria-hidden-count",D="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",E=/[A-Z]/g;return e.$watch(l,function(a){u&&(u.index=a)}),c.on("keydown",q),e.$on("$destroy",function(){c.off("keydown",q)}),z.open=function(b,f){function g(a){function b(a){var b=a.parent()?a.parent().children():[];return Array.prototype.filter.call(b,function(b){return b!==a[0]})}if(a&&"BODY"!==a[0].tagName)return b(a).forEach(function(a){var b="true"===a.getAttribute("aria-hidden"),c=parseInt(a.getAttribute(C),10);c||(c=b?1:0),a.setAttribute(C,c+1),a.setAttribute("aria-hidden","true")}),g(a.parent())}var h=c[0].activeElement,k=f.openedClass||w;n(!1),B=x.top(),x.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),y.put(k,b);var m=f.appendTo,o=l();if(!m.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");o>=0&&!t&&(u=e.$new(!0),u.modalOptions=f,u.index=o,t=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),t.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),f.backdropClass&&t.addClass(f.backdropClass),f.animation&&t.attr("modal-animation","true"),d(t)(u),a.enter(t,m),i.isScrollable(m)&&(v=i.scrollbarPadding(m),v.heightOverflow&&v.scrollbarWidth&&m.css({paddingRight:v.right+"px"})));var p;f.component?(p=document.createElement(j(f.component.name)),p=angular.element(p),p.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):p=f.content,A=B?parseInt(B.value.modalDomEl.attr("index"),10)+1:0;var q=angular.element('<div uib-modal-window="modal-window"></div>');q.attr({"class":"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(p),f.windowClass&&q.addClass(f.windowClass),f.animation&&q.attr("modal-animation","true"),m.addClass(k),f.scope&&(f.scope.$$topModalIndex=A),a.enter(d(q)(f.scope),m),x.top().value.modalDomEl=q,x.top().value.modalOpener=h,g(q)},z.close=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),m(a,c.value.modalOpener),!0):!c},z.dismiss=function(a,b){var c=x.get(a);return s(),c&&r(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),m(a,c.value.modalOpener),!0):!c},z.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},z.getTop=function(){return x.top()},z.modalRendered=function(a){var b=x.get(a);z.focusFirstFocusableElement(z.loadFocusElementList(b)),b&&b.value.renderDeferred.resolve()},z.focusFirstFocusableElement=function(a){return a.length>0?(a[0].focus(),!0):!1},z.focusLastFocusableElement=function(a){return a.length>0?(a[a.length-1].focus(),!0):!1},z.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},z.isFocusInFirstItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[0]:!1},z.isFocusInLastItem=function(a,b){return b.length>0?(a.target||a.srcElement)===b[b.length-1]:!1},z.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(D);return c?Array.prototype.filter.call(c,function(a){return k(a)}):c}}},z}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return q}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.component&&!e.template&&!e.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var q;q=e.component?c.when(g.resolve(e.resolve,{},null,null)):c.all([i(e),g.resolve(e.resolve,{},null,null)]);var r;return r=k=c.all([k]).then(j,j).then(function(a){function c(b,c,d,e){b.$scope=g,b.$scope.$resolve={},d?b.$scope.$uibModalInstance=p:b.$uibModalInstance=p;var f=c?a[1]:a;angular.forEach(f,function(a,c){e&&(b[c]=a),b.$scope.$resolve[c]=a})}var d=e.scope||b,g=d.$new();g.$close=p.close,g.$dismiss=p.dismiss,g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});var i,j,k={scope:g,deferred:l,renderDeferred:o,closedDeferred:n,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo},q={},r={};e.component?(c(q,!1,!0,!1),q.name=e.component,k.component=q):e.controller&&(c(r,!0,!1,!0),j=f(e.controller,r,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(i=j.instance,i.$close=g.$close,i.$dismiss=g.$dismiss,angular.extend(i,{$resolve:r.$scope.$resolve},d)),i=j(),angular.isFunction(i.$onInit)&&i.$onInit()),e.component||(k.content=a[0]),h.open(p,k),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===r&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,e){c.addClass("pager");var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var n=f(h,m(h),h===a);c.push(n)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var o=f(d-1,"...",!1);c.unshift(o)}if(l){if(3===d){var p=f(2,"2",!1);c.unshift(p)}var q=f(1,"1",!1);c.unshift(q)}}if(b>e){if(!l||b-2>e){var r=f(e+1,"...",!1);c.push(r)}if(l){if(e===b-2){var s=f(b-1,b-1,!1);c.push(s)}var t=f(b,b,!1);c.push(t)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,m=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var n=this.render;this.render=function(){n(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,d,e){c.addClass("pagination");var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),b=null)}}var o=m.createNew();return h.on("keyup",n),k.$on("$destroy",function(){h.off("keyup",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'origin-scope="origScope" class="uib-position-measure '+k+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){O.isOpen?q():m()}function m(){(!N||a.$eval(d[k+"Enable"]))&&(u(),x(),O.popupDelay?G||(G=g(r,O.popupDelay,!1)):r())}function q(){s(),O.popupCloseDelay?H||(H=g(t,O.popupCloseDelay,!1)):t()}function r(){return s(),u(),O.content?(v(),void O.$evalAsync(function(){O.isOpen=!0,y(!0),T()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){O&&O.$evalAsync(function(){O&&(O.isOpen=!1,y(!1),O.animation?F||(F=g(w,150,!1)):w())})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=O.$new(),D=c(E,function(a){L?h.find("body").append(a):b.after(a)}),o.add(O,{close:t}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null,J&&g.cancel(J)),o.remove(O),E&&(E.$destroy(),E=null)}function x(){O.title=d[k+"Title"],R?O.content=R(a):O.content=d[e],O.popupClass=d[k+"Class"],O.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=i.parsePlacement(O.placement);K=b[1]?b[0]+"-"+b[1]:b[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);O.popupDelay=isNaN(c)?n.popupDelay:c,O.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function y(b){Q&&angular.isFunction(Q.assign)&&Q.assign(a,b)}function z(){S.length=0,R?(S.push(a.$watch(R,function(a){O.content=a,!a&&O.isOpen&&t()})),S.push(E.$watch(function(){P||(P=!0,E.$$postDigest(function(){P=!1,O&&O.isOpen&&T()}))}))):S.push(d.$observe(e,function(a){O.content=a,!a&&O.isOpen?t():T()})),S.push(d.$observe(k+"Title",function(a){O.title=a,O.isOpen&&T()})),S.push(d.$observe(k+"Placement",function(a){O.placement=a?a:n.placement,O.isOpen&&T()}))}function A(){S.length&&(angular.forEach(S,function(a){a()}),S.length=0)}function B(a){O&&O.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var c=[],e=[],f=a.$eval(d[k+"Trigger"]);U(),angular.isObject(f)?(Object.keys(f).forEach(function(a){c.push(a),e.push(f[a])}),M={show:c,hide:e}):M=p(f),"none"!==M.show&&M.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===M.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(M.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J,K,L=angular.isDefined(n.appendToBody)?n.appendToBody:!1,M=p(void 0),N=angular.isDefined(d[k+"Enable"]),O=a.$new(!0),P=!1,Q=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,R=n.useContentExp?l(d[e]):!1,S=[],T=function(){D&&D.html()&&(I||(I=g(function(){var a=i.positionElements(b,D,O.placement,L),c=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),d=L?i.offset(b):i.position(b);D.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");D.hasClass(e[0])||(D.removeClass(K.split("-")[0]),D.addClass(e[0])),D.hasClass(n.placementClassPrefix+a.placement)||(D.removeClass(n.placementClassPrefix+K),D.addClass(n.placementClassPrefix+a.placement)),J=g(function(){var a=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),b=i.adjustTop(e,d,c,a);b&&D.css(b),J=null},0,!1),D.hasClass("uib-position-measure")?(i.positionArrow(D,a.placement),D.removeClass("uib-position-measure")):K!==a.placement&&i.positionArrow(D,a.placement),K=a.placement,I=null},0,!1)))};O.origScope=a,O.isOpen=!1,O.contentExp=function(){return O.content},d.$observe("disabled",function(a){a&&s(),a&&O.isOpen&&t()}),Q&&a.$watch(Q,function(a){O&&!a===O.isOpen&&j()});var U=function(){M.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),M.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var V=a.$eval(d[k+"Animation"]);O.animation=angular.isDefined(V)?!!V:n.animation;var W,X=k+"AppendToBody";W=X in d&&void 0===d[X]?!0:a.$eval(d[X]),L=angular.isDefined(W)?W:L,a.$on("$destroy",function(){U(),w(),O=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(b){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(a){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff,this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({
index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a,f){if(!e){var g=b(c),h=d.tabs[g];if(h){if(h.tab.onDeselect({$event:f,$selectedIndex:a}),f&&f.isDefaultPrevented())return;h.tab.active=!1}var i=d.tabs[a];i?(i.tab.onSelect({$event:f}),i.tab.active=!0,d.active=i.index,c=i.index):!i&&angular.isDefined(c)&&(d.active=null,c=null)}},d.addTab=function(a){if(d.tabs.push({tab:a,index:a.index}),d.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===d.active||!angular.isDefined(d.active)&&1===d.tabs.length){var c=b(a.index);d.select(c)}},d.removeTab=function(a){for(var b,c=0;c<d.tabs.length;c++)if(d.tabs[c].tab===a){b=c;break}if(d.tabs[b].index===d.active){var e=b===d.tabs.length-1?b-1:b+1%d.tabs.length;d.select(e)}d.tabs.splice(b,1)},a.$watch("tabset.active",function(a){angular.isDefined(a)&&a!==c&&d.select(b(a))});var e;a.$on("$destroy",function(){e=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),angular.isUndefined(d.classes)&&(b.classes=""),b.select=function(a){if(!b.disabled){for(var c,d=0;d<e.tabs.length;d++)if(e.tabs[d].tab===b){c=d;break}e.select(c,a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase()||"uib:tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c&&""!==a.hours?(a.showMeridian&&(12===b&&(b=0),a.meridian===y[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes,c=b>=0&&60>b;return c&&""!==a.minutes?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function l(a){m(),x.$setViewValue(new Date(v)),n(a)}function m(){s&&s.$setValidity("hours",!0),t&&t.$setValidity("minutes",!0),u&&u.$setValidity("seconds",!0),x.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(x.$modelValue){var c=v.getHours(),d=v.getMinutes(),e=v.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c,!z),"m"!==b&&(a.minutes=k(d)),a.meridian=v.getHours()<12?y[0]:y[1],"s"!==b&&(a.seconds=k(e)),a.meridian=v.getHours()<12?y[0]:y[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=y[0]}function o(a){v=q(v,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function r(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}var s,t,u,v=new Date,w=[],x={$setViewValue:angular.noop},y=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,z=angular.isDefined(c.padHours)?a.$parent.$eval(c.padHours):!0;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){x=b,x.$render=this.render,x.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2);s=e.controller("ngModel"),t=f.controller("ngModel"),u=h.controller("ngModel");var i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var A=g.hourStep;c.hourStep&&w.push(a.$parent.$watch(d(c.hourStep),function(a){A=+a}));var B=g.minuteStep;c.minuteStep&&w.push(a.$parent.$watch(d(c.minuteStep),function(a){B=+a}));var C;w.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);C=isNaN(b)?void 0:b}));var D;w.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);D=isNaN(b)?void 0:b}));var E=!1;c.ngDisabled&&w.push(a.$parent.$watch(d(c.ngDisabled),function(a){E=a})),a.noIncrementHours=function(){var a=p(v,60*A);return E||a>D||v>a&&C>a},a.noDecrementHours=function(){var a=p(v,60*-A);return E||C>a||a>v&&a>D},a.noIncrementMinutes=function(){var a=p(v,B);return E||a>D||v>a&&C>a},a.noDecrementMinutes=function(){var a=p(v,-B);return E||C>a||a>v&&a>D},a.noIncrementSeconds=function(){var a=q(v,F);return E||a>D||v>a&&C>a},a.noDecrementSeconds=function(){var a=q(v,-F);return E||C>a||a>v&&a>D},a.noToggleMeridian=function(){return v.getHours()<12?E||p(v,720)>D:E||p(v,-720)<C};var F=g.secondStep;c.secondStep&&w.push(a.$parent.$watch(d(c.secondStep),function(a){F=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&w.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&w.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,x.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(v.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){E||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){E||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){x.$setViewValue(null),x.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b,s&&s.$setValidity("hours",!1)),angular.isDefined(c)&&(a.invalidMinutes=c,t&&t.$setValidity("minutes",!1)),angular.isDefined(d)&&(a.invalidSeconds=d,u&&u.$setValidity("seconds",!1))};a.updateHours=function(){var a=h(),b=i();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(a),v.setMinutes(b),C>v||v>D?e(!0):l("h")):e(!0)},b.bind("blur",function(b){x.$setTouched(),r()?m():null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours,!z)})}),a.updateMinutes=function(){var a=i(),b=h();x.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(v.setHours(b),v.setMinutes(a),C>v||v>D?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){x.$setTouched(),r()?m():null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();x.$setDirty(),angular.isDefined(a)?(v.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){r()?m():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=x.$viewValue;isNaN(b)?(x.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(v=b),C>v||v>D?(x.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*A*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-A*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*B)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-B)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(F)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-F)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(v.getHours()<12?60:-60)):a.meridian=a.meridian===y[0]?y[1]:y[0])},a.blur=function(){x.$setTouched()},a.$on("$destroy",function(){for(;w.length;)w.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){O.moveInProgress||(O.moveInProgress=!0,O.$digest()),Z()}function o(){O.position=E?l.offset(b):l.position(b),O.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1),a.$watch(c.typeaheadMinLength,function(a){t=a||0===a?a:1});var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return 13===c.which||9===c.which},A=e(c.typeaheadOnSelect),B=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,C=e(c.typeaheadNoResults).assign||angular.noop,D=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,E=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,F=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,G=a.$eval(c.typeaheadFocusFirst)!==!1,H=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,I=e(c.typeaheadIsOpen).assign||angular.noop,J=a.$eval(c.typeaheadShowHint)||!1,K=e(c.ngModel),L=e(c.ngModel+"($$$p)"),M=function(b,c){return angular.isFunction(K(a))&&q&&q.$options&&q.$options.getterSetter?L(b,{$$$p:c}):K.assign(b,c)},N=m.parse(c.uibTypeahead),O=a.$new(),P=a.$on("$destroy",function(){O.$destroy()});O.$on("$destroy",P);var Q="typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":Q});var R,S;J&&(R=angular.element("<div></div>"),R.css("position","relative"),b.after(R),S=b.clone(),S.attr("placeholder",""),S.attr("tabindex","-1"),S.val(""),S.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),S.attr("id")&&S.removeAttr("id"),R.append(S),S.after(b));var T=angular.element("<div uib-typeahead-popup></div>");T.attr({id:Q,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&T.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&T.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var U=function(){J&&S.val("")},V=function(){O.matches=[],O.activeIdx=-1,b.attr("aria-expanded",!1),U()},W=function(a){return Q+"-option-"+a};O.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",W(a))});var X=function(a,b){return O.matches.length>b&&a?a.toUpperCase()===O.matches[b].label.toUpperCase():!1},Y=function(c,d){var e={$viewValue:c};y(a,!0),C(a,!1),f.when(N.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){O.activeIdx=G?0:-1,C(a,!1),O.matches.length=0;for(var h=0;h<f.length;h++)e[N.itemName]=f[h],O.matches.push({id:W(h),label:N.viewMapper(O,e),model:f[h]});if(O.query=c,o(),b.attr("aria-expanded",!0),H&&1===O.matches.length&&X(c,0)&&(angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(0,d)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate["default"]):O.select(0,d)),J){var i=O.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?S.val(c+i.slice(c.length)):S.val("")}}else V(),C(a,!0);g&&y(a,!1)},function(){V(),y(a,!1),C(a,!0)})};E&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Z=k(function(){O.matches.length&&o(),O.moveInProgress=!1},s);O.moveInProgress=!1,O.query=void 0;var $,_=function(a){$=g(function(){Y(a)},u)},aa=function(){$&&g.cancel($)};V(),O.assignIsOpen=function(b){I(a,b)},O.select=function(d,e){var f,h,i={};x=!0,i[N.itemName]=h=O.matches[d].model,f=N.modelMapper(a,i),M(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),A(a,{$item:h,$model:f,$label:N.viewMapper(a,i),$event:e}),V(),O.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(b){if(0!==O.matches.length&&-1!==r.indexOf(b.which)){var c=z(a,{$event:b});if(-1===O.activeIdx&&c||9===b.which&&b.shiftKey)return V(),void O.$digest();b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation(),V(),a.$digest();break;case 38:O.activeIdx=(O.activeIdx>0?O.activeIdx:O.matches.length)-1,O.$digest(),d=T[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;case 40:O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest(),d=T[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;default:c&&O.$apply(function(){angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(O.activeIdx,b)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate["default"]):O.select(O.activeIdx,b)})}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){Y(p.$viewValue,a)},0)}),b.bind("blur",function(a){B&&O.matches.length&&-1!==O.activeIdx&&!x&&(x=!0,O.$apply(function(){angular.isObject(O.debounceUpdate)&&angular.isNumber(O.debounceUpdate.blur)?k(function(){O.select(O.activeIdx,a)},O.debounceUpdate.blur):O.select(O.activeIdx,a)})),!v&&p.$error.editable&&(p.$setViewValue(),O.$apply(function(){p.$setValidity("editable",!0),p.$setValidity("parse",!0)}),b.val("")),w=!1,x=!1});var ba=function(c){b[0]!==c.target&&3!==c.which&&0!==O.matches.length&&(V(),j.$$phase||a.$digest())};h.on("click",ba),a.$on("$destroy",function(){h.off("click",ba),(E||F)&&ca.remove(),E&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),T.remove(),J&&R.remove()});var ca=d(T)(O);E?h.find("body").append(ca):F?angular.element(F).eq(0).append(ca):b.after(ca),this.init=function(b,c){p=b,q=c,O.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(aa(),_(b)):Y(b):(y(a,!1),aa(),V()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),D?(e.$model=b,D(a,e)):(e[N.itemName]=b,c=N.viewMapper(a,e),e[N.itemName]=void 0,d=N.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n');
}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),!function(a){function b(a){return a}function c(a,b){for(var c=0,d=b.length,e=Array(d);d>c;++c)e[c]=a[b[c]];return e}function d(a){function b(b,c,d,e){for(;e>d;){var f=d+e>>>1;a(b[f])<c?d=f+1:e=f}return d}function c(b,c,d,e){for(;e>d;){var f=d+e>>>1;c<a(b[f])?e=f:d=f+1}return d}return c.right=c,c.left=b,c}function e(a){function b(a,b,c){for(var e=c-b,f=(e>>>1)+1;--f>0;)d(a,f,e,b);return a}function c(a,b,c){for(var e,f=c-b;--f>0;)e=a[b],a[b]=a[b+f],a[b+f]=e,d(a,1,f,b);return a}function d(b,c,d,e){for(var f,g=b[--e+c],h=a(g);(f=c<<1)<=d&&(d>f&&a(b[e+f])>a(b[e+f+1])&&f++,!(h<=a(b[e+f])));)b[e+c]=b[e+f],c=f;b[e+c]=g}return b.sort=c,b}function f(a){function b(b,d,e,f){var g,h,i,j,k=Array(f=Math.min(e-d,f));for(h=0;f>h;++h)k[h]=b[d++];if(c(k,0,f),e>d){g=a(k[0]);do(i=a(j=b[d])>g)&&(k[0]=j,g=a(c(k,0,f)[0]));while(++d<e)}return k}var c=e(a);return b}function g(a){function b(b,c,d){for(var e=c+1;d>e;++e){for(var f=e,g=b[e],h=a(g);f>c&&a(b[f-1])>h;--f)b[f]=b[f-1];b[f]=g}return b}return b}function h(a){function b(a,b,e){return(D>e-b?d:c)(a,b,e)}function c(c,d,e){var f,g=0|(e-d)/6,h=d+g,i=e-1-g,j=d+e-1>>1,k=j-g,l=j+g,m=c[h],n=a(m),o=c[k],p=a(o),q=c[j],r=a(q),s=c[l],t=a(s),u=c[i],v=a(u);n>p&&(f=m,m=o,o=f,f=n,n=p,p=f),t>v&&(f=s,s=u,u=f,f=t,t=v,v=f),n>r&&(f=m,m=q,q=f,f=n,n=r,r=f),p>r&&(f=o,o=q,q=f,f=p,p=r,r=f),n>t&&(f=m,m=s,s=f,f=n,n=t,t=f),r>t&&(f=q,q=s,s=f,f=r,r=t,t=f),p>v&&(f=o,o=u,u=f,f=p,p=v,v=f),p>r&&(f=o,o=q,q=f,f=p,p=r,r=f),t>v&&(f=s,s=u,u=f,f=t,t=v,v=f);var w=o,x=p,y=s,z=t;c[h]=m,c[k]=c[d],c[j]=q,c[l]=c[e-1],c[i]=u;var A=d+1,B=e-2,C=z>=x&&x>=z;if(C)for(var D=A;B>=D;++D){var E=c[D],F=a(E);if(x>F)D!==A&&(c[D]=c[A],c[A]=E),++A;else if(F>x)for(;;){var G=a(c[B]);if(!(G>x)){if(x>G){c[D]=c[A],c[A++]=c[B],c[B--]=E;break}c[D]=c[B],c[B--]=E;break}B--}}else for(var D=A;B>=D;D++){var E=c[D],F=a(E);if(x>F)D!==A&&(c[D]=c[A],c[A]=E),++A;else if(F>z)for(;;){var G=a(c[B]);if(!(G>z)){x>G?(c[D]=c[A],c[A++]=c[B],c[B--]=E):(c[D]=c[B],c[B--]=E);break}if(B--,D>B)break}}if(c[d]=c[A-1],c[A-1]=w,c[e-1]=c[B+1],c[B+1]=y,b(c,d,A-1),b(c,B+2,e),C)return c;if(h>A&&B>i){for(var H,G;(H=a(c[A]))<=x&&H>=x;)++A;for(;(G=a(c[B]))<=z&&G>=z;)--B;for(var D=A;B>=D;D++){var E=c[D],F=a(E);if(x>=F&&F>=x)D!==A&&(c[D]=c[A],c[A]=E),A++;else if(z>=F&&F>=z)for(;;){var G=a(c[B]);if(!(z>=G&&G>=z)){x>G?(c[D]=c[A],c[A++]=c[B],c[B--]=E):(c[D]=c[B],c[B--]=E);break}if(B--,D>B)break}}}return b(c,A,B+1)}var d=g(a);return b}function i(a){for(var b=Array(a),c=-1;++c<a;)b[c]=0;return b}function j(a,b){for(var c=a.length;b>c;)a[c++]=0;return a}function k(a,b){if(b>32)throw Error("invalid array width!");return a}function l(a,b){return function(c){var d=c.length;return[a.left(c,b,0,d),a.right(c,b,0,d)]}}function m(a,b){var c=b[0],d=b[1];return function(b){var e=b.length;return[a.left(b,c,0,e),a.left(b,d,0,e)]}}function n(a){return[0,a.length]}function o(){return null}function p(){return 0}function q(a){return a+1}function r(a){return a-1}function s(a){return function(b,c){return b+ +a(c)}}function t(a){return function(b,c){return b-a(c)}}function u(){function a(a){var b=z,c=a.length;return c&&(u=u.concat(a),C=H(C,z+=c),F.forEach(function(d){d(a,b,c)})),k}function d(){for(var a=v(z,z),b=[],c=0,d=0;z>c;++c)C[c]?a[c]=d++:b.push(c);D.forEach(function(a){a(0,[],b)}),G.forEach(function(b){b(a)});for(var e,c=0,d=0;z>c;++c)(e=C[c])&&(c!==d&&(C[d]=e,u[d]=u[c]),++d);for(u.length=d;z>d;)C[--z]=0}function g(a){function d(b,d,e){U=b.map(a),V=$(w(e),0,e),U=c(U,V);var f,g=_(U),h=g[0],i=g[1];if(W)for(f=0;e>f;++f)W(U[f],f)||(C[V[f]+d]|=Y);else{for(f=0;h>f;++f)C[V[f]+d]|=Y;for(f=i;e>f;++f)C[V[f]+d]|=Y}if(!d)return S=U,T=V,ca=h,void(da=i);var j=S,k=T,l=0,m=0;for(S=Array(z),T=v(z,z),f=0;d>l&&e>m;++f)j[l]<U[m]?(S[f]=j[l],T[f]=k[l++]):(S[f]=U[m],T[f]=V[m++]+d);for(;d>l;++l,++f)S[f]=j[l],T[f]=k[l];for(;e>m;++m,++f)S[f]=U[m],T[f]=V[m]+d;g=_(S),ca=g[0],da=g[1]}function g(a,b,c){aa.forEach(function(a){a(U,V,b,c)}),U=V=null}function i(a){for(var b,c=0,d=0;z>c;++c)C[b=T[c]]&&(c!==d&&(S[d]=S[c]),T[d]=a[b],++d);for(S.length=d;z>d;)T[d++]=0;var e=_(S);ca=e[0],da=e[1]}function j(a){var b=a[0],c=a[1];if(W)return W=null,M(function(a,d){return d>=b&&c>d}),ca=b,da=c,X;var d,e,f,g=[],h=[];if(ca>b)for(d=b,e=Math.min(ca,c);e>d;++d)C[f=T[d]]^=Y,g.push(f);else if(b>ca)for(d=ca,e=Math.min(b,da);e>d;++d)C[f=T[d]]^=Y,h.push(f);if(c>da)for(d=Math.max(b,da),e=c;e>d;++d)C[f=T[d]]^=Y,g.push(f);else if(da>c)for(d=Math.max(ca,c),e=da;e>d;++d)C[f=T[d]]^=Y,h.push(f);return ca=b,da=c,D.forEach(function(a){a(Y,g,h)}),X}function k(a){return null==a?K():Array.isArray(a)?J(a):"function"==typeof a?L(a):E(a)}function E(a){return j((_=l(y,a))(S))}function J(a){return j((_=m(y,a))(S))}function K(){return j((_=n)(S))}function L(a){return _=n,M(W=a),ca=0,da=z,X}function M(a){var b,c,d,e=[],f=[];for(b=0;z>b;++b)!(C[c=T[b]]&Y)^!!(d=a(S[b],b))&&(d?(C[c]&=Z,e.push(c)):(C[c]|=Y,f.push(c)));D.forEach(function(a){a(Y,e,f)})}function N(a){for(var b,c=[],d=da;--d>=ca&&a>0;)C[b=T[d]]||(c.push(u[b]),--a);return c}function O(a){for(var b,c=[],d=ca;da>d&&a>0;)C[b=T[d]]||(c.push(u[b]),--a),d++;return c}function P(a){function c(b,c,d,e){function f(){++U===R&&(s=I(s,Q<<=1),K=I(K,Q),R=x(Q))}var k,l,m,n,p,q,r=J,s=v(U,R),t=N,w=P,y=U,A=0,B=0;for(X&&(t=w=o),J=Array(U),U=0,K=y>1?H(K,z):v(z,R),y&&(m=(l=r[0]).key);e>B&&!((n=a(b[B]))>=n);)++B;for(;e>B;){for(l&&n>=m?(p=l,q=m,s[A]=U,(l=r[++A])&&(m=l.key)):(p={key:n,value:w()},q=n),J[U]=p;!(n>q||(K[k=c[B]+d]=U,C[k]&Z||(p.value=t(p.value,u[k])),++B>=e));)n=a(b[B]);f()}for(;y>A;)J[s[A]=U]=r[A++],f();if(U>A)for(A=0;d>A;++A)K[A]=s[K[A]];k=D.indexOf(V),U>1?(V=g,W=i):(!U&&$&&(U=1,J=[{key:null,value:w()}]),1===U?(V=h,W=j):(V=o,W=o),K=null),D[k]=V}function d(){if(U>1){for(var a=U,b=J,c=v(a,a),d=0,e=0;z>d;++d)C[d]&&(c[K[e]=K[d]]=1,++e);for(J=[],U=0,d=0;a>d;++d)c[d]&&(c[d]=U++,J.push(b[d]));if(U>1)for(var d=0;e>d;++d)K[d]=c[K[d]];else K=null;D[D.indexOf(V)]=U>1?(W=i,V=g):1===U?(W=j,V=h):W=V=o}else if(1===U){if($)return;for(var d=0;z>d;++d)if(C[d])return;J=[],U=0,D[D.indexOf(V)]=V=W=o}}function g(a,b,c){if(a!==Y&&!X){var d,e,f,g;for(d=0,f=b.length;f>d;++d)C[e=b[d]]&Z||(g=J[K[e]],g.value=N(g.value,u[e]));for(d=0,f=c.length;f>d;++d)(C[e=c[d]]&Z)===a&&(g=J[K[e]],g.value=O(g.value,u[e]))}}function h(a,b,c){if(a!==Y&&!X){var d,e,f,g=J[0];for(d=0,f=b.length;f>d;++d)C[e=b[d]]&Z||(g.value=N(g.value,u[e]));for(d=0,f=c.length;f>d;++d)(C[e=c[d]]&Z)===a&&(g.value=O(g.value,u[e]))}}function i(){var a,b;for(a=0;U>a;++a)J[a].value=P();for(a=0;z>a;++a)C[a]&Z||(b=J[K[a]],b.value=N(b.value,u[a]))}function j(){var a,b=J[0];for(b.value=P(),a=0;z>a;++a)C[a]&Z||(b.value=N(b.value,u[a]))}function k(){return X&&(W(),X=!1),J}function l(a){var b=L(k(),0,J.length,a);return M.sort(b,0,b.length)}function m(a,b,c){return N=a,O=b,P=c,X=!0,F}function n(){return m(q,r,p)}function w(a){return m(s(a),t(a),p)}function y(a){function b(b){return a(b.value)}return L=f(b),M=e(b),F}function A(){return y(b)}function B(){return U}function E(){var a=D.indexOf(V);return a>=0&&D.splice(a,1),a=aa.indexOf(c),a>=0&&aa.splice(a,1),a=G.indexOf(d),a>=0&&G.splice(a,1),F}var F={top:l,all:k,reduce:m,reduceCount:n,reduceSum:w,order:y,orderNatural:A,size:B,dispose:E,remove:E};ba.push(F);var J,K,L,M,N,O,P,Q=8,R=x(Q),U=0,V=o,W=o,X=!0,$=a===o;return arguments.length<1&&(a=b),D.push(V),aa.push(c),G.push(d),c(S,T,0,z),n().orderNatural()}function Q(){var a=P(o),b=a.all;return delete a.all,delete a.top,delete a.order,delete a.orderNatural,delete a.size,a.value=function(){return b()[0].value},a}function R(){ba.forEach(function(a){a.dispose()});var a=F.indexOf(d);return a>=0&&F.splice(a,1),a=F.indexOf(g),a>=0&&F.splice(a,1),a=G.indexOf(i),a>=0&&G.splice(a,1),A&=Z,K()}var S,T,U,V,W,X={filter:k,filterExact:E,filterRange:J,filterFunction:L,filterAll:K,top:N,bottom:O,group:P,groupAll:Q,dispose:R,remove:R},Y=~A&-~A,Z=~Y,$=h(function(a){return U[a]}),_=n,aa=[],ba=[],ca=0,da=0;return F.unshift(d),F.push(g),G.push(i),A|=Y,(B>=32?!Y:A&-(1<<B))&&(C=I(C,B<<=1)),d(u,0,z),g(u,0,z),X}function i(){function a(a,b){var c;if(!n)for(c=b;z>c;++c)C[c]||(i=j(i,u[c]))}function b(a,b,c){var d,e,f;if(!n){for(d=0,f=b.length;f>d;++d)C[e=b[d]]||(i=j(i,u[e]));for(d=0,f=c.length;f>d;++d)C[e=c[d]]===a&&(i=k(i,u[e]))}}function c(){var a;for(i=l(),a=0;z>a;++a)C[a]||(i=j(i,u[a]))}function d(a,b,c){return j=a,k=b,l=c,n=!0,m}function e(){return d(q,r,p)}function f(a){return d(s(a),t(a),p)}function g(){return n&&(c(),n=!1),i}function h(){var c=D.indexOf(b);return c>=0&&D.splice(c),c=F.indexOf(a),c>=0&&F.splice(c),m}var i,j,k,l,m={reduce:d,reduceCount:e,reduceSum:f,value:g,dispose:h,remove:h},n=!0;return D.push(b),F.push(a),a(u,0,z),e()}function j(){return z}var k={add:a,remove:d,dimension:g,groupAll:i,size:j},u=[],z=0,A=0,B=8,C=E(0),D=[],F=[],G=[];return arguments.length?a(arguments[0]):k}function v(a,b){return(257>b?E:65537>b?F:G)(a)}function w(a){for(var b=v(a,a),c=-1;++c<a;)b[c]=c;return b}function x(a){return 8===a?256:16===a?65536:4294967296}u.version="1.3.14",u.permute=c;var y=u.bisect=d(b);y.by=d;var z=u.heap=e(b);z.by=e;var A=u.heapselect=f(b);A.by=f;var B=u.insertionsort=g(b);B.by=g;var C=u.quicksort=h(b);C.by=h;var D=32,E=i,F=i,G=i,H=j,I=k;"undefined"!=typeof Uint8Array&&(E=function(a){return new Uint8Array(a)},F=function(a){return new Uint16Array(a)},G=function(a){return new Uint32Array(a)},H=function(a,b){if(a.length>=b)return a;var c=new a.constructor(b);return c.set(a),c},I=function(a,b){var c;switch(b){case 16:c=F(a.length);break;case 32:c=G(a.length);break;default:throw Error("invalid array width!")}return c.set(a),c}),a.crossfilter=u}("undefined"!=typeof exports&&exports||this),angular.module("sirislab.elastic-list",[]).service("ElasticListEvents",function(){var a=["ELASTIC_LIST_DATA","ELASTIC_LIST_STATE","ELASTIC_LIST_UPDATE_FILTER"];return _.zipObject(a,a)}).directive("elasticList",["$timeout","ElasticListEvents","$compile","$rootScope",function(a,b,c,d){return{template:'<div><div class="elastic-list-title"><p>{{elasticListTitle}}</p><span><button ng-disabled="!existFilters()" ng-click="resetFilters()" class="btn btn-primary btn-xs">Clear filters</button></span></div><div class="elastic-list"></div><div ng-if="showTagList" class="tag-list"><span class="tag" ng-repeat="tag in tagList"><span>{{tag.value}}</span><a href data-ng-click="updateFilters(tag.dim, tag.value)">x</a></span></div></div>',restrict:"E",scope:{height:"=",resultTableHeight:"=",placeholderResultTable:"=",scaleFonts:"=",showResultTable:"=",showCharts:"=",showTagList:"=",elasticListTitle:"=",mainDimension:"="},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u={},v=d3.select(f[0]).select(".elastic-list"),w=d3.select("body").append("div").attr("id","elastic-list-tooltip"),x=80,y=(d3.scale.linear().range([8,12]),20),z=200,A=d3.scale.linear().range([y,z]),B=35,C=4,D=1e3,E={},F={};e.dimensionsKeys={},e.tagList=[],e.$on(b.ELASTIC_LIST_DATA,function(a,b){e.showCharts||d3.select(f[0]).select("timeline-vega").remove(),b.data&&b.dimensionsNames&&(e.data=b.data,h=b.dimensionsNames,i=b.dimensionsSearchableByText,j=b.dimensionsInResultTable,s=crossfilter(b.data),I(),A.domain([2,E[e.mainDimension].group().all().length]),J(),e.showResultTable&&e.placeholderResultTable&&(k=_.map(j,function(a){return{head:a.name,cl:"column-class",html:function(b){return b[a.name]},percentage:a.percentage}}),e.drawResultTable()))}),e.broadcastStatus=function(){d.$broadcast(b.ELASTIC_LIST_STATE,{filtered_data:e.getFilteredData(),filters:e.tagList})},e.$on(b.ELASTIC_LIST_UPDATE_FILTER,function(a,b){e.updateFilters(b.dim,b.value),e.$apply(),e.broadcastStatus()}),e.getFilteredData=function(){return _.filter(e.data,function(a){return h.every(function(b){return u[b].values.filter(function(c){return c.key==a[b]})[0].value>0})})},e.updateFilters=function(a,b){u[a].filters.has(b)?u[a].filters.remove(b):u[a].filters.add(b),H(),G()},e.existFilters=function(){for(var a=!1,b=0;h&&b<h.length&&0==a;b++)a=a||!u[h[b]].filters.empty();return a};var G=function(){e.tagList=[],h.forEach(function(a){e.tagList=e.tagList.concat(_.map(u[a].filters.values(),function(b){return{dim:a,value:b}}))}),K(),P(),e.showResultTable&&R()},H=function(){h.forEach(function(a){F[a].filter(null),F[a].filter(function(b){return u[a].filters.empty()?!0:u[a].filters.values().indexOf(b)>-1})})},I=function(){h.forEach(function(a){u[a]={},u[a].values=[],u[a].filters=d3.set(),E[a]=s.dimension(function(b){return b[a]}),F[a]=s.dimension(function(b){return b[a]})}),H()};e.resetFilters=function(){h.forEach(function(a){u[a].filters=d3.set(),F[a].filter(null)}),G()};var J=function(){K(),h.forEach(function(a){e.dimensionsKeys[a]=_.map(u[a].values,function(a){return a.key})}),M()},K=function(){h.forEach(function(a){var b=E[a].group().reduce(function(a,b){return b[e.mainDimension]in a[e.mainDimension]?a[e.mainDimension][b[e.mainDimension]]++:(a[e.mainDimension][b[e.mainDimension]]=1,a.count++),a},function(a,b){return a[e.mainDimension][b[e.mainDimension]]--,0===a[e.mainDimension][b[e.mainDimension]]&&(delete a[e.mainDimension][b[e.mainDimension]],a.count--),a},function(){var a={count:0};return a[e.mainDimension]={},a});_.assign(u[a].values,_.map(b.all(),function(a){return{key:a.key,value:a.value.count}}))})},L=function(a,b,c){if(0!=c){var d=d3.select(a.parentNode.parentNode).selectAll("g").filter(function(a,b){return b==c-1}),e=+d.attr("__ypos__")+ +d.select("rect").attr("__height__");return d3.select(a.parentNode).attr("__ypos__",e),e}d3.select(a.parentNode).attr("__ypos__",0)},M=function(){n={top:20,right:20,bottom:30,left:40},o=v.node().getBoundingClientRect().width,p=e.height-n.top-n.bottom+x,q=37,m=d3.scale.ordinal().domain(h).rangeRoundBands([0,o]),l=d3.svg.axis().scale(m).orient("bottom"),v.style("width",o+"px").style("height",p+"px"),v.append("div").attr("class","elastic-list-dimension-headers").selectAll(".elastic-list-dimension-header").data(h).enter().append("div").attr("class","elastic-list-dimension-header").style("width",m.rangeBand()+"px").style("height",x+"px").text(function(a){return a}),d3.selectAll(".elastic-list-dimension-header").each(function(a,b){if(-1!=_.indexOf(i,a)){var d=angular.element('<div class="typeahead">   <input type="text" ng-model="selected_'+a+'" typeahead-on-select="updateFilters(\''+a+'\', $item)" uib-typeahead="value for value in dimensionsKeys.'+a+' | filter:$viewValue | limitTo:8" class="form-control"></div>'),f=c(angular.element("<div>").append(d).html())(e);angular.element(d3.select(this).node()).append(f)}}),r=v.selectAll(".elastic-list-dimension").data(d3.entries(u));var b=r.enter().append("div").attr("class","elastic-list-dimension").style("width",m.rangeBand()+"px").style("height",e.height-x+"px").attr("overflow-y","auto").append("svg").attr("height",e.height+"px").attr("width",m.rangeBand()+"px").selectAll(".elastic-list-dimension-item").data(O);b.enter().append("g").attr("class","elastic-list-dimension-item").append("rect").attr("__height__",function(a,b){return L(this,a,b),N(this.parentNode.parentNode,a)}).attr("width",m.rangeBand()+"px").on("mouseover",function(a){d3.select(this).classed("elastic-list-dimension-item-hover",!0),w.style("visibility","visible")}).on("mousemove",function(a){w.style("top",event.pageY-10+"px").style("left",event.pageX+10+"px").html("<span>"+a.key+"</span><br><span>"+a.value+" occurrence"+(a.value>1?"s</p>":"</span>"))}).on("mouseout",function(a){d3.select(this).classed("elastic-list-dimension-item-hover",!1),w.style("visibility","hidden")}).on("click",function(a){e.updateFilters(this.parentNode.parentNode.__data__.key,a.key),d3.select(this).classed("elastic-list-dimension-item-hover",!1),e.$apply(),e.broadcastStatus()}).transition().duration(D).attr("height",function(a,b){var c=N(this.parentNode.parentNode,a),d=L(this,a,b);return 0==b?d3.select(this.parentNode).attr("transform","translate(0,0)"):d3.select(this.parentNode).transition().duration(D).attr("transform","translate(0,"+d+")"),c}),a(function(){v.selectAll(".elastic-list-dimension-item").each(function(a,b){var c=d3.select(this).append("text").attr("x",e.scaleFonts?5:10).attr("y",e.scaleFonts?5:14).text(a.key.length>B?a.key.substring(0,B)+"...":a.key);e.scaleFonts&&d3plus.textwrap().container(c).width(m.rangeBand()-20).resize(!0).draw()})},D),P()},N=function(a,b){return 0==b.value?C:1==b.value?y:A(b.value)},O=function(a,b){return a.value.values},P=function(){var b=r.selectAll(".elastic-list-dimension-item").data(O).classed("filter",function(a){return u[this.parentNode.__data__.key].filters.has(a.key)});b.select("text").attr("visibility","hidden"),b.select("rect").attr("__height__",function(a,b){return L(this,a,b),N(this.parentNode.parentNode,a)}).transition().duration(D).attr("height",function(a,b){var c=N(this.parentNode.parentNode,a),d=L(this,a,b);return 0==b?d3.select(this.parentNode).attr("transform","translate(0,0)"):d3.select(this.parentNode).transition().duration(D).attr("transform","translate(0,"+d+")"),c}),a(function(){v.selectAll(".elastic-list-dimension-item").each(function(a,b){var c=d3.select(this);if(+c.select("rect").attr("__height__")>C){var d=c.select("text").attr("visibility","visible");e.scaleFonts&&d3plus.textwrap().container(d).width(m.rangeBand()-20).resize(!0).draw()}})},D),e.broadcastStatus()};e.drawResultTable=function(){d3.select("#"+e.placeholderResultTable).select(".result-table").select("table").remove(),t=d3.select("#"+e.placeholderResultTable).select(".result-table").append("table").attr("class","table table-striped"),t.append("thead").append("tr").selectAll("th").data(k).enter().append("th").attr("class",function(a){
return a.cl}).text(function(a){return a.head.substring(0,15)+"..."}),Q()};var Q=function(){t.append("tbody").selectAll("tr").data(e.getFilteredData()).enter().append("tr").selectAll("td").data(function(a,b){return k.map(function(c){var d={};return d3.keys(c).forEach(function(e){d[e]="function"==typeof c[e]?c[e](a,b):c[e]}),d})}).enter().append("td").attr("width",function(a){return a.percentage+"%"}).html(function(a){return a.html}).attr("class",function(a){return a.cl});var a=[];t.select("tbody").select("tr").selectAll("td").each(function(b,c){a.push(d3.select(this).node().getBoundingClientRect().width)}),t.select("thead").select("tr").selectAll("th").each(function(b,c){d3.select(this).style("width",a[c]+"px")})},R=function(){t.select("tbody").remove(),Q()}}}}]),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.dl=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.d3_dsv={})}(this,function(a){"use strict";function b(a){return new f(a)}function c(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function d(a,b){var d=c(a);return function(c,e){return b(d(c),e,a)}}function e(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function f(a){function b(b){return b.map(f).join(a)}function f(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=new RegExp('["'+a+"\n]"),h=a.charCodeAt(0);this.parse=function(a,b){var e,f,g=this.parseRows(a,function(a,g){return e?e(a,g-1):(f=a,void(e=b?d(a,b):c(a)))});return g.columns=f,g},this.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b,c=k;if(34===a.charCodeAt(c)){for(var d=c;d++<j;)if(34===a.charCodeAt(d)){if(34!==a.charCodeAt(d+1))break;++d}return k=d+2,b=a.charCodeAt(d+1),13===b?(e=!0,10===a.charCodeAt(d+2)&&++k):10===b&&(e=!0),a.slice(c+1,d).replace(/""/g,'"')}for(;j>k;){var i=1;if(b=a.charCodeAt(k++),10===b)e=!0;else if(13===b)e=!0,10===a.charCodeAt(k)&&(++k,++i);else if(b!==h)continue;return a.slice(c,k-i)}return a.slice(c)}for(var d,e,f={},g={},i=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||i.push(m)}return i},this.format=function(b,c){return null==c&&(c=e(b)),[c.map(f).join(a)].concat(b.map(function(b){return c.map(function(a){return f(b[a])}).join(a)})).join("\n")},this.formatRows=function(a){return a.map(b).join("\n")}}b.prototype=f.prototype;var g=b(","),h=b("	"),i="0.1.14";a.version=i,a.dsv=b,a.csv=g,a.tsv=h})},{}],3:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a("d3-format",["exports"],e):e(b.d3_format={})}(this,function(a){"use strict";function b(a,b){if((c=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e"))<0)return null;var c,d=a.slice(0,c);return[d.length>1?d[0]+d.slice(2):d,+a.slice(c+1)]}function c(a){return a=b(Math.abs(a)),a?a[1]:NaN}function d(a,b){return function(c,d){for(var e=c.length,f=[],g=0,h=a[0],i=0;e>0&&h>0&&(i+h+1>d&&(h=Math.max(1,d-i)),f.push(c.substring(e-=h,e+h)),!((i+=h+1)>d));)h=a[g=(g+1)%a.length];return f.reverse().join(b)}}function e(a,c){var d=b(a,c);if(!d)return a+"";var e=d[0],f=d[1],g=f-(o=3*Math.max(-8,Math.min(8,Math.floor(f/3))))+1,h=e.length;return g===h?e:g>h?e+new Array(g-h+1).join("0"):g>0?e.slice(0,g)+"."+e.slice(g):"0."+new Array(1-g).join("0")+b(a,Math.max(0,c+g-1))[0]}function f(a,c){var d=b(a,c);if(!d)return a+"";var e=d[0],f=d[1];return 0>f?"0."+new Array(-f).join("0")+e:e.length>f+1?e.slice(0,f+1)+"."+e.slice(f+1):e+new Array(f-e.length+2).join("0")}function g(a,b){a=a.toPrecision(b);a:for(var c,d=a.length,e=1,f=-1;d>e;++e)switch(a[e]){case".":f=c=e;break;case"0":0===f&&(f=e),c=e;break;case"e":break a;default:f>0&&(f=0)}return f>0?a.slice(0,f)+a.slice(c+1):a}function h(a){return new i(a)}function i(a){if(!(b=q.exec(a)))throw new Error("invalid format: "+a);var b,c=b[1]||" ",d=b[2]||">",e=b[3]||"-",f=b[4]||"",g=!!b[5],h=b[6]&&+b[6],i=!!b[7],j=b[8]&&+b[8].slice(1),k=b[9]||"";"n"===k?(i=!0,k="g"):p[k]||(k=""),(g||"0"===c&&"="===d)&&(g=!0,c="0",d="="),this.fill=c,this.align=d,this.sign=e,this.symbol=f,this.zero=g,this.width=h,this.comma=i,this.precision=j,this.type=k}function j(a){return a}function k(a){function b(a){a=h(a);var b=a.fill,c=a.align,d=a.sign,e=a.symbol,j=a.zero,k=a.width,l=a.comma,m=a.precision,n=a.type,q="$"===e?g[0]:"#"===e&&/[boxX]/.test(n)?"0"+n.toLowerCase():"",s="$"===e?g[1]:/[%p]/.test(n)?"%":"",t=p[n],u=!n||/[defgprs%]/.test(n);return m=null==m?n?6:12:/[gprs]/.test(n)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),function(a){var e=q,g=s;if("c"===n)g=t(a)+g,a="";else{a=+a;var h=(0>a||0>1/a)&&(a*=-1,!0);if(a=t(a,m),h){var p,v=-1,w=a.length;for(h=!1;++v<w;)if(p=a.charCodeAt(v),p>48&&58>p||"x"===n&&p>96&&103>p||"X"===n&&p>64&&71>p){h=!0;break}}if(e=(h?"("===d?d:"-":"-"===d||"("===d?"":d)+e,g=g+("s"===n?r[8+o/3]:"")+(h&&"("===d?")":""),u)for(var p,v=-1,w=a.length;++v<w;)if(p=a.charCodeAt(v),48>p||p>57){g=(46===p?i+a.slice(v+1):a.slice(v))+g,a=a.slice(0,v);break}}l&&!j&&(a=f(a,1/0));var x=e.length+a.length+g.length,y=k>x?new Array(k-x+1).join(b):"";switch(l&&j&&(a=f(y+a,y.length?k-g.length:1/0),y=""),c){case"<":return e+a+g+y;case"=":return e+y+a+g;case"^":return y.slice(0,x=y.length>>1)+e+a+g+y.slice(x)}return y+e+a+g}}function e(a,d){var e=b((a=h(a),a.type="f",a)),f=3*Math.max(-8,Math.min(8,Math.floor(c(d)/3))),g=Math.pow(10,-f),i=r[8+f/3];return function(a){return e(g*a)+i}}var f=a.grouping&&a.thousands?d(a.grouping,a.thousands):j,g=a.currency,i=a.decimal;return{format:b,formatPrefix:e}}function l(a){return Math.max(0,-c(Math.abs(a)))}function m(a,b){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(b)/3)))-c(Math.abs(a)))}function n(a,b){return a=Math.abs(a),b=Math.abs(b)-a,Math.max(0,c(b)-c(a))+1}var o,p={"":g,"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return f(100*a,b)},r:f,s:e,X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},q=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var r=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],s=k({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),t=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),u=k({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),v=k({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),w=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),x=k({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),y=k({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),z=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),A=k({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),B=k({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),C=k({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),D=k({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),E=k({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),F=k({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),G=k({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),H=k({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),I=k({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),J=k({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),K=k({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),L=k({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),M=k({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),N=k({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),O=k({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),P=s.format,Q=s.formatPrefix,R="0.4.2";a.version=R,a.format=P,a.formatPrefix=Q,a.locale=k,a.localeCaEs=t,a.localeCsCz=u,a.localeDeCh=v,a.localeDeDe=w,a.localeEnCa=x,a.localeEnGb=y,a.localeEnUs=s,a.localeEsEs=z,a.localeFiFi=A,a.localeFrCa=B,a.localeFrFr=C,a.localeHeIl=D,a.localeHuHu=E,a.localeItIt=F,a.localeJaJp=G,a.localeKoKr=H,a.localeMkMk=I,a.localeNlNl=J,a.localePlPl=K,a.localePtBr=L,a.localeRuRu=M,a.localeSvSe=N,a.localeZhCn=O,a.formatSpecifier=h,a.precisionFixed=l,a.precisionPrefix=m,a.precisionRound=n})},{}],4:[function(b,c,d){!function(e,f){"object"==typeof d&&"undefined"!=typeof c?f(d,b("d3-time")):"function"==typeof a&&a.amd?a("d3-time-format",["exports","d3-time"],f):f(e.d3_time_format={},e.d3_time)}(this,function(a,b){"use strict";function c(a){if(0<=a.y&&a.y<100){var b=new Date(-1,a.m,a.d,a.H,a.M,a.S,a.L);return b.setFullYear(a.y),b}return new Date(a.y,a.m,a.d,a.H,a.M,a.S,a.L)}function d(a){if(0<=a.y&&a.y<100){var b=new Date(Date.UTC(-1,a.m,a.d,a.H,a.M,a.S,a.L));return b.setUTCFullYear(a.y),b}return new Date(Date.UTC(a.y,a.m,a.d,a.H,a.M,a.S,a.L))}function e(a){return{y:a,m:0,d:1,H:0,M:0,S:0,L:0}}function f(a){function b(a,b){return function(c){var d,e,f,g=[],h=-1,i=0,j=a.length;for(c instanceof Date||(c=new Date(+c));++h<j;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=aa[d=a.charAt(++h)])?d=a.charAt(++h):e="e"===d?" ":"0",(f=b[d])&&(d=f(c,e)),g.push(d),i=h+1);return g.push(a.slice(i,h)),g.join("")}}function f(a,b){return function(c){var f=e(1900),h=g(f,a,c+="",0);if(h!=c.length)return null;if("p"in f&&(f.H=f.H%12+12*f.p),"W"in f||"U"in f){"w"in f||(f.w="W"in f?1:0);var i="Z"in f?d(e(f.y)).getUTCDay():b(e(f.y)).getDay();f.m=0,f.d="W"in f?(f.w+6)%7+7*f.W-(i+5)%7:f.w+7*f.U-(i+6)%7}return"Z"in f?(f.H+=f.Z/100|0,f.M+=f.Z%100,d(f)):b(f)}}function g(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(e=b.charCodeAt(g++),37===e){if(e=b.charAt(g++),f=La[e in aa?b.charAt(g++):e],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function h(a,b,c){var d=za.exec(b.slice(c));return d?(a.p=Aa[d[0].toLowerCase()],c+d[0].length):-1}function _(a,b,c){var d=Da.exec(b.slice(c));return d?(a.w=Ea[d[0].toLowerCase()],c+d[0].length):-1}function ba(a,b,c){var d=Ba.exec(b.slice(c));return d?(a.w=Ca[d[0].toLowerCase()],c+d[0].length):-1}function ca(a,b,c){var d=Ha.exec(b.slice(c));return d?(a.m=Ia[d[0].toLowerCase()],c+d[0].length):-1}function da(a,b,c){var d=Fa.exec(b.slice(c));return d?(a.m=Ga[d[0].toLowerCase()],c+d[0].length):-1}function ea(a,b,c){return g(a,ra,b,c)}function fa(a,b,c){return g(a,sa,b,c)}function ga(a,b,c){return g(a,ta,b,c)}function ha(a){return wa[a.getDay()]}function ia(a){return va[a.getDay()]}function ja(a){return ya[a.getMonth()]}function ka(a){return xa[a.getMonth()]}function la(a){return ua[+(a.getHours()>=12)]}function ma(a){return wa[a.getUTCDay()]}function na(a){return va[a.getUTCDay()]}function oa(a){return ya[a.getUTCMonth()]}function pa(a){return xa[a.getUTCMonth()]}function qa(a){return ua[+(a.getUTCHours()>=12)]}var ra=a.dateTime,sa=a.date,ta=a.time,ua=a.periods,va=a.days,wa=a.shortDays,xa=a.months,ya=a.shortMonths,za=i(ua),Aa=j(ua),Ba=i(va),Ca=j(va),Da=i(wa),Ea=j(wa),Fa=i(xa),Ga=j(xa),Ha=i(ya),Ia=j(ya),Ja={a:ha,A:ia,b:ja,B:ka,c:null,d:y,e:y,H:z,I:A,j:B,L:C,m:D,M:E,p:la,S:F,U:G,w:H,W:I,x:null,X:null,y:J,Y:K,Z:L,"%":$},Ka={a:ma,A:na,b:oa,B:pa,c:null,d:M,e:M,H:N,I:O,j:P,L:Q,m:R,M:S,p:qa,S:T,U:U,w:V,W:W,x:null,X:null,y:X,Y:Y,Z:Z,"%":$},La={a:_,A:ba,b:ca,B:da,c:ea,d:r,e:r,H:t,I:t,j:s,L:w,m:q,M:u,p:h,S:v,U:l,w:k,W:m,x:fa,X:ga,y:o,Y:n,Z:p,"%":x};return Ja.x=b(sa,Ja),Ja.X=b(ta,Ja),Ja.c=b(ra,Ja),Ka.x=b(sa,Ka),Ka.X=b(ta,Ka),Ka.c=b(ra,Ka),{format:function(a){var d=b(a+="",Ja);return d.parse=f(a,c),d.toString=function(){return a},d},utcFormat:function(a){var c=b(a+="",Ka);return c.parse=f(a,d),c.toString=function(){return a},c}}}function g(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function h(a){return a.replace(da,"\\$&")}function i(a){return new RegExp("^(?:"+a.map(h).join("|")+")","i")}function j(a){for(var b={},c=-1,d=a.length;++c<d;)b[a[c].toLowerCase()]=c;return b}function k(a,b,c){var d=ba.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function l(a,b,c){var d=ba.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function m(a,b,c){var d=ba.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function n(a,b,c){var d=ba.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function o(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.y=+d[0]+(+d[0]>68?1900:2e3),c+d[0].length):-1}function p(a,b,c){var d=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(b.slice(c,c+6));return d?(a.Z=d[1]?0:-(d[2]+(d[3]||"00")),c+d[0].length):-1}function q(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function r(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function s(a,b,c){var d=ba.exec(b.slice(c,c+3));return d?(a.m=0,a.d=+d[0],c+d[0].length):-1}function t(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function u(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function v(a,b,c){var d=ba.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function w(a,b,c){var d=ba.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function x(a,b,c){var d=ca.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function y(a,b){return g(a.getDate(),b,2)}function z(a,b){return g(a.getHours(),b,2)}function A(a,b){return g(a.getHours()%12||12,b,2)}function B(a,c){return g(1+b.day.count(b.year(a),a),c,3)}function C(a,b){return g(a.getMilliseconds(),b,3)}function D(a,b){return g(a.getMonth()+1,b,2)}function E(a,b){return g(a.getMinutes(),b,2)}function F(a,b){return g(a.getSeconds(),b,2)}function G(a,c){return g(b.sunday.count(b.year(a),a),c,2)}function H(a){return a.getDay()}function I(a,c){return g(b.monday.count(b.year(a),a),c,2)}function J(a,b){return g(a.getFullYear()%100,b,2)}function K(a,b){return g(a.getFullYear()%1e4,b,4)}function L(a){var b=a.getTimezoneOffset();return(b>0?"-":(b*=-1,"+"))+g(b/60|0,"0",2)+g(b%60,"0",2)}function M(a,b){return g(a.getUTCDate(),b,2)}function N(a,b){return g(a.getUTCHours(),b,2)}function O(a,b){return g(a.getUTCHours()%12||12,b,2)}function P(a,c){return g(1+b.utcDay.count(b.utcYear(a),a),c,3)}function Q(a,b){return g(a.getUTCMilliseconds(),b,3)}function R(a,b){return g(a.getUTCMonth()+1,b,2)}function S(a,b){return g(a.getUTCMinutes(),b,2)}function T(a,b){return g(a.getUTCSeconds(),b,2)}function U(a,c){return g(b.utcSunday.count(b.utcYear(a),a),c,2)}function V(a){return a.getUTCDay()}function W(a,c){return g(b.utcMonday.count(b.utcYear(a),a),c,2)}function X(a,b){return g(a.getUTCFullYear()%100,b,2)}function Y(a,b){return g(a.getUTCFullYear()%1e4,b,4)}function Z(){return"+0000"}function $(){return"%"}function _(a){return a.toISOString()}var aa={"-":"",_:" ",0:"0"},ba=/^\s*\d+/,ca=/^%/,da=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ea=f({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),fa=f({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),ga=f({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ha=f({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),ia=f({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ja=f({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ka=f({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),la=f({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),ma=f({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),na=f({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),oa=f({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),pa=f({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),qa=f({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),ra=f({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),sa=f({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),ta=f({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),ua=f({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),va=f({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),wa=f({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),xa=f({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),ya=f({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),za=f({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),Aa="%Y-%m-%dT%H:%M:%S.%LZ";_.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},_.toString=function(){return Aa};var Ba=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?_:ea.utcFormat(Aa),Ca=ea.format,Da=ea.utcFormat,Ea="0.2.1";a.version=Ea,a.format=Ca,a.utcFormat=Da,a.locale=f,a.localeCaEs=fa,a.localeDeCh=ga,a.localeDeDe=ha,a.localeEnCa=ia,a.localeEnGb=ja,a.localeEnUs=ea,a.localeEsEs=ka,a.localeFiFi=la,a.localeFrCa=ma,a.localeFrFr=na,a.localeHeIl=oa,a.localeHuHu=pa,a.localeItIt=qa,a.localeJaJp=ra,a.localeKoKr=sa,a.localeMkMk=ta,a.localeNlNl=ua,a.localePlPl=va,a.localePtBr=wa,a.localeRuRu=xa,a.localeSvSe=ya,a.localeZhCn=za,a.isoFormat=Ba})},{"d3-time":5}],5:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a("d3-time",["exports"],e):e(b.d3_time={})}(this,function(a){"use strict";function b(a,c,d,g){function h(b){return a(b=new Date(+b)),b}return h.floor=h,h.round=function(b){var d=new Date(+b),e=new Date(b-1);return a(d),a(e),c(e,1),e-b>b-d?d:e},h.ceil=function(b){return a(b=new Date(b-1)),c(b,1),b},h.offset=function(a,b){return c(a=new Date(+a),null==b?1:Math.floor(b)),a},h.range=function(b,d,e){var f=[];if(b=new Date(b-1),d=new Date(+d),e=null==e?1:Math.floor(e),!(d>b&&e>0))return f;for(c(b,1),a(b),d>b&&f.push(new Date(+b));c(b,e),a(b),d>b;)f.push(new Date(+b));return f},h.filter=function(d){return b(function(b){for(;a(b),!d(b);)b.setTime(b-1)},function(a,b){for(;--b>=0;)for(;c(a,1),!d(a););})},d&&(h.count=function(b,c){return e.setTime(+b),f.setTime(+c),a(e),a(f),Math.floor(d(e,f))},h.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?h.filter(g?function(b){return g(b)%a===0}:function(b){return h.count(0,b)%a===0}):h:null}),h}function c(a){return b(function(b){b.setHours(0,0,0,0),b.setDate(b.getDate()-(b.getDay()+7-a)%7)},function(a,b){a.setDate(a.getDate()+7*b)},function(a,b){return(b-a-6e4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/6048e5})}function d(a){return b(function(b){b.setUTCHours(0,0,0,0),b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+7-a)%7)},function(a,b){a.setUTCDate(a.getUTCDate()+7*b)},function(a,b){return(b-a)/6048e5})}var e=new Date,f=new Date,g=b(function(){},function(a,b){a.setTime(+a+b)},function(a,b){return b-a});g.every=function(a){return a=Math.floor(a),isFinite(a)&&a>0?a>1?b(function(b){b.setTime(Math.floor(b/a)*a)},function(b,c){b.setTime(+b+c*a)},function(b,c){return(c-b)/a}):g:null};var h=b(function(a){a.setMilliseconds(0)},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getSeconds()}),i=b(function(a){a.setSeconds(0,0)},function(a,b){a.setTime(+a+6e4*b)},function(a,b){return(b-a)/6e4},function(a){return a.getMinutes()}),j=b(function(a){a.setMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getHours()}),k=b(function(a){a.setHours(0,0,0,0)},function(a,b){a.setDate(a.getDate()+b)},function(a,b){return(b-a-6e4*(b.getTimezoneOffset()-a.getTimezoneOffset()))/864e5},function(a){return a.getDate()-1}),l=c(0),m=c(1),n=c(2),o=c(3),p=c(4),q=c(5),r=c(6),s=b(function(a){a.setHours(0,0,0,0),a.setDate(1)},function(a,b){a.setMonth(a.getMonth()+b)},function(a,b){return b.getMonth()-a.getMonth()+12*(b.getFullYear()-a.getFullYear())},function(a){return a.getMonth()}),t=b(function(a){a.setHours(0,0,0,0),a.setMonth(0,1)},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a,b){return b.getFullYear()-a.getFullYear()},function(a){return a.getFullYear()}),u=b(function(a){a.setUTCMilliseconds(0)},function(a,b){a.setTime(+a+1e3*b)},function(a,b){return(b-a)/1e3},function(a){return a.getUTCSeconds()}),v=b(function(a){a.setUTCSeconds(0,0)},function(a,b){a.setTime(+a+6e4*b)},function(a,b){return(b-a)/6e4},function(a){return a.getUTCMinutes()}),w=b(function(a){a.setUTCMinutes(0,0,0)},function(a,b){a.setTime(+a+36e5*b)},function(a,b){return(b-a)/36e5},function(a){return a.getUTCHours()}),x=b(function(a){a.setUTCHours(0,0,0,0)},function(a,b){a.setUTCDate(a.getUTCDate()+b)},function(a,b){return(b-a)/864e5},function(a){return a.getUTCDate()-1}),y=d(0),z=d(1),A=d(2),B=d(3),C=d(4),D=d(5),E=d(6),F=b(function(a){a.setUTCHours(0,0,0,0),a.setUTCDate(1)},function(a,b){a.setUTCMonth(a.getUTCMonth()+b)},function(a,b){return b.getUTCMonth()-a.getUTCMonth()+12*(b.getUTCFullYear()-a.getUTCFullYear())},function(a){return a.getUTCMonth()}),G=b(function(a){a.setUTCHours(0,0,0,0),a.setUTCMonth(0,1)},function(a,b){a.setUTCFullYear(a.getUTCFullYear()+b)},function(a,b){return b.getUTCFullYear()-a.getUTCFullYear()},function(a){return a.getUTCFullYear()}),H=g.range,I=h.range,J=i.range,K=j.range,L=k.range,M=l.range,N=m.range,O=n.range,P=o.range,Q=p.range,R=q.range,S=r.range,T=l.range,U=s.range,V=t.range,W=g,X=H,Y=u.range,Z=v.range,$=w.range,_=x.range,aa=y.range,ba=z.range,ca=A.range,da=B.range,ea=C.range,fa=D.range,ga=E.range,ha=y.range,ia=F.range,ja=G.range,ka="0.1.1";a.version=ka,a.milliseconds=H,a.seconds=I,a.minutes=J,a.hours=K,a.days=L,a.sundays=M,a.mondays=N,a.tuesdays=O,a.wednesdays=P,a.thursdays=Q,a.fridays=R,a.saturdays=S,a.weeks=T,a.months=U,a.years=V,a.utcMillisecond=W,a.utcMilliseconds=X,a.utcSeconds=Y,a.utcMinutes=Z,a.utcHours=$,a.utcDays=_,a.utcSundays=aa,a.utcMondays=ba,a.utcTuesdays=ca,a.utcWednesdays=da,a.utcThursdays=ea,a.utcFridays=fa,a.utcSaturdays=ga,a.utcWeeks=ha,a.utcMonths=ia,a.utcYears=ja,a.millisecond=g,a.second=h,a.minute=i,a.hour=j,a.day=k,a.sunday=l,a.monday=m,a.tuesday=n,a.wednesday=o,a.thursday=p,a.friday=q,a.saturday=r,a.week=l,a.month=s,a.year=t,a.utcSecond=u,a.utcMinute=v,a.utcHour=w,a.utcDay=x,a.utcSunday=y,a.utcMonday=z,a.utcTuesday=A,a.utcWednesday=B,a.utcThursday=C,a.utcFriday=D,a.utcSaturday=E,a.utcWeek=y,a.utcMonth=F,a.utcYear=G,a.interval=b})},{}],6:[function(b,c,d){!function(b,e){"object"==typeof d&&"undefined"!=typeof c?e(d):"function"==typeof a&&a.amd?a(["exports"],e):e(b.topojson={})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=(a[0]-g)/e|0,j=(a[1]-h)/f|0;a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[0>a?~a:a],f=0,g=d.length;g>f;++f)b.push(c=d[f].slice()),k(c,f);0>a&&e(b,g)}function f(a){
return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;e>c;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=0>b?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[0>a?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h=d(b[0][0]),i=0;c>i;++i)if(h===d(f[i])){g=f[0],f[0]=f[i],f[i]=g;break}return f})}}function q(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&r(d[f],h)<0&&(h=d[g=f]),e>c&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;i>d;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;i>d;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;i>d;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.24";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t})},{}],7:[function(a,b,c){b.exports={name:"datalib",version:"1.7.3",description:"JavaScript utilites for loading, summarizing and working with data.",keywords:["data","table","statistics","parse","csv","tsv","json","utility"],repository:{type:"git",url:"http://github.com/vega/datalib.git"},author:{name:"Jeffrey Heer",url:"http://idl.cs.washington.edu"},contributors:[{name:"Michael Correll",url:"http://pages.cs.wisc.edu/~mcorrell/"},{name:"Ryan Russell",url:"https://github.com/RussellSprouts"}],license:"BSD-3-Clause",dependencies:{"d3-dsv":"0.1","d3-format":"0.4","d3-time":"0.1","d3-time-format":"0.2",topojson:"^1.6.19",request:"^2.67.0","sync-request":"^2.1.0"},devDependencies:{browserify:"^12.0.1",chai:"^3.4.1",istanbul:"latest",jshint:"^2.9.1-rc1",mocha:"^2.3.4","uglify-js":"^2.6.1"},main:"src/index.js",scripts:{deploy:"npm run test && scripts/deploy.sh",lint:"jshint src/",test:"npm run lint && TZ=America/Los_Angeles mocha --recursive test/",cover:"TZ=America/Los_Angeles istanbul cover _mocha -- --recursive test/",build:"browserify src/index.js -d -s dl -o datalib.js",postbuild:"uglifyjs datalib.js -c -m -o datalib.min.js"},browser:{buffer:!1,fs:!1,http:!1,request:!1,"sync-request":!1,url:!1}}},{}],8:[function(a,b,c){var d=a("./util"),e=a("./time"),f=e.utc,g=b.exports;g.$year=d.$func("year",e.year.unit),g.$month=d.$func("month",e.months.unit),g.$date=d.$func("date",e.dates.unit),g.$day=d.$func("day",e.weekdays.unit),g.$hour=d.$func("hour",e.hours.unit),g.$minute=d.$func("minute",e.minutes.unit),g.$second=d.$func("second",e.seconds.unit),g.$utcYear=d.$func("utcYear",f.year.unit),g.$utcMonth=d.$func("utcMonth",f.months.unit),g.$utcDate=d.$func("utcDate",f.dates.unit),g.$utcDay=d.$func("utcDay",f.weekdays.unit),g.$utcHour=d.$func("utcHour",f.hours.unit),g.$utcMinute=d.$func("utcMinute",f.minutes.unit),g.$utcSecond=d.$func("utcSecond",f.seconds.unit)},{"./time":30,"./util":31}],9:[function(a,b,c){function d(){this._cells={},this._aggr=[],this._stream=!1}function e(a){if(f.isArray(a))return a;if(null==a)return[];var b,c,d=[];for(b in a)c=f.array(a[b]),d.push({name:b,ops:c});return d}var f=a("../util"),g=a("./measures"),h=a("./collector"),i=d.Flags={ADD_CELL:1,MOD_CELL:2},j=d.prototype;j.stream=function(a){return null==a?this._stream:(this._stream=!!a,this._aggr=[],this)},j.key=function(a){return null==a?this._key:(this._key=f.$(a),this)},j.groupby=function(a){return this._dims=f.array(a).map(function(a,b){if(a=f.isString(a)?{name:a,get:f.$(a)}:f.isFunction(a)?{name:f.name(a)||a.name||"_"+b,get:a}:a.name&&f.isFunction(a.get)?a:null,null==a)throw"Invalid groupby argument: "+a;return a}),this.clear()},j.summarize=function(a){a=e(a),this._count=!0;var b,c,d,h,i,j,k,l=this._aggr=[];for(d=0;d<a.length;++d){for(h=0,b=[],c=a[d];h<c.ops.length;++h)i=c.ops[h],"count"!==i&&(this._count=!1),j=c.as&&c.as[h]||i+("*"===c.name?"":"_"+c.name),b.push(g[i](j));k=c.get&&f.$(c.get)||("*"===c.name?f.identity:f.$(c.name)),l.push({name:c.name,measures:g.create(b,this._stream,k,this._assign)})}return this.clear()},j.count=function(){return this.summarize({"*":"count"})},j._assign=function(a,b,c){a[b]=c},j.clear=function(){return this._cells={},this},j._cellkey=function(a){var b,c=this._dims,d=c.length,e=String(c[0].get(a));for(b=1;d>b;++b)e+="|"+c[b].get(a);return e},j._cell=function(a){var b=this._dims.length?this._cellkey(a):"";return this._cells[b]||(this._cells[b]=this._newcell(a,b))},j._newcell=function(a,b){var c,d={num:0,tuple:this._newtuple(a,b),flag:i.ADD_CELL,aggs:{}},e=this._aggr;for(c=0;c<e.length;++c)d.aggs[e[c].name]=new e[c].measures(d,d.tuple);return d.collect&&(d.data=new h(this._key)),d},j._newtuple=function(a){var b,c,d=this._dims,e={};for(b=0,c=d.length;c>b;++b)e[d[b].name]=d[b].get(a);return this._ingest(e)},j._ingest=f.identity,j._add=function(a){var b,c=this._cell(a),d=this._aggr;if(c.num+=1,!this._count)for(c.collect&&c.data.add(a),b=0;b<d.length;++b)c.aggs[d[b].name].add(a);c.flag|=i.MOD_CELL,this._on_add&&this._on_add(a,c)},j._rem=function(a){var b,c=this._cell(a),d=this._aggr;if(c.num-=1,!this._count)for(c.collect&&c.data.rem(a),b=0;b<d.length;++b)c.aggs[d[b].name].rem(a);c.flag|=i.MOD_CELL,this._on_rem&&this._on_rem(a,c)},j._mod=function(a,b){var c,d=this._cell(b),e=this._cell(a),g=this._aggr;for(d!==e?(d.num-=1,e.num+=1,d.collect&&d.data.rem(b),e.collect&&e.data.add(a)):d.collect&&!f.isObject(a)&&(d.data.rem(b),d.data.add(a)),c=0;c<g.length;++c)d.aggs[g[c].name].rem(b),e.aggs[g[c].name].add(a);d.flag|=i.MOD_CELL,e.flag|=i.MOD_CELL,this._on_mod&&this._on_mod(a,b,d,e)},j._markMod=function(a){var b=this._cell(a);b.flag|=i.MOD_CELL},j.result=function(){var a,b,c,d=[],e=this._aggr;for(c in this._cells){if(a=this._cells[c],a.num>0){for(a.collect&&a.data.values(),b=0;b<e.length;++b)a.aggs[e[b].name].set();d.push(a.tuple)}else delete this._cells[c];a.flag=0}return this._rems=!1,d},j.changes=function(a){var b,c,d,e,f=a||{add:[],rem:[],mod:[]},g=this._aggr;for(e in this._cells){for(b=this._cells[e],c=b.flag,b.collect&&b.data.values(),d=0;d<g.length;++d)b.aggs[g[d].name].set();b.num<=0?(f.rem.push(b.tuple),delete this._cells[e],this._on_drop&&this._on_drop(b)):(this._on_keep&&this._on_keep(b),c&i.ADD_CELL?f.add.push(b.tuple):c&i.MOD_CELL&&f.mod.push(b.tuple)),b.flag=0}return this._rems=!1,f},j.execute=function(a){return this.clear().insert(a).result()},j.insert=function(a){this._consolidate();for(var b=0;b<a.length;++b)this._add(a[b]);return this},j.remove=function(a){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var b=0;b<a.length;++b)this._rem(a[b]);return this._rems=!0,this},j._consolidate=function(){if(this._rems){for(var a in this._cells)this._cells[a].collect&&this._cells[a].data.values();this._rems=!1}},b.exports=d},{"../util":31,"./collector":10,"./measures":12}],10:[function(a,b,c){function d(a){this._add=[],this._rem=[],this._key=a||null,this._last=null}var e=a("../util"),f=a("../stats"),g="__dl_rem__",h=d.prototype;h.add=function(a){this._add.push(a)},h.rem=function(a){this._rem.push(a)},h.values=function(){if(this._get=null,0===this._rem.length)return this._add;var a,b,c,d,h=this._add,i=this._rem,j=this._key,k=Array(h.length-i.length);if(e.isObject(i[0]))if(j)for(d=e.toMap(i,j),a=0,b=0,c=h.length;c>a;++a)d.hasOwnProperty(j(h[a]))||(k[b++]=h[a]);else{for(a=0,c=i.length;c>a;++a)i[a][g]=1;for(a=0,b=0,c=h.length;c>a;++a)h[a][g]||(k[b++]=h[a]);for(a=0,c=i.length;c>a;++a)delete i[a][g]}else for(d=f.count.map(i),a=0,b=0,c=h.length;c>a;++a)d[h[a]]>0?d[h[a]]-=1:k[b++]=h[a];return this._rem=[],this._add=k},h.extent=function(a){if(this._get!==a||!this._ext){var b=this.values(),c=f.extent.index(b,a);this._ext=[b[c[0]],b[c[1]]],this._get=a}return this._ext},h.argmin=function(a){return this.extent(a)[0]},h.argmax=function(a){return this.extent(a)[1]},h.min=function(a){var b=this.extent(a)[0];return null!=b?a(b):+(1/0)},h.max=function(a){var b=this.extent(a)[1];return null!=b?a(b):-(1/0)},h.quartile=function(a){return this._get===a&&this._q||(this._q=f.quartile(this.values(),a),this._get=a),this._q},h.q1=function(a){return this.quartile(a)[0]},h.q2=function(a){return this.quartile(a)[1]},h.q3=function(a){return this.quartile(a)[2]},b.exports=d},{"../stats":28,"../util":31}],11:[function(a,b,c){var d=a("../util"),e=a("./aggregator");b.exports=function(){var a=[].reduce.call(arguments,function(a,b){return a.concat(d.array(b))},[]);return(new e).groupby(a).summarize({"*":"values"})}},{"../util":31,"./aggregator":9}],12:[function(a,b,c){function d(a){return function(b){var c=g.extend({init:"",add:"",rem:"",idx:0},a);return c.out=b||a.name,c}}function e(a,b){function c(a,d){function e(b){a[b]||c(a,a[b]=h[b]())}return d.req&&d.req.forEach(e),b&&d.str&&d.str.forEach(e),a}var d=a.reduce(c,a.reduce(function(a,b){return a[b.name]=b,a},{}));return g.vals(d).sort(function(a,b){return a.idx-b.idx})}function f(b,c,d,f){var h=e(b,c),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",j="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",k="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",l="var t = this.tuple; var cell = this.cell;";return h.forEach(function(a){a.idx<0?(i=a.init+i,j=a.add+j,k=a.rem+k):(i+=a.init,j+=a.add,k+=a.rem)}),b.slice().sort(function(a,b){return a.idx-b.idx}).forEach(function(a){l+="this.assign(t,'"+a.out+"',"+a.set+");"}),l+="return t;",i=Function("cell","t",i),i.prototype.assign=f,i.prototype.add=Function("t","var v = this.get(t);"+j),i.prototype.rem=Function("t","var v = this.get(t);"+k),i.prototype.set=Function(l),i.prototype.get=d,i.prototype.distinct=a("../stats").count.distinct,i.prototype.isValid=g.isValid,i.fields=b.map(g.$("out")),i}var g=a("../util"),h={values:d({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:d({name:"count",set:"cell.num"}),missing:d({name:"missing",set:"this.missing"}),valid:d({name:"valid",set:"this.valid"}),sum:d({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:d({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:d({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:d({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:d({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:d({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:d({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:d({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),median:d({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:d({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:d({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:d({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:d({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:d({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:d({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:d({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:d({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","variance","median"],idx:5})};h.create=f,b.exports=h},{"../stats":28,"../util":31}],13:[function(a,b,c){function d(a){if(!a)throw Error("Missing binning options.");var b,c,d,h,i,j,k,l=a.maxbins||15,m=a.base||10,n=Math.log(m),o=a.div||[5,2],p=a.min,q=a.max,r=q-p;if(a.step)b=a.step;else if(a.steps)b=a.steps[Math.min(a.steps.length-1,e(a.steps,r/l,0,a.steps.length))];else{for(c=Math.ceil(Math.log(l)/n),d=a.minstep||0,b=Math.max(d,Math.pow(m,Math.round(Math.log(r)/n)-c));Math.ceil(r/b)>l;)b*=m;for(j=0;j<o.length;++j)i=b/o[j],i>=d&&l>=r/i&&(b=i)}return i=Math.log(b),h=i>=0?0:~~(-i/n)+1,k=Math.pow(m,-h-1),p=Math.min(p,Math.floor(p/b+k)*b),q=Math.ceil(q/b)*b,{start:p,stop:q,step:b,unit:{precision:h},value:f,index:g}}function e(a,b,c,d){for(;d>c;){var e=c+d>>>1;j.cmp(a[e],b)<0?c=e+1:d=e}return c}function f(a){return this.step*Math.floor(a/this.step+l)}function g(a){return Math.floor((a-this.start)/this.step+l)}function h(a){return this.unit.date(f.call(this,a))}function i(a){return g.call(this,this.unit.unit(a))}var j=a("../util"),k=a("../time"),l=1e-15;d.date=function(a){if(!a)throw Error("Missing date binning options.");var b=a.utc?k.utc:k,c=a.min,e=a.max,f=a.maxbins||20,g=a.minbins||4,j=+e-+c,l=a.unit?b[a.unit]:b.find(j,g,f),m=d({min:null!=l.min?l.min:l.unit(c),max:null!=l.max?l.max:l.unit(e),maxbins:f,minstep:l.minstep,steps:l.step});return m.unit=l,m.index=i,a.raw||(m.value=h),m},b.exports=d},{"../time":30,"../util":31}],14:[function(a,b,c){function d(a,b,c){c=g(a,b,c);var d=f(c);return d?m.$func("bin",d.unit.unit?function(a){return d.value(d.unit.unit(a))}:function(a){return d.value(a)})(c.accessor):c.accessor||m.identity}function e(a,b,c){c=g(a,b,c);var d=f(c);return d?h(a,c.accessor,d):i(a,c.accessor,c&&c.sort)}function f(a){var b=a.type,c=null;return(null==b||o[b])&&("integer"===b&&null==a.minstep&&(a.minstep=1),c="date"===b?j.date(a):j(a)),c}function g(){var a=arguments,b=0,c=m.isArray(a[b])?a[b++]:null,d=m.isFunction(a[b])||m.isString(a[b])?m.$(a[b++]):null,e=m.extend({},a[b]);if(c&&(e.type=e.type||l(c,d),o[e.type])){var f=n.extent(c,d);e=m.extend({min:f[0],max:f[1]},e)}return d&&(e.accessor=d),e}function h(a,b,c){for(var d,e,f=k.range(c.start,c.stop+c.step/2,c.step).map(function(a){return{value:c.value(a),count:0}}),g=0;g<a.length;++g)if(d=b?b(a[g]):a[g],m.isValid(d)){if(e=c.index(d),0>e||e>=f.length||!isFinite(e))continue;f[e].count+=1}return f.bins=c,f}function i(a,b,c){var d=n.unique(a,b),e=n.count.map(a,b);return d.map(function(a){return{value:a,count:e[a]}}).sort(m.comparator(c?"-count":"+value"))}var j=a("./bins"),k=a("../generate"),l=a("../import/type"),m=a("../util"),n=a("../stats"),o={integer:1,number:1,date:1};b.exports={$bin:d,histogram:e}},{"../generate":17,"../import/type":26,"../stats":28,"../util":31,"./bins":13}],15:[function(a,b,c){function d(a,b){b=h.extend({separator:" ",minwidth:8,maxwidth:15},b);var c=b.fields||h.keys(a[0]),d=i.all(a);if(b.start||b.limit){var e=b.start||0,f=b.limit?e+b.limit:a.length;a=a.slice(e,f)}var g=c.map(function(c){var e=l[d[c]]||"",f=k("{{"+c+e+"}}"),g=j.max(a,function(a){return f(a).length});return g=Math.max(Math.min(c.length,b.minwidth),g),b.maxwidth>0?Math.min(g,b.maxwidth):g}),n=c.map(function(a,b){return h.truncate(h.pad(a,g[b],"center"),g[b])}).join(b.separator),o=k(c.map(function(a,b){return"{{"+a+(l[d[a]]||"")+("|pad:"+g[b]+","+(m[d[a]]||"right"))+("|truncate:"+g[b])+"}}"}).join(b.separator));return n+"\n"+a.map(o).join("\n")}function e(a){a=a?a.__summary__?a:j.summary(a):this;var b,c,d=[];for(b=0,c=a.length;c>b;++b)d.push("-- "+a[b].field+" --"),"string"===a[b].type||a[b].distinct<10?d.push(g(a[b])):d.push(f(a[b])),d.push("");return d.join("\n")}function f(a){return["valid:    "+a.valid,"missing:  "+a.missing,"distinct: "+a.distinct,"min:      "+a.min,"max:      "+a.max,"median:   "+a.median,"mean:     "+a.mean,"stdev:    "+a.stdev,"modeskew: "+a.modeskew].join("\n")}function g(a){var b=["valid:    "+a.valid,"missing:  "+a.missing,"distinct: "+a.distinct,"top values: "],c=a.unique,d=h.keys(c).sort(function(a,b){return c[b]-c[a]}).slice(0,6).map(function(a){return" '"+a+"' ("+c[a]+")"});return b.concat(d).join("\n")}var h=a("./util"),i=a("./import/type"),j=a("./stats"),k=a("./template");b.exports={table:d,summary:e};var l={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},m={number:"left",integer:"left"}},{"./import/type":26,"./stats":28,"./template":29,"./util":31}],16:[function(a,b,c){function d(a){return a.length>4&&"locale"+(a[0].toUpperCase()+a[1].toLowerCase()+a[3].toUpperCase()+a[4].toLowerCase())}function e(a){var b=v.isString(a)?y[d(a)]:y.locale(a);if(null==b)throw Error("Unrecognized locale: "+a);z=b}function f(a){var b=v.isString(a)?x[d(a)]:x.locale(a);if(null==b)throw Error("Unrecognized locale: "+a);A=b,r=s=t=u=null}function g(a,b){a.length||(a=[0]),null==b&&(b=10);var c=a[0],d=a[a.length-1];c>d&&(g=d,d=c,c=g);var e=d-c||(b=1,c||d||1),f=Math.pow(10,Math.floor(Math.log(e/b)/Math.LN10)),g=e/b/f;return g>=C?f*=10:g>=D?f*=5:g>=E&&(f*=2),[Math.ceil(c/f)*f,Math.floor(d/f)*f+f/2,f]}function h(a,b){return function(c){var d=a(c),e=d.indexOf(b);if(0>e)return d;for(var f=i(d,e),g=f<d.length?d.slice(f):"";--f>e;)if("0"!==d[f]){++f;break}return d.slice(0,f)+g}}function i(a,b){var c,d=a.lastIndexOf("e");if(d>0)return d;for(d=a.length;--d>b;)if(c=a.charCodeAt(d),c>=48&&57>=c)return d+1}function j(a){var b=z.format(".1f")(1)[1];switch(null==a&&(a=","),a=y.formatSpecifier(a),null==a.precision&&(a.precision=12),a.type){case"%":a.precision-=2;break;case"e":a.precision-=1}return h(z.format(a),b)}function k(a,b,c){var d=g(a,b);switch(null==c&&(c=",f"),c=y.formatSpecifier(c),c.type){case"s":var e=Math.max(Math.abs(d[0]),Math.abs(d[1]));return null==c.precision&&(c.precision=y.precisionPrefix(d[2],e)),z.formatPrefix(c,e);case"":case"e":case"g":case"p":case"r":null==c.precision&&(c.precision=y.precisionRound(d[2],Math.max(Math.abs(d[0]),Math.abs(d[1])))-("e"===c.type));break;case"f":case"%":null==c.precision&&(c.precision=y.precisionFixed(d[2])-2*("%"===c.type))}return z.format(c)}function l(){var a=A.format,b=a(".%L"),c=a(":%S"),d=a("%I:%M"),e=a("%I %p"),f=a("%a %d"),g=a("%b %d"),h=a("%B"),i=a("%Y");return function(a){var j=+a;return(w.second(a)<j?b:w.minute(a)<j?c:w.hour(a)<j?d:w.day(a)<j?e:w.month(a)<j?w.week(a)<j?f:g:w.year(a)<j?h:i)(a)}}function m(){var a=A.utcFormat,b=a(".%L"),c=a(":%S"),d=a("%I:%M"),e=a("%I %p"),f=a("%a %d"),g=a("%b %d"),h=a("%B"),i=a("%Y");return function(a){var j=+a;return(w.utcSecond(a)<j?b:w.utcMinute(a)<j?c:w.utcHour(a)<j?d:w.utcDay(a)<j?e:w.utcMonth(a)<j?w.utcWeek(a)<j?f:g:w.utcYear(a)<j?h:i)(a)}}function n(a,b){var c=b?s||(s=A.format("%b")):r||(r=A.format("%B"));return B.setMonth(a),c(B)}function o(a,b){var c=b?u||(u=A.format("%a")):t||(t=A.format("%A"));return B.setMonth(0),B.setDate(2+a),c(B)}function p(a){return Math.floor(a.getMonth()/3)+1}function q(a){return Math.floor(a.getUTCMonth()/3)+1}var r,s,t,u,v=a("./util"),w=a("d3-time"),x=a("d3-time-format"),y=a("d3-format"),z=y,A=x,B=new Date(2e3,0,1);b.exports={numberLocale:e,number:function(a){return z.format(a)},numberPrefix:function(a,b){return z.formatPrefix(a,b)},timeLocale:f,time:function(a){return A.format(a)},utc:function(a){return A.utcFormat(a)},locale:function(a){e(a),f(a)},auto:{number:j,linear:k,time:function(){return l()},utc:function(){return m()}},month:n,day:o,quarter:p,utcQuarter:q};var C=Math.sqrt(50),D=Math.sqrt(10),E=Math.sqrt(2)},{"./util":31,"d3-format":3,"d3-time":5,"d3-time-format":4}],17:[function(a,b,c){var d=a("./util"),e=b.exports;e.repeat=function(a,b){var c,d=Array(b);for(c=0;b>c;++c)d[c]=a;return d},e.zeros=function(a){return e.repeat(0,a)},e.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c==1/0)throw new Error("Infinite range");var d,e=[],f=-1;if(0>c)for(;(d=a+c*++f)>b;)e.push(d);else for(;(d=a+c*++f)<b;)e.push(d);return e},e.random={},e.random.uniform=function(a,b){void 0===b&&(b=void 0===a?1:a,a=0);var c=b-a,d=function(){return a+c*Math.random()};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(d){return d>=a&&b>=d?1/c:0},d.cdf=function(d){return a>d?0:d>b?1:(d-a)/c},d.icdf=function(b){return b>=0&&1>=b?a+b*c:NaN},d},e.random.integer=function(a,b){void 0===b&&(b=a,a=0);var c=b-a,d=function(){return a+Math.floor(c*Math.random())};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(d){return d===Math.floor(d)&&d>=a&&b>d?1/c:0},d.cdf=function(d){var e=Math.floor(d);return a>e?0:e>=b?1:(e-a+1)/c},d.icdf=function(b){return b>=0&&1>=b?a-1+Math.floor(b*c):NaN},d},e.random.normal=function(a,b){a=a||0,b=b||1;var c,d=function(){var d,e,f=0,g=0;if(void 0!==c)return f=c,c=void 0,f;do f=2*Math.random()-1,g=2*Math.random()-1,d=f*f+g*g;while(0===d||d>1);return e=Math.sqrt(-2*Math.log(d)/d),c=a+g*e*b,a+f*e*b};return d.samples=function(a){return e.zeros(a).map(d)},d.pdf=function(c){var d=Math.exp(Math.pow(c-a,2)/(-2*Math.pow(b,2)));return 1/(b*Math.sqrt(2*Math.PI))*d},d.cdf=function(c){var d,e=(c-a)/b,f=Math.abs(e);if(f>37)d=0;else{var g,h=Math.exp(-f*f/2);7.07106781186547>f?(g=.0352624965998911*f+.700383064443688,g=g*f+6.37396220353165,g=g*f+33.912866078383,g=g*f+112.079291497871,g=g*f+221.213596169931,g=g*f+220.206867912376,d=h*g,g=.0883883476483184*f+1.75566716318264,g=g*f+16.064177579207,g=g*f+86.7807322029461,g=g*f+296.564248779674,g=g*f+637.333633378831,g=g*f+793.826512519948,g=g*f+440.413735824752,d/=g):(g=f+.65,g=f+4/g,g=f+3/g,g=f+2/g,g=f+1/g,d=h/g/2.506628274631)}return e>0?1-d:d},d.icdf=function(c){if(0>=c||c>=1)return NaN;var d=2*c-1,e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),f=2/(Math.PI*e)+Math.log(1-Math.pow(d,2))/2,g=Math.log(1-d*d)/e,h=(d>0?1:-1)*Math.sqrt(Math.sqrt(f*f-g)-f);return a+b*Math.SQRT2*h},d},e.random.bootstrap=function(a,b){var c=a.filter(d.isValid),f=c.length,g=b?e.random.normal(0,b):null,h=function(){return c[~~(Math.random()*f)]+(g?g():0)};return h.samples=function(a){return e.zeros(a).map(h)},h}},{"./util":31}],18:[function(a,b,c){function d(a,b){if(a){var c=b.header;a=(c?c.join(b.delimiter)+"\n":"")+a}return f.dsv(b.delimiter).parse(a)}var e=a("../../util"),f=a("d3-dsv");d.delimiter=function(a){var b={delimiter:a};return function(a,c){return d(a,c?e.extend(c,b):b)}},b.exports=d},{"../../util":31,"d3-dsv":2}],19:[function(a,b,c){var d=a("./dsv");b.exports={json:a("./json"),topojson:a("./topojson"),treejson:a("./treejson"),dsv:d,csv:d.delimiter(","),tsv:d.delimiter("	")}},{"./dsv":18,"./json":20,"./topojson":21,"./treejson":22}],20:[function(a,b,c){var d=a("../../util");b.exports=function(a,b){var c=d.isObject(a)&&!d.isBuffer(a)?a:JSON.parse(a);return b&&b.property&&(c=d.accessor(b.property)(c)),c}},{"../../util":31}],21:[function(a,b,c){var d=a("./json"),e=function(a,b){var c=e.topojson;if(null==c)throw Error("TopoJSON library not loaded.");var f,g=d(a,b);if(b&&b.feature){if(f=g.objects[b.feature])return c.feature(g,f).features;throw Error("Invalid TopoJSON object: "+b.feature)}if(b&&b.mesh){if(f=g.objects[b.mesh])return[c.mesh(g,g.objects[b.mesh])];throw Error("Invalid TopoJSON object: "+b.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};e.topojson=a("topojson"),b.exports=e},{"./json":20,topojson:6}],22:[function(a,b,c){function d(a,b){function c(a,b){a[e]=b,f.push(a);var g=a[d];if(g)for(var h=0;h<g.length;++h)c(g[h],a)}var d=b&&b.children||"children",e=b&&b.parent||"parent",f=[];return c(a,null),f.root=a,f}var e=a("./json");b.exports=function(a,b){return d(e(a,b),b)}},{"./json":20}],23:[function(a,b,c){function d(b){var c=b.url;if(!c&&b.file)return n+b.file;if(b.baseURL&&!m.test(c)&&(k(c,"/")||"/"===b.baseURL[b.baseURL.length-1]||(c="/"+c),c=b.baseURL+c),!e.useXHR&&k(c,"//")&&(c=(b.defaultProtocol||"http")+":"+c),b.domainWhiteList){var d,f;if(e.useXHR){var g=document.createElement("a");g.href=c,""===g.host&&(g.href=g.href),d=g.hostname.toLowerCase(),f=window.location.hostname}else{var h=a("url").parse(c);d=h.hostname,f=null}if(f!==d){var i=b.domainWhiteList.some(function(a){var b=d.length-a.length;return a===d||b>1&&"."===d[b-1]&&d.lastIndexOf(a)===b});if(!i)throw"URL is not whitelisted: "+c}}return c}function e(a,b){return e.loader(a,b)}function f(a,b){var c,d=b||function(a){throw a};try{c=e.sanitizeUrl(a)}catch(f){return void d(f)}return c?e.useXHR?e.xhr(c,a,b):k(c,n)?e.file(c.slice(n.length),a,b):c.indexOf("://")<0?e.file(c,a,b):e.http(c,a,b):void d("Invalid URL: "+a.url)}function g(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function h(a,b,c){function d(){var a=h.status;!a&&g(h)||a>=200&&300>a||304===a?c(null,h.responseText):c(h,null)}var f=!!c,h=new XMLHttpRequest;if("undefined"==typeof XDomainRequest||"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest),f&&("onload"in h?h.onload=h.onerror=d:h.onreadystatechange=function(){h.readyState>3&&d()}),h.open("GET",a,f),h.setRequestHeader){var i=l.extend({},e.headers,b.headers);for(var j in i)h.setRequestHeader(j,i[j])}return h.send(),!f&&g(h)?h.responseText:void 0}function i(b,c,d){var e=a("fs");return d?void e.readFile(b,d):e.readFileSync(b,"utf8")}function j(b,c,d){var f=l.extend({},e.headers,c.headers),g={url:b,encoding:null,gzip:!0,headers:f};return d?void a("request")(g,function(a,b,c){a||200!==b.statusCode?(a=a||"Load failed with response code "+b.statusCode+".",d(a,null)):d(null,c)}):a("sync-request")("GET",b,g).getBody()}function k(a,b){return null==a?!1:0===a.lastIndexOf(b,0)}var l=a("../util"),m=/^([A-Za-z]+:)?\/\//,n="file://";e.loader=f,e.sanitizeUrl=d,e.xhr=h,e.file=i,e.http=j,e.useXHR="undefined"!=typeof XMLHttpRequest,e.headers={},b.exports=e},{"../util":31,fs:1,request:1,"sync-request":1,url:1}],24:[function(a,b,c){function d(a,b){var c=b&&b.type||"json";return a=h[c](a,b),b&&b.parse&&e(a,b.parse),a}function e(a,b){var c,d,e,h,j,k,l=a.length;for(b="auto"===b?g.inferAll(a):f.duplicate(b),c=f.keys(b),d=c.map(function(a){var c=b[a];if(c&&0===c.indexOf("date:")){var d=c.split(/:(.+)?/,2),e=d[1];if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);return e=e.slice(1,-1),e=i(e),function(a){return e.parse(a)}}if(!g.parsers[c])throw Error("Illegal format pattern: "+a+":"+c);return g.parsers[c]}),h=0,k=c.length;l>h;++h)for(e=a[h],j=0;k>j;++j)e[c[j]]=d[j](e[c[j]]);g.annotation(a,b)}var f=a("../util"),g=a("./type"),h=a("./formats"),i=a("../format").time;d.formats=h,b.exports=d},{"../format":16,"../util":31,"./formats":19,"./type":26}],25:[function(a,b,c){var d=a("../util"),e=a("./load"),f=a("./read");b.exports=d.keys(f.formats).reduce(function(a,b){return a[b]=function(a,c,g){d.isString(a)&&(a={url:a}),2===arguments.length&&d.isFunction(c)&&(g=c,c=void 0),c=d.extend({parse:"auto"},c),c.type=b;var h=e(a,g?function(a,b){if(a)return void g(a,null);try{b=f(b,c),g(null,b)}catch(d){g(d,null)}}:void 0);return g?void 0:f(h,c)},a},{})},{"../util":31,"./load":23,"./read":24}],26:[function(a,b,c){function d(a,b){return b?void(a[l]=b):a&&a[l]||null}function e(a){return k.keys(a)}function f(a){return"["+a+"]"}function g(a,b){a=k.array(a),b=k.$(b);var c,d,e;if(a[l]&&(c=b(a[l]),k.isString(c)))return c;for(d=0,e=a.length;!k.isValid(c)&&e>d;++d)c=b?b(a[d]):a[d];return k.isDate(c)?"date":k.isNumber(c)?"number":k.isBoolean(c)?"boolean":k.isString(c)?"string":null}function h(a,b){if(a.length){var c=b?k.identity:(b=e(a[0]),f);return b.reduce(function(b,d){return b[d]=g(a,c(d)),b},{})}}function i(a,b){a=k.array(a),b=k.$(b);var c,d,e,f=["boolean","integer","number","date"];for(c=0;c<a.length;++c){for(e=b?b(a[c]):a[c],
d=0;d<f.length;++d)k.isValid(e)&&!n[f[d]](e)&&(f.splice(d,1),d-=1);if(0===f.length)return"string"}return f[0]}function j(a,b){var c=b?k.identity:(b=e(a[0]),f);return b.reduce(function(b,d){return b[d]=i(a,c(d)),b},{})}var k=a("../util"),l="__types__",m={"boolean":k["boolean"],integer:k.number,number:k.number,date:k.date,string:function(a){return null==a||""===a?null:a+""}},n={"boolean":function(a){return"true"===a||"false"===a||k.isBoolean(a)},integer:function(a){return n.number(a)&&(a=+a)===~~a},number:function(a){return!isNaN(+a)&&!k.isDate(a)},date:function(a){return!isNaN(Date.parse(a))}};g.annotation=d,g.all=h,g.infer=i,g.inferAll=j,g.parsers=m,b.exports=g},{"../util":31}],27:[function(a,b,c){var d=a("./util"),e={version:a("../package.json").version,load:a("./import/load"),read:a("./import/read"),type:a("./import/type"),Aggregator:a("./aggregate/aggregator"),groupby:a("./aggregate/groupby"),bins:a("./bins/bins"),$bin:a("./bins/histogram").$bin,histogram:a("./bins/histogram").histogram,format:a("./format"),template:a("./template"),time:a("./time")};d.extend(e,d),d.extend(e,a("./accessor")),d.extend(e,a("./generate")),d.extend(e,a("./stats")),d.extend(e,a("./import/readers")),d.extend(e.format,a("./format-tables")),e.print={table:e.format.table,summary:e.format.summary},b.exports=e},{"../package.json":7,"./accessor":8,"./aggregate/aggregator":9,"./aggregate/groupby":11,"./bins/bins":13,"./bins/histogram":14,"./format":16,"./format-tables":15,"./generate":17,"./import/load":23,"./import/read":24,"./import/readers":25,"./import/type":26,"./stats":28,"./template":29,"./time":30,"./util":31}],28:[function(a,b,c){function d(a,b,c){var d=a&&a.nullh||0,e=i.random.normal(0,1),f=j.mean(b,c),g=j.stdev(b,c)/Math.sqrt(j.count.valid(b,c));if(0===g)return f-d===0?1:0;var h=(f-d)/g;return 2*e.cdf(-Math.abs(h))}function e(a,b,c,d){var e,f=d?b.map(g.$(c)):b,h=d?b.map(g.$(d)):c,i=j.count(f),k=j.count(h),l=Array();if(i!==k)throw Error("Array lengths must match.");for(e=0;i>e;++e)g.isValid(f[e])&&g.isValid(h[e])&&l.push(f[e]-h[e]);return j.z.test(l,a&&a.nullh||0)}function f(a,b,c,d){var e=d?b.map(g.$(c)):b,f=d?b.map(g.$(d)):c,h=j.count.valid(e),k=j.count.valid(f),l=i.random.normal(0,1),m=j.mean(e)-j.mean(f)-(a&&a.nullh||0),n=Math.sqrt(j.variance(e)/h+j.variance(f)/k);if(0===n)return 0===m?1:0;var o=m/n;return 2*l.cdf(-Math.abs(o))}var g=a("./util"),h=a("./import/type"),i=a("./generate"),j=b.exports;j.unique=function(a,b,c){b=g.$(b),c=c||[];var d,e,f,h={};for(e=0,f=a.length;f>e;++e)d=b?b(a[e]):a[e],d in h||(h[d]=1,c.push(d));return c},j.count=function(a){return a&&a.length||0},j.count.valid=function(a,b){b=g.$(b);var c,d,e,f=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],g.isValid(c)&&(f+=1);return f},j.count.missing=function(a,b){b=g.$(b);var c,d,e,f=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],null==c&&(f+=1);return f},j.count.distinct=function(a,b){b=g.$(b);var c,d,e,f={},h=0;for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],c in f||(f[c]=1,h+=1);return h},j.count.map=function(a,b){b=g.$(b);var c,d,e,f={};for(d=0,e=a.length;e>d;++d)c=b?b(a[d]):a[d],f[c]=c in f?f[c]+1:1;return f},j.median=function(a,b){return b&&(a=a.map(g.$(b))),a=a.filter(g.isValid).sort(g.cmp),j.quantile(a,.5)},j.quartile=function(a,b){b&&(a=a.map(g.$(b))),a=a.filter(g.isValid).sort(g.cmp);var c=j.quantile;return[c(a,.25),c(a,.5),c(a,.75)]},j.quantile=function(a,b,c){void 0===c&&(c=b,b=g.identity),b=g.$(b);var d=(a.length-1)*c+1,e=Math.floor(d),f=+b(a[e-1]),h=d-e;return h?f+h*(b(a[e])-f):f},j.sum=function(a,b){b=g.$(b);for(var c,d=0,e=0,f=a.length;f>e;++e)c=b?b(a[e]):a[e],g.isValid(c)&&(d+=c);return d},j.mean=function(a,b){b=g.$(b);var c,d,e,f,h,i=0;for(d=0,f=0,e=a.length;e>d;++d)h=b?b(a[d]):a[d],g.isValid(h)&&(c=h-i,i+=c/++f);return i},j.mean.geometric=function(a,b){b=g.$(b);var c,d,e,f,h=1;for(f=0,c=0,d=a.length;d>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){if(0>=e)throw Error("Geometric mean only defined for positive values.");h*=e,++c}return h=c>0?Math.pow(h,1/c):0},j.mean.harmonic=function(a,b){b=g.$(b);var c,d,e,f,h=0;for(f=0,c=0,d=a.length;d>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(h+=1/e,++c);return c/h},j.variance=function(a,b){if(b=g.$(b),!g.isArray(a)||a.length<2)return 0;var c,d,e,f,h=0,i=0;for(d=0,e=0;d<a.length;++d)f=b?b(a[d]):a[d],g.isValid(f)&&(c=f-h,h+=c/++e,i+=c*(f-h));return i/=e-1},j.stdev=function(a,b){return Math.sqrt(j.variance(a,b))},j.modeskew=function(a,b){var c=j.mean(a,b),d=j.median(a,b),e=j.stdev(a,b);return 0===e?0:(c-d)/e},j.min=function(a,b){return j.extent(a,b)[0]},j.max=function(a,b){return j.extent(a,b)[1]},j.extent=function(a,b){b=g.$(b);var c,d,e,f,h=a.length;for(f=0;h>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){c=d=e;break}for(;h>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(c>e&&(c=e),e>d&&(d=e));return[c,d]},j.extent.index=function(a,b){b=g.$(b);var c,d,e,f,h=-1,i=-1,j=a.length;for(f=0;j>f;++f)if(e=b?b(a[f]):a[f],g.isValid(e)){c=d=e,h=i=f;break}for(;j>f;++f)e=b?b(a[f]):a[f],g.isValid(e)&&(c>e&&(c=e,h=f),e>d&&(d=e,i=f));return[h,i]},j.dot=function(a,b,c){var d,e,f=0;if(c)for(b=g.$(b),c=g.$(c),d=0;d<a.length;++d)e=b(a[d])*c(a[d]),e===e&&(f+=e);else{if(a.length!==b.length)throw Error("Array lengths must match.");for(d=0;d<a.length;++d)e=a[d]*b[d],e===e&&(f+=e)}return f},j.dist=function(a,b,c,d){var e,f,h=g.isFunction(c)||g.isString(c),i=a,j=h?a:b,k=h?d:c,l=2===k||null==k,m=a.length,n=0;for(h&&(b=g.$(b),c=g.$(c)),f=0;m>f;++f)e=h?b(i[f])-c(j[f]):i[f]-j[f],n+=l?e*e:Math.pow(Math.abs(e),k);return l?Math.sqrt(n):Math.pow(n,1/k)},j.cohensd=function(a,b,c){var d=c?a.map(g.$(b)):a,e=c?a.map(g.$(c)):b,f=j.mean(d),h=j.mean(e),i=j.count.valid(d),k=j.count.valid(e);if(0>=i+k-2)return 0;var l=j.variance(d),m=j.variance(e),n=Math.sqrt(((i-1)*l+(k-1)*m)/(i+k-2));return 0===n?0:(f-h)/n},j.covariance=function(a,b,c){var d,e,f,h,i,k=c?a.map(g.$(b)):a,l=c?a.map(g.$(c)):b,m=k.length,n=j.mean(k),o=j.mean(l),p=0,q=0;if(m!==l.length)throw Error("Input lengths must match.");for(d=0;m>d;++d)if(e=k[d],h=g.isValid(e),f=l[d],i=g.isValid(f),h&&i)p+=(e-n)*(f-o),++q;else if(h||i)throw Error("Valid values must align.");return p/(q-1)},j.rank=function(a,b){b=g.$(b)||g.identity;var c,d,e,f=a.map(function(a,c){return{idx:c,val:b(a)}}).sort(g.comparator("val")),h=a.length,i=Array(h),j=-1,k={};for(c=0;h>c;++c){if(d=f[c].val,0>j&&k===d)j=c-1;else if(j>-1&&k!==d){for(e=1+(c-1+j)/2;c>j;++j)i[f[j].idx]=e;j=-1}i[f[c].idx]=c+1,k=d}if(j>-1)for(e=1+(h-1+j)/2;h>j;++j)i[f[j].idx]=e;return i},j.cor=function(a,b,c){var d=c;c=d?a.map(g.$(c)):b,b=d?a.map(g.$(b)):a;var e=j.dot(b,c),f=j.mean(b),h=j.mean(c),i=j.stdev(b),k=j.stdev(c),l=a.length;return(e-l*f*h)/((l-1)*i*k)},j.cor.rank=function(a,b,c){var d,e,f,g=c?j.rank(a,b):j.rank(a),h=c?j.rank(a,c):j.rank(b),i=a.length;for(d=0,e=0;i>d;++d)f=g[d]-h[d],e+=f*f;return 1-6*e/(i*(i*i-1))},j.cor.dist=function(a,b,c){var d,e,f,h,i=c?a.map(g.$(b)):a,k=c?a.map(g.$(c)):b,l=j.dist.mat(i),m=j.dist.mat(k),n=l.length;for(d=0,e=0,f=0,h=0;n>d;++d)e+=l[d]*l[d],f+=m[d]*m[d],h+=l[d]*m[d];return Math.sqrt(h/Math.sqrt(e*f))},j.linearRegression=function(a,b,c){var d,e,f=c?a.map(g.$(b)):a,h=c?a.map(g.$(c)):b,i=f.length,k=j.covariance(f,h),l=j.stdev(f),m=j.stdev(h),n=k/(l*l),o=j.mean(h)-n*j.mean(f),p={slope:n,intercept:o,R:k/(l*m),rss:0};for(e=0;i>e;++e)g.isValid(f[e])&&g.isValid(h[e])&&(d=n*f[e]+o-h[e],p.rss+=d*d);return p},j.bootstrap={},j.bootstrap.ci=function(a,b,c,d,e){var f,h,k,l,m,n,o;for(g.isFunction(b)||g.isString(b)?(f=a.map(g.$(b)),h=c,k=d,l=e):(f=a,h=b,k=c,l=d),h=h?+h:1e3,k=k||.05,m=i.random.bootstrap(f,l),o=0,n=Array(h);h>o;++o)n[o]=j.mean(m.samples(f.length));return n.sort(g.numcmp),[j.quantile(n,k/2),j.quantile(n,1-k/2)]},j.z={},j.z.ci=function(a,b,c){var d=a,e=b;(g.isFunction(b)||g.isString(b))&&(d=a.map(g.$(b)),e=c),e=e||.05;var f=.05===e?1.96:i.random.normal(0,1).icdf(1-e/2),h=j.mean(d),k=j.stdev(d)/Math.sqrt(j.count.valid(d));return[h-f*k,h+f*k]},j.z.test=function(a,b,c,h){return g.isFunction(c)||g.isString(c)?(h&&h.paired?e:f)(h,a,b,c):g.isArray(b)?(c&&c.paired?e:f)(c,a,b):g.isFunction(b)||g.isString(b)?d(c,a,b):d(b,a)},j.dist.mat=function(a){var b,c,d,e=a.length,f=e*e,g=Array(f),h=i.zeros(e),j=0;for(c=0;e>c;++c)for(g[c*e+c]=0,d=c+1;e>d;++d)g[c*e+d]=b=Math.abs(a[c]-a[d]),g[d*e+c]=b,h[c]+=b,h[d]+=b;for(c=0;e>c;++c)j+=h[c],h[c]/=e;for(j/=f,c=0;e>c;++c)for(d=c;e>d;++d)g[c*e+d]+=j-h[c]-h[d],g[d*e+c]=g[c*e+d];return g},j.entropy=function(a,b){b=g.$(b);var c,d,e=0,f=0,h=a.length;for(c=0;h>c;++c)e+=b?b(a[c]):a[c];if(0===e)return 0;for(c=0;h>c;++c)d=(b?b(a[c]):a[c])/e,d&&(f+=d*Math.log(d));return-f/Math.LN2},j.mutual=function(a,b,c,d){var e,f,h,i=d?a.map(g.$(b)):a,j=d?a.map(g.$(c)):b,k=d?a.map(g.$(d)):c,l={},m={},n=k.length,o=0,p=0,q=0;for(h=0;n>h;++h)l[i[h]]=0,m[j[h]]=0;for(h=0;n>h;++h)l[i[h]]+=k[h],m[j[h]]+=k[h],o+=k[h];for(f=1/(o*Math.LN2),h=0;n>h;++h)0!==k[h]&&(e=o*k[h]/(l[i[h]]*m[j[h]]),p+=k[h]*f*Math.log(e),q+=k[h]*f*Math.log(k[h]/o));return[p,1+p/q]},j.mutual.info=function(a,b,c,d){return j.mutual(a,b,c,d)[0]},j.mutual.dist=function(a,b,c,d){return j.mutual(a,b,c,d)[1]},j.profile=function(a,b){var c,d,e,f,i,k=0,l=0,m=0,n=0,o=null,p=null,q=0,r=[],s={};for(e=0;e<a.length;++e)f=b?b(a[e]):a[e],s[f]=f in s?s[f]+1:(n+=1,1),null==f?++m:g.isValid(f)&&(i="string"==typeof f?f.length:f,(null===o||o>i)&&(o=i),(null===p||i>p)&&(p=i),c=i-k,k+=c/++l,q+=c*(i-k),r.push(i));return q/=l-1,d=Math.sqrt(q),r.sort(g.cmp),{type:h(a,b),unique:s,count:a.length,valid:l,missing:m,distinct:n,min:o,max:p,mean:k,stdev:d,median:f=j.quantile(r,.5),q1:j.quantile(r,.25),q3:j.quantile(r,.75),modeskew:0===d?0:(k-f)/d}},j.summary=function(a,b){b=b||g.keys(a[0]);var c=b.map(function(b){var c=j.profile(a,g.$(b));return c.field=b,c});return c.__summary__=!0,c}},{"./generate":17,"./import/type":26,"./util":31}],29:[function(a,b,c){function d(a){var b=e(a,"d");return b="var __t; return "+b+";",new Function("d",b).bind(l)}function e(a,b,c){b=b||"obj";var d=0,e="'",h=m;return a.replace(h,function(h,i,j){return e+=a.slice(d,j).replace(q,g),d=j+h.length,i&&(e+="'\n+((__t=("+f(i,b,c)+"))==null?'':__t)+\n'"),h}),e+"'"}function f(a,b,c){function e(a){return a=a||"",l?(l=!1,m="String("+m+")"+a):m+=a,m}function f(){return"(typeof "+m+'==="number"?new Date('+m+"):"+m+")"}function g(a){var b=u[0];if(!("'"===b[0]&&"'"===b[b.length-1]||'"'===b[0]&&'"'===b[b.length-1]))throw Error("Format pattern must be quoted: "+b);b=b.slice(1,-1),r=h(b,a),l=!1;var c="number"===a?m:f();m="this.formats["+r+"]("+c+")"}var i=a.match(n),k=i.shift().trim(),l=!0;c&&(c[k]=1);for(var m=d.property(b,k),p=0;p<i.length;++p){var q,r,s,t=i[p],u=null;switch((q=t.indexOf(":"))>0&&(t=t.slice(0,q),u=i[p].slice(q+1).match(o).map(function(a){return a.trim()})),t=t.trim()){case"length":e(".length");break;case"lower":e(".toLowerCase()");break;case"upper":e(".toUpperCase()");break;case"lower-locale":e(".toLocaleLowerCase()");break;case"upper-locale":e(".toLocaleUpperCase()");break;case"trim":e(".trim()");break;case"left":r=j.number(u[0]),e(".slice(0,"+r+")");break;case"right":r=j.number(u[0]),e(".slice(-"+r+")");break;case"mid":r=j.number(u[0]),s=r+j.number(u[1]),e(".slice(+"+r+","+s+")");break;case"slice":r=j.number(u[0]),e(".slice("+r+(u.length>1?","+j.number(u[1]):"")+")");break;case"truncate":r=j.number(u[0]),s=u[1],s="left"!==s&&"middle"!==s&&"center"!==s?"right":s,m="this.truncate("+e()+","+r+",'"+s+"')";break;case"pad":r=j.number(u[0]),s=u[1],s="left"!==s&&"middle"!==s&&"center"!==s?"right":s,m="this.pad("+e()+","+r+",'"+s+"')";break;case"number":g("number");break;case"time":g("time");break;case"time-utc":g("utc");break;case"month":m="this.month("+m+")";break;case"month-abbrev":m="this.month("+m+",true)";break;case"day":m="this.day("+m+")";break;case"day-abbrev":m="this.day("+m+",true)";break;case"quarter":m="this.quarter("+m+")";break;case"quarter-utc":m="this.utcQuarter("+m+")";break;default:throw Error("Unrecognized template filter: "+t)}}return m}function g(a){return"\\"+p[a]}function h(a,b){var c=b+":"+a;if(null==l.format_map[c]){var d=k[b](a),e=l.formats.length;return l.formats.push(d),l.format_map[c]=e,e}return l.format_map[c]}function i(a,b){return l.formats[h(a,b)]}var j=a("./util"),k=a("./format"),l={formats:[],format_map:{},truncate:j.truncate,pad:j.pad,day:k.day,month:k.month,quarter:k.quarter,utcQuarter:k.utcQuarter};d.source=e,d.context=l,d.format=i,b.exports=d,d.clearFormatCache=function(){l.formats=[],l.format_map={}},d.property=function(a,b){var c=j.field(b).map(j.str).join("][");return a+"["+c+"]"};var m=/\{\{(.+?)\}\}|$/g,n=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,o=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":16,"./util":31}],30:[function(a,b,c){function d(a){return j.setTime(+a),j}function e(a,b,c,d,e,f){var g={type:a,date:b,unit:c};return d?g.step=d:g.minstep=1,null!=e&&(g.min=e),null!=f&&(g.max=f),g}function f(a,b,c,d,f,g){return e(a,function(a){return b.offset(c,a)},function(a){return b.count(c,a)},d,f,g)}function g(a,b,c,d){var e,f,g,h=o[0];for(e=1,f=o.length;f>e;++e)if(h=o[e],b>h[0]){if(g=b/h[0],g>d)return a[o[e-1][1]];if(g>=c)return a[h[1]]}return a[o[f-1][1]]}function h(a){var b,c,d={};for(b=0,c=a.length;c>b;++b)d[a[b].type]=a[b];return d.find=function(b,c,d){return g(a,b,c,d)},d}var i=a("d3-time"),j=new Date,k=new Date(0,0,1).setFullYear(0),l=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),m=[f("second",i.second,k),f("minute",i.minute,k),f("hour",i.hour,k),f("day",i.day,k,[1,7]),f("month",i.month,k,[1,3,6]),f("year",i.year,k),e("seconds",function(a){return new Date(1970,0,1,0,0,a)},function(a){return d(a).getSeconds()},null,0,59),e("minutes",function(a){return new Date(1970,0,1,0,a)},function(a){return d(a).getMinutes()},null,0,59),e("hours",function(a){return new Date(1970,0,1,a)},function(a){return d(a).getHours()},null,0,23),e("weekdays",function(a){return new Date(1970,0,4+a)},function(a){return d(a).getDay()},[1],0,6),e("dates",function(a){return new Date(1970,0,a)},function(a){return d(a).getDate()},[1],1,31),e("months",function(a){return new Date(1970,a%12,1)},function(a){return d(a).getMonth()},[1],0,11)],n=[f("second",i.utcSecond,l),f("minute",i.utcMinute,l),f("hour",i.utcHour,l),f("day",i.utcDay,l,[1,7]),f("month",i.utcMonth,l,[1,3,6]),f("year",i.utcYear,l),e("seconds",function(a){return new Date(Date.UTC(1970,0,1,0,0,a))},function(a){return d(a).getUTCSeconds()},null,0,59),e("minutes",function(a){return new Date(Date.UTC(1970,0,1,0,a))},function(a){return d(a).getUTCMinutes()},null,0,59),e("hours",function(a){return new Date(Date.UTC(1970,0,1,a))},function(a){return d(a).getUTCHours()},null,0,23),e("weekdays",function(a){return new Date(Date.UTC(1970,0,4+a))},function(a){return d(a).getUTCDay()},[1],0,6),e("dates",function(a){return new Date(Date.UTC(1970,0,a))},function(a){return d(a).getUTCDate()},[1],1,31),e("months",function(a){return new Date(Date.UTC(1970,a%12,1))},function(a){return d(a).getUTCMonth()},[1],0,11)],o=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];b.exports=h(m),b.exports.utc=h(n)},{"d3-time":5}],31:[function(a,b,c){(function(a){function c(a,b){var c,d="";for(c=0;a>c;++c)d+=b;return d}function d(a,b,c){var d=0,e=a.split(i);return a=c?(e=e.reverse()).filter(function(a){return d+=a.length,b>=d}).reverse():e.filter(function(a){return d+=a.length,b>=d}),a.length?a.join("").trim():e[0].slice(0,b)}var e=b.exports,f="__name__";e.namedfunc=function(a,b){return b[f]=a,b},e.name=function(a){return null==a?null:a[f]},e.identity=function(a){return a},e["true"]=e.namedfunc("true",function(){return!0}),e["false"]=e.namedfunc("false",function(){return!1}),e.duplicate=function(a){return JSON.parse(JSON.stringify(a))},e.equal=function(a,b){return JSON.stringify(a)===JSON.stringify(b)},e.extend=function(a){for(var b,c,d=1,e=arguments.length;e>d;++d){b=arguments[d];for(c in b)a[c]=b[c]}return a},e.length=function(a){return null!=a&&null!=a.length?a.length:null},e.keys=function(a){var b,c=[];for(b in a)c.push(b);return c},e.vals=function(a){var b,c=[];for(b in a)c.push(a[b]);return c},e.toMap=function(a,b){return(b=e.$(b))?a.reduce(function(a,c){return a[b(c)]=1,a},{}):a.reduce(function(a,b){return a[b]=1,a},{})},e.keystr=function(a){var b=a.length;if(!b)return"";for(var c=String(a[0]),d=1;b>d;++d)c+="|"+String(a[d]);return c};var g=Object.prototype.toString;e.isObject=function(a){return a===Object(a)},e.isFunction=function(a){return"[object Function]"===g.call(a)},e.isString=function(a){return"string"==typeof value||"[object String]"===g.call(a)},e.isArray=Array.isArray||function(a){return"[object Array]"===g.call(a)},e.isNumber=function(a){return"number"==typeof a||"[object Number]"===g.call(a)},e.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==g.call(a)},e.isDate=function(a){return"[object Date]"===g.call(a)},e.isValid=function(a){return null!=a&&a===a},e.isBuffer="function"==typeof a&&a.isBuffer||e["false"],e.number=function(a){return null==a||""===a?null:+a},e["boolean"]=function(a){return null==a||""===a?null:"false"===a?!1:!!a},e.date=function(a,b){var c=b?b:Date;return null==a||""===a?null:c.parse(a)},e.array=function(a){return null!=a?e.isArray(a)?a:[a]:[]},e.str=function(a){return e.isArray(a)?"["+a.map(e.str)+"]":e.isObject(a)||e.isString(a)?JSON.stringify(a).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):a};var h=/\[(.*?)\]|[^.\[]+/g;e.field=function(a){return String(a).match(h).map(function(a){return"["!==a[0]?a:"'"!==a[1]&&'"'!==a[1]?a.slice(1,-1):a.slice(2,-2).replace(/\\(["'])/g,"$1")})},e.accessor=function(a){return null==a||e.isFunction(a)?a:e.namedfunc(a,Function("x","return x["+e.field(a).map(e.str).join("][")+"];"))},e.$=e.accessor,e.mutator=function(a){var b;return e.isString(a)&&(b=e.field(a)).length>1?function(a,c){for(var d=0;d<b.length-1;++d)a=a[b[d]];a[b[d]]=c}:function(b,c){b[a]=c}},e.$func=function(a,b){return function(c){c=e.$(c)||e.identity;var d=a+(e.name(c)?"_"+e.name(c):"");return e.namedfunc(d,function(a){return b(c(a))})}},e.$valid=e.$func("valid",e.isValid),e.$length=e.$func("length",e.length),e.$in=function(a,b){a=e.$(a);var c=e.isArray(b)?e.toMap(b):b;return function(b){return!!c[a(b)]}},e.comparator=function(a){var b=[];return void 0===a&&(a=[]),a=e.array(a).map(function(a){var c=1;return"-"===a[0]?(c=-1,a=a.slice(1)):"+"===a[0]&&(c=1,a=a.slice(1)),b.push(c),e.accessor(a)}),function(c,d){var f,g,h,i;for(f=0,g=a.length;g>f;++f)if(h=a[f],i=e.cmp(h(c),h(d)))return i*b[f];return 0}},e.cmp=function(a,b){return(b>a||null==a)&&null!=b?-1:(a>b||null==b)&&null!=a?1:(b=b instanceof Date?+b:b,(a=a instanceof Date?+a:a)!==a&&b===b?-1:b!==b&&a===a?1:0)},e.numcmp=function(a,b){return a-b},e.stablesort=function(a,b,c){var d=a.reduce(function(a,b,d){return a[c(b)]=d,a},{});return a.sort(function(a,e){var f=b(a),g=b(e);return g>f?-1:f>g?1:d[c(a)]-d[c(e)]}),a},e.permute=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b},e.pad=function(a,b,d,e){e=e||" ";var f=b-a.length;if(0>=f)return a;switch(d){case"left":return c(f,e)+a;case"middle":case"center":return c(Math.floor(f/2),e)+a+c(Math.ceil(f/2),e);default:return a+c(f,e)}},e.truncate=function(a,b,c,e,f){var g=a.length;if(b>=g)return a;f=void 0!==f?String(f):"…";var h=Math.max(0,b-f.length);switch(c){case"left":return f+(e?d(a,h,1):a.slice(g-h));case"middle":case"center":var i=Math.ceil(h/2),j=Math.floor(h/2);return(e?d(a,i):a.slice(0,i))+f+(e?d(a,j,1):a.slice(g-j));default:return(e?d(a,h):a.slice(0,h))+f}};var i=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,a("buffer").Buffer)},{buffer:1}]},{},[27])(27)}),function(a){"use strict";function b(a){var b={id:a.id,label:a.label};return a.viz&&(b.viz=a.viz),a.attributes&&(b.attributes=a.attributes),b}function c(a){var b={id:a.id,type:a.type||"undirected",label:a.label||"",source:a.source,target:a.target,weight:+a.weight||1};return a.viz&&(b.viz=a.viz),a.attributes&&(b.attributes=a.attributes),b}function d(a){function d(){var a={};return l.els.meta?(a.lastmodifieddate=l.els.meta.getAttribute("lastmodifieddate"),h.nodeListEach(l.els.meta.childNodes,function(b){a[b.tagName.toLowerCase()]=b.textContent}),a):a}function e(a){var b=[];return l.els.model[a]&&h.nodeListEach(l.els.model[a],function(a){var c={id:a.getAttribute("id")||a.getAttribute("for"),type:a.getAttribute("type")||"string",title:a.getAttribute("title")||""},d=h.nodeListToArray(a.childNodes);d.length>0&&(c.defaultValue=d[0].textContent),b.push(c)}),b.length>0?b:!1}function f(a,b){var c={},d=b.getElementsByTagName("attvalue"),e=h.nodeListToHash(d,function(a){var b=h.namedNodeMapToObject(a.attributes),c=b.id||b["for"];return{key:c,value:b.value}});return a.map(function(a){c[a.id]=!(a.id in e)&&"defaultValue"in a?h.enforceType(a.type,a.defaultValue):h.enforceType(a.type,e[a.id])}),c}function g(a){var c=[];return h.nodeListEach(l.els.nodes,function(d){var e={id:d.getAttribute("id"),label:d.getAttribute("label")||""};a&&(e.attributes=f(a,d)),l.hasViz&&(e.viz=i(d)),c.push(b(e))}),c}function i(a){var b={},c=h.getFirstElementByTagNS(a,"viz","color");if(c){var d=["r","g","b","a"].map(function(a){return c.getAttribute(a)});b.color=h.getRGB(d)}var e=h.getFirstElementByTagNS(a,"viz","position");e&&(b.position={},["x","y","z"].map(function(a){b.position[a]=+e.getAttribute(a)}));var f=h.getFirstElementByTagNS(a,"viz","size");f&&(b.size=+f.getAttribute("value"));var g=h.getFirstElementByTagNS(a,"viz","shape");return g&&(b.shape=g.getAttribute("value")),b}function j(a,b){var d=[];return h.nodeListEach(l.els.edges,function(e){var g=h.namedNodeMapToObject(e.attributes);"type"in g||(g.type=b),a&&(g.attributes=f(a,e)),l.hasViz&&(g.viz=k(e)),d.push(c(g))}),d}function k(a){var b={},c=h.getFirstElementByTagNS(a,"viz","color");if(c){var d=["r","g","b","a"].map(function(a){return c.getAttribute(a)});b.color=h.getRGB(d)}var e=h.getFirstElementByTagNS(a,"viz","shape");e&&(b.shape=e.getAttribute("value"));var f=h.getFirstElementByTagNS(a,"viz","thickness");return f&&(b.thickness=+f.getAttribute("value")),b}var l={};l.els={root:a.getElementsByTagName("gexf")[0],graph:a.getElementsByTagName("graph")[0],meta:a.getElementsByTagName("meta")[0],nodes:a.getElementsByTagName("node"),edges:a.getElementsByTagName("edge"),model:h.getModelTags(a)},l.hasViz=!!h.getAttributeNS(l.els.root,"xmlns","viz"),l.version=l.els.root.getAttribute("version")||"1.0",l.mode=l.els.graph.getAttribute("mode")||"static";var m=l.els.graph.getAttribute("defaultedgetype");l.defaultEdgetype=m||"undirected";var n=e("node"),o=e("edge"),p={version:l.version,mode:l.mode,defaultEdgeType:l.defaultEdgetype,meta:d(),model:{},nodes:g(n),edges:j(o,l.defaultEdgetype)};return n&&(p.model.node=n),o&&(p.model.edge=o),p}function e(a,b){var c=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var a,b;if(window.ActiveXObject){a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(b in a)try{return new ActiveXObject(a[b])}catch(c){}}return null}();if(!c)throw"XMLHttpRequest not supported, cannot load the file.";var d,e="function"==typeof b;return c.overrideMimeType?(c.overrideMimeType("text/xml"),d=function(a){return a.responseXML}):d=function(a){var b=new DOMParser;return b.parseFromString(a.responseText,"application/xml")},c.open("GET",a,e),e&&(c.onreadystatechange=function(){4===c.readyState&&b(d(c))}),c.send(),e?c:d(c)}function f(a){return d(a)}function g(a,b){return"function"==typeof b?e(a,function(a){b(d(a))}):d(e(a))}var h={getModelTags:function(a){var b,c=a.getElementsByTagName("attributes"),d={},e=c.length;for(b=0;e>b;b++)d[c[b].getAttribute("class")]=c[b].childNodes;return d},nodeListToArray:function(a){for(var b=[],c=0,d=a.length;d>c;++c)"#text"!==a[c].nodeName&&b.push(a[c]);return b},nodeListEach:function(a,b){for(var c=0,d=a.length;d>c;++c)"#text"!==a[c].nodeName&&b(a[c])},nodeListToHash:function(a,b){for(var c={},d=0;d<a.length;d++)if("#text"!==a[d].nodeName){var e=b(a[d]);c[e.key]=e.value}return c},namedNodeMapToObject:function(a){for(var b={},c=0;c<a.length;c++)b[a[c].name]=a[c].value;return b},getFirstElementByTagNS:function(a,b,c){var d=a.getElementsByTagName(b+":"+c)[0];return d||(d=a.getElementsByTagNameNS(b,c)[0]),d||(d=a.getElementsByTagName(c)[0]),d},getAttributeNS:function(b,c,d){var e=b.getAttribute(c+":"+d);return e===a&&(e=b.getAttributeNS(c,d)),e===a&&(e=b.getAttribute(d)),e},enforceType:function(a,b){switch(a){case"boolean":b="true"===b;break;case"integer":case"long":case"float":case"double":b=+b;break;case"liststring":b=b?b.split("|"):[]}return b},getRGB:function(a){return a[3]?"rgba("+a.join(",")+")":"rgb("+a.slice(0,-1).join(",")+")"}},i={parse:f,fetch:g,version:"0.2.5"};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.gexf=i):"function"==typeof define&&define.amd?define("gexf",[],function(){return i}):"undefined"!=typeof this.gexf?(this.gexf.parse=f,this.gexf.fetch=g):this.gexf=i}.call(this),function(a){"use strict";function b(a,b){switch(a){case"boolean":case"integer":case"long":case"float":case"double":return""+b;case"liststring":if(b instanceof Array)return b.join("|")}if("object"==typeof b)throw Error("gexf.writer.cast: trying to cast an object to a string.");return b}function c(a){var b=[0,0,0];return a.match(/^#/)?(a=(a||"").replace(/^#/,""),b=3===a.length?[parseInt(a.charAt(0)+a.charAt(0),16),parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16)]:[parseInt(a.charAt(0)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(3),16),parseInt(a.charAt(4)+a.charAt(5),16)]):a.match(/^ *rgba? *\(/)&&(a=a.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),b=[+a[1],+a[2],+a[3]],a[4]&&b.push(+a[4].replace(", ",""))),b}function d(b){b=b||{};var c=b.implementation||a.implementation;this.serializer=b.serializer?new b.serializer:new XMLSerializer,this.document=c.createDocument("http://www.gexf.net/1.2draft","gexf",null),this.root=this.document.documentElement,this.xmlns=b.namespace||"http://www.gexf.net/1.2draft",this.vizXmlns=b.vizNamespace||"http:///www.gexf.net/1.2draft/viz",this.root.setAttribute("xmlns",this.xmlns),this.root.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),this.root.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),this.hasViz=!1,this.root.setAttribute("version",b.version||"1.2"),this.encoding=b.encoding||"UTF-8",b.meta&&this.setMeta(b.meta),this.graph=this.createElement("graph",{defaultedgetype:b.defaultEdgeType||"undirected",mode:b.mode}),this.root.appendChild(this.graph),this.model={node:{},edge:{}},this.nodeAttributes=null,this.edgeAttributes=null,b.model&&b.model.node&&this.setNodeModel(b.model.node),b.model&&b.model.edge&&this.setEdgeModel(b.model.edge),this.nodes=this.createElement("nodes"),this.edges=this.createElement("edges"),this.graph.appendChild(this.nodes),this.graph.appendChild(this.edges);var d,e;if(b.nodes)for(d=0,e=b.nodes.length;e>d;d++)this.addNode(b.nodes[d]);if(b.edges)for(d=0,e=b.edges.length;e>d;d++)this.addEdge(b.edges[d])}function e(a){return new d(a)}var f=["integer","long","double","float","boolean","liststring","string","anyURI"];d.prototype.createElement=function(a,b,c){if(!a)throw Error("gexf.writer.createElement: wrong arguments.");"object"==typeof b&&(c=b,b=null);var d=this.document.createElement(a);if(b){var e=this.document.createTextNode(b);d.appendChild(e)}if(c)for(var f in c)"undefined"!=typeof c[f]&&null!==c[f]&&d.setAttribute(f,c[f]);return d},d.prototype.setMeta=function(a){a=a||{};var b,c=this.document.createElement("meta");for(b in a)"lastmodifieddate"===b?c.setAttribute("lastmodifieddate",a[b]):c.appendChild(this.createElement(b,a[b]));return this.root.appendChild(c),this},d.prototype.setModel=function(a,b){if(b=b||[],"node"!==a&&"edge"!==a)throw Error('gexf.writer.setModel: wrong model cls "'+a+'"');if(!(b instanceof Array))throw Error("gexf.writer.setModel: model is not a valid array.");this.model[a]={};var c=this.createElement("attributes",{"class":a}),d=a+"Attributes";this[d]&&this.graph.removeChild(this[d]),this[d]=c,this.graph.insertBefore(c,this.nodes||this.edges);var e,f;for(e=0,f=b.length;f>e;e++)this.addAttribute(a,b[e]);return this},d.prototype.setNodeModel=function(a){return this.setModel("node",a)},d.prototype.setEdgeModel=function(a){return this.setModel("edge",a)},d.prototype.addAttribute=function(a,b){if("node"!==a&&"edge"!==a)throw Error('gexf.writer.addAttribute: wrong model cls "'+a+'"');if(!b)throw Error("gexf.writer.addAttribute: wrong arguments.");if(!this[a+"Attributes"])return this.setModel(a,[b]);var c=b.type||"string";if(!~f.indexOf(c))throw Error('gexf.writer.addAttribute: unknown attribute type "'+c+'"');this.model[a][b.id]=b;var d=this.createElement("attribute",{id:b.id,title:b.title,type:c});if("undefined"!=typeof b.defaultValue){var e=this.createElement("default",b.defaultValue);d.appendChild(e)}return this[a+"Attributes"].appendChild(d),this},d.prototype.addNodeAttribute=function(a){return this.addAttribute("node",a)},d.prototype.addEdgeAttribute=function(a){return this.addAttribute("edge",a)},d.prototype.addNode=function(a){var d,e,f;if("undefined"==typeof a.id||null===a.id)throw Error("gexf.writer.addNode: inexistent id.");var g=this.createElement("node",{id:a.id,label:a.label});if(a.attributes&&Object.keys(a.attributes).length>0){var h=this.createElement("attvalues");for(d in a.attributes||{}){if(e=a.attributes[d],f=this.model.node[d],!f)throw Error('gexf.writer.addNode: property "'+d+'" not registered in node model.');var i=this.createElement("attvalue",{"for":f.id,value:b(f.type,e)});h.appendChild(i)}g.appendChild(h)}if(a.viz){if(this.hasViz||(this.hasViz=!0,this.root.setAttribute("xmlns:viz",this.vizXmlns)),a.viz.color){var j=c(a.viz.color),k=this.createElement("viz:color",{r:j[0],g:j[1],b:j[2],a:j[3]});g.appendChild(k)}if(a.viz.position){var l=this.createElement("viz:position",{x:a.viz.position.x,y:a.viz.position.y,z:a.viz.position.z});g.appendChild(l)}if(a.viz.size){var m=this.createElement("viz:size",{value:a.viz.size});g.appendChild(m)}if(a.viz.shape){var n=this.createElement("viz:shape",{value:a.viz.shape});g.appendChild(n)}}return this.nodes.appendChild(g),this},d.prototype.addEdge=function(a){var d,e,f,g=this.createElement("edge",{id:a.id,label:a.label,weight:a.weight,type:a.type,source:a.source,target:a.target});if(a.attributes&&Object.keys(a.attributes).length>0){var h=this.createElement("attvalues");for(d in a.attributes||{}){if(e=a.attributes[d],f=this.model.edge[d],!f)throw Error('gexf.writer.addEdge: property "'+d+'" not registered in edge model.');var i=this.createElement("attvalue",{"for":f.id,value:b(f.type,e)});h.appendChild(i)}g.appendChild(h)}if(a.viz){if(this.hasViz||(this.hasViz=!0,this.root.setAttribute("xmlns:viz",this.vizXmlns)),a.viz.color){var j=c(a.viz.color),k=this.createElement("viz:color",{r:j[0],g:j[1],b:j[2],a:j[3]});g.appendChild(k)}if(a.viz.shape){var l=this.createElement("viz:shape",{value:a.viz.shape});g.appendChild(l)}if(a.viz.thickness){var m=this.createElement("viz:thickness",{value:a.viz.thickness});g.appendChild(m)}}return this.edges.appendChild(g),this},d.prototype.serialize=function(){return'<?xml version="1.0" encoding="'+this.encoding+'"?>'+this.serializer.serializeToString(this.document)};var g={create:e,version:"0.2.5"};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports.gexf=g):"function"==typeof define&&define.amd?define("gexf",[],function(){return g}):"undefined"!=typeof this.gexf?this.gexf.create=e:this.gexf=g}.call(this,"document"in this?this.document:{}),function(){var a,b,c=[].slice;a=function(){return(Math.random().toString(36)+"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)},(b=function(a){
return"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define([],a):this.textures=a()})(function(){return{circles:function(){var b,c,d,e,f,g,h,i,j;return h=20,b="",g=2,d=!1,e="#343434",i="#343434",j=0,f=a(),c=function(a){var c,k,l,m,n,o;if(k=a.append("defs").append("pattern").attr("id",f).attr("patternUnits","userSpaceOnUse").attr("width",h).attr("height",h),b&&k.append("rect").attr("width",h).attr("height",h).attr("fill",b),k.append("circle").attr("cx",h/2).attr("cy",h/2).attr("r",g).attr("fill",e).attr("stroke",i).attr("stroke-width",j),d){for(n=[[0,0],[0,h],[h,0],[h,h]],o=[],l=0,m=n.length;m>l;l++)c=n[l],o.push(k.append("circle").attr("cx",c[0]).attr("cy",c[1]).attr("r",g).attr("fill",e).attr("stroke",i).attr("stroke-width",j));return o}},c.heavier=function(a){return g=arguments.length&&a?2*g*a:2*g,c},c.lighter=function(a){return arguments.length?g=a?g/(2*a):g/2:g/=2,c},c.thinner=function(a){return h=arguments.length&&a?2*h*a:2*h,c},c.thicker=function(a){return arguments.length?h=a?h/(2*a):h/2:h/=2,c},c.background=function(a){return b=a,c},c.size=function(a){return h=a,c},c.complement=function(){return d=!0,c},c.radius=function(a){return g=a,c},c.fill=function(a){return e=a,c},c.stroke=function(a){return i=a,c},c.strokeWidth=function(a){return j=a,c},c.id=function(a){return arguments.length?(f=a,c):f},c.url=function(){return"url(#"+f+")"},c},lines:function(){var b,d,e,f,g,h,i,j,k;return i=20,k=2,j="#343434",d=a(),b="",f=["diagonal"],h="auto",g=function(a){switch(a){case"0/8":return function(a){return"M "+a/2+", 0 l 0, "+a}(i);case"vertical":return function(a){return"M "+a/2+", 0 l 0, "+a}(i);case"1/8":return function(a){return"M "+a/4+",0 l "+a/2+","+a+" M "+-a/4+",0 l "+a/2+","+a+"\nM "+3*a/4+",0 l "+a/2+","+a}(i);case"2/8":return function(a){return"M 0,"+a+" l "+a+","+-a+" M "+-a/4+","+a/4+" l "+a/2+","+-a/2+"\nM "+.75*a+","+5/4*a+" l "+a/2+","+-a/2}(i);case"diagonal":return function(a){return"M 0,"+a+" l "+a+","+-a+" M "+-a/4+","+a/4+" l "+a/2+","+-a/2+"\nM "+.75*a+","+5/4*a+" l "+a/2+","+-a/2}(i);case"3/8":return function(a){return"M 0,"+.75*a+" l "+a+","+-a/2+" M 0,"+a/4+" l "+a+","+-a/2+"\nM 0,"+5*a/4+" l "+a+","+-a/2}(i);case"4/8":return function(a){return"M 0,"+a/2+" l "+a+",0"}(i);case"horizontal":return function(a){return"M 0,"+a/2+" l "+a+",0"}(i);case"5/8":return function(a){return"M 0,"+-a/4+" l "+a+","+a/2+"M 0,"+a/4+" l "+a+","+a/2+"\nM 0,"+3*a/4+" l "+a+","+a/2}(i);case"6/8":return function(a){return"M 0,0 l "+a+","+a+" M "+-a/4+","+.75*a+" l "+a/2+","+a/2+"\nM "+3*a/4+","+-a/4+" l "+a/2+","+a/2}(i);case"7/8":return function(a){return"M "+-a/4+",0 l "+a/2+","+a+" M "+a/4+",0 l "+a/2+","+a+"\nM "+3*a/4+",0 l "+a/2+","+a}(i);default:return function(a){return"M "+a/2+", 0 l 0, "+a}(i)}},e=function(a){var c,e,l,m,n;for(c=a.append("defs").append("pattern").attr("id",d).attr("patternUnits","userSpaceOnUse").attr("width",i).attr("height",i),b&&c.append("rect").attr("width",i).attr("height",i).attr("fill",b),n=[],e=0,l=f.length;l>e;e++)m=f[e],n.push(c.append("path").attr("d",g(m)).attr("stroke-width",k).attr("shape-rendering",h).attr("stroke",j).attr("stroke-linecap","square"));return n},e.background=function(a){return b=a,e},e.shapeRendering=function(a){return h=a,e},e.heavier=function(a){return k=arguments.length&&a?2*k*a:2*k,e},e.lighter=function(a){return arguments.length?k=a?k/(2*a):k/2:k/=2,e},e.thinner=function(a){return i=arguments.length&&a?2*i*a:2*i,e},e.thicker=function(a){return arguments.length?i=a?i/(2*a):i/2:i/=2,e},e.orientation=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],f=a,e},e.size=function(a){return i=a,e},e.stroke=function(a){return j=a,e},e.strokeWidth=function(a){return k=a,e},e.id=function(a){return arguments.length?(d=a,e):d},e.url=function(){return"url(#"+d+")"},e},paths:function(){var b,c,d,e,f,g,h,i,j,k,l,m;return i=20,e=1,m=1,k=2,j="#343434",b="",c="",h="auto",d="transparent",f=void 0,l=function(a){switch(a){case"squares":return function(a){return"M "+a/4+" "+a/4+" l "+a/2+" 0 l 0 "+a/2+" l "+-a/2+" 0 Z"}(i);case"nylon":return function(a){return"M 0 "+a/4+" l "+a/4+" 0 l 0 "+-a/4+" M "+3*a/4+" "+a+" l 0 "+-a/4+"\nl "+a/4+" 0 M "+a/4+" "+a/2+" l 0 "+a/4+" l "+a/4+" 0 M "+a/2+" "+a/4+"\nl "+a/4+" 0 l 0 "+a/4}(i);case"waves":return function(a){return"M 0 "+a/2+" c "+a/8+" "+-a/4+" , "+3*a/8+" "+-a/4+" , "+a/2+" 0\nc "+a/8+" "+a/4+" , "+3*a/8+" "+a/4+" , "+a/2+" 0 M "+-a/2+" "+a/2+"\nc "+a/8+" "+a/4+" , "+3*a/8+" "+a/4+" , "+a/2+" 0 M "+a+" "+a/2+"\nc "+a/8+" "+-a/4+" , "+3*a/8+" "+-a/4+" , "+a/2+" 0"}(i);case"woven":return function(a){return"M "+a/4+","+a/4+"l"+a/2+","+a/2+"M"+3*a/4+","+a/4+"l"+a/2+","+-a/2+"\nM"+a/4+","+3*a/4+"l"+-a/2+","+a/2+"M"+3*a/4+","+5*a/4+"l"+a/2+","+-a/2+"\nM"+-a/4+","+a/4+"l"+a/2+","+-a/2}(i);case"crosses":return function(a){return"M "+a/4+","+a/4+"l"+a/2+","+a/2+"M"+a/4+","+3*a/4+"l"+a/2+","+-a/2}(i);case"caps":return function(a){return"M "+a/4+","+3*a/4+"l"+a/4+","+-a/2+"l"+a/4+","+a/2}(i);case"hexagons":return function(a){return m=3,e=Math.sqrt(3),"M "+a+",0 l "+a+",0 l "+a/2+","+a*Math.sqrt(3)/2+"\nl "+-a/2+","+a*Math.sqrt(3)/2+" l "+-a+",0\nl "+-a/2+","+-a*Math.sqrt(3)/2+" Z M 0,"+a*Math.sqrt(3)/2+"\nl "+a/2+",0 M "+3*a+","+a*Math.sqrt(3)/2+" l "+-a/2+",0"}(i);default:return a(i)}},g=function(g){var n,o;return o=l(c),f=a(),n=g.append("defs").append("pattern").attr("id",f).attr("patternUnits","userSpaceOnUse").attr("width",i*m).attr("height",i*e),b&&n.append("rect").attr("width",i*m).attr("height",i*e).attr("fill",b),n.append("path").attr("d",o).attr("fill",d).attr("stroke-width",k).attr("shape-rendering",h).attr("stroke",j).attr("stroke-linecap","square")},g.background=function(a){return b=a,g},g.shapeRendering=function(a){return h=a,g},g.heavier=function(a){return k=arguments.length&&a?2*k*a:2*k,g},g.lighter=function(a){return arguments.length?k=a?k/(2*a):k/2:k/=2,g},g.thinner=function(a){return i=arguments.length&&a?2*i*a:2*i,g},g.thicker=function(a){return arguments.length?i=a?i/(2*a):i/2:i/=2,g},g.d=function(a){return c=a,g},g.size=function(a){return i=a,g},g.stroke=function(a){return j=a,g},g.strokeWidth=function(a){return k=a,g},g.id=function(a){return arguments.length?(f=a,g):f},g.url=function(){return"url(#"+f+")"},g}}})}.call(this);